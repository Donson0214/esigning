var BD=Object.defineProperty;var pE=s=>{throw TypeError(s)};var $D=(s,t,e)=>t in s?BD(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var ht=(s,t,e)=>$D(s,typeof t!="symbol"?t+"":t,e),A0=(s,t,e)=>t.has(s)||pE("Cannot "+e);var h=(s,t,e)=>(A0(s,t,"read from private field"),e?e.call(s):t.get(s)),R=(s,t,e)=>t.has(s)?pE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),T=(s,t,e,n)=>(A0(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),D=(s,t,e)=>(A0(s,t,"access private method"),e);var In=(s,t,e,n)=>({set _(i){T(s,t,i,e)},get _(){return h(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function OA(s){const t=Object.create(null);for(const e of s.split(","))t[e]=1;return e=>e in t}const qe={},Hh=[],po=()=>{},yk=()=>!1,x_=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),LA=s=>s.startsWith("onUpdate:"),Tn=Object.assign,NA=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},UD=Object.prototype.hasOwnProperty,Fe=(s,t)=>UD.call(s,t),Qt=Array.isArray,jh=s=>zm(s)==="[object Map]",_f=s=>zm(s)==="[object Set]",gE=s=>zm(s)==="[object Date]",ae=s=>typeof s=="function",xs=s=>typeof s=="string",Tr=s=>typeof s=="symbol",Ye=s=>s!==null&&typeof s=="object",_k=s=>(Ye(s)||ae(s))&&ae(s.then)&&ae(s.catch),wk=Object.prototype.toString,zm=s=>wk.call(s),VD=s=>zm(s).slice(8,-1),Ak=s=>zm(s)==="[object Object]",FA=s=>xs(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,Cp=OA(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),T_=s=>{const t=Object.create(null);return(e=>t[e]||(t[e]=s(e)))},HD=/-\w/g,Gl=T_(s=>s.replace(HD,t=>t.slice(1).toUpperCase())),jD=/\B([A-Z])/g,Ql=T_(s=>s.replace(jD,"-$1").toLowerCase()),Sk=T_(s=>s.charAt(0).toUpperCase()+s.slice(1)),S0=T_(s=>s?`on${Sk(s)}`:""),$l=(s,t)=>!Object.is(s,t),_b=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},Ek=(s,t,e,n=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:n,value:e})},C_=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let mE;const k_=()=>mE||(mE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gr(s){if(Qt(s)){const t={};for(let e=0;e<s.length;e++){const n=s[e],i=xs(n)?qD(n):gr(n);if(i)for(const r in i)t[r]=i[r]}return t}else if(xs(s)||Ye(s))return s}const zD=/;(?![^(]*\))/g,WD=/:([^]+)/,GD=/\/\*[^]*?\*\//g;function qD(s){const t={};return s.replace(GD,"").split(zD).forEach(e=>{if(e){const n=e.split(WD);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ie(s){let t="";if(xs(s))t=s;else if(Qt(s))for(let e=0;e<s.length;e++){const n=ie(s[e]);n&&(t+=n+" ")}else if(Ye(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const XD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",YD=OA(XD);function xk(s){return!!s||s===""}function KD(s,t){if(s.length!==t.length)return!1;let e=!0;for(let n=0;e&&n<s.length;n++)e=Gu(s[n],t[n]);return e}function Gu(s,t){if(s===t)return!0;let e=gE(s),n=gE(t);if(e||n)return e&&n?s.getTime()===t.getTime():!1;if(e=Tr(s),n=Tr(t),e||n)return s===t;if(e=Qt(s),n=Qt(t),e||n)return e&&n?KD(s,t):!1;if(e=Ye(s),n=Ye(t),e||n){if(!e||!n)return!1;const i=Object.keys(s).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in s){const a=s.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Gu(s[o],t[o]))return!1}}return String(s)===String(t)}function BA(s,t){return s.findIndex(e=>Gu(e,t))}const Tk=s=>!!(s&&s.__v_isRef===!0),ot=s=>xs(s)?s:s==null?"":Qt(s)||Ye(s)&&(s.toString===wk||!ae(s.toString))?Tk(s)?ot(s.value):JSON.stringify(s,Ck,2):String(s),Ck=(s,t)=>Tk(t)?Ck(s,t.value):jh(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,i],r)=>(e[E0(n,r)+" =>"]=i,e),{})}:_f(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>E0(e))}:Tr(t)?E0(t):Ye(t)&&!Qt(t)&&!Ak(t)?String(t):t,E0=(s,t="")=>{var e;return Tr(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ti;class JD{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ti,!t&&ti&&(this.index=(ti.scopes||(ti.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=ti;try{return ti=this,t()}finally{ti=e}}}on(){++this._on===1&&(this.prevScope=ti,ti=this)}off(){this._on>0&&--this._on===0&&(ti=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(this.effects.length=0,e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ZD(){return ti}let Je;const x0=new WeakSet;class kk{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ti&&ti.active&&ti.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,x0.has(this)&&(x0.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Pk(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vE(this),Rk(this);const t=Je,e=_r;Je=this,_r=!0;try{return this.fn()}finally{Mk(this),Je=t,_r=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)VA(t);this.deps=this.depsTail=void 0,vE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?x0.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){bw(this)&&this.run()}get dirty(){return bw(this)}}let Ik=0,kp,Ip;function Pk(s,t=!1){if(s.flags|=8,t){s.next=Ip,Ip=s;return}s.next=kp,kp=s}function $A(){Ik++}function UA(){if(--Ik>0)return;if(Ip){let t=Ip;for(Ip=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let s;for(;kp;){let t=kp;for(kp=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){s||(s=n)}t=e}}if(s)throw s}function Rk(s){for(let t=s.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Mk(s){let t,e=s.depsTail,n=e;for(;n;){const i=n.prevDep;n.version===-1?(n===e&&(e=i),VA(n),QD(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}s.deps=t,s.depsTail=e}function bw(s){for(let t=s.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Dk(t.dep.computed)||t.dep.version!==t.version))return!0;return!!s._dirty}function Dk(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===Yp)||(s.globalVersion=Yp,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!bw(s))))return;s.flags|=2;const t=s.dep,e=Je,n=_r;Je=s,_r=!0;try{Rk(s);const i=s.fn(s._value);(t.version===0||$l(i,s._value))&&(s.flags|=128,s._value=i,t.version++)}catch(i){throw t.version++,i}finally{Je=e,_r=n,Mk(s),s.flags&=-3}}function VA(s,t=!1){const{dep:e,prevSub:n,nextSub:i}=s;if(n&&(n.nextSub=i,s.prevSub=void 0),i&&(i.prevSub=n,s.nextSub=void 0),e.subs===s&&(e.subs=n,!n&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)VA(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function QD(s){const{prevDep:t,nextDep:e}=s;t&&(t.nextDep=e,s.prevDep=void 0),e&&(e.prevDep=t,s.nextDep=void 0)}let _r=!0;const Ok=[];function Ca(){Ok.push(_r),_r=!1}function ka(){const s=Ok.pop();_r=s===void 0?!0:s}function vE(s){const{cleanup:t}=s;if(s.cleanup=void 0,t){const e=Je;Je=void 0;try{t()}finally{Je=e}}}let Yp=0;class tO{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class HA{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Je||!_r||Je===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Je)e=this.activeLink=new tO(Je,this),Je.deps?(e.prevDep=Je.depsTail,Je.depsTail.nextDep=e,Je.depsTail=e):Je.deps=Je.depsTail=e,Lk(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const n=e.nextDep;n.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=n),e.prevDep=Je.depsTail,e.nextDep=void 0,Je.depsTail.nextDep=e,Je.depsTail=e,Je.deps===e&&(Je.deps=n)}return e}trigger(t){this.version++,Yp++,this.notify(t)}notify(t){$A();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{UA()}}}function Lk(s){if(s.dep.sc++,s.sub.flags&4){const t=s.dep.computed;if(t&&!s.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Lk(n)}const e=s.dep.subs;e!==s&&(s.prevSub=e,e&&(e.nextSub=s)),s.dep.subs=s}}const yw=new WeakMap,$u=Symbol(""),_w=Symbol(""),Kp=Symbol("");function _n(s,t,e){if(_r&&Je){let n=yw.get(s);n||yw.set(s,n=new Map);let i=n.get(e);i||(n.set(e,i=new HA),i.map=n,i.key=e),i.track()}}function ua(s,t,e,n,i,r){const o=yw.get(s);if(!o){Yp++;return}const a=l=>{l&&l.trigger()};if($A(),t==="clear")o.forEach(a);else{const l=Qt(s),c=l&&FA(e);if(l&&e==="length"){const u=Number(n);o.forEach((d,f)=>{(f==="length"||f===Kp||!Tr(f)&&f>=u)&&a(d)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),c&&a(o.get(Kp)),t){case"add":l?c&&a(o.get("length")):(a(o.get($u)),jh(s)&&a(o.get(_w)));break;case"delete":l||(a(o.get($u)),jh(s)&&a(o.get(_w)));break;case"set":jh(s)&&a(o.get($u));break}}UA()}function Ch(s){const t=Ne(s);return t===s?t:(_n(t,"iterate",Kp),zi(s)?t:t.map(Cr))}function I_(s){return _n(s=Ne(s),"iterate",Kp),s}function Ka(s,t){return Pa(s)?Uu(s)?lf(Cr(t)):lf(t):Cr(t)}const eO={__proto__:null,[Symbol.iterator](){return T0(this,Symbol.iterator,s=>Ka(this,s))},concat(...s){return Ch(this).concat(...s.map(t=>Qt(t)?Ch(t):t))},entries(){return T0(this,"entries",s=>(s[1]=Ka(this,s[1]),s))},every(s,t){return Co(this,"every",s,t,void 0,arguments)},filter(s,t){return Co(this,"filter",s,t,e=>e.map(n=>Ka(this,n)),arguments)},find(s,t){return Co(this,"find",s,t,e=>Ka(this,e),arguments)},findIndex(s,t){return Co(this,"findIndex",s,t,void 0,arguments)},findLast(s,t){return Co(this,"findLast",s,t,e=>Ka(this,e),arguments)},findLastIndex(s,t){return Co(this,"findLastIndex",s,t,void 0,arguments)},forEach(s,t){return Co(this,"forEach",s,t,void 0,arguments)},includes(...s){return C0(this,"includes",s)},indexOf(...s){return C0(this,"indexOf",s)},join(s){return Ch(this).join(s)},lastIndexOf(...s){return C0(this,"lastIndexOf",s)},map(s,t){return Co(this,"map",s,t,void 0,arguments)},pop(){return $f(this,"pop")},push(...s){return $f(this,"push",s)},reduce(s,...t){return bE(this,"reduce",s,t)},reduceRight(s,...t){return bE(this,"reduceRight",s,t)},shift(){return $f(this,"shift")},some(s,t){return Co(this,"some",s,t,void 0,arguments)},splice(...s){return $f(this,"splice",s)},toReversed(){return Ch(this).toReversed()},toSorted(s){return Ch(this).toSorted(s)},toSpliced(...s){return Ch(this).toSpliced(...s)},unshift(...s){return $f(this,"unshift",s)},values(){return T0(this,"values",s=>Ka(this,s))}};function T0(s,t,e){const n=I_(s),i=n[t]();return n!==s&&!zi(s)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=e(r.value)),r}),i}const sO=Array.prototype;function Co(s,t,e,n,i,r){const o=I_(s),a=o!==s&&!zi(s),l=o[t];if(l!==sO[t]){const d=l.apply(s,r);return a?Cr(d):d}let c=e;o!==s&&(a?c=function(d,f){return e.call(this,Ka(s,d),f,s)}:e.length>2&&(c=function(d,f){return e.call(this,d,f,s)}));const u=l.call(o,c,n);return a&&i?i(u):u}function bE(s,t,e,n){const i=I_(s);let r=e;return i!==s&&(zi(s)?e.length>3&&(r=function(o,a,l){return e.call(this,o,a,l,s)}):r=function(o,a,l){return e.call(this,o,Ka(s,a),l,s)}),i[t](r,...n)}function C0(s,t,e){const n=Ne(s);_n(n,"iterate",Kp);const i=n[t](...e);return(i===-1||i===!1)&&WA(e[0])?(e[0]=Ne(e[0]),n[t](...e)):i}function $f(s,t,e=[]){Ca(),$A();const n=Ne(s)[t].apply(s,e);return UA(),ka(),n}const nO=OA("__proto__,__v_isRef,__isVue"),Nk=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Tr));function iO(s){Tr(s)||(s=String(s));const t=Ne(this);return _n(t,"has",s),t.hasOwnProperty(s)}class Fk{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,n){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return r;if(e==="__v_raw")return n===(i?r?pO:Vk:r?Uk:$k).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=Qt(t);if(!i){let l;if(o&&(l=eO[e]))return l;if(e==="hasOwnProperty")return iO}const a=Reflect.get(t,e,xn(t)?t:n);if((Tr(e)?Nk.has(e):nO(e))||(i||_n(t,"get",e),r))return a;if(xn(a)){const l=o&&FA(e)?a:a.value;return i&&Ye(l)?Aw(l):l}return Ye(a)?i?Aw(a):Ia(a):a}}class Bk extends Fk{constructor(t=!1){super(!1,t)}set(t,e,n,i){let r=t[e];const o=Qt(t)&&FA(e);if(!this._isShallow){const c=Pa(r);if(!zi(n)&&!Pa(n)&&(r=Ne(r),n=Ne(n)),!o&&xn(r)&&!xn(n))return c||(r.value=n),!0}const a=o?Number(e)<t.length:Fe(t,e),l=Reflect.set(t,e,n,xn(t)?t:i);return t===Ne(i)&&(a?$l(n,r)&&ua(t,"set",e,n):ua(t,"add",e,n)),l}deleteProperty(t,e){const n=Fe(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&ua(t,"delete",e,void 0),i}has(t,e){const n=Reflect.has(t,e);return(!Tr(e)||!Nk.has(e))&&_n(t,"has",e),n}ownKeys(t){return _n(t,"iterate",Qt(t)?"length":$u),Reflect.ownKeys(t)}}class rO extends Fk{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const oO=new Bk,aO=new rO,lO=new Bk(!0);const ww=s=>s,zv=s=>Reflect.getPrototypeOf(s);function cO(s,t,e){return function(...n){const i=this.__v_raw,r=Ne(i),o=jh(r),a=s==="entries"||s===Symbol.iterator&&o,l=s==="keys"&&o,c=i[s](...n),u=e?ww:t?lf:Cr;return!t&&_n(r,"iterate",l?_w:$u),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Wv(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function uO(s,t){const e={get(i){const r=this.__v_raw,o=Ne(r),a=Ne(i);s||($l(i,a)&&_n(o,"get",i),_n(o,"get",a));const{has:l}=zv(o),c=t?ww:s?lf:Cr;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!s&&_n(Ne(i),"iterate",$u),i.size},has(i){const r=this.__v_raw,o=Ne(r),a=Ne(i);return s||($l(i,a)&&_n(o,"has",i),_n(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Ne(a),c=t?ww:s?lf:Cr;return!s&&_n(l,"iterate",$u),a.forEach((u,d)=>i.call(r,c(u),c(d),o))}};return Tn(e,s?{add:Wv("add"),set:Wv("set"),delete:Wv("delete"),clear:Wv("clear")}:{add(i){!t&&!zi(i)&&!Pa(i)&&(i=Ne(i));const r=Ne(this);return zv(r).has.call(r,i)||(r.add(i),ua(r,"add",i,i)),this},set(i,r){!t&&!zi(r)&&!Pa(r)&&(r=Ne(r));const o=Ne(this),{has:a,get:l}=zv(o);let c=a.call(o,i);c||(i=Ne(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?$l(r,u)&&ua(o,"set",i,r):ua(o,"add",i,r),this},delete(i){const r=Ne(this),{has:o,get:a}=zv(r);let l=o.call(r,i);l||(i=Ne(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&ua(r,"delete",i,void 0),c},clear(){const i=Ne(this),r=i.size!==0,o=i.clear();return r&&ua(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=cO(i,s,t)}),e}function jA(s,t){const e=uO(s,t);return(n,i,r)=>i==="__v_isReactive"?!s:i==="__v_isReadonly"?s:i==="__v_raw"?n:Reflect.get(Fe(e,i)&&i in n?e:n,i,r)}const hO={get:jA(!1,!1)},dO={get:jA(!1,!0)},fO={get:jA(!0,!1)};const $k=new WeakMap,Uk=new WeakMap,Vk=new WeakMap,pO=new WeakMap;function gO(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mO(s){return s.__v_skip||!Object.isExtensible(s)?0:gO(VD(s))}function Ia(s){return Pa(s)?s:zA(s,!1,oO,hO,$k)}function Hk(s){return zA(s,!1,lO,dO,Uk)}function Aw(s){return zA(s,!0,aO,fO,Vk)}function zA(s,t,e,n,i){if(!Ye(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const r=mO(s);if(r===0)return s;const o=i.get(s);if(o)return o;const a=new Proxy(s,r===2?n:e);return i.set(s,a),a}function Uu(s){return Pa(s)?Uu(s.__v_raw):!!(s&&s.__v_isReactive)}function Pa(s){return!!(s&&s.__v_isReadonly)}function zi(s){return!!(s&&s.__v_isShallow)}function WA(s){return s?!!s.__v_raw:!1}function Ne(s){const t=s&&s.__v_raw;return t?Ne(t):s}function vO(s){return!Fe(s,"__v_skip")&&Object.isExtensible(s)&&Ek(s,"__v_skip",!0),s}const Cr=s=>Ye(s)?Ia(s):s,lf=s=>Ye(s)?Aw(s):s;function xn(s){return s?s.__v_isRef===!0:!1}function ct(s){return zk(s,!1)}function jk(s){return zk(s,!0)}function zk(s,t){return xn(s)?s:new bO(s,t)}class bO{constructor(t,e){this.dep=new HA,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Ne(t),this._value=e?t:Cr(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,n=this.__v_isShallow||zi(t)||Pa(t);t=n?t:Ne(t),$l(t,e)&&(this._rawValue=t,this._value=n?t:Cr(t),this.dep.trigger())}}function ve(s){return xn(s)?s.value:s}const yO={get:(s,t,e)=>t==="__v_raw"?s:ve(Reflect.get(s,t,e)),set:(s,t,e,n)=>{const i=s[t];return xn(i)&&!xn(e)?(i.value=e,!0):Reflect.set(s,t,e,n)}};function Wk(s){return Uu(s)?s:new Proxy(s,yO)}class _O{constructor(t,e,n){this.fn=t,this.setter=e,this._value=void 0,this.dep=new HA(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Yp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Je!==this)return Pk(this,!0),!0}get value(){const t=this.dep.track();return Dk(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function wO(s,t,e=!1){let n,i;return ae(s)?n=s:(n=s.get,i=s.set),new _O(n,i,e)}const Gv={},xy=new WeakMap;let _c;function AO(s,t=!1,e=_c){if(e){let n=xy.get(e);n||xy.set(e,n=[]),n.push(s)}}function SO(s,t,e=qe){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=e,c=O=>i?O:zi(O)||i===!1||i===0?ha(O,1):ha(O);let u,d,f,m,v=!1,b=!1;if(xn(s)?(d=()=>s.value,v=zi(s)):Uu(s)?(d=()=>c(s),v=!0):Qt(s)?(b=!0,v=s.some(O=>Uu(O)||zi(O)),d=()=>s.map(O=>{if(xn(O))return O.value;if(Uu(O))return c(O);if(ae(O))return l?l(O,2):O()})):ae(s)?t?d=l?()=>l(s,2):s:d=()=>{if(f){Ca();try{f()}finally{ka()}}const O=_c;_c=u;try{return l?l(s,3,[m]):s(m)}finally{_c=O}}:d=po,t&&i){const O=d,B=i===!0?1/0:i;d=()=>ha(O(),B)}const y=ZD(),w=()=>{u.stop(),y&&y.active&&NA(y.effects,u)};if(r&&t){const O=t;t=(...B)=>{O(...B),w()}}let k=b?new Array(s.length).fill(Gv):Gv;const M=O=>{if(!(!(u.flags&1)||!u.dirty&&!O))if(t){const B=u.run();if(i||v||(b?B.some((V,A)=>$l(V,k[A])):$l(B,k))){f&&f();const V=_c;_c=u;try{const A=[B,k===Gv?void 0:b&&k[0]===Gv?[]:k,m];k=B,l?l(t,3,A):t(...A)}finally{_c=V}}}else u.run()};return a&&a(M),u=new kk(d),u.scheduler=o?()=>o(M,!1):M,m=O=>AO(O,!1,u),f=u.onStop=()=>{const O=xy.get(u);if(O){if(l)l(O,4);else for(const B of O)B();xy.delete(u)}},t?n?M(!0):k=u.run():o?o(M.bind(null,!0),!0):u.run(),w.pause=u.pause.bind(u),w.resume=u.resume.bind(u),w.stop=w,w}function ha(s,t=1/0,e){if(t<=0||!Ye(s)||s.__v_skip||(e=e||new Map,(e.get(s)||0)>=t))return s;if(e.set(s,t),t--,xn(s))ha(s.value,t,e);else if(Qt(s))for(let n=0;n<s.length;n++)ha(s[n],t,e);else if(_f(s)||jh(s))s.forEach(n=>{ha(n,t,e)});else if(Ak(s)){for(const n in s)ha(s[n],t,e);for(const n of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,n)&&ha(s[n],t,e)}return s}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wm(s,t,e,n){try{return n?s(...n):s()}catch(i){P_(i,t,e)}}function vo(s,t,e,n){if(ae(s)){const i=Wm(s,t,e,n);return i&&_k(i)&&i.catch(r=>{P_(r,t,e)}),i}if(Qt(s)){const i=[];for(let r=0;r<s.length;r++)i.push(vo(s[r],t,e,n));return i}}function P_(s,t,e,n=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||qe;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](s,l,c)===!1)return}a=a.parent}if(r){Ca(),Wm(r,null,10,[s,l,c]),ka();return}}EO(s,e,i,n,o)}function EO(s,t,e,n=!0,i=!1){if(i)throw s;console.error(s)}const $n=[];let zr=-1;const zh=[];let Ja=null,Ph=0;const Gk=Promise.resolve();let Ty=null;function da(s){const t=Ty||Gk;return s?t.then(this?s.bind(this):s):t}function xO(s){let t=zr+1,e=$n.length;for(;t<e;){const n=t+e>>>1,i=$n[n],r=Jp(i);r<s||r===s&&i.flags&2?t=n+1:e=n}return t}function GA(s){if(!(s.flags&1)){const t=Jp(s),e=$n[$n.length-1];!e||!(s.flags&2)&&t>=Jp(e)?$n.push(s):$n.splice(xO(t),0,s),s.flags|=1,qk()}}function qk(){Ty||(Ty=Gk.then(Yk))}function TO(s){Qt(s)?zh.push(...s):Ja&&s.id===-1?Ja.splice(Ph+1,0,s):s.flags&1||(zh.push(s),s.flags|=1),qk()}function yE(s,t,e=zr+1){for(;e<$n.length;e++){const n=$n[e];if(n&&n.flags&2){if(s&&n.id!==s.uid)continue;$n.splice(e,1),e--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Xk(s){if(zh.length){const t=[...new Set(zh)].sort((e,n)=>Jp(e)-Jp(n));if(zh.length=0,Ja){Ja.push(...t);return}for(Ja=t,Ph=0;Ph<Ja.length;Ph++){const e=Ja[Ph];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Ja=null,Ph=0}}const Jp=s=>s.id==null?s.flags&2?-1:1/0:s.id;function Yk(s){try{for(zr=0;zr<$n.length;zr++){const t=$n[zr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Wm(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;zr<$n.length;zr++){const t=$n[zr];t&&(t.flags&=-2)}zr=-1,$n.length=0,Xk(),Ty=null,($n.length||zh.length)&&Yk()}}let Sn=null,Kk=null;function Cy(s){const t=Sn;return Sn=s,Kk=s&&s.type.__scopeId||null,t}function xi(s,t=Sn,e){if(!t||s._n)return s;const n=(...i)=>{n._d&&Py(-1);const r=Cy(t);let o;try{o=s(...i)}finally{Cy(r),n._d&&Py(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function te(s,t){if(Sn===null)return s;const e=L_(Sn),n=s.dirs||(s.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=qe]=t[i];r&&(ae(r)&&(r={mounted:r,updated:r}),r.deep&&ha(o),n.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return s}function pc(s,t,e,n){const i=s.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Ca(),vo(l,e,8,[s.el,a,s,t]),ka())}}function wb(s,t){if(Un){let e=Un.provides;const n=Un.parent&&Un.parent.provides;n===e&&(e=Un.provides=Object.create(n)),e[s]=t}}function wr(s,t,e=!1){const n=SL();if(n||Gh){let i=Gh?Gh._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&s in i)return i[s];if(arguments.length>1)return e&&ae(t)?t.call(n&&n.proxy):t}}const CO=Symbol.for("v-scx"),kO=()=>wr(CO);function bs(s,t,e){return Jk(s,t,e)}function Jk(s,t,e=qe){const{immediate:n,deep:i,flush:r,once:o}=e,a=Tn({},e),l=t&&n||!t&&r!=="post";let c;if(tg){if(r==="sync"){const m=kO();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=po,m.resume=po,m.pause=po,m}}const u=Un;a.call=(m,v,b)=>vo(m,u,v,b);let d=!1;r==="post"?a.scheduler=m=>{Nn(m,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(m,v)=>{v?m():GA(m)}),a.augmentJob=m=>{t&&(m.flags|=4),d&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const f=SO(s,t,a);return tg&&(c?c.push(f):l&&f()),f}function IO(s,t,e){const n=this.proxy,i=xs(s)?s.includes(".")?Zk(n,s):()=>n[s]:s.bind(n,n);let r;ae(t)?r=t:(r=t.handler,e=t);const o=Gm(this),a=Jk(i,r.bind(n),e);return o(),a}function Zk(s,t){const e=t.split(".");return()=>{let n=s;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}const Qk=Symbol("_vte"),PO=s=>s.__isTeleport,Pp=s=>s&&(s.disabled||s.disabled===""),_E=s=>s&&(s.defer||s.defer===""),wE=s=>typeof SVGElement<"u"&&s instanceof SVGElement,AE=s=>typeof MathMLElement=="function"&&s instanceof MathMLElement,Sw=(s,t)=>{const e=s&&s.to;return xs(e)?t?t(e):null:e},t2={name:"Teleport",__isTeleport:!0,process(s,t,e,n,i,r,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:m,querySelector:v,createText:b,createComment:y}}=c,w=Pp(t.props);let{shapeFlag:k,children:M,dynamicChildren:O}=t;if(s==null){const B=t.el=b(""),V=t.anchor=b("");m(B,e,n),m(V,e,n);const A=(I,L)=>{k&16&&u(M,I,L,i,r,o,a,l)},S=()=>{const I=t.target=Sw(t.props,v),L=e2(I,t,b,m);I&&(o!=="svg"&&wE(I)?o="svg":o!=="mathml"&&AE(I)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(I),w||(A(I,L),Ab(t,!1)))};w&&(A(e,V),Ab(t,!0)),_E(t.props)?(t.el.__isMounted=!1,Nn(()=>{S(),delete t.el.__isMounted},r)):S()}else{if(_E(t.props)&&s.el.__isMounted===!1){Nn(()=>{t2.process(s,t,e,n,i,r,o,a,l,c)},r);return}t.el=s.el,t.targetStart=s.targetStart;const B=t.anchor=s.anchor,V=t.target=s.target,A=t.targetAnchor=s.targetAnchor,S=Pp(s.props),I=S?e:V,L=S?B:A;if(o==="svg"||wE(V)?o="svg":(o==="mathml"||AE(V))&&(o="mathml"),O?(f(s.dynamicChildren,O,I,i,r,o,a),KA(s,t,!0)):l||d(s,t,I,L,i,r,o,a,!1),w)S?t.props&&s.props&&t.props.to!==s.props.to&&(t.props.to=s.props.to):qv(t,e,B,c,1);else if((t.props&&t.props.to)!==(s.props&&s.props.to)){const P=t.target=Sw(t.props,v);P&&qv(t,P,null,c,0)}else S&&qv(t,V,A,c,1);Ab(t,w)}},remove(s,t,e,{um:n,o:{remove:i}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=s;if(d&&(i(c),i(u)),r&&i(l),o&16){const m=r||!Pp(f);for(let v=0;v<a.length;v++){const b=a[v];n(b,t,e,m,!!b.dynamicChildren)}}},move:qv,hydrate:RO};function qv(s,t,e,{o:{insert:n},m:i},r=2){r===0&&n(s.targetAnchor,t,e);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=s,d=r===2;if(d&&n(o,t,e),(!d||Pp(u))&&l&16)for(let f=0;f<c.length;f++)i(c[f],t,e,2);d&&n(a,t,e)}function RO(s,t,e,n,i,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){function f(b,y,w,k){y.anchor=d(o(b),y,a(b),e,n,i,r),y.targetStart=w,y.targetAnchor=k}const m=t.target=Sw(t.props,l),v=Pp(t.props);if(m){const b=m._lpa||m.firstChild;if(t.shapeFlag&16)if(v)f(s,t,b,b&&o(b));else{t.anchor=o(s);let y=b;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")t.targetStart=y;else if(y.data==="teleport anchor"){t.targetAnchor=y,m._lpa=t.targetAnchor&&o(t.targetAnchor);break}}y=o(y)}t.targetAnchor||e2(m,t,u,c),d(b&&o(b),t,m,e,n,i,r)}Ab(t,v)}else v&&t.shapeFlag&16&&f(s,t,s,o(s));return t.anchor&&o(t.anchor)}const R_=t2;function Ab(s,t){const e=s.ctx;if(e&&e.ut){let n,i;for(t?(n=s.el,i=s.anchor):(n=s.targetStart,i=s.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}function e2(s,t,e,n){const i=t.targetStart=e(""),r=t.targetAnchor=e("");return i[Qk]=r,s&&(n(i,s),n(r,s)),r}const MO=Symbol("_leaveCb");function qA(s,t){s.shapeFlag&6&&s.component?(s.transition=t,qA(s.component.subTree,t)):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}function ks(s,t){return ae(s)?Tn({name:s.name},t,{setup:s}):s}function s2(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const ky=new WeakMap;function Rp(s,t,e,n,i=!1){if(Qt(s)){s.forEach((v,b)=>Rp(v,t&&(Qt(t)?t[b]:t),e,n,i));return}if(Wh(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Rp(s,t,e,n.component.subTree);return}const r=n.shapeFlag&4?L_(n.component):n.el,o=i?null:r,{i:a,r:l}=s,c=t&&t.r,u=a.refs===qe?a.refs={}:a.refs,d=a.setupState,f=Ne(d),m=d===qe?yk:v=>Fe(f,v);if(c!=null&&c!==l){if(SE(t),xs(c))u[c]=null,m(c)&&(d[c]=null);else if(xn(c)){c.value=null;const v=t;v.k&&(u[v.k]=null)}}if(ae(l))Wm(l,a,12,[o,u]);else{const v=xs(l),b=xn(l);if(v||b){const y=()=>{if(s.f){const w=v?m(l)?d[l]:u[l]:l.value;if(i)Qt(w)&&NA(w,r);else if(Qt(w))w.includes(r)||w.push(r);else if(v)u[l]=[r],m(l)&&(d[l]=u[l]);else{const k=[r];l.value=k,s.k&&(u[s.k]=k)}}else v?(u[l]=o,m(l)&&(d[l]=o)):b&&(l.value=o,s.k&&(u[s.k]=o))};if(o){const w=()=>{y(),ky.delete(s)};w.id=-1,ky.set(s,w),Nn(w,e)}else SE(s),y()}}}function SE(s){const t=ky.get(s);t&&(t.flags|=8,ky.delete(s))}k_().requestIdleCallback;k_().cancelIdleCallback;const Wh=s=>!!s.type.__asyncLoader,n2=s=>s.type.__isKeepAlive;function DO(s,t){i2(s,"a",t)}function OO(s,t){i2(s,"da",t)}function i2(s,t,e=Un){const n=s.__wdc||(s.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return s()});if(M_(t,n,e),e){let i=e.parent;for(;i&&i.parent;)n2(i.parent.vnode)&&LO(n,t,e,i),i=i.parent}}function LO(s,t,e,n){const i=M_(t,s,n,!0);r2(()=>{NA(n[t],i)},e)}function M_(s,t,e=Un,n=!1){if(e){const i=e[s]||(e[s]=[]),r=t.__weh||(t.__weh=(...o)=>{Ca();const a=Gm(e),l=vo(t,e,s,o);return a(),ka(),l});return n?i.unshift(r):i.push(r),r}}const Na=s=>(t,e=Un)=>{(!tg||s==="sp")&&M_(s,(...n)=>t(...n),e)},NO=Na("bm"),Rr=Na("m"),FO=Na("bu"),BO=Na("u"),tc=Na("bum"),r2=Na("um"),$O=Na("sp"),UO=Na("rtg"),VO=Na("rtc");function HO(s,t=Un){M_("ec",s,t)}const jO=Symbol.for("v-ndc");function ye(s,t,e,n){let i;const r=e,o=Qt(s);if(o||xs(s)){const a=o&&Uu(s);let l=!1,c=!1;a&&(l=!zi(s),c=Pa(s),s=I_(s)),i=new Array(s.length);for(let u=0,d=s.length;u<d;u++)i[u]=t(l?c?lf(Cr(s[u])):Cr(s[u]):s[u],u,void 0,r)}else if(typeof s=="number"){i=new Array(s);for(let a=0;a<s;a++)i[a]=t(a+1,a,void 0,r)}else if(Ye(s))if(s[Symbol.iterator])i=Array.from(s,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(s);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(s[u],u,l,r)}}else i=[];return i}function EE(s,t,e={},n,i){if(Sn.ce||Sn.parent&&Wh(Sn.parent)&&Sn.parent.ce){const c=Object.keys(e).length>0;return t!=="default"&&(e.name=t),G(),qi(Xt,null,[os("slot",e,n)],c?-2:64)}let r=s[t];r&&r._c&&(r._d=!1),G();const o=r&&o2(r(e)),a=e.key||o&&o.key,l=qi(Xt,{key:(a&&!Tr(a)?a:`_${t}`)+(!o&&n?"_fb":"")},o||[],o&&s._===1?64:-2);return r&&r._c&&(r._d=!0),l}function o2(s){return s.some(t=>Qp(t)?!(t.type===Ra||t.type===Xt&&!o2(t.children)):!0)?s:null}const Ew=s=>s?E2(s)?L_(s):Ew(s.parent):null,Mp=Tn(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Ew(s.parent),$root:s=>Ew(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>l2(s),$forceUpdate:s=>s.f||(s.f=()=>{GA(s.update)}),$nextTick:s=>s.n||(s.n=da.bind(s.proxy)),$watch:s=>IO.bind(s)}),k0=(s,t)=>s!==qe&&!s.__isScriptSetup&&Fe(s,t),zO={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:n,data:i,props:r,accessCache:o,type:a,appContext:l}=s;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return i[t];case 4:return e[t];case 3:return r[t]}else{if(k0(n,t))return o[t]=1,n[t];if(i!==qe&&Fe(i,t))return o[t]=2,i[t];if(Fe(r,t))return o[t]=3,r[t];if(e!==qe&&Fe(e,t))return o[t]=4,e[t];xw&&(o[t]=0)}}const c=Mp[t];let u,d;if(c)return t==="$attrs"&&_n(s.attrs,"get",""),c(s);if((u=a.__cssModules)&&(u=u[t]))return u;if(e!==qe&&Fe(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,Fe(d,t))return d[t]},set({_:s},t,e){const{data:n,setupState:i,ctx:r}=s;return k0(i,t)?(i[t]=e,!0):n!==qe&&Fe(n,t)?(n[t]=e,!0):Fe(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(r[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:n,appContext:i,props:r,type:o}},a){let l;return!!(e[a]||s!==qe&&a[0]!=="$"&&Fe(s,a)||k0(t,a)||Fe(r,a)||Fe(n,a)||Fe(Mp,a)||Fe(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:Fe(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function xE(s){return Qt(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let xw=!0;function WO(s){const t=l2(s),e=s.proxy,n=s.ctx;xw=!1,t.beforeCreate&&TE(t.beforeCreate,s,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:m,updated:v,activated:b,deactivated:y,beforeDestroy:w,beforeUnmount:k,destroyed:M,unmounted:O,render:B,renderTracked:V,renderTriggered:A,errorCaptured:S,serverPrefetch:I,expose:L,inheritAttrs:P,components:$,directives:N,filters:_t}=t;if(c&&GO(c,n,null),o)for(const X in o){const nt=o[X];ae(nt)&&(n[X]=nt.bind(e))}if(i){const X=i.call(e,e);Ye(X)&&(s.data=Ia(X))}if(xw=!0,r)for(const X in r){const nt=r[X],U=ae(nt)?nt.bind(e,e):ae(nt.get)?nt.get.bind(e,e):po,it=!ae(nt)&&ae(nt.set)?nt.set.bind(e):po,vt=St({get:U,set:it});Object.defineProperty(n,X,{enumerable:!0,configurable:!0,get:()=>vt.value,set:j=>vt.value=j})}if(a)for(const X in a)a2(a[X],n,e,X);if(l){const X=ae(l)?l.call(e):l;Reflect.ownKeys(X).forEach(nt=>{wb(nt,X[nt])})}u&&TE(u,s,"c");function tt(X,nt){Qt(nt)?nt.forEach(U=>X(U.bind(e))):nt&&X(nt.bind(e))}if(tt(NO,d),tt(Rr,f),tt(FO,m),tt(BO,v),tt(DO,b),tt(OO,y),tt(HO,S),tt(VO,V),tt(UO,A),tt(tc,k),tt(r2,O),tt($O,I),Qt(L))if(L.length){const X=s.exposed||(s.exposed={});L.forEach(nt=>{Object.defineProperty(X,nt,{get:()=>e[nt],set:U=>e[nt]=U,enumerable:!0})})}else s.exposed||(s.exposed={});B&&s.render===po&&(s.render=B),P!=null&&(s.inheritAttrs=P),$&&(s.components=$),N&&(s.directives=N),I&&s2(s)}function GO(s,t,e=po){Qt(s)&&(s=Tw(s));for(const n in s){const i=s[n];let r;Ye(i)?"default"in i?r=wr(i.from||n,i.default,!0):r=wr(i.from||n):r=wr(i),xn(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function TE(s,t,e){vo(Qt(s)?s.map(n=>n.bind(t.proxy)):s.bind(t.proxy),t,e)}function a2(s,t,e,n){let i=n.includes(".")?Zk(e,n):()=>e[n];if(xs(s)){const r=t[s];ae(r)&&bs(i,r)}else if(ae(s))bs(i,s.bind(e));else if(Ye(s))if(Qt(s))s.forEach(r=>a2(r,t,e,n));else{const r=ae(s.handler)?s.handler.bind(e):t[s.handler];ae(r)&&bs(i,r,s)}}function l2(s){const t=s.type,{mixins:e,extends:n}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!e&&!n?l=t:(l={},i.length&&i.forEach(c=>Iy(l,c,o,!0)),Iy(l,t,o)),Ye(t)&&r.set(t,l),l}function Iy(s,t,e,n=!1){const{mixins:i,extends:r}=t;r&&Iy(s,r,e,!0),i&&i.forEach(o=>Iy(s,o,e,!0));for(const o in t)if(!(n&&o==="expose")){const a=qO[o]||e&&e[o];s[o]=a?a(s[o],t[o]):t[o]}return s}const qO={data:CE,props:kE,emits:kE,methods:ep,computed:ep,beforeCreate:Pn,created:Pn,beforeMount:Pn,mounted:Pn,beforeUpdate:Pn,updated:Pn,beforeDestroy:Pn,beforeUnmount:Pn,destroyed:Pn,unmounted:Pn,activated:Pn,deactivated:Pn,errorCaptured:Pn,serverPrefetch:Pn,components:ep,directives:ep,watch:YO,provide:CE,inject:XO};function CE(s,t){return t?s?function(){return Tn(ae(s)?s.call(this,this):s,ae(t)?t.call(this,this):t)}:t:s}function XO(s,t){return ep(Tw(s),Tw(t))}function Tw(s){if(Qt(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Pn(s,t){return s?[...new Set([].concat(s,t))]:t}function ep(s,t){return s?Tn(Object.create(null),s,t):t}function kE(s,t){return s?Qt(s)&&Qt(t)?[...new Set([...s,...t])]:Tn(Object.create(null),xE(s),xE(t??{})):t}function YO(s,t){if(!s)return t;if(!t)return s;const e=Tn(Object.create(null),s);for(const n in t)e[n]=Pn(s[n],t[n]);return e}function c2(){return{app:null,config:{isNativeTag:yk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let KO=0;function JO(s,t){return function(n,i=null){ae(n)||(n=Tn({},n)),i!=null&&!Ye(i)&&(i=null);const r=c2(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:KO++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:IL,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&ae(u.install)?(o.add(u),u.install(c,...d)):ae(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,f){if(!l){const m=c._ceVNode||os(n,i);return m.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),s(m,u,f),l=!0,c._container=u,u.__vue_app__=c,L_(m.component)}},onUnmount(u){a.push(u)},unmount(){l&&(vo(a,c._instance,16),s(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=Gh;Gh=c;try{return u()}finally{Gh=d}}};return c}}let Gh=null;const ZO=(s,t)=>t==="modelValue"||t==="model-value"?s.modelModifiers:s[`${t}Modifiers`]||s[`${Gl(t)}Modifiers`]||s[`${Ql(t)}Modifiers`];function QO(s,t,...e){if(s.isUnmounted)return;const n=s.vnode.props||qe;let i=e;const r=t.startsWith("update:"),o=r&&ZO(n,t.slice(7));o&&(o.trim&&(i=e.map(u=>xs(u)?u.trim():u)),o.number&&(i=e.map(C_)));let a,l=n[a=S0(t)]||n[a=S0(Gl(t))];!l&&r&&(l=n[a=S0(Ql(t))]),l&&vo(l,s,6,i);const c=n[a+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,vo(c,s,6,i)}}const tL=new WeakMap;function u2(s,t,e=!1){const n=e?tL:t.emitsCache,i=n.get(s);if(i!==void 0)return i;const r=s.emits;let o={},a=!1;if(!ae(s)){const l=c=>{const u=u2(c,t,!0);u&&(a=!0,Tn(o,u))};!e&&t.mixins.length&&t.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!r&&!a?(Ye(s)&&n.set(s,null),null):(Qt(r)?r.forEach(l=>o[l]=null):Tn(o,r),Ye(s)&&n.set(s,o),o)}function D_(s,t){return!s||!x_(t)?!1:(t=t.slice(2).replace(/Once$/,""),Fe(s,t[0].toLowerCase()+t.slice(1))||Fe(s,Ql(t))||Fe(s,t))}function IE(s){const{type:t,vnode:e,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:m,ctx:v,inheritAttrs:b}=s,y=Cy(s);let w,k;try{if(e.shapeFlag&4){const O=i||n,B=O;w=uo(c.call(B,O,u,d,m,f,v)),k=a}else{const O=t;w=uo(O.length>1?O(d,{attrs:a,slots:o,emit:l}):O(d,null)),k=t.props?a:eL(a)}}catch(O){Dp.length=0,P_(O,s,1),w=os(Ra)}let M=w;if(k&&b!==!1){const O=Object.keys(k),{shapeFlag:B}=M;O.length&&B&7&&(r&&O.some(LA)&&(k=sL(k,r)),M=cf(M,k,!1,!0))}return e.dirs&&(M=cf(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(e.dirs):e.dirs),e.transition&&qA(M,e.transition),w=M,Cy(y),w}const eL=s=>{let t;for(const e in s)(e==="class"||e==="style"||x_(e))&&((t||(t={}))[e]=s[e]);return t},sL=(s,t)=>{const e={};for(const n in s)(!LA(n)||!(n.slice(9)in t))&&(e[n]=s[n]);return e};function nL(s,t,e){const{props:n,children:i,component:r}=s,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return n?PE(n,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==n[f]&&!D_(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?PE(n,o,c):!0:!!o;return!1}function PE(s,t,e){const n=Object.keys(t);if(n.length!==Object.keys(s).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(t[r]!==s[r]&&!D_(e,r))return!0}return!1}function iL({vnode:s,parent:t},e){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=t.vnode).el=e,t=t.parent;else break}}const h2={},d2=()=>Object.create(h2),f2=s=>Object.getPrototypeOf(s)===h2;function rL(s,t,e,n=!1){const i={},r=d2();s.propsDefaults=Object.create(null),p2(s,t,i,r);for(const o in s.propsOptions[0])o in i||(i[o]=void 0);e?s.props=n?i:Hk(i):s.type.props?s.props=i:s.props=r,s.attrs=r}function oL(s,t,e,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=s,a=Ne(i),[l]=s.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(D_(s.emitsOptions,f))continue;const m=t[f];if(l)if(Fe(r,f))m!==r[f]&&(r[f]=m,c=!0);else{const v=Gl(f);i[v]=Cw(l,a,v,m,s,!1)}else m!==r[f]&&(r[f]=m,c=!0)}}}else{p2(s,t,i,r)&&(c=!0);let u;for(const d in a)(!t||!Fe(t,d)&&((u=Ql(d))===d||!Fe(t,u)))&&(l?e&&(e[d]!==void 0||e[u]!==void 0)&&(i[d]=Cw(l,a,d,void 0,s,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Fe(t,d))&&(delete r[d],c=!0)}c&&ua(s.attrs,"set","")}function p2(s,t,e,n){const[i,r]=s.propsOptions;let o=!1,a;if(t)for(let l in t){if(Cp(l))continue;const c=t[l];let u;i&&Fe(i,u=Gl(l))?!r||!r.includes(u)?e[u]=c:(a||(a={}))[u]=c:D_(s.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=Ne(e),c=a||qe;for(let u=0;u<r.length;u++){const d=r[u];e[d]=Cw(i,l,d,c[d],s,!Fe(c,d))}}return o}function Cw(s,t,e,n,i,r){const o=s[e];if(o!=null){const a=Fe(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ae(l)){const{propsDefaults:c}=i;if(e in c)n=c[e];else{const u=Gm(i);n=c[e]=l.call(null,t),u()}}else n=l;i.ce&&i.ce._setProp(e,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===Ql(e))&&(n=!0))}return n}const aL=new WeakMap;function g2(s,t,e=!1){const n=e?aL:t.propsCache,i=n.get(s);if(i)return i;const r=s.props,o={},a=[];let l=!1;if(!ae(s)){const u=d=>{l=!0;const[f,m]=g2(d,t,!0);Tn(o,f),m&&a.push(...m)};!e&&t.mixins.length&&t.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!l)return Ye(s)&&n.set(s,Hh),Hh;if(Qt(r))for(let u=0;u<r.length;u++){const d=Gl(r[u]);RE(d)&&(o[d]=qe)}else if(r)for(const u in r){const d=Gl(u);if(RE(d)){const f=r[u],m=o[d]=Qt(f)||ae(f)?{type:f}:Tn({},f),v=m.type;let b=!1,y=!0;if(Qt(v))for(let w=0;w<v.length;++w){const k=v[w],M=ae(k)&&k.name;if(M==="Boolean"){b=!0;break}else M==="String"&&(y=!1)}else b=ae(v)&&v.name==="Boolean";m[0]=b,m[1]=y,(b||Fe(m,"default"))&&a.push(d)}}const c=[o,a];return Ye(s)&&n.set(s,c),c}function RE(s){return s[0]!=="$"&&!Cp(s)}const XA=s=>s==="_"||s==="_ctx"||s==="$stable",YA=s=>Qt(s)?s.map(uo):[uo(s)],lL=(s,t,e)=>{if(t._n)return t;const n=xi((...i)=>YA(t(...i)),e);return n._c=!1,n},m2=(s,t,e)=>{const n=s._ctx;for(const i in s){if(XA(i))continue;const r=s[i];if(ae(r))t[i]=lL(i,r,n);else if(r!=null){const o=YA(r);t[i]=()=>o}}},v2=(s,t)=>{const e=YA(t);s.slots.default=()=>e},b2=(s,t,e)=>{for(const n in t)(e||!XA(n))&&(s[n]=t[n])},cL=(s,t,e)=>{const n=s.slots=d2();if(s.vnode.shapeFlag&32){const i=t._;i?(b2(n,t,e),e&&Ek(n,"_",i,!0)):m2(t,n)}else t&&v2(s,t)},uL=(s,t,e)=>{const{vnode:n,slots:i}=s;let r=!0,o=qe;if(n.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:b2(i,t,e):(r=!t.$stable,m2(t,i)),o=t}else t&&(v2(s,t),o={default:1});if(r)for(const a in i)!XA(a)&&o[a]==null&&delete i[a]},Nn=gL;function hL(s){return dL(s)}function dL(s,t){const e=k_();e.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:m=po,insertStaticContent:v}=s,b=(H,z,J,rt=null,ft=null,ut=null,Et=void 0,yt=null,wt=!!z.dynamicChildren)=>{if(H===z)return;H&&!Uf(H,z)&&(rt=Y(H),j(H,ft,ut,!0),H=null),z.patchFlag===-2&&(wt=!1,z.dynamicChildren=null);const{type:pt,ref:Ut,shapeFlag:It}=z;switch(pt){case O_:y(H,z,J,rt);break;case Ra:w(H,z,J,rt);break;case Sb:H==null&&k(z,J,rt,Et);break;case Xt:$(H,z,J,rt,ft,ut,Et,yt,wt);break;default:It&1?B(H,z,J,rt,ft,ut,Et,yt,wt):It&6?N(H,z,J,rt,ft,ut,Et,yt,wt):(It&64||It&128)&&pt.process(H,z,J,rt,ft,ut,Et,yt,wt,Pt)}Ut!=null&&ft?Rp(Ut,H&&H.ref,ut,z||H,!z):Ut==null&&H&&H.ref!=null&&Rp(H.ref,null,ut,H,!0)},y=(H,z,J,rt)=>{if(H==null)n(z.el=a(z.children),J,rt);else{const ft=z.el=H.el;z.children!==H.children&&c(ft,z.children)}},w=(H,z,J,rt)=>{H==null?n(z.el=l(z.children||""),J,rt):z.el=H.el},k=(H,z,J,rt)=>{[H.el,H.anchor]=v(H.children,z,J,rt,H.el,H.anchor)},M=({el:H,anchor:z},J,rt)=>{let ft;for(;H&&H!==z;)ft=f(H),n(H,J,rt),H=ft;n(z,J,rt)},O=({el:H,anchor:z})=>{let J;for(;H&&H!==z;)J=f(H),i(H),H=J;i(z)},B=(H,z,J,rt,ft,ut,Et,yt,wt)=>{if(z.type==="svg"?Et="svg":z.type==="math"&&(Et="mathml"),H==null)V(z,J,rt,ft,ut,Et,yt,wt);else{const pt=H.el&&H.el._isVueCE?H.el:null;try{pt&&pt._beginPatch(),I(H,z,ft,ut,Et,yt,wt)}finally{pt&&pt._endPatch()}}},V=(H,z,J,rt,ft,ut,Et,yt)=>{let wt,pt;const{props:Ut,shapeFlag:It,transition:Tt,dirs:zt}=H;if(wt=H.el=o(H.type,ut,Ut&&Ut.is,Ut),It&8?u(wt,H.children):It&16&&S(H.children,wt,null,rt,ft,I0(H,ut),Et,yt),zt&&pc(H,null,rt,"created"),A(wt,H,H.scopeId,Et,rt),Ut){for(const Lt in Ut)Lt!=="value"&&!Cp(Lt)&&r(wt,Lt,null,Ut[Lt],ut,rt);"value"in Ut&&r(wt,"value",null,Ut.value,ut),(pt=Ut.onVnodeBeforeMount)&&Br(pt,rt,H)}zt&&pc(H,null,rt,"beforeMount");const Ht=fL(ft,Tt);Ht&&Tt.beforeEnter(wt),n(wt,z,J),((pt=Ut&&Ut.onVnodeMounted)||Ht||zt)&&Nn(()=>{pt&&Br(pt,rt,H),Ht&&Tt.enter(wt),zt&&pc(H,null,rt,"mounted")},ft)},A=(H,z,J,rt,ft)=>{if(J&&m(H,J),rt)for(let ut=0;ut<rt.length;ut++)m(H,rt[ut]);if(ft){let ut=ft.subTree;if(z===ut||w2(ut.type)&&(ut.ssContent===z||ut.ssFallback===z)){const Et=ft.vnode;A(H,Et,Et.scopeId,Et.slotScopeIds,ft.parent)}}},S=(H,z,J,rt,ft,ut,Et,yt,wt=0)=>{for(let pt=wt;pt<H.length;pt++){const Ut=H[pt]=yt?Za(H[pt]):uo(H[pt]);b(null,Ut,z,J,rt,ft,ut,Et,yt)}},I=(H,z,J,rt,ft,ut,Et)=>{const yt=z.el=H.el;let{patchFlag:wt,dynamicChildren:pt,dirs:Ut}=z;wt|=H.patchFlag&16;const It=H.props||qe,Tt=z.props||qe;let zt;if(J&&gc(J,!1),(zt=Tt.onVnodeBeforeUpdate)&&Br(zt,J,z,H),Ut&&pc(z,H,J,"beforeUpdate"),J&&gc(J,!0),(It.innerHTML&&Tt.innerHTML==null||It.textContent&&Tt.textContent==null)&&u(yt,""),pt?L(H.dynamicChildren,pt,yt,J,rt,I0(z,ft),ut):Et||nt(H,z,yt,null,J,rt,I0(z,ft),ut,!1),wt>0){if(wt&16)P(yt,It,Tt,J,ft);else if(wt&2&&It.class!==Tt.class&&r(yt,"class",null,Tt.class,ft),wt&4&&r(yt,"style",It.style,Tt.style,ft),wt&8){const Ht=z.dynamicProps;for(let Lt=0;Lt<Ht.length;Lt++){const ee=Ht[Lt],$e=It[ee],he=Tt[ee];(he!==$e||ee==="value")&&r(yt,ee,$e,he,ft,J)}}wt&1&&H.children!==z.children&&u(yt,z.children)}else!Et&&pt==null&&P(yt,It,Tt,J,ft);((zt=Tt.onVnodeUpdated)||Ut)&&Nn(()=>{zt&&Br(zt,J,z,H),Ut&&pc(z,H,J,"updated")},rt)},L=(H,z,J,rt,ft,ut,Et)=>{for(let yt=0;yt<z.length;yt++){const wt=H[yt],pt=z[yt],Ut=wt.el&&(wt.type===Xt||!Uf(wt,pt)||wt.shapeFlag&198)?d(wt.el):J;b(wt,pt,Ut,null,rt,ft,ut,Et,!0)}},P=(H,z,J,rt,ft)=>{if(z!==J){if(z!==qe)for(const ut in z)!Cp(ut)&&!(ut in J)&&r(H,ut,z[ut],null,ft,rt);for(const ut in J){if(Cp(ut))continue;const Et=J[ut],yt=z[ut];Et!==yt&&ut!=="value"&&r(H,ut,yt,Et,ft,rt)}"value"in J&&r(H,"value",z.value,J.value,ft)}},$=(H,z,J,rt,ft,ut,Et,yt,wt)=>{const pt=z.el=H?H.el:a(""),Ut=z.anchor=H?H.anchor:a("");let{patchFlag:It,dynamicChildren:Tt,slotScopeIds:zt}=z;zt&&(yt=yt?yt.concat(zt):zt),H==null?(n(pt,J,rt),n(Ut,J,rt),S(z.children||[],J,Ut,ft,ut,Et,yt,wt)):It>0&&It&64&&Tt&&H.dynamicChildren&&H.dynamicChildren.length===Tt.length?(L(H.dynamicChildren,Tt,J,ft,ut,Et,yt),(z.key!=null||ft&&z===ft.subTree)&&KA(H,z,!0)):nt(H,z,J,Ut,ft,ut,Et,yt,wt)},N=(H,z,J,rt,ft,ut,Et,yt,wt)=>{z.slotScopeIds=yt,H==null?z.shapeFlag&512?ft.ctx.activate(z,J,rt,Et,wt):_t(z,J,rt,ft,ut,Et,wt):xt(H,z,wt)},_t=(H,z,J,rt,ft,ut,Et)=>{const yt=H.component=AL(H,rt,ft);if(n2(H)&&(yt.ctx.renderer=Pt),EL(yt,!1,Et),yt.asyncDep){if(ft&&ft.registerDep(yt,tt,Et),!H.el){const wt=yt.subTree=os(Ra);w(null,wt,z,J),H.placeholder=wt.el}}else tt(yt,H,z,J,ft,ut,Et)},xt=(H,z,J)=>{const rt=z.component=H.component;if(nL(H,z,J))if(rt.asyncDep&&!rt.asyncResolved){X(rt,z,J);return}else rt.next=z,rt.update();else z.el=H.el,rt.vnode=z},tt=(H,z,J,rt,ft,ut,Et)=>{const yt=()=>{if(H.isMounted){let{next:It,bu:Tt,u:zt,parent:Ht,vnode:Lt}=H;{const ke=y2(H);if(ke){It&&(It.el=Lt.el,X(H,It,Et)),ke.asyncDep.then(()=>{H.isUnmounted||yt()});return}}let ee=It,$e;gc(H,!1),It?(It.el=Lt.el,X(H,It,Et)):It=Lt,Tt&&_b(Tt),($e=It.props&&It.props.onVnodeBeforeUpdate)&&Br($e,Ht,It,Lt),gc(H,!0);const he=IE(H),cs=H.subTree;H.subTree=he,b(cs,he,d(cs.el),Y(cs),H,ft,ut),It.el=he.el,ee===null&&iL(H,he.el),zt&&Nn(zt,ft),($e=It.props&&It.props.onVnodeUpdated)&&Nn(()=>Br($e,Ht,It,Lt),ft)}else{let It;const{el:Tt,props:zt}=z,{bm:Ht,m:Lt,parent:ee,root:$e,type:he}=H,cs=Wh(z);gc(H,!1),Ht&&_b(Ht),!cs&&(It=zt&&zt.onVnodeBeforeMount)&&Br(It,ee,z),gc(H,!0);{$e.ce&&$e.ce._def.shadowRoot!==!1&&$e.ce._injectChildStyle(he);const ke=H.subTree=IE(H);b(null,ke,J,rt,H,ft,ut),z.el=ke.el}if(Lt&&Nn(Lt,ft),!cs&&(It=zt&&zt.onVnodeMounted)){const ke=z;Nn(()=>Br(It,ee,ke),ft)}(z.shapeFlag&256||ee&&Wh(ee.vnode)&&ee.vnode.shapeFlag&256)&&H.a&&Nn(H.a,ft),H.isMounted=!0,z=J=rt=null}};H.scope.on();const wt=H.effect=new kk(yt);H.scope.off();const pt=H.update=wt.run.bind(wt),Ut=H.job=wt.runIfDirty.bind(wt);Ut.i=H,Ut.id=H.uid,wt.scheduler=()=>GA(Ut),gc(H,!0),pt()},X=(H,z,J)=>{z.component=H;const rt=H.vnode.props;H.vnode=z,H.next=null,oL(H,z.props,rt,J),uL(H,z.children,J),Ca(),yE(H),ka()},nt=(H,z,J,rt,ft,ut,Et,yt,wt=!1)=>{const pt=H&&H.children,Ut=H?H.shapeFlag:0,It=z.children,{patchFlag:Tt,shapeFlag:zt}=z;if(Tt>0){if(Tt&128){it(pt,It,J,rt,ft,ut,Et,yt,wt);return}else if(Tt&256){U(pt,It,J,rt,ft,ut,Et,yt,wt);return}}zt&8?(Ut&16&&kt(pt,ft,ut),It!==pt&&u(J,It)):Ut&16?zt&16?it(pt,It,J,rt,ft,ut,Et,yt,wt):kt(pt,ft,ut,!0):(Ut&8&&u(J,""),zt&16&&S(It,J,rt,ft,ut,Et,yt,wt))},U=(H,z,J,rt,ft,ut,Et,yt,wt)=>{H=H||Hh,z=z||Hh;const pt=H.length,Ut=z.length,It=Math.min(pt,Ut);let Tt;for(Tt=0;Tt<It;Tt++){const zt=z[Tt]=wt?Za(z[Tt]):uo(z[Tt]);b(H[Tt],zt,J,null,ft,ut,Et,yt,wt)}pt>Ut?kt(H,ft,ut,!0,!1,It):S(z,J,rt,ft,ut,Et,yt,wt,It)},it=(H,z,J,rt,ft,ut,Et,yt,wt)=>{let pt=0;const Ut=z.length;let It=H.length-1,Tt=Ut-1;for(;pt<=It&&pt<=Tt;){const zt=H[pt],Ht=z[pt]=wt?Za(z[pt]):uo(z[pt]);if(Uf(zt,Ht))b(zt,Ht,J,null,ft,ut,Et,yt,wt);else break;pt++}for(;pt<=It&&pt<=Tt;){const zt=H[It],Ht=z[Tt]=wt?Za(z[Tt]):uo(z[Tt]);if(Uf(zt,Ht))b(zt,Ht,J,null,ft,ut,Et,yt,wt);else break;It--,Tt--}if(pt>It){if(pt<=Tt){const zt=Tt+1,Ht=zt<Ut?z[zt].el:rt;for(;pt<=Tt;)b(null,z[pt]=wt?Za(z[pt]):uo(z[pt]),J,Ht,ft,ut,Et,yt,wt),pt++}}else if(pt>Tt)for(;pt<=It;)j(H[pt],ft,ut,!0),pt++;else{const zt=pt,Ht=pt,Lt=new Map;for(pt=Ht;pt<=Tt;pt++){const We=z[pt]=wt?Za(z[pt]):uo(z[pt]);We.key!=null&&Lt.set(We.key,pt)}let ee,$e=0;const he=Tt-Ht+1;let cs=!1,ke=0;const Re=new Array(he);for(pt=0;pt<he;pt++)Re[pt]=0;for(pt=zt;pt<=It;pt++){const We=H[pt];if($e>=he){j(We,ft,ut,!0);continue}let _s;if(We.key!=null)_s=Lt.get(We.key);else for(ee=Ht;ee<=Tt;ee++)if(Re[ee-Ht]===0&&Uf(We,z[ee])){_s=ee;break}_s===void 0?j(We,ft,ut,!0):(Re[_s-Ht]=pt+1,_s>=ke?ke=_s:cs=!0,b(We,z[_s],J,null,ft,ut,Et,yt,wt),$e++)}const Is=cs?pL(Re):Hh;for(ee=Is.length-1,pt=he-1;pt>=0;pt--){const We=Ht+pt,_s=z[We],kn=z[We+1],Wn=We+1<Ut?kn.el||_2(kn):rt;Re[pt]===0?b(null,_s,J,Wn,ft,ut,Et,yt,wt):cs&&(ee<0||pt!==Is[ee]?vt(_s,J,Wn,2):ee--)}}},vt=(H,z,J,rt,ft=null)=>{const{el:ut,type:Et,transition:yt,children:wt,shapeFlag:pt}=H;if(pt&6){vt(H.component.subTree,z,J,rt);return}if(pt&128){H.suspense.move(z,J,rt);return}if(pt&64){Et.move(H,z,J,Pt);return}if(Et===Xt){n(ut,z,J);for(let It=0;It<wt.length;It++)vt(wt[It],z,J,rt);n(H.anchor,z,J);return}if(Et===Sb){M(H,z,J);return}if(rt!==2&&pt&1&&yt)if(rt===0)yt.beforeEnter(ut),n(ut,z,J),Nn(()=>yt.enter(ut),ft);else{const{leave:It,delayLeave:Tt,afterLeave:zt}=yt,Ht=()=>{H.ctx.isUnmounted?i(ut):n(ut,z,J)},Lt=()=>{ut._isLeaving&&ut[MO](!0),It(ut,()=>{Ht(),zt&&zt()})};Tt?Tt(ut,Ht,Lt):Lt()}else n(ut,z,J)},j=(H,z,J,rt=!1,ft=!1)=>{const{type:ut,props:Et,ref:yt,children:wt,dynamicChildren:pt,shapeFlag:Ut,patchFlag:It,dirs:Tt,cacheIndex:zt}=H;if(It===-2&&(ft=!1),yt!=null&&(Ca(),Rp(yt,null,J,H,!0),ka()),zt!=null&&(z.renderCache[zt]=void 0),Ut&256){z.ctx.deactivate(H);return}const Ht=Ut&1&&Tt,Lt=!Wh(H);let ee;if(Lt&&(ee=Et&&Et.onVnodeBeforeUnmount)&&Br(ee,z,H),Ut&6)Ft(H.component,J,rt);else{if(Ut&128){H.suspense.unmount(J,rt);return}Ht&&pc(H,null,z,"beforeUnmount"),Ut&64?H.type.remove(H,z,J,Pt,rt):pt&&!pt.hasOnce&&(ut!==Xt||It>0&&It&64)?kt(pt,z,J,!1,!0):(ut===Xt&&It&384||!ft&&Ut&16)&&kt(wt,z,J),rt&&Z(H)}(Lt&&(ee=Et&&Et.onVnodeUnmounted)||Ht)&&Nn(()=>{ee&&Br(ee,z,H),Ht&&pc(H,null,z,"unmounted")},J)},Z=H=>{const{type:z,el:J,anchor:rt,transition:ft}=H;if(z===Xt){dt(J,rt);return}if(z===Sb){O(H);return}const ut=()=>{i(J),ft&&!ft.persisted&&ft.afterLeave&&ft.afterLeave()};if(H.shapeFlag&1&&ft&&!ft.persisted){const{leave:Et,delayLeave:yt}=ft,wt=()=>Et(J,ut);yt?yt(H.el,ut,wt):wt()}else ut()},dt=(H,z)=>{let J;for(;H!==z;)J=f(H),i(H),H=J;i(z)},Ft=(H,z,J)=>{const{bum:rt,scope:ft,job:ut,subTree:Et,um:yt,m:wt,a:pt}=H;ME(wt),ME(pt),rt&&_b(rt),ft.stop(),ut&&(ut.flags|=8,j(Et,H,z,J)),yt&&Nn(yt,z),Nn(()=>{H.isUnmounted=!0},z)},kt=(H,z,J,rt=!1,ft=!1,ut=0)=>{for(let Et=ut;Et<H.length;Et++)j(H[Et],z,J,rt,ft)},Y=H=>{if(H.shapeFlag&6)return Y(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const z=f(H.anchor||H.el),J=z&&z[Qk];return J?f(J):z};let bt=!1;const At=(H,z,J)=>{let rt;H==null?z._vnode&&(j(z._vnode,null,null,!0),rt=z._vnode.component):b(z._vnode||null,H,z,null,null,null,J),z._vnode=H,bt||(bt=!0,yE(rt),Xk(),bt=!1)},Pt={p:b,um:j,m:vt,r:Z,mt:_t,mc:S,pc:nt,pbc:L,n:Y,o:s};return{render:At,hydrate:void 0,createApp:JO(At)}}function I0({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function gc({effect:s,job:t},e){e?(s.flags|=32,t.flags|=4):(s.flags&=-33,t.flags&=-5)}function fL(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function KA(s,t,e=!1){const n=s.children,i=t.children;if(Qt(n)&&Qt(i))for(let r=0;r<n.length;r++){const o=n[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Za(i[r]),a.el=o.el),!e&&a.patchFlag!==-2&&KA(o,a)),a.type===O_&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=r+(s.type===Xt?1:0)),a.type===Ra&&!a.el&&(a.el=o.el)}}function pL(s){const t=s.slice(),e=[0];let n,i,r,o,a;const l=s.length;for(n=0;n<l;n++){const c=s[n];if(c!==0){if(i=e[e.length-1],s[i]<c){t[n]=i,e.push(n);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,s[e[a]]<c?r=a+1:o=a;c<s[e[r]]&&(r>0&&(t[n]=e[r-1]),e[r]=n)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function y2(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:y2(t)}function ME(s){if(s)for(let t=0;t<s.length;t++)s[t].flags|=8}function _2(s){if(s.placeholder)return s.placeholder;const t=s.component;return t?_2(t.subTree):null}const w2=s=>s.__isSuspense;function gL(s,t){t&&t.pendingBranch?Qt(s)?t.effects.push(...s):t.effects.push(s):TO(s)}const Xt=Symbol.for("v-fgt"),O_=Symbol.for("v-txt"),Ra=Symbol.for("v-cmt"),Sb=Symbol.for("v-stc"),Dp=[];let Ti=null;function G(s=!1){Dp.push(Ti=s?null:[])}function mL(){Dp.pop(),Ti=Dp[Dp.length-1]||null}let Zp=1;function Py(s,t=!1){Zp+=s,s<0&&Ti&&t&&(Ti.hasOnce=!0)}function A2(s){return s.dynamicChildren=Zp>0?Ti||Hh:null,mL(),Zp>0&&Ti&&Ti.push(s),s}function q(s,t,e,n,i,r){return A2(g(s,t,e,n,i,r,!0))}function qi(s,t,e,n,i){return A2(os(s,t,e,n,i,!0))}function Qp(s){return s?s.__v_isVNode===!0:!1}function Uf(s,t){return s.type===t.type&&s.key===t.key}const S2=({key:s})=>s??null,Eb=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?xs(s)||xn(s)||ae(s)?{i:Sn,r:s,k:t,f:!!e}:s:null);function g(s,t=null,e=null,n=0,i=null,r=s===Xt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&S2(t),ref:t&&Eb(t),scopeId:Kk,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Sn};return a?(JA(l,e),r&128&&s.normalize(l)):e&&(l.shapeFlag|=xs(e)?8:16),Zp>0&&!o&&Ti&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Ti.push(l),l}const os=vL;function vL(s,t=null,e=null,n=0,i=null,r=!1){if((!s||s===jO)&&(s=Ra),Qp(s)){const a=cf(s,t,!0);return e&&JA(a,e),Zp>0&&!r&&Ti&&(a.shapeFlag&6?Ti[Ti.indexOf(s)]=a:Ti.push(a)),a.patchFlag=-2,a}if(kL(s)&&(s=s.__vccOpts),t){t=bL(t);let{class:a,style:l}=t;a&&!xs(a)&&(t.class=ie(a)),Ye(l)&&(WA(l)&&!Qt(l)&&(l=Tn({},l)),t.style=gr(l))}const o=xs(s)?1:w2(s)?128:PO(s)?64:Ye(s)?4:ae(s)?2:0;return g(s,t,e,n,i,o,r,!0)}function bL(s){return s?WA(s)||f2(s)?Tn({},s):s:null}function cf(s,t,e=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=s,c=t?yL(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&S2(c),ref:t&&t.ref?e&&r?Qt(r)?r.concat(Eb(t)):[r,Eb(t)]:Eb(t):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==Xt?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&cf(s.ssContent),ssFallback:s.ssFallback&&cf(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&n&&qA(u,l.clone(u)),u}function Kt(s=" ",t=0){return os(O_,null,s,t)}function ji(s,t){const e=os(Sb,null,s);return e.staticCount=t,e}function Ot(s="",t=!1){return t?(G(),qi(Ra,null,s)):os(Ra,null,s)}function uo(s){return s==null||typeof s=="boolean"?os(Ra):Qt(s)?os(Xt,null,s.slice()):Qp(s)?Za(s):os(O_,null,String(s))}function Za(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:cf(s)}function JA(s,t){let e=0;const{shapeFlag:n}=s;if(t==null)t=null;else if(Qt(t))e=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),JA(s,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!f2(t)?t._ctx=Sn:i===3&&Sn&&(Sn.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else ae(t)?(t={default:t,_ctx:Sn},e=32):(t=String(t),n&64?(e=16,t=[Kt(t)]):e=8);s.children=t,s.shapeFlag|=e}function yL(...s){const t={};for(let e=0;e<s.length;e++){const n=s[e];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=ie([t.class,n.class]));else if(i==="style")t.style=gr([t.style,n.style]);else if(x_(i)){const r=t[i],o=n[i];o&&r!==o&&!(Qt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=n[i])}return t}function Br(s,t,e,n=null){vo(s,t,7,[e,n])}const _L=c2();let wL=0;function AL(s,t,e){const n=s.type,i=(t?t.appContext:s.appContext)||_L,r={uid:wL++,vnode:s,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new JD(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:g2(n,i),emitsOptions:u2(n,i),emit:null,emitted:null,propsDefaults:qe,inheritAttrs:n.inheritAttrs,ctx:qe,data:qe,props:qe,attrs:qe,slots:qe,refs:qe,setupState:qe,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=QO.bind(null,r),s.ce&&s.ce(r),r}let Un=null;const SL=()=>Un||Sn;let Ry,kw;{const s=k_(),t=(e,n)=>{let i;return(i=s[e])||(i=s[e]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Ry=t("__VUE_INSTANCE_SETTERS__",e=>Un=e),kw=t("__VUE_SSR_SETTERS__",e=>tg=e)}const Gm=s=>{const t=Un;return Ry(s),s.scope.on(),()=>{s.scope.off(),Ry(t)}},DE=()=>{Un&&Un.scope.off(),Ry(null)};function E2(s){return s.vnode.shapeFlag&4}let tg=!1;function EL(s,t=!1,e=!1){t&&kw(t);const{props:n,children:i}=s.vnode,r=E2(s);rL(s,n,r,t),cL(s,i,e||t);const o=r?xL(s,t):void 0;return t&&kw(!1),o}function xL(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,zO);const{setup:n}=e;if(n){Ca();const i=s.setupContext=n.length>1?CL(s):null,r=Gm(s),o=Wm(n,s,0,[s.props,i]),a=_k(o);if(ka(),r(),(a||s.sp)&&!Wh(s)&&s2(s),a){if(o.then(DE,DE),t)return o.then(l=>{OE(s,l)}).catch(l=>{P_(l,s,0)});s.asyncDep=o}else OE(s,o)}else x2(s)}function OE(s,t,e){ae(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:Ye(t)&&(s.setupState=Wk(t)),x2(s)}function x2(s,t,e){const n=s.type;s.render||(s.render=n.render||po);{const i=Gm(s);Ca();try{WO(s)}finally{ka(),i()}}}const TL={get(s,t){return _n(s,"get",""),s[t]}};function CL(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,TL),slots:s.slots,emit:s.emit,expose:t}}function L_(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(Wk(vO(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in Mp)return Mp[e](s)},has(t,e){return e in t||e in Mp}})):s.proxy}function kL(s){return ae(s)&&"__vccOpts"in s}const St=(s,t)=>wO(s,t,tg);function T2(s,t,e){try{Py(-1);const n=arguments.length;return n===2?Ye(t)&&!Qt(t)?Qp(t)?os(s,null,[t]):os(s,t):os(s,null,t):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Qp(e)&&(e=[e]),os(s,t,e))}finally{Py(1)}}const IL="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Iw;const LE=typeof window<"u"&&window.trustedTypes;if(LE)try{Iw=LE.createPolicy("vue",{createHTML:s=>s})}catch{}const C2=Iw?s=>Iw.createHTML(s):s=>s,PL="http://www.w3.org/2000/svg",RL="http://www.w3.org/1998/Math/MathML",Lo=typeof document<"u"?document:null,NE=Lo&&Lo.createElement("template"),ML={insert:(s,t,e)=>{t.insertBefore(s,e||null)},remove:s=>{const t=s.parentNode;t&&t.removeChild(s)},createElement:(s,t,e,n)=>{const i=t==="svg"?Lo.createElementNS(PL,s):t==="mathml"?Lo.createElementNS(RL,s):e?Lo.createElement(s,{is:e}):Lo.createElement(s);return s==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:s=>Lo.createTextNode(s),createComment:s=>Lo.createComment(s),setText:(s,t)=>{s.nodeValue=t},setElementText:(s,t)=>{s.textContent=t},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Lo.querySelector(s),setScopeId(s,t){s.setAttribute(t,"")},insertStaticContent(s,t,e,n,i,r){const o=e?e.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===r||!(i=i.nextSibling)););else{NE.innerHTML=C2(n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s);const a=NE.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},DL=Symbol("_vtc");function OL(s,t,e){const n=s[DL];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?s.removeAttribute("class"):e?s.setAttribute("class",t):s.className=t}const FE=Symbol("_vod"),LL=Symbol("_vsh"),NL=Symbol(""),FL=/(?:^|;)\s*display\s*:/;function BL(s,t,e){const n=s.style,i=xs(e);let r=!1;if(e&&!i){if(t)if(xs(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&xb(n,a,"")}else for(const o in t)e[o]==null&&xb(n,o,"");for(const o in e)o==="display"&&(r=!0),xb(n,o,e[o])}else if(i){if(t!==e){const o=n[NL];o&&(e+=";"+o),n.cssText=e,r=FL.test(e)}}else t&&s.removeAttribute("style");FE in s&&(s[FE]=r?n.display:"",s[LL]&&(n.display="none"))}const BE=/\s*!important$/;function xb(s,t,e){if(Qt(e))e.forEach(n=>xb(s,t,n));else if(e==null&&(e=""),t.startsWith("--"))s.setProperty(t,e);else{const n=$L(s,t);BE.test(e)?s.setProperty(Ql(n),e.replace(BE,""),"important"):s[n]=e}}const $E=["Webkit","Moz","ms"],P0={};function $L(s,t){const e=P0[t];if(e)return e;let n=Gl(t);if(n!=="filter"&&n in s)return P0[t]=n;n=Sk(n);for(let i=0;i<$E.length;i++){const r=$E[i]+n;if(r in s)return P0[t]=r}return t}const UE="http://www.w3.org/1999/xlink";function VE(s,t,e,n,i,r=YD(t)){n&&t.startsWith("xlink:")?e==null?s.removeAttributeNS(UE,t.slice(6,t.length)):s.setAttributeNS(UE,t,e):e==null||r&&!xk(e)?s.removeAttribute(t):s.setAttribute(t,r?"":Tr(e)?String(e):e)}function HE(s,t,e,n,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(s[t]=t==="innerHTML"?C2(e):e);return}const r=s.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?s.getAttribute("value")||"":s.value,l=e==null?s.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in s))&&(s.value=l),e==null&&s.removeAttribute(t),s._value=e;return}let o=!1;if(e===""||e==null){const a=typeof s[t];a==="boolean"?e=xk(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{s[t]=e}catch{}o&&s.removeAttribute(i||t)}function fa(s,t,e,n){s.addEventListener(t,e,n)}function UL(s,t,e,n){s.removeEventListener(t,e,n)}const jE=Symbol("_vei");function VL(s,t,e,n,i=null){const r=s[jE]||(s[jE]={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=HL(t);if(n){const c=r[t]=WL(n,i);fa(s,a,c,l)}else o&&(UL(s,a,o,l),r[t]=void 0)}}const zE=/(?:Once|Passive|Capture)$/;function HL(s){let t;if(zE.test(s)){t={};let n;for(;n=s.match(zE);)s=s.slice(0,s.length-n[0].length),t[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Ql(s.slice(2)),t]}let R0=0;const jL=Promise.resolve(),zL=()=>R0||(jL.then(()=>R0=0),R0=Date.now());function WL(s,t){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;vo(GL(n,e.value),t,5,[n])};return e.value=s,e.attached=zL(),e}function GL(s,t){if(Qt(t)){const e=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{e.call(s),s._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const WE=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,qL=(s,t,e,n,i,r)=>{const o=i==="svg";t==="class"?OL(s,n,o):t==="style"?BL(s,e,n):x_(t)?LA(t)||VL(s,t,e,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):XL(s,t,n,o))?(HE(s,t,n),!s.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&VE(s,t,n,o,r,t!=="value")):s._isVueCE&&(/[A-Z]/.test(t)||!xs(n))?HE(s,Gl(t),n,r,t):(t==="true-value"?s._trueValue=n:t==="false-value"&&(s._falseValue=n),VE(s,t,n,o))};function XL(s,t,e,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in s&&WE(t)&&ae(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&s.tagName==="IFRAME"||t==="form"||t==="list"&&s.tagName==="INPUT"||t==="type"&&s.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=s.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return WE(t)&&xs(e)?!1:t in s}const ql=s=>{const t=s.props["onUpdate:modelValue"]||!1;return Qt(t)?e=>_b(t,e):t};function YL(s){s.target.composing=!0}function GE(s){const t=s.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Wi=Symbol("_assign");function qE(s,t,e){return t&&(s=s.trim()),e&&(s=C_(s)),s}const Ze={created(s,{modifiers:{lazy:t,trim:e,number:n}},i){s[Wi]=ql(i);const r=n||i.props&&i.props.type==="number";fa(s,t?"change":"input",o=>{o.target.composing||s[Wi](qE(s.value,e,r))}),(e||r)&&fa(s,"change",()=>{s.value=qE(s.value,e,r)}),t||(fa(s,"compositionstart",YL),fa(s,"compositionend",GE),fa(s,"change",GE))},mounted(s,{value:t}){s.value=t??""},beforeUpdate(s,{value:t,oldValue:e,modifiers:{lazy:n,trim:i,number:r}},o){if(s[Wi]=ql(o),s.composing)return;const a=(r||s.type==="number")&&!/^0\d/.test(s.value)?C_(s.value):s.value,l=t??"";a!==l&&(document.activeElement===s&&s.type!=="range"&&(n&&t===e||i&&s.value.trim()===l)||(s.value=l))}},fr={deep:!0,created(s,t,e){s[Wi]=ql(e),fa(s,"change",()=>{const n=s._modelValue,i=uf(s),r=s.checked,o=s[Wi];if(Qt(n)){const a=BA(n,i),l=a!==-1;if(r&&!l)o(n.concat(i));else if(!r&&l){const c=[...n];c.splice(a,1),o(c)}}else if(_f(n)){const a=new Set(n);r?a.add(i):a.delete(i),o(a)}else o(k2(s,r))})},mounted:XE,beforeUpdate(s,t,e){s[Wi]=ql(e),XE(s,t,e)}};function XE(s,{value:t,oldValue:e},n){s._modelValue=t;let i;if(Qt(t))i=BA(t,n.props.value)>-1;else if(_f(t))i=t.has(n.props.value);else{if(t===e)return;i=Gu(t,k2(s,!0))}s.checked!==i&&(s.checked=i)}const KL={created(s,{value:t},e){s.checked=Gu(t,e.props.value),s[Wi]=ql(e),fa(s,"change",()=>{s[Wi](uf(s))})},beforeUpdate(s,{value:t,oldValue:e},n){s[Wi]=ql(n),t!==e&&(s.checked=Gu(t,n.props.value))}},Ar={deep:!0,created(s,{value:t,modifiers:{number:e}},n){const i=_f(t);fa(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>e?C_(uf(o)):uf(o));s[Wi](s.multiple?i?new Set(r):r:r[0]),s._assigning=!0,da(()=>{s._assigning=!1})}),s[Wi]=ql(n)},mounted(s,{value:t}){YE(s,t)},beforeUpdate(s,t,e){s[Wi]=ql(e)},updated(s,{value:t}){s._assigning||YE(s,t)}};function YE(s,t){const e=s.multiple,n=Qt(t);if(!(e&&!n&&!_f(t))){for(let i=0,r=s.options.length;i<r;i++){const o=s.options[i],a=uf(o);if(e)if(n){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=BA(t,a)>-1}else o.selected=t.has(a);else if(Gu(uf(o),t)){s.selectedIndex!==i&&(s.selectedIndex=i);return}}!e&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function uf(s){return"_value"in s?s._value:s.value}function k2(s,t){const e=t?"_trueValue":"_falseValue";return e in s?s[e]:t}const Pw={created(s,t,e){Xv(s,t,e,null,"created")},mounted(s,t,e){Xv(s,t,e,null,"mounted")},beforeUpdate(s,t,e,n){Xv(s,t,e,n,"beforeUpdate")},updated(s,t,e,n){Xv(s,t,e,n,"updated")}};function JL(s,t){switch(s){case"SELECT":return Ar;case"TEXTAREA":return Ze;default:switch(t){case"checkbox":return fr;case"radio":return KL;default:return Ze}}}function Xv(s,t,e,n,i){const o=JL(s.tagName,e.props&&e.props.type)[i];o&&o(s,t,e,n)}const ZL=["ctrl","shift","alt","meta"],QL={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,t)=>ZL.some(e=>s[`${e}Key`]&&!t.includes(e))},on=(s,t)=>{const e=s._withMods||(s._withMods={}),n=t.join(".");return e[n]||(e[n]=((i,...r)=>{for(let o=0;o<t.length;o++){const a=QL[t[o]];if(a&&a(i,t))return}return s(i,...r)}))},tN={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},eN=(s,t)=>{const e=s._withKeys||(s._withKeys={}),n=t.join(".");return e[n]||(e[n]=(i=>{if(!("key"in i))return;const r=Ql(i.key);if(t.some(o=>o===r||tN[o]===r))return s(i)}))},sN=Tn({patchProp:qL},ML);let KE;function nN(){return KE||(KE=hL(sN))}const iN=((...s)=>{const t=nN().createApp(...s),{mount:e}=t;return t.mount=n=>{const i=oN(n);if(!i)return;const r=t._component;!ae(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,rN(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t});function rN(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function oN(s){return xs(s)?document.querySelector(s):s}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Rh=typeof document<"u";function I2(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function aN(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&I2(s.default)}const Le=Object.assign;function M0(s,t){const e={};for(const n in t){const i=t[n];e[n]=kr(i)?i.map(s):s(i)}return e}const Op=()=>{},kr=Array.isArray;function JE(s,t){const e={};for(const n in s)e[n]=n in t?t[n]:s[n];return e}const P2=/#/g,lN=/&/g,cN=/\//g,uN=/=/g,hN=/\?/g,R2=/\+/g,dN=/%5B/g,fN=/%5D/g,M2=/%5E/g,pN=/%60/g,D2=/%7B/g,gN=/%7C/g,O2=/%7D/g,mN=/%20/g;function ZA(s){return s==null?"":encodeURI(""+s).replace(gN,"|").replace(dN,"[").replace(fN,"]")}function vN(s){return ZA(s).replace(D2,"{").replace(O2,"}").replace(M2,"^")}function Rw(s){return ZA(s).replace(R2,"%2B").replace(mN,"+").replace(P2,"%23").replace(lN,"%26").replace(pN,"`").replace(D2,"{").replace(O2,"}").replace(M2,"^")}function bN(s){return Rw(s).replace(uN,"%3D")}function yN(s){return ZA(s).replace(P2,"%23").replace(hN,"%3F")}function _N(s){return yN(s).replace(cN,"%2F")}function eg(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const wN=/\/$/,AN=s=>s.replace(wN,"");function D0(s,t,e="/"){let n,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(n=t.slice(0,l),r=t.slice(l,a>0?a:t.length),i=s(r.slice(1))),a>=0&&(n=n||t.slice(0,a),o=t.slice(a,t.length)),n=TN(n??t,e),{fullPath:n+r+o,path:n,query:i,hash:eg(o)}}function SN(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function ZE(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function EN(s,t,e){const n=t.matched.length-1,i=e.matched.length-1;return n>-1&&n===i&&hf(t.matched[n],e.matched[i])&&L2(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function hf(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function L2(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(var e in s)if(!xN(s[e],t[e]))return!1;return!0}function xN(s,t){return kr(s)?QE(s,t):kr(t)?QE(t,s):(s==null?void 0:s.valueOf())===(t==null?void 0:t.valueOf())}function QE(s,t){return kr(t)?s.length===t.length&&s.every((e,n)=>e===t[n]):s.length===1&&s[0]===t}function TN(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),n=s.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let r=e.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+n.slice(o).join("/")}const qa={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Mw=(function(s){return s.pop="pop",s.push="push",s})({}),O0=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function CN(s){if(!s)if(Rh){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),AN(s)}const kN=/^[^#]+#/;function IN(s,t){return s.replace(kN,"#")+t}function PN(s,t){const e=document.documentElement.getBoundingClientRect(),n=s.getBoundingClientRect();return{behavior:t.behavior,left:n.left-e.left-(t.left||0),top:n.top-e.top-(t.top||0)}}const N_=()=>({left:window.scrollX,top:window.scrollY});function RN(s){let t;if("el"in s){const e=s.el,n=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=PN(i,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function tx(s,t){return(history.state?history.state.position-t:-1)+s}const Dw=new Map;function MN(s,t){Dw.set(s,t)}function DN(s){const t=Dw.get(s);return Dw.delete(s),t}function ON(s){return typeof s=="string"||s&&typeof s=="object"}function N2(s){return typeof s=="string"||typeof s=="symbol"}let vs=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const F2=Symbol("");vs.MATCHER_NOT_FOUND+"",vs.NAVIGATION_GUARD_REDIRECT+"",vs.NAVIGATION_ABORTED+"",vs.NAVIGATION_CANCELLED+"",vs.NAVIGATION_DUPLICATED+"";function df(s,t){return Le(new Error,{type:s,[F2]:!0},t)}function ko(s,t){return s instanceof Error&&F2 in s&&(t==null||!!(s.type&t))}const LN=["params","query","hash"];function NN(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const t={};for(const e of LN)e in s&&(t[e]=s[e]);return JSON.stringify(t,null,2)}function FN(s){const t={};if(s===""||s==="?")return t;const e=(s[0]==="?"?s.slice(1):s).split("&");for(let n=0;n<e.length;++n){const i=e[n].replace(R2," "),r=i.indexOf("="),o=eg(r<0?i:i.slice(0,r)),a=r<0?null:eg(i.slice(r+1));if(o in t){let l=t[o];kr(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function ex(s){let t="";for(let e in s){const n=s[e];if(e=bN(e),n==null){n!==void 0&&(t+=(t.length?"&":"")+e);continue}(kr(n)?n.map(i=>i&&Rw(i)):[n&&Rw(n)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+e,i!=null&&(t+="="+i))})}return t}function BN(s){const t={};for(const e in s){const n=s[e];n!==void 0&&(t[e]=kr(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const $N=Symbol(""),sx=Symbol(""),F_=Symbol(""),QA=Symbol(""),Ow=Symbol("");function Vf(){let s=[];function t(n){return s.push(n),()=>{const i=s.indexOf(n);i>-1&&s.splice(i,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function Qa(s,t,e,n,i,r=o=>o()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(df(vs.NAVIGATION_ABORTED,{from:e,to:t})):f instanceof Error?l(f):ON(f)?l(df(vs.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=r(()=>s.call(n&&n.instances[i],t,e,c));let d=Promise.resolve(u);s.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function L0(s,t,e,n,i=r=>r()){const r=[];for(const o of s)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(I2(l)){const c=(l.__vccOpts||l)[t];c&&r.push(Qa(c,e,n,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=aN(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[t];return f&&Qa(f,e,n,o,a,i)()}))}}return r}function UN(s,t){const e=[],n=[],i=[],r=Math.max(t.matched.length,s.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(s.matched.find(c=>hf(c,a))?n.push(a):e.push(a));const l=s.matched[o];l&&(t.matched.find(c=>hf(c,l))||i.push(l))}return[e,n,i]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let VN=()=>location.protocol+"//"+location.host;function B2(s,t){const{pathname:e,search:n,hash:i}=t,r=s.indexOf("#");if(r>-1){let o=i.includes(s.slice(r))?s.slice(r).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),ZE(a,"")}return ZE(e,s)+n+i}function HN(s,t,e,n){let i=[],r=[],o=null;const a=({state:f})=>{const m=B2(s,location),v=e.value,b=t.value;let y=0;if(f){if(e.value=m,t.value=f,o&&o===v){o=null;return}y=b?f.position-b.position:0}else n(m);i.forEach(w=>{w(e.value,v,{delta:y,type:Mw.pop,direction:y?y>0?O0.forward:O0.back:O0.unknown})})};function l(){o=e.value}function c(f){i.push(f);const m=()=>{const v=i.indexOf(f);v>-1&&i.splice(v,1)};return r.push(m),m}function u(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Le({},f.state,{scroll:N_()}),"")}}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:d}}function nx(s,t,e,n=!1,i=!1){return{back:s,current:t,forward:e,replaced:n,position:window.history.length,scroll:i?N_():null}}function jN(s){const{history:t,location:e}=window,n={value:B2(s,e)},i={value:t.state};i.value||r(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=s.indexOf("#"),f=d>-1?(e.host&&document.querySelector("base")?s:s.slice(d))+l:VN()+s+l;try{t[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(m){console.error(m),e[u?"replace":"assign"](f)}}function o(l,c){r(l,Le({},t.state,nx(i.value.back,l,i.value.forward,!0),c,{position:i.value.position}),!0),n.value=l}function a(l,c){const u=Le({},i.value,t.state,{forward:l,scroll:N_()});r(u.current,u,!0),r(l,Le({},nx(n.value,l,null),{position:u.position+1},c),!1),n.value=l}return{location:n,state:i,push:a,replace:o}}function zN(s){s=CN(s);const t=jN(s),e=HN(s,t.state,t.location,t.replace);function n(r,o=!0){o||e.pauseListeners(),history.go(r)}const i=Le({location:"",base:s,go:n,createHref:IN.bind(null,s)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Pc=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var Ns=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})(Ns||{});const WN={type:Pc.Static,value:""},GN=/[a-zA-Z0-9_]/;function qN(s){if(!s)return[[]];if(s==="/")return[[WN]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(m){throw new Error(`ERR (${e})/"${c}": ${m}`)}let e=Ns.Static,n=e;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(e===Ns.Static?r.push({type:Pc.Static,value:c}):e===Ns.Param||e===Ns.ParamRegExp||e===Ns.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Pc.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<s.length;){if(l=s[a++],l==="\\"&&e!==Ns.ParamRegExp){n=e,e=Ns.EscapeNext;continue}switch(e){case Ns.Static:l==="/"?(c&&d(),o()):l===":"?(d(),e=Ns.Param):f();break;case Ns.EscapeNext:f(),e=n;break;case Ns.Param:l==="("?e=Ns.ParamRegExp:GN.test(l)?f():(d(),e=Ns.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Ns.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:e=Ns.ParamRegExpEnd:u+=l;break;case Ns.ParamRegExpEnd:d(),e=Ns.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===Ns.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}const ix="[^/]+?",XN={sensitive:!1,strict:!1,start:!0,end:!0};var Fn=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})(Fn||{});const YN=/[.+*?^${}()[\]/\\]/g;function KN(s,t){const e=Le({},XN,t),n=[];let i=e.start?"^":"";const r=[];for(const c of s){const u=c.length?[]:[Fn.Root];e.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const f=c[d];let m=Fn.Segment+(e.sensitive?Fn.BonusCaseSensitive:0);if(f.type===Pc.Static)d||(i+="/"),i+=f.value.replace(YN,"\\$&"),m+=Fn.Static;else if(f.type===Pc.Param){const{value:v,repeatable:b,optional:y,regexp:w}=f;r.push({name:v,repeatable:b,optional:y});const k=w||ix;if(k!==ix){m+=Fn.BonusCustomRegExp;try{`${k}`}catch(O){throw new Error(`Invalid custom RegExp for param "${v}" (${k}): `+O.message)}}let M=b?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;d||(M=y&&c.length<2?`(?:/${M})`:"/"+M),y&&(M+="?"),i+=M,m+=Fn.Dynamic,y&&(m+=Fn.BonusOptional),b&&(m+=Fn.BonusRepeatable),k===".*"&&(m+=Fn.BonusWildcard)}u.push(m)}n.push(u)}if(e.strict&&e.end){const c=n.length-1;n[c][n[c].length-1]+=Fn.BonusStrict}e.strict||(i+="/?"),e.end?i+="$":e.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,e.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const m=u[f]||"",v=r[f-1];d[v.name]=m&&v.repeatable?m.split("/"):m}return d}function l(c){let u="",d=!1;for(const f of s){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const m of f)if(m.type===Pc.Static)u+=m.value;else if(m.type===Pc.Param){const{value:v,repeatable:b,optional:y}=m,w=v in c?c[v]:"";if(kr(w)&&!b)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const k=kr(w)?w.join("/"):w;if(!k)if(y)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);u+=k}}return u||"/"}return{re:o,score:n,keys:r,parse:a,stringify:l}}function JN(s,t){let e=0;for(;e<s.length&&e<t.length;){const n=t[e]-s[e];if(n)return n;e++}return s.length<t.length?s.length===1&&s[0]===Fn.Static+Fn.Segment?-1:1:s.length>t.length?t.length===1&&t[0]===Fn.Static+Fn.Segment?1:-1:0}function $2(s,t){let e=0;const n=s.score,i=t.score;for(;e<n.length&&e<i.length;){const r=JN(n[e],i[e]);if(r)return r;e++}if(Math.abs(i.length-n.length)===1){if(rx(n))return 1;if(rx(i))return-1}return i.length-n.length}function rx(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const ZN={strict:!1,end:!0,sensitive:!1};function QN(s,t,e){const n=KN(qN(s.path),e),i=Le(n,{record:s,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function tF(s,t){const e=[],n=new Map;t=JE(ZN,t);function i(d){return n.get(d)}function r(d,f,m){const v=!m,b=ax(d);b.aliasOf=m&&m.record;const y=JE(t,d),w=[b];if("alias"in d){const O=typeof d.alias=="string"?[d.alias]:d.alias;for(const B of O)w.push(ax(Le({},b,{components:m?m.record.components:b.components,path:B,aliasOf:m?m.record:b})))}let k,M;for(const O of w){const{path:B}=O;if(f&&B[0]!=="/"){const V=f.record.path,A=V[V.length-1]==="/"?"":"/";O.path=f.record.path+(B&&A+B)}if(k=QN(O,f,y),m?m.alias.push(k):(M=M||k,M!==k&&M.alias.push(k),v&&d.name&&!lx(k)&&o(d.name)),U2(k)&&l(k),b.children){const V=b.children;for(let A=0;A<V.length;A++)r(V[A],k,m&&m.children[A])}m=m||k}return M?()=>{o(M)}:Op}function o(d){if(N2(d)){const f=n.get(d);f&&(n.delete(d),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(d);f>-1&&(e.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return e}function l(d){const f=nF(d,e);e.splice(f,0,d),d.record.name&&!lx(d)&&n.set(d.record.name,d)}function c(d,f){let m,v={},b,y;if("name"in d&&d.name){if(m=n.get(d.name),!m)throw df(vs.MATCHER_NOT_FOUND,{location:d});y=m.record.name,v=Le(ox(f.params,m.keys.filter(M=>!M.optional).concat(m.parent?m.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),d.params&&ox(d.params,m.keys.map(M=>M.name))),b=m.stringify(v)}else if(d.path!=null)b=d.path,m=e.find(M=>M.re.test(b)),m&&(v=m.parse(b),y=m.record.name);else{if(m=f.name?n.get(f.name):e.find(M=>M.re.test(f.path)),!m)throw df(vs.MATCHER_NOT_FOUND,{location:d,currentLocation:f});y=m.record.name,v=Le({},f.params,d.params),b=m.stringify(v)}const w=[];let k=m;for(;k;)w.unshift(k.record),k=k.parent;return{name:y,path:b,params:v,matched:w,meta:sF(w)}}s.forEach(d=>r(d));function u(){e.length=0,n.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function ox(s,t){const e={};for(const n of t)n in s&&(e[n]=s[n]);return e}function ax(s){const t={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:eF(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function eF(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const n in s.components)t[n]=typeof e=="object"?e[n]:e;return t}function lx(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function sF(s){return s.reduce((t,e)=>Le(t,e.meta),{})}function nF(s,t){let e=0,n=t.length;for(;e!==n;){const r=e+n>>1;$2(s,t[r])<0?n=r:e=r+1}const i=iF(s);return i&&(n=t.lastIndexOf(i,n-1)),n}function iF(s){let t=s;for(;t=t.parent;)if(U2(t)&&$2(s,t)===0)return t}function U2({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function cx(s){const t=wr(F_),e=wr(QA),n=St(()=>{const l=ve(s.to);return t.resolve(l)}),i=St(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=e.matched;if(!u||!d.length)return-1;const f=d.findIndex(hf.bind(null,u));if(f>-1)return f;const m=ux(l[c-2]);return c>1&&ux(u)===m&&d[d.length-1].path!==m?d.findIndex(hf.bind(null,l[c-2])):f}),r=St(()=>i.value>-1&&lF(e.params,n.value.params)),o=St(()=>i.value>-1&&i.value===e.matched.length-1&&L2(e.params,n.value.params));function a(l={}){if(aF(l)){const c=t[ve(s.replace)?"replace":"push"](ve(s.to)).catch(Op);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:St(()=>n.value.href),isActive:r,isExactActive:o,navigate:a}}function rF(s){return s.length===1?s[0]:s}const oF=ks({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:cx,setup(s,{slots:t}){const e=Ia(cx(s)),{options:n}=wr(F_),i=St(()=>({[hx(s.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[hx(s.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&rF(t.default(e));return s.custom?r:T2("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},r)}}}),qu=oF;function aF(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function lF(s,t){for(const e in t){const n=t[e],i=s[e];if(typeof n=="string"){if(n!==i)return!1}else if(!kr(i)||i.length!==n.length||n.some((r,o)=>r.valueOf()!==i[o].valueOf()))return!1}return!0}function ux(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const hx=(s,t,e)=>s??t??e,cF=ks({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const n=wr(Ow),i=St(()=>s.route||n.value),r=wr(sx,0),o=St(()=>{let c=ve(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=St(()=>i.value.matched[o.value]);wb(sx,St(()=>o.value+1)),wb($N,a),wb(Ow,i);const l=ct();return bs(()=>[l.value,a.value,s.name],([c,u,d],[f,m,v])=>{u&&(u.instances[d]=c,m&&m!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!hf(u,m)||!f)&&(u.enterCallbacks[d]||[]).forEach(b=>b(c))},{flush:"post"}),()=>{const c=i.value,u=s.name,d=a.value,f=d&&d.components[u];if(!f)return dx(e.default,{Component:f,route:c});const m=d.props[u],v=m?m===!0?c.params:typeof m=="function"?m(c):m:null,y=T2(f,Le({},v,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return dx(e.default,{Component:y,route:c})||y}}});function dx(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const tS=cF;function uF(s){const t=tF(s.routes,s),e=s.parseQuery||FN,n=s.stringifyQuery||ex,i=s.history,r=Vf(),o=Vf(),a=Vf(),l=jk(qa);let c=qa;Rh&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=M0.bind(null,Y=>""+Y),d=M0.bind(null,_N),f=M0.bind(null,eg);function m(Y,bt){let At,Pt;return N2(Y)?(At=t.getRecordMatcher(Y),Pt=bt):Pt=Y,t.addRoute(Pt,At)}function v(Y){const bt=t.getRecordMatcher(Y);bt&&t.removeRoute(bt)}function b(){return t.getRoutes().map(Y=>Y.record)}function y(Y){return!!t.getRecordMatcher(Y)}function w(Y,bt){if(bt=Le({},bt||l.value),typeof Y=="string"){const J=D0(e,Y,bt.path),rt=t.resolve({path:J.path},bt),ft=i.createHref(J.fullPath);return Le(J,rt,{params:f(rt.params),hash:eg(J.hash),redirectedFrom:void 0,href:ft})}let At;if(Y.path!=null)At=Le({},Y,{path:D0(e,Y.path,bt.path).path});else{const J=Le({},Y.params);for(const rt in J)J[rt]==null&&delete J[rt];At=Le({},Y,{params:d(J)}),bt.params=d(bt.params)}const Pt=t.resolve(At,bt),Yt=Y.hash||"";Pt.params=u(f(Pt.params));const H=SN(n,Le({},Y,{hash:vN(Yt),path:Pt.path})),z=i.createHref(H);return Le({fullPath:H,hash:Yt,query:n===ex?BN(Y.query):Y.query||{}},Pt,{redirectedFrom:void 0,href:z})}function k(Y){return typeof Y=="string"?D0(e,Y,l.value.path):Le({},Y)}function M(Y,bt){if(c!==Y)return df(vs.NAVIGATION_CANCELLED,{from:bt,to:Y})}function O(Y){return A(Y)}function B(Y){return O(Le(k(Y),{replace:!0}))}function V(Y,bt){const At=Y.matched[Y.matched.length-1];if(At&&At.redirect){const{redirect:Pt}=At;let Yt=typeof Pt=="function"?Pt(Y,bt):Pt;return typeof Yt=="string"&&(Yt=Yt.includes("?")||Yt.includes("#")?Yt=k(Yt):{path:Yt},Yt.params={}),Le({query:Y.query,hash:Y.hash,params:Yt.path!=null?{}:Y.params},Yt)}}function A(Y,bt){const At=c=w(Y),Pt=l.value,Yt=Y.state,H=Y.force,z=Y.replace===!0,J=V(At,Pt);if(J)return A(Le(k(J),{state:typeof J=="object"?Le({},Yt,J.state):Yt,force:H,replace:z}),bt||At);const rt=At;rt.redirectedFrom=bt;let ft;return!H&&EN(n,Pt,At)&&(ft=df(vs.NAVIGATION_DUPLICATED,{to:rt,from:Pt}),vt(Pt,Pt,!0,!1)),(ft?Promise.resolve(ft):L(rt,Pt)).catch(ut=>ko(ut)?ko(ut,vs.NAVIGATION_GUARD_REDIRECT)?ut:it(ut):nt(ut,rt,Pt)).then(ut=>{if(ut){if(ko(ut,vs.NAVIGATION_GUARD_REDIRECT))return A(Le({replace:z},k(ut.to),{state:typeof ut.to=="object"?Le({},Yt,ut.to.state):Yt,force:H}),bt||rt)}else ut=$(rt,Pt,!0,z,Yt);return P(rt,Pt,ut),ut})}function S(Y,bt){const At=M(Y,bt);return At?Promise.reject(At):Promise.resolve()}function I(Y){const bt=dt.values().next().value;return bt&&typeof bt.runWithContext=="function"?bt.runWithContext(Y):Y()}function L(Y,bt){let At;const[Pt,Yt,H]=UN(Y,bt);At=L0(Pt.reverse(),"beforeRouteLeave",Y,bt);for(const J of Pt)J.leaveGuards.forEach(rt=>{At.push(Qa(rt,Y,bt))});const z=S.bind(null,Y,bt);return At.push(z),kt(At).then(()=>{At=[];for(const J of r.list())At.push(Qa(J,Y,bt));return At.push(z),kt(At)}).then(()=>{At=L0(Yt,"beforeRouteUpdate",Y,bt);for(const J of Yt)J.updateGuards.forEach(rt=>{At.push(Qa(rt,Y,bt))});return At.push(z),kt(At)}).then(()=>{At=[];for(const J of H)if(J.beforeEnter)if(kr(J.beforeEnter))for(const rt of J.beforeEnter)At.push(Qa(rt,Y,bt));else At.push(Qa(J.beforeEnter,Y,bt));return At.push(z),kt(At)}).then(()=>(Y.matched.forEach(J=>J.enterCallbacks={}),At=L0(H,"beforeRouteEnter",Y,bt,I),At.push(z),kt(At))).then(()=>{At=[];for(const J of o.list())At.push(Qa(J,Y,bt));return At.push(z),kt(At)}).catch(J=>ko(J,vs.NAVIGATION_CANCELLED)?J:Promise.reject(J))}function P(Y,bt,At){a.list().forEach(Pt=>I(()=>Pt(Y,bt,At)))}function $(Y,bt,At,Pt,Yt){const H=M(Y,bt);if(H)return H;const z=bt===qa,J=Rh?history.state:{};At&&(Pt||z?i.replace(Y.fullPath,Le({scroll:z&&J&&J.scroll},Yt)):i.push(Y.fullPath,Yt)),l.value=Y,vt(Y,bt,At,z),it()}let N;function _t(){N||(N=i.listen((Y,bt,At)=>{if(!Ft.listening)return;const Pt=w(Y),Yt=V(Pt,Ft.currentRoute.value);if(Yt){A(Le(Yt,{replace:!0,force:!0}),Pt).catch(Op);return}c=Pt;const H=l.value;Rh&&MN(tx(H.fullPath,At.delta),N_()),L(Pt,H).catch(z=>ko(z,vs.NAVIGATION_ABORTED|vs.NAVIGATION_CANCELLED)?z:ko(z,vs.NAVIGATION_GUARD_REDIRECT)?(A(Le(k(z.to),{force:!0}),Pt).then(J=>{ko(J,vs.NAVIGATION_ABORTED|vs.NAVIGATION_DUPLICATED)&&!At.delta&&At.type===Mw.pop&&i.go(-1,!1)}).catch(Op),Promise.reject()):(At.delta&&i.go(-At.delta,!1),nt(z,Pt,H))).then(z=>{z=z||$(Pt,H,!1),z&&(At.delta&&!ko(z,vs.NAVIGATION_CANCELLED)?i.go(-At.delta,!1):At.type===Mw.pop&&ko(z,vs.NAVIGATION_ABORTED|vs.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),P(Pt,H,z)}).catch(Op)}))}let xt=Vf(),tt=Vf(),X;function nt(Y,bt,At){it(Y);const Pt=tt.list();return Pt.length?Pt.forEach(Yt=>Yt(Y,bt,At)):console.error(Y),Promise.reject(Y)}function U(){return X&&l.value!==qa?Promise.resolve():new Promise((Y,bt)=>{xt.add([Y,bt])})}function it(Y){return X||(X=!Y,_t(),xt.list().forEach(([bt,At])=>Y?At(Y):bt()),xt.reset()),Y}function vt(Y,bt,At,Pt){const{scrollBehavior:Yt}=s;if(!Rh||!Yt)return Promise.resolve();const H=!At&&DN(tx(Y.fullPath,0))||(Pt||!At)&&history.state&&history.state.scroll||null;return da().then(()=>Yt(Y,bt,H)).then(z=>z&&RN(z)).catch(z=>nt(z,Y,bt))}const j=Y=>i.go(Y);let Z;const dt=new Set,Ft={currentRoute:l,listening:!0,addRoute:m,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:y,getRoutes:b,resolve:w,options:s,push:O,replace:B,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:tt.add,isReady:U,install(Y){Y.component("RouterLink",qu),Y.component("RouterView",tS),Y.config.globalProperties.$router=Ft,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(l)}),Rh&&!Z&&l.value===qa&&(Z=!0,O(i.location).catch(Pt=>{}));const bt={};for(const Pt in qa)Object.defineProperty(bt,Pt,{get:()=>l.value[Pt],enumerable:!0});Y.provide(F_,Ft),Y.provide(QA,Hk(bt)),Y.provide(Ow,l);const At=Y.unmount;dt.add(Y),Y.unmount=function(){dt.delete(Y),dt.size<1&&(c=qa,N&&N(),N=null,l.value=qa,Z=!1,X=!1),At()}}};function kt(Y){return Y.reduce((bt,At)=>bt.then(()=>I(At)),Promise.resolve())}return Ft}function wf(){return wr(F_)}function V2(s){return wr(QA)}const hF=ks({__name:"App",setup(s){return(t,e)=>(G(),qi(ve(tS)))}}),js=(s,t)=>{const e=s.__vccOpts||s;for(const[n,i]of t)e[n]=i;return e},dF={},fF={class:"auth-shell"},pF={class:"auth-grid"},gF={class:"auth-left"},mF={class:"auth-right"};function vF(s,t){return G(),q("main",fF,[t[0]||(t[0]=g("div",{class:"auth-bg","aria-hidden":"true"},[g("span",{class:"orb orb-one"}),g("span",{class:"orb orb-two"}),g("span",{class:"orb orb-three"})],-1)),g("div",pF,[g("section",gF,[EE(s.$slots,"left",{},void 0)]),g("section",mF,[EE(s.$slots,"right",{},void 0)])])])}const eS=js(dF,[["render",vF],["__scopeId","data-v-4388afae"]]);function H2(s,t){return function(){return s.apply(t,arguments)}}const{toString:bF}=Object.prototype,{getPrototypeOf:sS}=Object,{iterator:B_,toStringTag:j2}=Symbol,$_=(s=>t=>{const e=bF.call(t);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Mr=s=>(s=s.toLowerCase(),t=>$_(t)===s),U_=s=>t=>typeof t===s,{isArray:Af}=Array,ff=U_("undefined");function qm(s){return s!==null&&!ff(s)&&s.constructor!==null&&!ff(s.constructor)&&ii(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const z2=Mr("ArrayBuffer");function yF(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&z2(s.buffer),t}const _F=U_("string"),ii=U_("function"),W2=U_("number"),Xm=s=>s!==null&&typeof s=="object",wF=s=>s===!0||s===!1,Tb=s=>{if($_(s)!=="object")return!1;const t=sS(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(j2 in s)&&!(B_ in s)},AF=s=>{if(!Xm(s)||qm(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},SF=Mr("Date"),EF=Mr("File"),xF=Mr("Blob"),TF=Mr("FileList"),CF=s=>Xm(s)&&ii(s.pipe),kF=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||ii(s.append)&&((t=$_(s))==="formdata"||t==="object"&&ii(s.toString)&&s.toString()==="[object FormData]"))},IF=Mr("URLSearchParams"),[PF,RF,MF,DF]=["ReadableStream","Request","Response","Headers"].map(Mr),OF=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ym(s,t,{allOwnKeys:e=!1}={}){if(s===null||typeof s>"u")return;let n,i;if(typeof s!="object"&&(s=[s]),Af(s))for(n=0,i=s.length;n<i;n++)t.call(null,s[n],n,s);else{if(qm(s))return;const r=e?Object.getOwnPropertyNames(s):Object.keys(s),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,s[a],a,s)}}function G2(s,t){if(qm(s))return null;t=t.toLowerCase();const e=Object.keys(s);let n=e.length,i;for(;n-- >0;)if(i=e[n],t===i.toLowerCase())return i;return null}const Rc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,q2=s=>!ff(s)&&s!==Rc;function Lw(){const{caseless:s,skipUndefined:t}=q2(this)&&this||{},e={},n=(i,r)=>{const o=s&&G2(e,r)||r;Tb(e[o])&&Tb(i)?e[o]=Lw(e[o],i):Tb(i)?e[o]=Lw({},i):Af(i)?e[o]=i.slice():(!t||!ff(i))&&(e[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Ym(arguments[i],n);return e}const LF=(s,t,e,{allOwnKeys:n}={})=>(Ym(t,(i,r)=>{e&&ii(i)?s[r]=H2(i,e):s[r]=i},{allOwnKeys:n}),s),NF=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),FF=(s,t,e,n)=>{s.prototype=Object.create(t.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),e&&Object.assign(s.prototype,e)},BF=(s,t,e,n)=>{let i,r,o;const a={};if(t=t||{},s==null)return t;do{for(i=Object.getOwnPropertyNames(s),r=i.length;r-- >0;)o=i[r],(!n||n(o,s,t))&&!a[o]&&(t[o]=s[o],a[o]=!0);s=e!==!1&&sS(s)}while(s&&(!e||e(s,t))&&s!==Object.prototype);return t},$F=(s,t,e)=>{s=String(s),(e===void 0||e>s.length)&&(e=s.length),e-=t.length;const n=s.indexOf(t,e);return n!==-1&&n===e},UF=s=>{if(!s)return null;if(Af(s))return s;let t=s.length;if(!W2(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=s[t];return e},VF=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&sS(Uint8Array)),HF=(s,t)=>{const n=(s&&s[B_]).call(s);let i;for(;(i=n.next())&&!i.done;){const r=i.value;t.call(s,r[0],r[1])}},jF=(s,t)=>{let e;const n=[];for(;(e=s.exec(t))!==null;)n.push(e);return n},zF=Mr("HTMLFormElement"),WF=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),fx=(({hasOwnProperty:s})=>(t,e)=>s.call(t,e))(Object.prototype),GF=Mr("RegExp"),X2=(s,t)=>{const e=Object.getOwnPropertyDescriptors(s),n={};Ym(e,(i,r)=>{let o;(o=t(i,r,s))!==!1&&(n[r]=o||i)}),Object.defineProperties(s,n)},qF=s=>{X2(s,(t,e)=>{if(ii(s)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=s[e];if(ii(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},XF=(s,t)=>{const e={},n=i=>{i.forEach(r=>{e[r]=!0})};return Af(s)?n(s):n(String(s).split(t)),e},YF=()=>{},KF=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function JF(s){return!!(s&&ii(s.append)&&s[j2]==="FormData"&&s[B_])}const ZF=s=>{const t=new Array(10),e=(n,i)=>{if(Xm(n)){if(t.indexOf(n)>=0)return;if(qm(n))return n;if(!("toJSON"in n)){t[i]=n;const r=Af(n)?[]:{};return Ym(n,(o,a)=>{const l=e(o,i+1);!ff(l)&&(r[a]=l)}),t[i]=void 0,r}}return n};return e(s,0)},QF=Mr("AsyncFunction"),t4=s=>s&&(Xm(s)||ii(s))&&ii(s.then)&&ii(s.catch),Y2=((s,t)=>s?setImmediate:t?((e,n)=>(Rc.addEventListener("message",({source:i,data:r})=>{i===Rc&&r===e&&n.length&&n.shift()()},!1),i=>{n.push(i),Rc.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",ii(Rc.postMessage)),e4=typeof queueMicrotask<"u"?queueMicrotask.bind(Rc):typeof process<"u"&&process.nextTick||Y2,s4=s=>s!=null&&ii(s[B_]),lt={isArray:Af,isArrayBuffer:z2,isBuffer:qm,isFormData:kF,isArrayBufferView:yF,isString:_F,isNumber:W2,isBoolean:wF,isObject:Xm,isPlainObject:Tb,isEmptyObject:AF,isReadableStream:PF,isRequest:RF,isResponse:MF,isHeaders:DF,isUndefined:ff,isDate:SF,isFile:EF,isBlob:xF,isRegExp:GF,isFunction:ii,isStream:CF,isURLSearchParams:IF,isTypedArray:VF,isFileList:TF,forEach:Ym,merge:Lw,extend:LF,trim:OF,stripBOM:NF,inherits:FF,toFlatObject:BF,kindOf:$_,kindOfTest:Mr,endsWith:$F,toArray:UF,forEachEntry:HF,matchAll:jF,isHTMLForm:zF,hasOwnProperty:fx,hasOwnProp:fx,reduceDescriptors:X2,freezeMethods:qF,toObjectSet:XF,toCamelCase:WF,noop:YF,toFiniteNumber:KF,findKey:G2,global:Rc,isContextDefined:q2,isSpecCompliantForm:JF,toJSONObject:ZF,isAsyncFn:QF,isThenable:t4,setImmediate:Y2,asap:e4,isIterable:s4};function oe(s,t,e,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}lt.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lt.toJSONObject(this.config),code:this.code,status:this.status}}});const K2=oe.prototype,J2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{J2[s]={value:s}});Object.defineProperties(oe,J2);Object.defineProperty(K2,"isAxiosError",{value:!0});oe.from=(s,t,e,n,i,r)=>{const o=Object.create(K2);lt.toFlatObject(s,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=s&&s.message?s.message:"Error",l=t==null&&s?s.code:t;return oe.call(o,a,l,e,n,i),s&&o.cause==null&&Object.defineProperty(o,"cause",{value:s,configurable:!0}),o.name=s&&s.name||"Error",r&&Object.assign(o,r),o};const n4=null;function Nw(s){return lt.isPlainObject(s)||lt.isArray(s)}function Z2(s){return lt.endsWith(s,"[]")?s.slice(0,-2):s}function px(s,t,e){return s?s.concat(t).map(function(i,r){return i=Z2(i),!e&&r?"["+i+"]":i}).join(e?".":""):t}function i4(s){return lt.isArray(s)&&!s.some(Nw)}const r4=lt.toFlatObject(lt,{},null,function(t){return/^is[A-Z]/.test(t)});function V_(s,t,e){if(!lt.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,e=lt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,y){return!lt.isUndefined(y[b])});const n=e.metaTokens,i=e.visitor||u,r=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&lt.isSpecCompliantForm(t);if(!lt.isFunction(i))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(lt.isDate(v))return v.toISOString();if(lt.isBoolean(v))return v.toString();if(!l&&lt.isBlob(v))throw new oe("Blob is not supported. Use a Buffer instead.");return lt.isArrayBuffer(v)||lt.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,b,y){let w=v;if(v&&!y&&typeof v=="object"){if(lt.endsWith(b,"{}"))b=n?b:b.slice(0,-2),v=JSON.stringify(v);else if(lt.isArray(v)&&i4(v)||(lt.isFileList(v)||lt.endsWith(b,"[]"))&&(w=lt.toArray(v)))return b=Z2(b),w.forEach(function(M,O){!(lt.isUndefined(M)||M===null)&&t.append(o===!0?px([b],O,r):o===null?b:b+"[]",c(M))}),!1}return Nw(v)?!0:(t.append(px(y,b,r),c(v)),!1)}const d=[],f=Object.assign(r4,{defaultVisitor:u,convertValue:c,isVisitable:Nw});function m(v,b){if(!lt.isUndefined(v)){if(d.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));d.push(v),lt.forEach(v,function(w,k){(!(lt.isUndefined(w)||w===null)&&i.call(t,w,lt.isString(k)?k.trim():k,b,f))===!0&&m(w,b?b.concat(k):[k])}),d.pop()}}if(!lt.isObject(s))throw new TypeError("data must be an object");return m(s),t}function gx(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function nS(s,t){this._pairs=[],s&&V_(s,this,t)}const Q2=nS.prototype;Q2.append=function(t,e){this._pairs.push([t,e])};Q2.toString=function(t){const e=t?function(n){return t.call(this,n,gx)}:gx;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function o4(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tI(s,t,e){if(!t)return s;const n=e&&e.encode||o4;lt.isFunction(e)&&(e={serialize:e});const i=e&&e.serialize;let r;if(i?r=i(t,e):r=lt.isURLSearchParams(t)?t.toString():new nS(t,e).toString(n),r){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}class mx{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){lt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const eI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},a4=typeof URLSearchParams<"u"?URLSearchParams:nS,l4=typeof FormData<"u"?FormData:null,c4=typeof Blob<"u"?Blob:null,u4={isBrowser:!0,classes:{URLSearchParams:a4,FormData:l4,Blob:c4},protocols:["http","https","file","blob","url","data"]},iS=typeof window<"u"&&typeof document<"u",Fw=typeof navigator=="object"&&navigator||void 0,h4=iS&&(!Fw||["ReactNative","NativeScript","NS"].indexOf(Fw.product)<0),d4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",f4=iS&&window.location.href||"http://localhost",p4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:iS,hasStandardBrowserEnv:h4,hasStandardBrowserWebWorkerEnv:d4,navigator:Fw,origin:f4},Symbol.toStringTag,{value:"Module"})),wn={...p4,...u4};function g4(s,t){return V_(s,new wn.classes.URLSearchParams,{visitor:function(e,n,i,r){return wn.isNode&&lt.isBuffer(e)?(this.append(n,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function m4(s){return lt.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function v4(s){const t={},e=Object.keys(s);let n;const i=e.length;let r;for(n=0;n<i;n++)r=e[n],t[r]=s[r];return t}function sI(s){function t(e,n,i,r){let o=e[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=e.length;return o=!o&&lt.isArray(i)?i.length:o,l?(lt.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!lt.isObject(i[o]))&&(i[o]=[]),t(e,n,i[o],r)&&lt.isArray(i[o])&&(i[o]=v4(i[o])),!a)}if(lt.isFormData(s)&&lt.isFunction(s.entries)){const e={};return lt.forEachEntry(s,(n,i)=>{t(m4(n),i,e,0)}),e}return null}function b4(s,t,e){if(lt.isString(s))try{return(t||JSON.parse)(s),lt.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(s)}const Km={transitional:eI,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,r=lt.isObject(t);if(r&&lt.isHTMLForm(t)&&(t=new FormData(t)),lt.isFormData(t))return i?JSON.stringify(sI(t)):t;if(lt.isArrayBuffer(t)||lt.isBuffer(t)||lt.isStream(t)||lt.isFile(t)||lt.isBlob(t)||lt.isReadableStream(t))return t;if(lt.isArrayBufferView(t))return t.buffer;if(lt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return g4(t,this.formSerializer).toString();if((a=lt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return V_(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||i?(e.setContentType("application/json",!1),b4(t)):t}],transformResponse:[function(t){const e=this.transitional||Km.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(lt.isResponse(t)||lt.isReadableStream(t))return t;if(t&&lt.isString(t)&&(n&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?oe.from(a,oe.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wn.classes.FormData,Blob:wn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lt.forEach(["delete","get","head","post","put","patch"],s=>{Km.headers[s]={}});const y4=lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_4=s=>{const t={};let e,n,i;return s&&s.split(`
`).forEach(function(o){i=o.indexOf(":"),e=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!e||t[e]&&y4[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},vx=Symbol("internals");function Hf(s){return s&&String(s).trim().toLowerCase()}function Cb(s){return s===!1||s==null?s:lt.isArray(s)?s.map(Cb):String(s)}function w4(s){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(s);)t[n[1]]=n[2];return t}const A4=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function N0(s,t,e,n,i){if(lt.isFunction(n))return n.call(this,t,e);if(i&&(t=e),!!lt.isString(t)){if(lt.isString(n))return t.indexOf(n)!==-1;if(lt.isRegExp(n))return n.test(t)}}function S4(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function E4(s,t){const e=lt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+e,{value:function(i,r,o){return this[n].call(this,t,i,r,o)},configurable:!0})})}let ri=class{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function r(a,l,c){const u=Hf(l);if(!u)throw new Error("header name must be a non-empty string");const d=lt.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=Cb(a))}const o=(a,l)=>lt.forEach(a,(c,u)=>r(c,u,l));if(lt.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(lt.isString(t)&&(t=t.trim())&&!A4(t))o(_4(t),e);else if(lt.isObject(t)&&lt.isIterable(t)){let a={},l,c;for(const u of t){if(!lt.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?lt.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,e)}else t!=null&&r(e,t,n);return this}get(t,e){if(t=Hf(t),t){const n=lt.findKey(this,t);if(n){const i=this[n];if(!e)return i;if(e===!0)return w4(i);if(lt.isFunction(e))return e.call(this,i,n);if(lt.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Hf(t),t){const n=lt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||N0(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let i=!1;function r(o){if(o=Hf(o),o){const a=lt.findKey(n,o);a&&(!e||N0(n,n[a],a,e))&&(delete n[a],i=!0)}}return lt.isArray(t)?t.forEach(r):r(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const r=e[n];(!t||N0(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const e=this,n={};return lt.forEach(this,(i,r)=>{const o=lt.findKey(n,r);if(o){e[o]=Cb(i),delete e[r];return}const a=t?S4(r):String(r).trim();a!==r&&delete e[r],e[a]=Cb(i),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return lt.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=t&&lt.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[vx]=this[vx]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=Hf(o);n[a]||(E4(i,o),n[a]=!0)}return lt.isArray(t)?t.forEach(r):r(t),this}};ri.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);lt.reduceDescriptors(ri.prototype,({value:s},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[e]=n}}});lt.freezeMethods(ri);function F0(s,t){const e=this||Km,n=t||e,i=ri.from(n.headers);let r=n.data;return lt.forEach(s,function(a){r=a.call(e,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function nI(s){return!!(s&&s.__CANCEL__)}function Sf(s,t,e){oe.call(this,s??"canceled",oe.ERR_CANCELED,t,e),this.name="CanceledError"}lt.inherits(Sf,oe,{__CANCEL__:!0});function iI(s,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?s(e):t(new oe("Request failed with status code "+e.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function x4(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function T4(s,t){s=s||10;const e=new Array(s),n=new Array(s);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[r];o||(o=c),e[i]=l,n[i]=c;let d=r,f=0;for(;d!==i;)f+=e[d++],d=d%s;if(i=(i+1)%s,i===r&&(r=(r+1)%s),c-o<t)return;const m=u&&c-u;return m?Math.round(f*1e3/m):void 0}}function C4(s,t){let e=0,n=1e3/t,i,r;const o=(c,u=Date.now())=>{e=u,i=null,r&&(clearTimeout(r),r=null),s(...c)};return[(...c)=>{const u=Date.now(),d=u-e;d>=n?o(c,u):(i=c,r||(r=setTimeout(()=>{r=null,o(i)},n-d)))},()=>i&&o(i)]}const My=(s,t,e=3)=>{let n=0;const i=T4(50,250);return C4(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-n,c=i(l),u=o<=a;n=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};s(d)},e)},bx=(s,t)=>{const e=s!=null;return[n=>t[0]({lengthComputable:e,total:s,loaded:n}),t[1]]},yx=s=>(...t)=>lt.asap(()=>s(...t)),k4=wn.hasStandardBrowserEnv?((s,t)=>e=>(e=new URL(e,wn.origin),s.protocol===e.protocol&&s.host===e.host&&(t||s.port===e.port)))(new URL(wn.origin),wn.navigator&&/(msie|trident)/i.test(wn.navigator.userAgent)):()=>!0,I4=wn.hasStandardBrowserEnv?{write(s,t,e,n,i,r,o){if(typeof document>"u")return;const a=[`${s}=${encodeURIComponent(t)}`];lt.isNumber(e)&&a.push(`expires=${new Date(e).toUTCString()}`),lt.isString(n)&&a.push(`path=${n}`),lt.isString(i)&&a.push(`domain=${i}`),r===!0&&a.push("secure"),lt.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(s){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function P4(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function R4(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function rI(s,t,e){let n=!P4(t);return s&&(n||e==!1)?R4(s,t):t}const _x=s=>s instanceof ri?{...s}:s;function Xu(s,t){t=t||{};const e={};function n(c,u,d,f){return lt.isPlainObject(c)&&lt.isPlainObject(u)?lt.merge.call({caseless:f},c,u):lt.isPlainObject(u)?lt.merge({},u):lt.isArray(u)?u.slice():u}function i(c,u,d,f){if(lt.isUndefined(u)){if(!lt.isUndefined(c))return n(void 0,c,d,f)}else return n(c,u,d,f)}function r(c,u){if(!lt.isUndefined(u))return n(void 0,u)}function o(c,u){if(lt.isUndefined(u)){if(!lt.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,d){if(d in t)return n(c,u);if(d in s)return n(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>i(_x(c),_x(u),d,!0)};return lt.forEach(Object.keys({...s,...t}),function(u){const d=l[u]||i,f=d(s[u],t[u],u);lt.isUndefined(f)&&d!==a||(e[u]=f)}),e}const oI=s=>{const t=Xu({},s);let{data:e,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:a}=t;if(t.headers=o=ri.from(o),t.url=tI(rI(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),lt.isFormData(e)){if(wn.hasStandardBrowserEnv||wn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(lt.isFunction(e.getHeaders)){const l=e.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(wn.hasStandardBrowserEnv&&(n&&lt.isFunction(n)&&(n=n(t)),n||n!==!1&&k4(t.url))){const l=i&&r&&I4.read(r);l&&o.set(i,l)}return t},M4=typeof XMLHttpRequest<"u",D4=M4&&function(s){return new Promise(function(e,n){const i=oI(s);let r=i.data;const o=ri.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,d,f,m,v;function b(){m&&m(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function w(){if(!y)return;const M=ri.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),B={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:M,config:s,request:y};iI(function(A){e(A),b()},function(A){n(A),b()},B),y=null}"onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(w)},y.onabort=function(){y&&(n(new oe("Request aborted",oe.ECONNABORTED,s,y)),y=null)},y.onerror=function(O){const B=O&&O.message?O.message:"Network Error",V=new oe(B,oe.ERR_NETWORK,s,y);V.event=O||null,n(V),y=null},y.ontimeout=function(){let O=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const B=i.transitional||eI;i.timeoutErrorMessage&&(O=i.timeoutErrorMessage),n(new oe(O,B.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,s,y)),y=null},r===void 0&&o.setContentType(null),"setRequestHeader"in y&&lt.forEach(o.toJSON(),function(O,B){y.setRequestHeader(B,O)}),lt.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),a&&a!=="json"&&(y.responseType=i.responseType),c&&([f,v]=My(c,!0),y.addEventListener("progress",f)),l&&y.upload&&([d,m]=My(l),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(u=M=>{y&&(n(!M||M.type?new Sf(null,s,y):M),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const k=x4(i.url);if(k&&wn.protocols.indexOf(k)===-1){n(new oe("Unsupported protocol "+k+":",oe.ERR_BAD_REQUEST,s));return}y.send(r||null)})},O4=(s,t)=>{const{length:e}=s=s?s.filter(Boolean):[];if(t||e){let n=new AbortController,i;const r=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof oe?u:new Sf(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,r(new oe(`timeout ${t} of ms exceeded`,oe.ETIMEDOUT))},t);const a=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),s=null)};s.forEach(c=>c.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>lt.asap(a),l}},L4=function*(s,t){let e=s.byteLength;if(e<t){yield s;return}let n=0,i;for(;n<e;)i=n+t,yield s.slice(n,i),n=i},N4=async function*(s,t){for await(const e of F4(s))yield*L4(e,t)},F4=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},wx=(s,t,e,n)=>{const i=N4(s,t);let r=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let d=u.byteLength;if(e){let f=r+=d;e(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Ax=64*1024,{isFunction:Yv}=lt,B4=(({Request:s,Response:t})=>({Request:s,Response:t}))(lt.global),{ReadableStream:Sx,TextEncoder:Ex}=lt.global,xx=(s,...t)=>{try{return!!s(...t)}catch{return!1}},$4=s=>{s=lt.merge.call({skipUndefined:!0},B4,s);const{fetch:t,Request:e,Response:n}=s,i=t?Yv(t):typeof fetch=="function",r=Yv(e),o=Yv(n);if(!i)return!1;const a=i&&Yv(Sx),l=i&&(typeof Ex=="function"?(v=>b=>v.encode(b))(new Ex):async v=>new Uint8Array(await new e(v).arrayBuffer())),c=r&&a&&xx(()=>{let v=!1;const b=new e(wn.origin,{body:new Sx,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!b}),u=o&&a&&xx(()=>lt.isReadableStream(new n("").body)),d={stream:u&&(v=>v.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!d[v]&&(d[v]=(b,y)=>{let w=b&&b[v];if(w)return w.call(b);throw new oe(`Response type '${v}' is not supported`,oe.ERR_NOT_SUPPORT,y)})});const f=async v=>{if(v==null)return 0;if(lt.isBlob(v))return v.size;if(lt.isSpecCompliantForm(v))return(await new e(wn.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(lt.isArrayBufferView(v)||lt.isArrayBuffer(v))return v.byteLength;if(lt.isURLSearchParams(v)&&(v=v+""),lt.isString(v))return(await l(v)).byteLength},m=async(v,b)=>{const y=lt.toFiniteNumber(v.getContentLength());return y??f(b)};return async v=>{let{url:b,method:y,data:w,signal:k,cancelToken:M,timeout:O,onDownloadProgress:B,onUploadProgress:V,responseType:A,headers:S,withCredentials:I="same-origin",fetchOptions:L}=oI(v),P=t||fetch;A=A?(A+"").toLowerCase():"text";let $=O4([k,M&&M.toAbortSignal()],O),N=null;const _t=$&&$.unsubscribe&&(()=>{$.unsubscribe()});let xt;try{if(V&&c&&y!=="get"&&y!=="head"&&(xt=await m(S,w))!==0){let vt=new e(b,{method:"POST",body:w,duplex:"half"}),j;if(lt.isFormData(w)&&(j=vt.headers.get("content-type"))&&S.setContentType(j),vt.body){const[Z,dt]=bx(xt,My(yx(V)));w=wx(vt.body,Ax,Z,dt)}}lt.isString(I)||(I=I?"include":"omit");const tt=r&&"credentials"in e.prototype,X={...L,signal:$,method:y.toUpperCase(),headers:S.normalize().toJSON(),body:w,duplex:"half",credentials:tt?I:void 0};N=r&&new e(b,X);let nt=await(r?P(N,L):P(b,X));const U=u&&(A==="stream"||A==="response");if(u&&(B||U&&_t)){const vt={};["status","statusText","headers"].forEach(Ft=>{vt[Ft]=nt[Ft]});const j=lt.toFiniteNumber(nt.headers.get("content-length")),[Z,dt]=B&&bx(j,My(yx(B),!0))||[];nt=new n(wx(nt.body,Ax,Z,()=>{dt&&dt(),_t&&_t()}),vt)}A=A||"text";let it=await d[lt.findKey(d,A)||"text"](nt,v);return!U&&_t&&_t(),await new Promise((vt,j)=>{iI(vt,j,{data:it,headers:ri.from(nt.headers),status:nt.status,statusText:nt.statusText,config:v,request:N})})}catch(tt){throw _t&&_t(),tt&&tt.name==="TypeError"&&/Load failed|fetch/i.test(tt.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,v,N),{cause:tt.cause||tt}):oe.from(tt,tt&&tt.code,v,N)}}},U4=new Map,aI=s=>{let t=s&&s.env||{};const{fetch:e,Request:n,Response:i}=t,r=[n,i,e];let o=r.length,a=o,l,c,u=U4;for(;a--;)l=r[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:$4(t)),u=c;return c};aI();const rS={http:n4,xhr:D4,fetch:{get:aI}};lt.forEach(rS,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const Tx=s=>`- ${s}`,V4=s=>lt.isFunction(s)||s===null||s===!1;function H4(s,t){s=lt.isArray(s)?s:[s];const{length:e}=s;let n,i;const r={};for(let o=0;o<e;o++){n=s[o];let a;if(i=n,!V4(n)&&(i=rS[(a=String(n)).toLowerCase()],i===void 0))throw new oe(`Unknown adapter '${a}'`);if(i&&(lt.isFunction(i)||(i=i.get(t))))break;r[a||"#"+o]=i}if(!i){const o=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Tx).join(`
`):" "+Tx(o[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i}const lI={getAdapter:H4,adapters:rS};function B0(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Sf(null,s)}function Cx(s){return B0(s),s.headers=ri.from(s.headers),s.data=F0.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),lI.getAdapter(s.adapter||Km.adapter,s)(s).then(function(n){return B0(s),n.data=F0.call(s,s.transformResponse,n),n.headers=ri.from(n.headers),n},function(n){return nI(n)||(B0(s),n&&n.response&&(n.response.data=F0.call(s,s.transformResponse,n.response),n.response.headers=ri.from(n.response.headers))),Promise.reject(n)})}const cI="1.13.2",H_={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{H_[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const kx={};H_.transitional=function(t,e,n){function i(r,o){return"[Axios v"+cI+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,a)=>{if(t===!1)throw new oe(i(o," has been removed"+(e?" in "+e:"")),oe.ERR_DEPRECATED);return e&&!kx[o]&&(kx[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,a):!0}};H_.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function j4(s,t,e){if(typeof s!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let i=n.length;for(;i-- >0;){const r=n[i],o=t[r];if(o){const a=s[r],l=a===void 0||o(a,r,s);if(l!==!0)throw new oe("option "+r+" must be "+l,oe.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new oe("Unknown option "+r,oe.ERR_BAD_OPTION)}}const kb={assertOptions:j4,validators:H_},$r=kb.validators;let Vu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new mx,response:new mx}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Xu(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:r}=e;n!==void 0&&kb.assertOptions(n,{silentJSONParsing:$r.transitional($r.boolean),forcedJSONParsing:$r.transitional($r.boolean),clarifyTimeoutError:$r.transitional($r.boolean)},!1),i!=null&&(lt.isFunction(i)?e.paramsSerializer={serialize:i}:kb.assertOptions(i,{encode:$r.function,serialize:$r.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),kb.assertOptions(e,{baseUrl:$r.spelling("baseURL"),withXsrfToken:$r.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&lt.merge(r.common,r[e.method]);r&&lt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete r[v]}),e.headers=ri.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(e)===!1||(l=l&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let u,d=0,f;if(!l){const v=[Cx.bind(this),void 0];for(v.unshift(...a),v.push(...c),f=v.length,u=Promise.resolve(e);d<f;)u=u.then(v[d++],v[d++]);return u}f=a.length;let m=e;for(;d<f;){const v=a[d++],b=a[d++];try{m=v(m)}catch(y){b.call(this,y);break}}try{u=Cx.call(this,m)}catch(v){return Promise.reject(v)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=Xu(this.defaults,t);const e=rI(t.baseURL,t.url,t.allowAbsoluteUrls);return tI(e,t.params,t.paramsSerializer)}};lt.forEach(["delete","get","head","options"],function(t){Vu.prototype[t]=function(e,n){return this.request(Xu(n||{},{method:t,url:e,data:(n||{}).data}))}});lt.forEach(["post","put","patch"],function(t){function e(n){return function(r,o,a){return this.request(Xu(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Vu.prototype[t]=e(),Vu.prototype[t+"Form"]=e(!0)});let z4=class uI{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{n.subscribe(a),r=a}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},t(function(r,o,a){n.reason||(n.reason=new Sf(r,o,a),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new uI(function(i){t=i}),cancel:t}}};function W4(s){return function(e){return s.apply(null,e)}}function G4(s){return lt.isObject(s)&&s.isAxiosError===!0}const Bw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Bw).forEach(([s,t])=>{Bw[t]=s});function hI(s){const t=new Vu(s),e=H2(Vu.prototype.request,t);return lt.extend(e,Vu.prototype,t,{allOwnKeys:!0}),lt.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return hI(Xu(s,i))},e}const Ts=hI(Km);Ts.Axios=Vu;Ts.CanceledError=Sf;Ts.CancelToken=z4;Ts.isCancel=nI;Ts.VERSION=cI;Ts.toFormData=V_;Ts.AxiosError=oe;Ts.Cancel=Ts.CanceledError;Ts.all=function(t){return Promise.all(t)};Ts.spread=W4;Ts.isAxiosError=G4;Ts.mergeConfig=Xu;Ts.AxiosHeaders=ri;Ts.formToJSON=s=>sI(lt.isHTMLForm(s)?new FormData(s):s);Ts.getAdapter=lI.getAdapter;Ts.HttpStatusCode=Bw;Ts.default=Ts;const{Axios:cet,AxiosError:uet,CanceledError:het,isCancel:det,CancelToken:fet,VERSION:pet,all:get,Cancel:met,isAxiosError:vet,spread:bet,toFormData:yet,AxiosHeaders:_et,HttpStatusCode:wet,formToJSON:Aet,getAdapter:Eet,mergeConfig:xet}=Ts,q4="http://localhost:4000/api",ls=Ts.create({baseURL:q4,headers:{"Content-Type":"application/json"}});ls.interceptors.request.use(s=>{const t=localStorage.getItem("auth_token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});const X4=()=>{};var Ix={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=function(s){const t=[];let e=0;for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++n)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},Y4=function(s){const t=[];let e=0,n=0;for(;e<s.length;){const i=s[e++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const r=s[e++];t[n++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=s[e++],o=s[e++],a=s[e++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const r=s[e++],o=s[e++];t[n++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},fI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<s.length;i+=3){const r=s[i],o=i+1<s.length,a=o?s[i+1]:0,l=i+2<s.length,c=l?s[i+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),n.push(e[u],e[d],e[f],e[m])}return n.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(dI(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):Y4(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<s.length;){const r=e[s.charAt(i++)],a=i<s.length?e[s.charAt(i)]:0;++i;const c=i<s.length?e[s.charAt(i)]:64;++i;const d=i<s.length?e[s.charAt(i)]:64;if(++i,r==null||a==null||c==null||d==null)throw new K4;const f=r<<2|a>>4;if(n.push(f),c!==64){const m=a<<4&240|c>>2;if(n.push(m),d!==64){const v=c<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class K4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const J4=function(s){const t=dI(s);return fI.encodeByteArray(t,!0)},Dy=function(s){return J4(s).replace(/\./g,"")},pI=function(s){try{return fI.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=()=>Z4().__FIREBASE_DEFAULTS__,t6=()=>{if(typeof process>"u"||typeof Ix>"u")return;const s=Ix.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},e6=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&pI(s[1]);return t&&JSON.parse(t)},oS=()=>{try{return X4()||Q4()||t6()||e6()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},gI=s=>{var t,e;return(e=(t=oS())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},s6=s=>{const t=gI(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},mI=()=>{var s;return(s=oS())===null||s===void 0?void 0:s.config},vI=s=>{var t;return(t=oS())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bI(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",i=s.iat||0,r=s.sub||s.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Dy(JSON.stringify(e)),Dy(JSON.stringify(o)),""].join(".")}const Lp={};function r6(){const s={prod:[],emulator:[]};for(const t of Object.keys(Lp))Lp[t]?s.emulator.push(t):s.prod.push(t);return s}function o6(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let Px=!1;function yI(s,t){if(typeof window>"u"||typeof document>"u"||!Jm(window.location.host)||Lp[s]===t||Lp[s]||Px)return;Lp[s]=t;function e(f){return`__firebase__banner__${f}`}const n="__firebase__banner",r=r6().prod.length>0;function o(){const f=document.getElementById(n);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Px=!0,o()},f}function u(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=o6(n),m=e("text"),v=document.getElementById(m)||document.createElement("span"),b=e("learnmore"),y=document.getElementById(b)||document.createElement("a"),w=e("preprendIcon"),k=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const M=f.element;a(M),u(y,b);const O=c();l(k,w),M.append(k,v,y,O),document.body.appendChild(M)}r?(v.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function l6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c6(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function u6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h6(){const s=zn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function d6(){try{return typeof indexedDB=="object"}catch{return!1}}function f6(){return new Promise((s,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(n),s(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="FirebaseError";class Fa extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=p6,Object.setPrototypeOf(this,Fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zm.prototype.create)}}class Zm{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?g6(r,n):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Fa(i,a,n)}}function g6(s,t){return s.replace(m6,(e,n)=>{const i=t[n];return i!=null?String(i):`<${n}?>`})}const m6=/\{\$([^}]+)}/g;function v6(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Yu(s,t){if(s===t)return!0;const e=Object.keys(s),n=Object.keys(t);for(const i of e){if(!n.includes(i))return!1;const r=s[i],o=t[i];if(Rx(r)&&Rx(o)){if(!Yu(r,o))return!1}else if(r!==o)return!1}for(const i of n)if(!e.includes(i))return!1;return!0}function Rx(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(s){const t=[];for(const[e,n]of Object.entries(s))Array.isArray(n)?n.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function sp(s){const t={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,r]=n.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function np(s){const t=s.indexOf("?");if(!t)return"";const e=s.indexOf("#",t);return s.substring(t,e>0?e:void 0)}function b6(s,t){const e=new y6(s,t);return e.subscribe.bind(e)}class y6{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let i;if(t===void 0&&e===void 0&&n===void 0)throw new Error("Missing Observer.");_6(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:n},i.next===void 0&&(i.next=$0),i.error===void 0&&(i.error=$0),i.complete===void 0&&(i.complete=$0);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _6(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function $0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(s){return s&&s._delegate?s._delegate:s}class Ku{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new n6;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(S6(t))try{this.getOrInitializeService({instanceIdentifier:wc})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const r=this.getOrInitializeService({instanceIdentifier:i});n.resolve(r)}catch{}}}}clearInstance(t=wc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=wc){return this.instances.has(t)}getOptions(t=wc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);n===a&&o.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:A6(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=wc){return this.component?this.component.multipleInstances?t:wc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A6(s){return s===wc?void 0:s}function S6(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new w6(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Be||(Be={}));const x6={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},T6=Be.INFO,C6={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},k6=(s,t,...e)=>{if(t<s.logLevel)return;const n=new Date().toISOString(),i=C6[t];if(i)console[i](`[${n}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class aS{constructor(t){this.name=t,this._logLevel=T6,this._logHandler=k6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Be))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?x6[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...t),this._logHandler(this,Be.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...t),this._logHandler(this,Be.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...t),this._logHandler(this,Be.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...t),this._logHandler(this,Be.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...t),this._logHandler(this,Be.ERROR,...t)}}const I6=(s,t)=>t.some(e=>s instanceof e);let Mx,Dx;function P6(){return Mx||(Mx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R6(){return Dx||(Dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _I=new WeakMap,$w=new WeakMap,wI=new WeakMap,U0=new WeakMap,lS=new WeakMap;function M6(s){const t=new Promise((e,n)=>{const i=()=>{s.removeEventListener("success",r),s.removeEventListener("error",o)},r=()=>{e(Ul(s.result)),i()},o=()=>{n(s.error),i()};s.addEventListener("success",r),s.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&_I.set(e,s)}).catch(()=>{}),lS.set(t,s),t}function D6(s){if($w.has(s))return;const t=new Promise((e,n)=>{const i=()=>{s.removeEventListener("complete",r),s.removeEventListener("error",o),s.removeEventListener("abort",o)},r=()=>{e(),i()},o=()=>{n(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",r),s.addEventListener("error",o),s.addEventListener("abort",o)});$w.set(s,t)}let Uw={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return $w.get(s);if(t==="objectStoreNames")return s.objectStoreNames||wI.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ul(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function O6(s){Uw=s(Uw)}function L6(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=s.call(V0(this),t,...e);return wI.set(n,t.sort?t.sort():[t]),Ul(n)}:R6().includes(s)?function(...t){return s.apply(V0(this),t),Ul(_I.get(this))}:function(...t){return Ul(s.apply(V0(this),t))}}function N6(s){return typeof s=="function"?L6(s):(s instanceof IDBTransaction&&D6(s),I6(s,P6())?new Proxy(s,Uw):s)}function Ul(s){if(s instanceof IDBRequest)return M6(s);if(U0.has(s))return U0.get(s);const t=N6(s);return t!==s&&(U0.set(s,t),lS.set(t,s)),t}const V0=s=>lS.get(s);function F6(s,t,{blocked:e,upgrade:n,blocking:i,terminated:r}={}){const o=indexedDB.open(s,t),a=Ul(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Ul(o.result),l.oldVersion,l.newVersion,Ul(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const B6=["get","getKey","getAll","getAllKeys","count"],$6=["put","add","delete","clear"],H0=new Map;function Ox(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(H0.get(t))return H0.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,i=$6.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(i||B6.includes(e)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[e](...a),i&&l.done]))[0]};return H0.set(t,r),r}O6(s=>({...s,get:(t,e,n)=>Ox(t,e)||s.get(t,e,n),has:(t,e)=>!!Ox(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(V6(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function V6(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Vw="@firebase/app",Lx="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new aS("@firebase/app"),H6="@firebase/app-compat",j6="@firebase/analytics-compat",z6="@firebase/analytics",W6="@firebase/app-check-compat",G6="@firebase/app-check",q6="@firebase/auth",X6="@firebase/auth-compat",Y6="@firebase/database",K6="@firebase/data-connect",J6="@firebase/database-compat",Z6="@firebase/functions",Q6="@firebase/functions-compat",t3="@firebase/installations",e3="@firebase/installations-compat",s3="@firebase/messaging",n3="@firebase/messaging-compat",i3="@firebase/performance",r3="@firebase/performance-compat",o3="@firebase/remote-config",a3="@firebase/remote-config-compat",l3="@firebase/storage",c3="@firebase/storage-compat",u3="@firebase/firestore",h3="@firebase/ai",d3="@firebase/firestore-compat",f3="firebase",p3="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="[DEFAULT]",g3={[Vw]:"fire-core",[H6]:"fire-core-compat",[z6]:"fire-analytics",[j6]:"fire-analytics-compat",[G6]:"fire-app-check",[W6]:"fire-app-check-compat",[q6]:"fire-auth",[X6]:"fire-auth-compat",[Y6]:"fire-rtdb",[K6]:"fire-data-connect",[J6]:"fire-rtdb-compat",[Z6]:"fire-fn",[Q6]:"fire-fn-compat",[t3]:"fire-iid",[e3]:"fire-iid-compat",[s3]:"fire-fcm",[n3]:"fire-fcm-compat",[i3]:"fire-perf",[r3]:"fire-perf-compat",[o3]:"fire-rc",[a3]:"fire-rc-compat",[l3]:"fire-gcs",[c3]:"fire-gcs-compat",[u3]:"fire-fst",[d3]:"fire-fst-compat",[h3]:"fire-vertex","fire-js":"fire-js",[f3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Map,m3=new Map,jw=new Map;function Nx(s,t){try{s.container.addComponent(t)}catch(e){Ma.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function pf(s){const t=s.name;if(jw.has(t))return Ma.debug(`There were multiple attempts to register component ${t}.`),!1;jw.set(t,s);for(const e of Oy.values())Nx(e,s);for(const e of m3.values())Nx(e,s);return!0}function cS(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function Si(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vl=new Zm("app","Firebase",v3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ku("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Vl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=p3;function AI(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const n=Object.assign({name:Hw,automaticDataCollectionEnabled:!0},t),i=n.name;if(typeof i!="string"||!i)throw Vl.create("bad-app-name",{appName:String(i)});if(e||(e=mI()),!e)throw Vl.create("no-options");const r=Oy.get(i);if(r){if(Yu(e,r.options)&&Yu(n,r.config))return r;throw Vl.create("duplicate-app",{appName:i})}const o=new E6(i);for(const l of jw.values())o.addComponent(l);const a=new b3(e,n,o);return Oy.set(i,a),a}function SI(s=Hw){const t=Oy.get(s);if(!t&&s===Hw&&mI())return AI();if(!t)throw Vl.create("no-app",{appName:s});return t}function Hl(s,t,e){var n;let i=(n=g3[s])!==null&&n!==void 0?n:s;e&&(i+=`-${e}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ma.warn(a.join(" "));return}pf(new Ku(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="firebase-heartbeat-database",_3=1,sg="firebase-heartbeat-store";let j0=null;function EI(){return j0||(j0=F6(y3,_3,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(sg)}catch(e){console.warn(e)}}}}).catch(s=>{throw Vl.create("idb-open",{originalErrorMessage:s.message})})),j0}async function w3(s){try{const e=(await EI()).transaction(sg),n=await e.objectStore(sg).get(xI(s));return await e.done,n}catch(t){if(t instanceof Fa)Ma.warn(t.message);else{const e=Vl.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ma.warn(e.message)}}}async function Fx(s,t){try{const n=(await EI()).transaction(sg,"readwrite");await n.objectStore(sg).put(t,xI(s)),await n.done}catch(e){if(e instanceof Fa)Ma.warn(e.message);else{const n=Vl.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ma.warn(n.message)}}}function xI(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1024,S3=30;class E3{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new T3(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bx();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>S3){const o=C3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ma.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bx(),{heartbeatsToSend:n,unsentEntries:i}=x3(this._heartbeatsCache.heartbeats),r=Dy(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Ma.warn(e),""}}}function Bx(){return new Date().toISOString().substring(0,10)}function x3(s,t=A3){const e=[];let n=s.slice();for(const i of s){const r=e.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),$x(e)>t){r.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),$x(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class T3{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d6()?f6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await w3(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fx(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fx(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function $x(s){return Dy(JSON.stringify({version:2,heartbeats:s})).length}function C3(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let n=1;n<s.length;n++)s[n].date<e&&(e=s[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(s){pf(new Ku("platform-logger",t=>new U6(t),"PRIVATE")),pf(new Ku("heartbeat",t=>new E3(t),"PRIVATE")),Hl(Vw,Lx,s),Hl(Vw,Lx,"esm2017"),Hl("fire-js","")}k3("");var I3="firebase",P3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hl(I3,P3,"app");function uS(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e}function TI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R3=TI,CI=new Zm("auth","Firebase",TI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=new aS("@firebase/auth");function M3(s,...t){Ly.logLevel<=Be.WARN&&Ly.warn(`Auth (${Ef}): ${s}`,...t)}function Ib(s,...t){Ly.logLevel<=Be.ERROR&&Ly.error(`Auth (${Ef}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(s,...t){throw dS(s,...t)}function Sr(s,...t){return dS(s,...t)}function hS(s,t,e){const n=Object.assign(Object.assign({},R3()),{[t]:e});return new Zm("auth","Firebase",n).create(t,{appName:s.name})}function Sa(s){return hS(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D3(s,t,e){const n=e;if(!(t instanceof n))throw n.name!==t.constructor.name&&Xi(s,"argument-error"),hS(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dS(s,...t){if(typeof s!="string"){const e=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(e,...n)}return CI.create(s,...t)}function Zt(s,t,...e){if(!s)throw dS(t,...e)}function ba(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Ib(t),new Error(t)}function Da(s,t){s||ba(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function O3(){return Ux()==="http:"||Ux()==="https:"}function Ux(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O3()||c6()||"connection"in navigator)?navigator.onLine:!0}function N3(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(t,e){this.shortDelay=t,this.longDelay=e,Da(e>t,"Short delay should be less than long delay!"),this.isMobile=a6()||u6()}get(){return L3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(s,t){Da(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$3=new tv(3e4,6e4);function $a(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function _o(s,t,e,n,i={}){return II(s,i,async()=>{let r={},o={};n&&(t==="GET"?o=n:r={body:JSON.stringify(n)});const a=Qm(Object.assign({key:s.config.apiKey},o)).slice(1),l=await s._getAdditionalHeaders();l["Content-Type"]="application/json",s.languageCode&&(l["X-Firebase-Locale"]=s.languageCode);const c=Object.assign({method:t,headers:l},r);return l6()||(c.referrerPolicy="no-referrer"),s.emulatorConfig&&Jm(s.emulatorConfig.host)&&(c.credentials="include"),kI.fetch()(await PI(s,s.config.apiHost,e,a),c)})}async function II(s,t,e){s._canInitEmulator=!1;const n=Object.assign(Object.assign({},F3),t);try{const i=new V3(s),r=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Kv(s,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kv(s,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Kv(s,"email-already-in-use",o);if(l==="USER_DISABLED")throw Kv(s,"user-disabled",o);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw hS(s,u,c);Xi(s,u)}}catch(i){if(i instanceof Fa)throw i;Xi(s,"network-request-failed",{message:String(i)})}}async function ev(s,t,e,n,i={}){const r=await _o(s,t,e,n,i);return"mfaPendingCredential"in r&&Xi(s,"multi-factor-auth-required",{_serverResponse:r}),r}async function PI(s,t,e,n){const i=`${t}${e}?${n}`,r=s,o=r.config.emulator?fS(s.config,i):`${s.config.apiScheme}://${i}`;return B3.includes(e)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function U3(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,n)=>{this.timer=setTimeout(()=>n(Sr(this.auth,"network-request-failed")),$3.get())})}}function Kv(s,t,e){const n={appName:s.name};e.email&&(n.email=e.email),e.phoneNumber&&(n.phoneNumber=e.phoneNumber);const i=Sr(s,t,n);return i.customData._tokenResponse=e,i}function Vx(s){return s!==void 0&&s.enterprise!==void 0}class H3{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return U3(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function j3(s,t){return _o(s,"GET","/v2/recaptchaConfig",$a(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(s,t){return _o(s,"POST","/v1/accounts:delete",t)}async function Ny(s,t){return _o(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function W3(s,t=!1){const e=Ba(s),n=await e.getIdToken(t),i=pS(n);Zt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:n,authTime:Np(z0(i.auth_time)),issuedAtTime:Np(z0(i.iat)),expirationTime:Np(z0(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function z0(s){return Number(s)*1e3}function pS(s){const[t,e,n]=s.split(".");if(t===void 0||e===void 0||n===void 0)return Ib("JWT malformed, contained fewer than 3 sections"),null;try{const i=pI(e);return i?JSON.parse(i):(Ib("Failed to decode base64 JWT payload"),null)}catch(i){return Ib("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Hx(s){const t=pS(s);return Zt(t,"internal-error"),Zt(typeof t.exp<"u","internal-error"),Zt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(s,t,e=!1){if(e)return t;try{return await t}catch(n){throw n instanceof Fa&&G3(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function G3({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Np(this.lastLoginAt),this.creationTime=Np(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fy(s){var t;const e=s.auth,n=await s.getIdToken(),i=await gf(s,Ny(e,{idToken:n}));Zt(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];s._notifyReloadListener(r);const o=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?RI(r.providerUserInfo):[],a=Y3(s.providerData,o),l=s.isAnonymous,c=!(s.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Ww(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(s,d)}async function X3(s){const t=Ba(s);await Fy(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Y3(s,t){return[...s.filter(n=>!t.some(i=>i.providerId===n.providerId)),...t]}function RI(s){return s.map(t=>{var{providerId:e}=t,n=uS(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K3(s,t){const e=await II(s,{},async()=>{const n=Qm({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=s.config,o=await PI(s,i,"/v1/token",`key=${r}`),a=await s._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return s.emulatorConfig&&Jm(s.emulatorConfig.host)&&(l.credentials="include"),kI.fetch()(o,l)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function J3(s,t){return _o(s,"POST","/v2/accounts:revokeToken",$a(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Zt(t.idToken,"internal-error"),Zt(typeof t.idToken<"u","internal-error"),Zt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Hx(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Zt(t.length!==0,"internal-error");const e=Hx(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Zt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await K3(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,o=new qh;return n&&(Zt(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),i&&(Zt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(Zt(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qh,this.toJSON())}_performRefresh(){return ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(s,t){Zt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class mr{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=uS(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new q3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ww(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await gf(this,this.stsTokenManager.getToken(this.auth,t));return Zt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return W3(this,t)}reload(){return X3(this)}_assign(t){this!==t&&(Zt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new mr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await Fy(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(Sa(this.auth));const t=await this.getIdToken();return await gf(this,z3(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,o,a,l,c,u;const d=(n=e.displayName)!==null&&n!==void 0?n:void 0,f=(i=e.email)!==null&&i!==void 0?i:void 0,m=(r=e.phoneNumber)!==null&&r!==void 0?r:void 0,v=(o=e.photoURL)!==null&&o!==void 0?o:void 0,b=(a=e.tenantId)!==null&&a!==void 0?a:void 0,y=(l=e._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=e.createdAt)!==null&&c!==void 0?c:void 0,k=(u=e.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:M,emailVerified:O,isAnonymous:B,providerData:V,stsTokenManager:A}=e;Zt(M&&A,t,"internal-error");const S=qh.fromJSON(this.name,A);Zt(typeof M=="string",t,"internal-error"),Xa(d,t.name),Xa(f,t.name),Zt(typeof O=="boolean",t,"internal-error"),Zt(typeof B=="boolean",t,"internal-error"),Xa(m,t.name),Xa(v,t.name),Xa(b,t.name),Xa(y,t.name),Xa(w,t.name),Xa(k,t.name);const I=new mr({uid:M,auth:t,email:f,emailVerified:O,displayName:d,isAnonymous:B,photoURL:v,phoneNumber:m,tenantId:b,stsTokenManager:S,createdAt:w,lastLoginAt:k});return V&&Array.isArray(V)&&(I.providerData=V.map(L=>Object.assign({},L))),y&&(I._redirectEventId=y),I}static async _fromIdTokenResponse(t,e,n=!1){const i=new qh;i.updateFromServerResponse(e);const r=new mr({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Fy(r),r}static async _fromGetAccountInfoResponse(t,e,n){const i=e.users[0];Zt(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?RI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),a=new qh;a.updateFromIdToken(n);const l=new mr({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Ww(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new Map;function ya(s){Da(s instanceof Function,"Expected a class definition");let t=jx.get(s);return t?(Da(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,jx.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}MI.type="NONE";const zx=MI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(s,t,e){return`firebase:${s}:${t}:${e}`}class Xh{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Pb(this.userKey,i.apiKey,r),this.fullPersistenceKey=Pb("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Ny(this.auth,{idToken:t}).catch(()=>{});return e?mr._fromGetAccountInfoResponse(this.auth,e,t):null}return mr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Xh(ya(zx),t,n);const i=(await Promise.all(e.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||ya(zx);const o=Pb(n,t.config.apiKey,t.name);let a=null;for(const c of e)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const f=await Ny(t,{idToken:u}).catch(()=>{});if(!f)break;d=await mr._fromGetAccountInfoResponse(t,f,u)}else d=mr._fromJSON(t,u);c!==r&&(a=d),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Xh(r,t,n):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(e.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Xh(r,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(NI(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(DI(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(BI(t))return"Blackberry";if($I(t))return"Webos";if(OI(t))return"Safari";if((t.includes("chrome/")||LI(t))&&!t.includes("edge/"))return"Chrome";if(FI(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(e);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function DI(s=zn()){return/firefox\//i.test(s)}function OI(s=zn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function LI(s=zn()){return/crios\//i.test(s)}function NI(s=zn()){return/iemobile/i.test(s)}function FI(s=zn()){return/android/i.test(s)}function BI(s=zn()){return/blackberry/i.test(s)}function $I(s=zn()){return/webos/i.test(s)}function gS(s=zn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Z3(s=zn()){var t;return gS(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Q3(){return h6()&&document.documentMode===10}function UI(s=zn()){return gS(s)||FI(s)||$I(s)||BI(s)||/windows phone/i.test(s)||NI(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(s,t=[]){let e;switch(s){case"Browser":e=Wx(zn());break;case"Worker":e=`${Wx(zn())}-${s}`;break;default:e=s}const n=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Ef}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(s,t={}){return _o(s,"GET","/v2/passwordPolicy",$a(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=6;class n5{constructor(t){var e,n,i,r;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:s5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(e=l.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let n;for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gx(this),this.idTokenSubscription=new Gx(this),this.beforeStateQueue=new t5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ya(e)),this._initializationPromise=this.queue(async()=>{var n,i,r;if(!this._deleted&&(this.persistenceManager=await Xh.create(this,t),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Ny(this,{idToken:t}),n=await mr._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Si(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Zt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Fy(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=N3()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Si(this.app))return Promise.reject(Sa(this));const e=t?Ba(t):null;return e&&Zt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Zt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(Sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Si(this.app)?Promise.reject(Sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ya(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await e5(this),e=new n5(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Zm("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(n.tenantId=this.tenantId),await J3(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ya(t)||this._popupRedirectResolver;Zt(e,this,"argument-error"),this.redirectPersistenceManager=await Xh.create(this,[ya(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r=typeof e=="function"?e:e.next.bind(e);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Zt(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,n,i);return()=>{o=!0,l()}}else{const l=t.addObserver(e);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=VI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&M3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ua(s){return Ba(s)}class Gx{constructor(t){this.auth=t,this.observer=null,this.addObserver=b6(e=>this.observer=e)}get next(){return Zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r5(s){j_=s}function HI(s){return j_.loadJS(s)}function o5(){return j_.recaptchaEnterpriseScript}function a5(){return j_.gapiScript}function l5(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class c5{constructor(){this.enterprise=new u5}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class u5{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const h5="recaptcha-enterprise",jI="NO_RECAPTCHA";class d5{constructor(t){this.type=h5,this.auth=Ua(t)}async verify(t="verify",e=!1){async function n(r){if(!e){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{j3(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new H3(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;Vx(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(c=>{o(c)}).catch(()=>{o(jI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new c5().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{n(this.auth).then(a=>{if(!e&&Vx(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=o5();l.length!==0&&(l+=a),HI(l).then(()=>{i(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function qx(s,t,e,n=!1,i=!1){const r=new d5(s);let o;if(i)o=jI;else try{o=await r.verify(e)}catch{o=await r.verify(e,!0)}const a=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return n?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function By(s,t,e,n,i){var r;if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await qx(s,t,e,e==="getOobCode");return n(s,o)}else return n(s,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await qx(s,t,e,e==="getOobCode");return n(s,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(s,t){const e=cS(s,"auth");if(e.isInitialized()){const i=e.getImmediate(),r=e.getOptions();if(Yu(r,t??{}))return i;Xi(i,"already-initialized")}return e.initialize({options:t})}function p5(s,t){const e=(t==null?void 0:t.persistence)||[],n=(Array.isArray(e)?e:[e]).map(ya);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function g5(s,t,e){const n=Ua(s);Zt(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const i=!1,r=zI(t),{host:o,port:a}=m5(t),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Zt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Zt(Yu(c,n.config.emulator)&&Yu(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,Jm(o)?(bI(`${r}//${o}${l}`),yI("Auth",!0)):v5()}function zI(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function m5(s){const t=zI(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const n=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const r=i[1];return{host:r,port:Xx(n.substr(r.length+1))}}else{const[r,o]=n.split(":");return{host:r,port:Xx(o)}}}function Xx(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function v5(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ba("not implemented")}_getIdTokenResponse(t){return ba("not implemented")}_linkToIdToken(t,e){return ba("not implemented")}_getReauthenticationResolver(t){return ba("not implemented")}}async function b5(s,t){return _o(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(s,t){return ev(s,"POST","/v1/accounts:signInWithPassword",$a(s,t))}async function _5(s,t){return _o(s,"POST","/v1/accounts:sendOobCode",$a(s,t))}async function w5(s,t){return _5(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(s,t){return ev(s,"POST","/v1/accounts:signInWithEmailLink",$a(s,t))}async function S5(s,t){return ev(s,"POST","/v1/accounts:signInWithEmailLink",$a(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends mS{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new ng(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new ng(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return By(t,e,"signInWithPassword",y5);case"emailLink":return A5(t,{email:this._email,oobCode:this._password});default:Xi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const n={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return By(t,n,"signUpPassword",b5);case"emailLink":return S5(t,{idToken:e,email:this._email,oobCode:this._password});default:Xi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(s,t){return ev(s,"POST","/v1/accounts:signInWithIdp",$a(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="http://localhost";class Ju extends mS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ju(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Xi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=uS(e,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Ju(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return Yh(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Yh(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Yh(t,e)}buildRequest(){const t={requestUri:E5,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Qm(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T5(s){const t=sp(np(s)).link,e=t?sp(np(t)).deep_link_id:null,n=sp(np(s)).deep_link_id;return(n?sp(np(n)).link:null)||n||e||t||s}class vS{constructor(t){var e,n,i,r,o,a;const l=sp(np(t)),c=(e=l.apiKey)!==null&&e!==void 0?e:null,u=(n=l.oobCode)!==null&&n!==void 0?n:null,d=x5((i=l.mode)!==null&&i!==void 0?i:null);Zt(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const e=T5(t);try{return new vS(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this.providerId=xf.PROVIDER_ID}static credential(t,e){return ng._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=vS.parseLink(e);return Zt(n,"argument-error"),ng._fromEmailAndCode(t,n.code,n.tenantId)}}xf.PROVIDER_ID="password";xf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends bS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends sv{constructor(){super("facebook.com")}static credential(t){return Ju._fromParams({providerId:tl.PROVIDER_ID,signInMethod:tl.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return tl.credentialFromTaggedObject(t)}static credentialFromError(t){return tl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return tl.credential(t.oauthAccessToken)}catch{return null}}}tl.FACEBOOK_SIGN_IN_METHOD="facebook.com";tl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends sv{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ju._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return pa.credentialFromTaggedObject(t)}static credentialFromError(t){return pa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return pa.credential(e,n)}catch{return null}}}pa.GOOGLE_SIGN_IN_METHOD="google.com";pa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends sv{constructor(){super("github.com")}static credential(t){return Ju._fromParams({providerId:el.PROVIDER_ID,signInMethod:el.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return el.credentialFromTaggedObject(t)}static credentialFromError(t){return el.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return el.credential(t.oauthAccessToken)}catch{return null}}}el.GITHUB_SIGN_IN_METHOD="github.com";el.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends sv{constructor(){super("twitter.com")}static credential(t,e){return Ju._fromParams({providerId:sl.PROVIDER_ID,signInMethod:sl.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return sl.credentialFromTaggedObject(t)}static credentialFromError(t){return sl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return sl.credential(e,n)}catch{return null}}}sl.TWITTER_SIGN_IN_METHOD="twitter.com";sl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(s,t){return ev(s,"POST","/v1/accounts:signUp",$a(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await mr._fromIdTokenResponse(t,n,i),o=Yx(n);return new Zu({user:r,providerId:o,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Yx(n);return new Zu({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Yx(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends Fa{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,$y.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new $y(t,e,n,i)}}function WI(s,t,e,n){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?$y._fromErrorAndOperation(s,r,t,n):r})}async function k5(s,t,e=!1){const n=await gf(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return Zu._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(s,t,e=!1){const{auth:n}=s;if(Si(n.app))return Promise.reject(Sa(n));const i="reauthenticate";try{const r=await gf(s,WI(n,i,t,s),e);Zt(r.idToken,n,"internal-error");const o=pS(r.idToken);Zt(o,n,"internal-error");const{sub:a}=o;return Zt(s.uid===a,n,"user-mismatch"),Zu._forOperation(s,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Xi(n,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(s,t,e=!1){if(Si(s.app))return Promise.reject(Sa(s));const n="signIn",i=await WI(s,n,t),r=await Zu._fromIdTokenResponse(s,n,i);return e||await s._updateCurrentUser(r.user),r}async function P5(s,t){return GI(Ua(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(s){const t=Ua(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function R5(s,t,e){const n=Ua(s);await By(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",w5)}async function M5(s,t,e){if(Si(s.app))return Promise.reject(Sa(s));const n=Ua(s),o=await By(n,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",C5).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qI(s),l}),a=await Zu._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(a.user),a}function D5(s,t,e){return Si(s.app)?Promise.reject(Sa(s)):P5(Ba(s),xf.credential(t,e)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qI(s),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O5(s,t){return _o(s,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(s,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;const n=Ba(s),r={idToken:await n.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},o=await gf(n,O5(n.auth,r));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const a=n.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=n.displayName,a.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function N5(s,t,e,n){return Ba(s).onIdTokenChanged(t,e,n)}function F5(s,t,e){return Ba(s).beforeAuthStateChanged(t,e)}function B5(s){return Ba(s).signOut()}const Uy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Uy,"1"),this.storage.removeItem(Uy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=1e3,U5=10;class YI extends XI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const n=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!e&&this.localCache[n]===o||this.notifyListeners(n,o)},r=this.storage.getItem(n);Q3()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,U5):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},$5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}YI.type="LOCAL";const V5=YI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI extends XI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}KI.type="SESSION";const JI=KI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const n=new z_(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(o).map(async c=>c(e.origin,r)),l=await H5(a);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}z_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(s="",t=10){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=yS("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(){return window}function z5(s){go().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return typeof go().WorkerGlobalScope<"u"&&typeof go().importScripts=="function"}async function W5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G5(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function q5(){return ZI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="firebaseLocalStorageDb",X5=1,Vy="firebaseLocalStorage",tP="fbase_key";class nv{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function W_(s,t){return s.transaction([Vy],t?"readwrite":"readonly").objectStore(Vy)}function Y5(){const s=indexedDB.deleteDatabase(QI);return new nv(s).toPromise()}function Gw(){const s=indexedDB.open(QI,X5);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(Vy,{keyPath:tP})}catch(i){e(i)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(Vy)?t(n):(n.close(),await Y5(),t(await Gw()))})})}async function Kx(s,t,e){const n=W_(s,!0).put({[tP]:t,value:e});return new nv(n).toPromise()}async function K5(s,t){const e=W_(s,!1).get(t),n=await new nv(e).toPromise();return n===void 0?null:n.value}function Jx(s,t){const e=W_(s,!0).delete(t);return new nv(e).toPromise()}const J5=800,Z5=3;class eP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gw(),this.db)}async _withRetries(t){let e=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(e++>Z5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=z_._getInstance(q5()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await W5(),!this.activeServiceWorker)return;this.sender=new j5(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((t=n[0])===null||t===void 0)&&t.fulfilled&&!((e=n[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||G5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Gw();return await Kx(t,Uy,"1"),await Jx(t,Uy),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kx(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(n=>K5(n,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Jx(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=W_(i,!1).getAll();return new nv(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],n=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),J5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eP.type="LOCAL";const Q5=eP;new tv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(s,t){return t?ya(t):(Zt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S extends mS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yh(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Yh(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Yh(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function tB(s){return GI(s.auth,new _S(s),s.bypassAuthState)}function eB(s){const{auth:t,user:e}=s;return Zt(e,t,"internal-error"),I5(e,new _S(s),s.bypassAuthState)}async function sB(s){const{auth:t,user:e}=s;return Zt(e,t,"internal-error"),k5(e,new _S(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return tB;case"linkViaPopup":case"linkViaRedirect":return sB;case"reauthViaPopup":case"reauthViaRedirect":return eB;default:Xi(this.auth,"internal-error")}}resolve(t){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=new tv(2e3,1e4);async function iB(s,t,e){if(Si(s.app))return Promise.reject(Sr(s,"operation-not-supported-in-this-environment"));const n=Ua(s);D3(s,t,bS);const i=sP(n,e);return new Mc(n,"signInViaPopup",t,i).executeNotNull()}class Mc extends nP{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Mc.currentPopupAction&&Mc.currentPopupAction.cancel(),Mc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Zt(t,this.auth,"internal-error"),t}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const t=yS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;if(!((n=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,nB.get())};t()}}Mc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB="pendingRedirect",Rb=new Map;class oB extends nP{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Rb.get(this.auth._key());if(!t){try{const n=await aB(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Rb.set(this.auth._key(),t)}return this.bypassAuthState||Rb.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aB(s,t){const e=uB(t),n=cB(s);if(!await n._isAvailable())return!1;const i=await n._get(e)==="true";return await n._remove(e),i}function lB(s,t){Rb.set(s._key(),t)}function cB(s){return ya(s._redirectPersistence)}function uB(s){return Pb(rB,s.config.apiKey,s.name)}async function hB(s,t,e=!1){if(Si(s.app))return Promise.reject(Sa(s));const n=Ua(s),i=sP(n,t),o=await new oB(n,i,e).execute();return o&&!e&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=600*1e3;class fB{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!pB(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!iP(t)){const i=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";e.onError(Sr(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=dB&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zx(t))}saveEventToCache(t){this.cachedEventUids.add(Zx(t)),this.lastProcessedEventTime=Date.now()}}function Zx(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function iP({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function pB(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iP(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gB(s,t={}){return _o(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vB=/^https?/;async function bB(s){if(s.config.emulator)return;const{authorizedDomains:t}=await gB(s);for(const e of t)try{if(yB(e))return}catch{}Xi(s,"unauthorized-domain")}function yB(s){const t=zw(),{protocol:e,hostname:n}=new URL(t);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&n===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===n}if(!vB.test(e))return!1;if(mB.test(s))return n===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=new tv(3e4,6e4);function Qx(){const s=go().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function wB(s){return new Promise((t,e)=>{var n,i,r;function o(){Qx(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qx(),e(Sr(s,"network-request-failed"))},timeout:_B.get()})}if(!((i=(n=go().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((r=go().gapi)===null||r===void 0)&&r.load)o();else{const a=l5("iframefcb");return go()[a]=()=>{gapi.load?o():e(Sr(s,"network-request-failed"))},HI(`${a5()}?onload=${a}`).catch(l=>e(l))}}).catch(t=>{throw Mb=null,t})}let Mb=null;function AB(s){return Mb=Mb||wB(s),Mb}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=new tv(5e3,15e3),EB="__/auth/iframe",xB="emulator/auth/iframe",TB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kB(s){const t=s.config;Zt(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?fS(t,xB):`https://${s.config.authDomain}/${EB}`,n={apiKey:t.apiKey,appName:s.name,v:Ef},i=CB.get(s.config.apiHost);i&&(n.eid=i);const r=s._getFrameworks();return r.length&&(n.fw=r.join(",")),`${e}?${Qm(n).slice(1)}`}async function IB(s){const t=await AB(s),e=go().gapi;return Zt(e,s,"internal-error"),t.open({where:document.body,url:kB(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TB,dontclear:!0},n=>new Promise(async(i,r)=>{await n.restyle({setHideOnLeave:!1});const o=Sr(s,"network-request-failed"),a=go().setTimeout(()=>{r(o)},SB.get());function l(){go().clearTimeout(a),i(n)}n.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RB=500,MB=600,DB="_blank",OB="http://localhost";class tT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LB(s,t,e,n=RB,i=MB){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},PB),{width:n.toString(),height:i.toString(),top:r,left:o}),c=zn().toLowerCase();e&&(a=LI(c)?DB:e),DI(c)&&(t=t||OB,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(Z3(c)&&a!=="_self")return NB(t||"",a),new tT(null);const d=window.open(t||"",a,u);Zt(d,s,"popup-blocked");try{d.focus()}catch{}return new tT(d)}function NB(s,t){const e=document.createElement("a");e.href=s,e.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB="__/auth/handler",BB="emulator/auth/handler",$B=encodeURIComponent("fac");async function eT(s,t,e,n,i,r){Zt(s.config.authDomain,s,"auth-domain-config-required"),Zt(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:n,v:Ef,eventId:i};if(t instanceof bS){t.setDefaultLanguage(s.languageCode),o.providerId=t.providerId||"",v6(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(t instanceof sv){const u=t.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}s.tenantId&&(o.tid=s.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await s._getAppCheckToken(),c=l?`#${$B}=${encodeURIComponent(l)}`:"";return`${UB(s)}?${Qm(a).slice(1)}${c}`}function UB({config:s}){return s.emulator?fS(s,BB):`https://${s.authDomain}/${FB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="webStorageSupport";class VB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JI,this._completeRedirectFn=hB,this._overrideRedirectResult=lB}async _openPopup(t,e,n,i){var r;Da((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await eT(t,e,n,zw(),i);return LB(t,o,yS())}async _openRedirect(t,e,n,i){await this._originValidation(t);const r=await eT(t,e,n,zw(),i);return z5(r),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:r}=this.eventManagers[e];return i?Promise.resolve(i):(Da(r,"If manager is not set, promise should be"),r)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}async initAndGetManager(t){const e=await IB(t),n=new fB(t);return e.register("authEvent",i=>(Zt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(W0,{type:W0},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[W0];o!==void 0&&e(!!o),Xi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=bB(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return UI()||OI()||gS()}}const HB=VB;var sT="@firebase/auth",nT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WB(s){pf(new Ku("auth",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;Zt(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:o,authDomain:a,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VI(s)},c=new i5(n,i,r,l);return p5(c,e),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),pf(new Ku("auth-internal",t=>{const e=Ua(t.getProvider("auth").getImmediate());return(n=>new jB(n))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hl(sT,nT,zB(s)),Hl(sT,nT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=300,qB=vI("authIdTokenMaxAge")||GB;let iT=null;const XB=s=>async t=>{const e=t&&await t.getIdTokenResult(),n=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>qB)return;const i=e==null?void 0:e.token;iT!==i&&(iT=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function YB(s=SI()){const t=cS(s,"auth");if(t.isInitialized())return t.getImmediate();const e=f5(s,{popupRedirectResolver:HB,persistence:[Q5,V5,JI]}),n=vI("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(n,location.origin);if(location.origin===r.origin){const o=XB(r.toString());F5(e,o,()=>o(e.currentUser)),N5(e,a=>o(a))}}const i=gI("auth");return i&&g5(e,`http://${i}`),e}function KB(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}r5({loadJS(s){return new Promise((t,e)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=t,n.onerror=i=>{const r=Sr("internal-error");r.customData=i,e(r)},n.type="text/javascript",n.charset="UTF-8",KB().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WB("Browser");var rT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wS;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,S){function I(){}I.prototype=S.prototype,A.D=S.prototype,A.prototype=new I,A.prototype.constructor=A,A.C=function(L,P,$){for(var N=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)N[_t-2]=arguments[_t];return S.prototype[P].apply(L,N)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,S,I){I||(I=0);var L=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)L[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)L[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=A.g[0],I=A.g[1],P=A.g[2];var $=A.g[3],N=S+($^I&(P^$))+L[0]+3614090360&4294967295;S=I+(N<<7&4294967295|N>>>25),N=$+(P^S&(I^P))+L[1]+3905402710&4294967295,$=S+(N<<12&4294967295|N>>>20),N=P+(I^$&(S^I))+L[2]+606105819&4294967295,P=$+(N<<17&4294967295|N>>>15),N=I+(S^P&($^S))+L[3]+3250441966&4294967295,I=P+(N<<22&4294967295|N>>>10),N=S+($^I&(P^$))+L[4]+4118548399&4294967295,S=I+(N<<7&4294967295|N>>>25),N=$+(P^S&(I^P))+L[5]+1200080426&4294967295,$=S+(N<<12&4294967295|N>>>20),N=P+(I^$&(S^I))+L[6]+2821735955&4294967295,P=$+(N<<17&4294967295|N>>>15),N=I+(S^P&($^S))+L[7]+4249261313&4294967295,I=P+(N<<22&4294967295|N>>>10),N=S+($^I&(P^$))+L[8]+1770035416&4294967295,S=I+(N<<7&4294967295|N>>>25),N=$+(P^S&(I^P))+L[9]+2336552879&4294967295,$=S+(N<<12&4294967295|N>>>20),N=P+(I^$&(S^I))+L[10]+4294925233&4294967295,P=$+(N<<17&4294967295|N>>>15),N=I+(S^P&($^S))+L[11]+2304563134&4294967295,I=P+(N<<22&4294967295|N>>>10),N=S+($^I&(P^$))+L[12]+1804603682&4294967295,S=I+(N<<7&4294967295|N>>>25),N=$+(P^S&(I^P))+L[13]+4254626195&4294967295,$=S+(N<<12&4294967295|N>>>20),N=P+(I^$&(S^I))+L[14]+2792965006&4294967295,P=$+(N<<17&4294967295|N>>>15),N=I+(S^P&($^S))+L[15]+1236535329&4294967295,I=P+(N<<22&4294967295|N>>>10),N=S+(P^$&(I^P))+L[1]+4129170786&4294967295,S=I+(N<<5&4294967295|N>>>27),N=$+(I^P&(S^I))+L[6]+3225465664&4294967295,$=S+(N<<9&4294967295|N>>>23),N=P+(S^I&($^S))+L[11]+643717713&4294967295,P=$+(N<<14&4294967295|N>>>18),N=I+($^S&(P^$))+L[0]+3921069994&4294967295,I=P+(N<<20&4294967295|N>>>12),N=S+(P^$&(I^P))+L[5]+3593408605&4294967295,S=I+(N<<5&4294967295|N>>>27),N=$+(I^P&(S^I))+L[10]+38016083&4294967295,$=S+(N<<9&4294967295|N>>>23),N=P+(S^I&($^S))+L[15]+3634488961&4294967295,P=$+(N<<14&4294967295|N>>>18),N=I+($^S&(P^$))+L[4]+3889429448&4294967295,I=P+(N<<20&4294967295|N>>>12),N=S+(P^$&(I^P))+L[9]+568446438&4294967295,S=I+(N<<5&4294967295|N>>>27),N=$+(I^P&(S^I))+L[14]+3275163606&4294967295,$=S+(N<<9&4294967295|N>>>23),N=P+(S^I&($^S))+L[3]+4107603335&4294967295,P=$+(N<<14&4294967295|N>>>18),N=I+($^S&(P^$))+L[8]+1163531501&4294967295,I=P+(N<<20&4294967295|N>>>12),N=S+(P^$&(I^P))+L[13]+2850285829&4294967295,S=I+(N<<5&4294967295|N>>>27),N=$+(I^P&(S^I))+L[2]+4243563512&4294967295,$=S+(N<<9&4294967295|N>>>23),N=P+(S^I&($^S))+L[7]+1735328473&4294967295,P=$+(N<<14&4294967295|N>>>18),N=I+($^S&(P^$))+L[12]+2368359562&4294967295,I=P+(N<<20&4294967295|N>>>12),N=S+(I^P^$)+L[5]+4294588738&4294967295,S=I+(N<<4&4294967295|N>>>28),N=$+(S^I^P)+L[8]+2272392833&4294967295,$=S+(N<<11&4294967295|N>>>21),N=P+($^S^I)+L[11]+1839030562&4294967295,P=$+(N<<16&4294967295|N>>>16),N=I+(P^$^S)+L[14]+4259657740&4294967295,I=P+(N<<23&4294967295|N>>>9),N=S+(I^P^$)+L[1]+2763975236&4294967295,S=I+(N<<4&4294967295|N>>>28),N=$+(S^I^P)+L[4]+1272893353&4294967295,$=S+(N<<11&4294967295|N>>>21),N=P+($^S^I)+L[7]+4139469664&4294967295,P=$+(N<<16&4294967295|N>>>16),N=I+(P^$^S)+L[10]+3200236656&4294967295,I=P+(N<<23&4294967295|N>>>9),N=S+(I^P^$)+L[13]+681279174&4294967295,S=I+(N<<4&4294967295|N>>>28),N=$+(S^I^P)+L[0]+3936430074&4294967295,$=S+(N<<11&4294967295|N>>>21),N=P+($^S^I)+L[3]+3572445317&4294967295,P=$+(N<<16&4294967295|N>>>16),N=I+(P^$^S)+L[6]+76029189&4294967295,I=P+(N<<23&4294967295|N>>>9),N=S+(I^P^$)+L[9]+3654602809&4294967295,S=I+(N<<4&4294967295|N>>>28),N=$+(S^I^P)+L[12]+3873151461&4294967295,$=S+(N<<11&4294967295|N>>>21),N=P+($^S^I)+L[15]+530742520&4294967295,P=$+(N<<16&4294967295|N>>>16),N=I+(P^$^S)+L[2]+3299628645&4294967295,I=P+(N<<23&4294967295|N>>>9),N=S+(P^(I|~$))+L[0]+4096336452&4294967295,S=I+(N<<6&4294967295|N>>>26),N=$+(I^(S|~P))+L[7]+1126891415&4294967295,$=S+(N<<10&4294967295|N>>>22),N=P+(S^($|~I))+L[14]+2878612391&4294967295,P=$+(N<<15&4294967295|N>>>17),N=I+($^(P|~S))+L[5]+4237533241&4294967295,I=P+(N<<21&4294967295|N>>>11),N=S+(P^(I|~$))+L[12]+1700485571&4294967295,S=I+(N<<6&4294967295|N>>>26),N=$+(I^(S|~P))+L[3]+2399980690&4294967295,$=S+(N<<10&4294967295|N>>>22),N=P+(S^($|~I))+L[10]+4293915773&4294967295,P=$+(N<<15&4294967295|N>>>17),N=I+($^(P|~S))+L[1]+2240044497&4294967295,I=P+(N<<21&4294967295|N>>>11),N=S+(P^(I|~$))+L[8]+1873313359&4294967295,S=I+(N<<6&4294967295|N>>>26),N=$+(I^(S|~P))+L[15]+4264355552&4294967295,$=S+(N<<10&4294967295|N>>>22),N=P+(S^($|~I))+L[6]+2734768916&4294967295,P=$+(N<<15&4294967295|N>>>17),N=I+($^(P|~S))+L[13]+1309151649&4294967295,I=P+(N<<21&4294967295|N>>>11),N=S+(P^(I|~$))+L[4]+4149444226&4294967295,S=I+(N<<6&4294967295|N>>>26),N=$+(I^(S|~P))+L[11]+3174756917&4294967295,$=S+(N<<10&4294967295|N>>>22),N=P+(S^($|~I))+L[2]+718787259&4294967295,P=$+(N<<15&4294967295|N>>>17),N=I+($^(P|~S))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+$&4294967295}n.prototype.u=function(A,S){S===void 0&&(S=A.length);for(var I=S-this.blockSize,L=this.B,P=this.h,$=0;$<S;){if(P==0)for(;$<=I;)i(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<S;)if(L[P++]=A.charCodeAt($++),P==this.blockSize){i(this,L),P=0;break}}else for(;$<S;)if(L[P++]=A[$++],P==this.blockSize){i(this,L),P=0;break}}this.h=P,this.o+=S},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;var I=8*this.o;for(S=A.length-8;S<A.length;++S)A[S]=I&255,I/=256;for(this.u(A),A=Array(16),S=I=0;4>S;++S)for(var L=0;32>L;L+=8)A[I++]=this.g[S]>>>L&255;return A};function r(A,S){var I=a;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=S(A)}function o(A,S){this.h=S;for(var I=[],L=!0,P=A.length-1;0<=P;P--){var $=A[P]|0;L&&$==S||(I[P]=$,L=!1)}this.g=I}var a={};function l(A){return-128<=A&&128>A?r(A,function(S){return new o([S|0],0>S?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return y(c(-A));for(var S=[],I=1,L=0;A>=I;L++)S[L]=A/I|0,I*=4294967296;return new o(S,0)}function u(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return y(u(A.substring(1),S));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(S,8)),L=d,P=0;P<A.length;P+=8){var $=Math.min(8,A.length-P),N=parseInt(A.substring(P,P+$),S);8>$?($=c(Math.pow(S,$)),L=L.j($).add(c(N))):(L=L.j(I),L=L.add(c(N)))}return L}var d=l(0),f=l(1),m=l(16777216);s=o.prototype,s.m=function(){if(b(this))return-y(this).m();for(var A=0,S=1,I=0;I<this.g.length;I++){var L=this.i(I);A+=(0<=L?L:4294967296+L)*S,S*=4294967296}return A},s.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(v(this))return"0";if(b(this))return"-"+y(this).toString(A);for(var S=c(Math.pow(A,6)),I=this,L="";;){var P=O(I,S).g;I=w(I,P.j(S));var $=((0<I.g.length?I.g[0]:I.h)>>>0).toString(A);if(I=P,v(I))return $+L;for(;6>$.length;)$="0"+$;L=$+L}},s.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function v(A){if(A.h!=0)return!1;for(var S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function b(A){return A.h==-1}s.l=function(A){return A=w(this,A),b(A)?-1:v(A)?0:1};function y(A){for(var S=A.g.length,I=[],L=0;L<S;L++)I[L]=~A.g[L];return new o(I,~A.h).add(f)}s.abs=function(){return b(this)?y(this):this},s.add=function(A){for(var S=Math.max(this.g.length,A.g.length),I=[],L=0,P=0;P<=S;P++){var $=L+(this.i(P)&65535)+(A.i(P)&65535),N=($>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);L=N>>>16,$&=65535,N&=65535,I[P]=N<<16|$}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(A,S){return A.add(y(S))}s.j=function(A){if(v(this)||v(A))return d;if(b(this))return b(A)?y(this).j(y(A)):y(y(this).j(A));if(b(A))return y(this.j(y(A)));if(0>this.l(m)&&0>A.l(m))return c(this.m()*A.m());for(var S=this.g.length+A.g.length,I=[],L=0;L<2*S;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(var P=0;P<A.g.length;P++){var $=this.i(L)>>>16,N=this.i(L)&65535,_t=A.i(P)>>>16,xt=A.i(P)&65535;I[2*L+2*P]+=N*xt,k(I,2*L+2*P),I[2*L+2*P+1]+=$*xt,k(I,2*L+2*P+1),I[2*L+2*P+1]+=N*_t,k(I,2*L+2*P+1),I[2*L+2*P+2]+=$*_t,k(I,2*L+2*P+2)}for(L=0;L<S;L++)I[L]=I[2*L+1]<<16|I[2*L];for(L=S;L<2*S;L++)I[L]=0;return new o(I,0)};function k(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function M(A,S){this.g=A,this.h=S}function O(A,S){if(v(S))throw Error("division by zero");if(v(A))return new M(d,d);if(b(A))return S=O(y(A),S),new M(y(S.g),y(S.h));if(b(S))return S=O(A,y(S)),new M(y(S.g),S.h);if(30<A.g.length){if(b(A)||b(S))throw Error("slowDivide_ only works with positive integers.");for(var I=f,L=S;0>=L.l(A);)I=B(I),L=B(L);var P=V(I,1),$=V(L,1);for(L=V(L,2),I=V(I,2);!v(L);){var N=$.add(L);0>=N.l(A)&&(P=P.add(I),$=N),L=V(L,1),I=V(I,1)}return S=w(A,P.j(S)),new M(P,S)}for(P=d;0<=A.l(S);){for(I=Math.max(1,Math.floor(A.m()/S.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),$=c(I),N=$.j(S);b(N)||0<N.l(A);)I-=L,$=c(I),N=$.j(S);v($)&&($=f),P=P.add($),A=w(A,N)}return new M(P,A)}s.A=function(A){return O(this,A).h},s.and=function(A){for(var S=Math.max(this.g.length,A.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)&A.i(L);return new o(I,this.h&A.h)},s.or=function(A){for(var S=Math.max(this.g.length,A.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)|A.i(L);return new o(I,this.h|A.h)},s.xor=function(A){for(var S=Math.max(this.g.length,A.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)^A.i(L);return new o(I,this.h^A.h)};function B(A){for(var S=A.g.length+1,I=[],L=0;L<S;L++)I[L]=A.i(L)<<1|A.i(L-1)>>>31;return new o(I,A.h)}function V(A,S){var I=S>>5;S%=32;for(var L=A.g.length-I,P=[],$=0;$<L;$++)P[$]=0<S?A.i($+I)>>>S|A.i($+I+1)<<32-S:A.i($+I);return new o(P,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,wS=o}).apply(typeof rT<"u"?rT:typeof self<"u"?self:typeof window<"u"?window:{});var Jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,_,C){return p==Array.prototype||p==Object.prototype||(p[_]=C.value),p};function e(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jv=="object"&&Jv];for(var _=0;_<p.length;++_){var C=p[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var n=e(this);function i(p,_){if(_)t:{var C=n;p=p.split(".");for(var F=0;F<p.length-1;F++){var st=p[F];if(!(st in C))break t;C=C[st]}p=p[p.length-1],F=C[p],_=_(F),_!=F&&_!=null&&t(C,p,{configurable:!0,writable:!0,value:_})}}function r(p,_){p instanceof String&&(p+="");var C=0,F=!1,st={next:function(){if(!F&&C<p.length){var E=C++;return{value:_(E,p[E]),done:!1}}return F=!0,{done:!0,value:void 0}}};return st[Symbol.iterator]=function(){return st},st}i("Array.prototype.values",function(p){return p||function(){return r(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(p){var _=typeof p;return _=_!="object"?_:p?Array.isArray(p)?"array":_:"null",_=="array"||_=="object"&&typeof p.length=="number"}function c(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function u(p,_,C){return p.call.apply(p.bind,arguments)}function d(p,_,C){if(!p)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var st=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(st,F),p.apply(_,st)}}return function(){return p.apply(_,arguments)}}function f(p,_,C){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function m(p,_){var C=Array.prototype.slice.call(arguments,1);return function(){var F=C.slice();return F.push.apply(F,arguments),p.apply(this,F)}}function v(p,_){function C(){}C.prototype=_.prototype,p.aa=_.prototype,p.prototype=new C,p.prototype.constructor=p,p.Qb=function(F,st,E){for(var x=Array(arguments.length-2),K=2;K<arguments.length;K++)x[K-2]=arguments[K];return _.prototype[st].apply(F,x)}}function b(p){const _=p.length;if(0<_){const C=Array(_);for(let F=0;F<_;F++)C[F]=p[F];return C}return[]}function y(p,_){for(let C=1;C<arguments.length;C++){const F=arguments[C];if(l(F)){const st=p.length||0,E=F.length||0;p.length=st+E;for(let x=0;x<E;x++)p[st+x]=F[x]}else p.push(F)}}class w{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function k(p){return/^[\s\xa0]*$/.test(p)}function M(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function O(p){return O[" "](p),p}O[" "]=function(){};var B=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function V(p,_,C){for(const F in p)_.call(C,p[F],F,p)}function A(p,_){for(const C in p)_.call(void 0,p[C],C,p)}function S(p){const _={};for(const C in p)_[C]=p[C];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(p,_){let C,F;for(let st=1;st<arguments.length;st++){F=arguments[st];for(C in F)p[C]=F[C];for(let E=0;E<I.length;E++)C=I[E],Object.prototype.hasOwnProperty.call(F,C)&&(p[C]=F[C])}}function P(p){var _=1;p=p.split(":");const C=[];for(;0<_&&p.length;)C.push(p.shift()),_--;return p.length&&C.push(p.join(":")),C}function $(p){a.setTimeout(()=>{throw p},0)}function N(){var p=U;let _=null;return p.g&&(_=p.g,p.g=p.g.next,p.g||(p.h=null),_.next=null),_}class _t{constructor(){this.h=this.g=null}add(_,C){const F=xt.get();F.set(_,C),this.h?this.h.next=F:this.g=F,this.h=F}}var xt=new w(()=>new tt,p=>p.reset());class tt{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let X,nt=!1,U=new _t,it=()=>{const p=a.Promise.resolve(void 0);X=()=>{p.then(vt)}};var vt=()=>{for(var p;p=N();){try{p.h.call(p.g)}catch(C){$(C)}var _=xt;_.j(p),100>_.h&&(_.h++,p.next=_.g,_.g=p)}nt=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(p,_){this.type=p,this.g=this.target=_,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var dt=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};a.addEventListener("test",C,_),a.removeEventListener("test",C,_)}catch{}return p})();function Ft(p,_){if(Z.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var C=this.type=p.type,F=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget){if(B){t:{try{O(_.nodeName);var st=!0;break t}catch{}st=!1}st||(_=null)}}else C=="mouseover"?_=p.fromElement:C=="mouseout"&&(_=p.toElement);this.relatedTarget=_,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:kt[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ft.aa.h.call(this)}}v(Ft,Z);var kt={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),bt=0;function At(p,_,C,F,st){this.listener=p,this.proxy=null,this.src=_,this.type=C,this.capture=!!F,this.ha=st,this.key=++bt,this.da=this.fa=!1}function Pt(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Yt(p){this.src=p,this.g={},this.h=0}Yt.prototype.add=function(p,_,C,F,st){var E=p.toString();p=this.g[E],p||(p=this.g[E]=[],this.h++);var x=z(p,_,F,st);return-1<x?(_=p[x],C||(_.fa=!1)):(_=new At(_,this.src,E,!!F,st),_.fa=C,p.push(_)),_};function H(p,_){var C=_.type;if(C in p.g){var F=p.g[C],st=Array.prototype.indexOf.call(F,_,void 0),E;(E=0<=st)&&Array.prototype.splice.call(F,st,1),E&&(Pt(_),p.g[C].length==0&&(delete p.g[C],p.h--))}}function z(p,_,C,F){for(var st=0;st<p.length;++st){var E=p[st];if(!E.da&&E.listener==_&&E.capture==!!C&&E.ha==F)return st}return-1}var J="closure_lm_"+(1e6*Math.random()|0),rt={};function ft(p,_,C,F,st){if(Array.isArray(_)){for(var E=0;E<_.length;E++)ft(p,_[E],C,F,st);return null}return C=zt(C),p&&p[Y]?p.K(_,C,c(F)?!!F.capture:!1,st):ut(p,_,C,!1,F,st)}function ut(p,_,C,F,st,E){if(!_)throw Error("Invalid event type");var x=c(st)?!!st.capture:!!st,K=It(p);if(K||(p[J]=K=new Yt(p)),C=K.add(_,C,F,x,E),C.proxy)return C;if(F=Et(),C.proxy=F,F.src=p,F.listener=C,p.addEventListener)dt||(st=x),st===void 0&&(st=!1),p.addEventListener(_.toString(),F,st);else if(p.attachEvent)p.attachEvent(pt(_.toString()),F);else if(p.addListener&&p.removeListener)p.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Et(){function p(C){return _.call(p.src,p.listener,C)}const _=Ut;return p}function yt(p,_,C,F,st){if(Array.isArray(_))for(var E=0;E<_.length;E++)yt(p,_[E],C,F,st);else F=c(F)?!!F.capture:!!F,C=zt(C),p&&p[Y]?(p=p.i,_=String(_).toString(),_ in p.g&&(E=p.g[_],C=z(E,C,F,st),-1<C&&(Pt(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete p.g[_],p.h--)))):p&&(p=It(p))&&(_=p.g[_.toString()],p=-1,_&&(p=z(_,C,F,st)),(C=-1<p?_[p]:null)&&wt(C))}function wt(p){if(typeof p!="number"&&p&&!p.da){var _=p.src;if(_&&_[Y])H(_.i,p);else{var C=p.type,F=p.proxy;_.removeEventListener?_.removeEventListener(C,F,p.capture):_.detachEvent?_.detachEvent(pt(C),F):_.addListener&&_.removeListener&&_.removeListener(F),(C=It(_))?(H(C,p),C.h==0&&(C.src=null,_[J]=null)):Pt(p)}}}function pt(p){return p in rt?rt[p]:rt[p]="on"+p}function Ut(p,_){if(p.da)p=!0;else{_=new Ft(_,this);var C=p.listener,F=p.ha||p.src;p.fa&&wt(p),p=C.call(F,_)}return p}function It(p){return p=p[J],p instanceof Yt?p:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function zt(p){return typeof p=="function"?p:(p[Tt]||(p[Tt]=function(_){return p.handleEvent(_)}),p[Tt])}function Ht(){j.call(this),this.i=new Yt(this),this.M=this,this.F=null}v(Ht,j),Ht.prototype[Y]=!0,Ht.prototype.removeEventListener=function(p,_,C,F){yt(this,p,_,C,F)};function Lt(p,_){var C,F=p.F;if(F)for(C=[];F;F=F.F)C.push(F);if(p=p.M,F=_.type||_,typeof _=="string")_=new Z(_,p);else if(_ instanceof Z)_.target=_.target||p;else{var st=_;_=new Z(F,p),L(_,st)}if(st=!0,C)for(var E=C.length-1;0<=E;E--){var x=_.g=C[E];st=ee(x,F,!0,_)&&st}if(x=_.g=p,st=ee(x,F,!0,_)&&st,st=ee(x,F,!1,_)&&st,C)for(E=0;E<C.length;E++)x=_.g=C[E],st=ee(x,F,!1,_)&&st}Ht.prototype.N=function(){if(Ht.aa.N.call(this),this.i){var p=this.i,_;for(_ in p.g){for(var C=p.g[_],F=0;F<C.length;F++)Pt(C[F]);delete p.g[_],p.h--}}this.F=null},Ht.prototype.K=function(p,_,C,F){return this.i.add(String(p),_,!1,C,F)},Ht.prototype.L=function(p,_,C,F){return this.i.add(String(p),_,!0,C,F)};function ee(p,_,C,F){if(_=p.i.g[String(_)],!_)return!0;_=_.concat();for(var st=!0,E=0;E<_.length;++E){var x=_[E];if(x&&!x.da&&x.capture==C){var K=x.listener,at=x.ha||x.src;x.fa&&H(p.i,x),st=K.call(at,F)!==!1&&st}}return st&&!F.defaultPrevented}function $e(p,_,C){if(typeof p=="function")C&&(p=f(p,C));else if(p&&typeof p.handleEvent=="function")p=f(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(p,_||0)}function he(p){p.g=$e(()=>{p.g=null,p.i&&(p.i=!1,he(p))},p.l);const _=p.h;p.h=null,p.m.apply(null,_)}class cs extends j{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ke(p){j.call(this),this.h=p,this.g={}}v(ke,j);var Re=[];function Is(p){V(p.g,function(_,C){this.g.hasOwnProperty(C)&&wt(_)},p),p.g={}}ke.prototype.N=function(){ke.aa.N.call(this),Is(this)},ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var We=a.JSON.stringify,_s=a.JSON.parse,kn=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function Wn(){}Wn.prototype.h=null;function Rt(p){return p.h||(p.h=p.i())}function qt(){}var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zs(){Z.call(this,"d")}v(Zs,Z);function an(){Z.call(this,"c")}v(an,Z);var oi={},nc=null;function Ha(){return nc=nc||new Ht}oi.La="serverreachability";function ch(p){Z.call(this,oi.La,p)}v(ch,Z);function Dr(p){const _=Ha();Lt(_,new ch(_))}oi.STAT_EVENT="statevent";function Yi(p,_){Z.call(this,oi.STAT_EVENT,p),this.stat=_}v(Yi,Z);function ws(p){const _=Ha();Lt(_,new Yi(_,p))}oi.Ma="timingevent";function wo(p,_){Z.call(this,oi.Ma,p),this.size=_}v(wo,Z);function Ii(p,_){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},_)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function Q(p,_,C,F,st,E){p.info(function(){if(p.g)if(E)for(var x="",K=E.split("&"),at=0;at<K.length;at++){var W=K[at].split("=");if(1<W.length){var mt=W[0];W=W[1];var jt=mt.split("_");x=2<=jt.length&&jt[1]=="type"?x+(mt+"="+W+"&"):x+(mt+"=redacted&")}}else x=null;else x=E;return"XMLHTTP REQ ("+F+") [attempt "+st+"]: "+_+`
`+C+`
`+x})}function et(p,_,C,F,st,E,x){p.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+st+"]: "+_+`
`+C+`
`+E+" "+x})}function gt(p,_,C,F){p.info(function(){return"XMLHTTP TEXT ("+_+"): "+Bt(p,C)+(F?" "+F:"")})}function Ct(p,_){p.info(function(){return"TIMEOUT: "+_})}Ao.prototype.info=function(){};function Bt(p,_){if(!p.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(p=0;p<C.length;p++)if(Array.isArray(C[p])){var F=C[p];if(!(2>F.length)){var st=F[1];if(Array.isArray(st)&&!(1>st.length)){var E=st[0];if(E!="noop"&&E!="stop"&&E!="close")for(var x=1;x<st.length;x++)st[x]=""}}}}return We(C)}catch{return _}}var Dt={NO_ERROR:0,TIMEOUT:8},ne={},Me;function us(){}v(us,Wn),us.prototype.g=function(){return new XMLHttpRequest},us.prototype.i=function(){return{}},Me=new us;function Ae(p,_,C,F){this.j=p,this.i=_,this.l=C,this.R=F||1,this.U=new ke(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ic}function ic(){this.i=null,this.g="",this.h=!1}var rc={},ai={};function Cf(p,_,C){p.L=1,p.v=vh(Pi(_)),p.m=C,p.P=!0,gv(p,null)}function gv(p,_){p.F=Date.now(),uh(p),p.A=Pi(p.v);var C=p.A,F=p.R;Array.isArray(F)||(F=[String(F)]),za(C.i,"t",F),p.C=0,C=p.j.J,p.h=new ic,p.g=Hv(p.j,C?_:null,!p.m),0<p.O&&(p.M=new cs(f(p.Y,p,p.g),p.O)),_=p.U,C=p.g,F=p.ca;var st="readystatechange";Array.isArray(st)||(st&&(Re[0]=st.toString()),st=Re);for(var E=0;E<st.length;E++){var x=ft(C,st[E],F||_.handleEvent,!1,_.h||_);if(!x)break;_.g[x.key]=x}_=p.H?S(p.H):{},p.m?(p.u||(p.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,_)):(p.u="GET",p.g.ea(p.A,p.u,null,_)),Dr(),Q(p.i,p.u,p.A,p.l,p.R,p.m)}Ae.prototype.ca=function(p){p=p.target;const _=this.M;_&&Ji(p)==3?_.j():this.Y(p)},Ae.prototype.Y=function(p){try{if(p==this.g)t:{const jt=Ji(this.g);var _=this.g.Ba();const Te=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Rv(this.g)))){this.J||jt!=4||_==7||(_==8||0>=Te?Dr(3):Dr(2)),hh(this);var C=this.g.Z();this.X=C;e:if(kf(this)){var F=Rv(this.g);p="";var st=F.length,E=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){So(this),ja(this);var x="";break e}this.h.i=new a.TextDecoder}for(_=0;_<st;_++)this.h.h=!0,p+=this.h.i.decode(F[_],{stream:!(E&&_==st-1)});F.length=0,this.h.g+=p,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=C==200,et(this.i,this.u,this.A,this.l,this.R,jt,C),this.o){if(this.T&&!this.K){e:{if(this.g){var K,at=this.g;if((K=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(K)){var W=K;break e}}W=null}if(C=W)gt(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oc(this,C);else{this.o=!1,this.s=3,ws(12),So(this),ja(this);break t}}if(this.P){C=!0;let De;for(;!this.J&&this.C<x.length;)if(De=u0(this,x),De==ai){jt==4&&(this.s=4,ws(14),C=!1),gt(this.i,this.l,null,"[Incomplete Response]");break}else if(De==rc){this.s=4,ws(15),gt(this.i,this.l,x,"[Invalid Chunk]"),C=!1;break}else gt(this.i,this.l,De,null),oc(this,De);if(kf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||x.length!=0||this.h.h||(this.s=1,ws(16),C=!1),this.o=this.o&&C,!C)gt(this.i,this.l,x,"[Invalid Chunked Response]"),So(this),ja(this);else if(0<x.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Nr(mt),mt.M=!0,ws(11))}}else gt(this.i,this.l,x,null),oc(this,x);jt==4&&So(this),this.o&&!this.J&&(jt==4?Bv(this.j,this):(this.o=!1,uh(this)))}else Mv(this.g),C==400&&0<x.indexOf("Unknown SID")?(this.s=3,ws(12)):(this.s=0,ws(13)),So(this),ja(this)}}}catch{}finally{}};function kf(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function u0(p,_){var C=p.C,F=_.indexOf(`
`,C);return F==-1?ai:(C=Number(_.substring(C,F)),isNaN(C)?rc:(F+=1,F+C>_.length?ai:(_=_.slice(F,F+C),p.C=F+C,_)))}Ae.prototype.cancel=function(){this.J=!0,So(this)};function uh(p){p.S=Date.now()+p.I,If(p,p.I)}function If(p,_){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Ii(f(p.ba,p),_)}function hh(p){p.B&&(a.clearTimeout(p.B),p.B=null)}Ae.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Ct(this.i,this.A),this.L!=2&&(Dr(),ws(17)),So(this),this.s=2,ja(this)):If(this,this.S-p)};function ja(p){p.j.G==0||p.J||Bv(p.j,p)}function So(p){hh(p);var _=p.M;_&&typeof _.ma=="function"&&_.ma(),p.M=null,Is(p.U),p.g&&(_=p.g,p.g=null,_.abort(),_.ma())}function oc(p,_){try{var C=p.j;if(C.G!=0&&(C.g==p||Rf(C.h,p))){if(!p.K&&Rf(C.h,p)&&C.G==3){try{var F=C.Da.g.parse(_)}catch{F=null}if(Array.isArray(F)&&F.length==3){var st=F;if(st[0]==0){t:if(!C.u){if(C.g)if(C.g.F+3e3<p.F)Th(C),Lr(C);else break t;Lf(C),ws(18)}}else C.za=st[1],0<C.za-C.T&&37500>st[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ii(f(C.Za,C),6e3));if(1>=vv(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else xo(C,11)}else if((p.K||C.g==p)&&Th(C),!k(_))for(st=C.Da.g.parse(_),_=0;_<st.length;_++){let W=st[_];if(C.T=W[0],W=W[1],C.G==2)if(W[0]=="c"){C.K=W[1],C.ia=W[2];const mt=W[3];mt!=null&&(C.la=mt,C.j.info("VER="+C.la));const jt=W[4];jt!=null&&(C.Aa=jt,C.j.info("SVER="+C.Aa));const Te=W[5];Te!=null&&typeof Te=="number"&&0<Te&&(F=1.5*Te,C.L=F,C.j.info("backChannelRequestTimeoutMs_="+F)),F=C;const De=p.g;if(De){const ds=De.g?De.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ds){var E=F.h;E.g||ds.indexOf("spdy")==-1&&ds.indexOf("quic")==-1&&ds.indexOf("h2")==-1||(E.j=E.l,E.g=new Set,E.h&&(Mf(E,E.h),E.h=null))}if(F.D){const cn=De.g?De.g.getResponseHeader("X-HTTP-Session-Id"):null;cn&&(F.ya=cn,Ge(F.I,F.D,cn))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-p.F,C.j.info("Handshake RTT: "+C.R+"ms")),F=C;var x=p;if(F.qa=Vv(F,F.J?F.ia:null,F.W),x.K){bv(F.h,x);var K=x,at=F.L;at&&(K.I=at),K.B&&(hh(K),uh(K)),F.g=x}else Fv(F);0<C.i.length&&Eh(C)}else W[0]!="stop"&&W[0]!="close"||xo(C,7);else C.G==3&&(W[0]=="stop"||W[0]=="close"?W[0]=="stop"?xo(C,7):Of(C):W[0]!="noop"&&C.l&&C.l.ta(W),C.v=0)}}Dr(4)}catch{}}var dh=class{constructor(p,_){this.g=p,this.map=_}};function mv(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pf(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function vv(p){return p.h?1:p.g?p.g.size:0}function Rf(p,_){return p.h?p.h==_:p.g?p.g.has(_):!1}function Mf(p,_){p.g?p.g.add(_):p.h=_}function bv(p,_){p.h&&p.h==_?p.h=null:p.g&&p.g.has(_)&&p.g.delete(_)}mv.prototype.cancel=function(){if(this.i=yv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function yv(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let _=p.i;for(const C of p.g.values())_=_.concat(C.D);return _}return b(p.i)}function fh(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(l(p)){for(var _=[],C=p.length,F=0;F<C;F++)_.push(p[F]);return _}_=[],C=0;for(F in p)_[C++]=p[F];return _}function h0(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||typeof p=="string"){var _=[];p=p.length;for(var C=0;C<p;C++)_.push(C);return _}_=[],C=0;for(const F in p)_[C++]=F;return _}}}function ph(p,_){if(p.forEach&&typeof p.forEach=="function")p.forEach(_,void 0);else if(l(p)||typeof p=="string")Array.prototype.forEach.call(p,_,void 0);else for(var C=h0(p),F=fh(p),st=F.length,E=0;E<st;E++)_.call(void 0,F[E],C&&C[E],p)}var _v=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gh(p,_){if(p){p=p.split("&");for(var C=0;C<p.length;C++){var F=p[C].indexOf("="),st=null;if(0<=F){var E=p[C].substring(0,F);st=p[C].substring(F+1)}else E=p[C];_(E,st?decodeURIComponent(st.replace(/\+/g," ")):"")}}}function Eo(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Eo){this.h=p.h,ac(this,p.j),this.o=p.o,this.g=p.g,mh(this,p.s),this.l=p.l;var _=p.i,C=new uc;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),wv(this,C),this.m=p.m}else p&&(_=String(p).match(_v))?(this.h=!1,ac(this,_[1]||"",!0),this.o=lc(_[2]||""),this.g=lc(_[3]||"",!0),mh(this,_[4]),this.l=lc(_[5]||"",!0),wv(this,_[6]||"",!0),this.m=lc(_[7]||"")):(this.h=!1,this.i=new uc(null,this.h))}Eo.prototype.toString=function(){var p=[],_=this.j;_&&p.push(ln(_,Av,!0),":");var C=this.g;return(C||_=="file")&&(p.push("//"),(_=this.o)&&p.push(ln(_,Av,!0),"@"),p.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&p.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(ln(C,C.charAt(0)=="/"?f0:d0,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",ln(C,p0)),p.join("")};function Pi(p){return new Eo(p)}function ac(p,_,C){p.j=C?lc(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function mh(p,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);p.s=_}else p.s=null}function wv(p,_,C){_ instanceof uc?(p.i=_,g0(p.i,p.h)):(C||(_=ln(_,cc)),p.i=new uc(_,p.h))}function Ge(p,_,C){p.i.set(_,C)}function vh(p){return Ge(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function lc(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ln(p,_,C){return typeof p=="string"?(p=encodeURI(p).replace(_,Ls),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ls(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Av=/[#\/\?@]/g,d0=/[#\?:]/g,f0=/[#\?]/g,cc=/[#\?@]/g,p0=/#/g;function uc(p,_){this.h=this.g=null,this.i=p||null,this.j=!!_}function Or(p){p.g||(p.g=new Map,p.h=0,p.i&&gh(p.i,function(_,C){p.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}s=uc.prototype,s.add=function(p,_){Or(this),this.i=null,p=Wa(this,p);var C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(_),this.h+=1,this};function bh(p,_){Or(p),_=Wa(p,_),p.g.has(_)&&(p.i=null,p.h-=p.g.get(_).length,p.g.delete(_))}function yh(p,_){return Or(p),_=Wa(p,_),p.g.has(_)}s.forEach=function(p,_){Or(this),this.g.forEach(function(C,F){C.forEach(function(st){p.call(_,st,F,this)},this)},this)},s.na=function(){Or(this);const p=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let F=0;F<_.length;F++){const st=p[F];for(let E=0;E<st.length;E++)C.push(_[F])}return C},s.V=function(p){Or(this);let _=[];if(typeof p=="string")yh(this,p)&&(_=_.concat(this.g.get(Wa(this,p))));else{p=Array.from(this.g.values());for(let C=0;C<p.length;C++)_=_.concat(p[C])}return _},s.set=function(p,_){return Or(this),this.i=null,p=Wa(this,p),yh(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[_]),this.h+=1,this},s.get=function(p,_){return p?(p=this.V(p),0<p.length?String(p[0]):_):_};function za(p,_,C){bh(p,_),0<C.length&&(p.i=null,p.g.set(Wa(p,_),b(C)),p.h+=C.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var F=_[C];const E=encodeURIComponent(String(F)),x=this.V(F);for(F=0;F<x.length;F++){var st=E;x[F]!==""&&(st+="="+encodeURIComponent(String(x[F]))),p.push(st)}}return this.i=p.join("&")};function Wa(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function g0(p,_){_&&!p.j&&(Or(p),p.i=null,p.g.forEach(function(C,F){var st=F.toLowerCase();F!=st&&(bh(this,F),za(this,st,C))},p)),p.j=_}function m0(p,_){const C=new Ao;if(a.Image){const F=new Image;F.onload=m(Ki,C,"TestLoadImage: loaded",!0,_,F),F.onerror=m(Ki,C,"TestLoadImage: error",!1,_,F),F.onabort=m(Ki,C,"TestLoadImage: abort",!1,_,F),F.ontimeout=m(Ki,C,"TestLoadImage: timeout",!1,_,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=p}else _(!1)}function v0(p,_){const C=new Ao,F=new AbortController,st=setTimeout(()=>{F.abort(),Ki(C,"TestPingServer: timeout",!1,_)},1e4);fetch(p,{signal:F.signal}).then(E=>{clearTimeout(st),E.ok?Ki(C,"TestPingServer: ok",!0,_):Ki(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(st),Ki(C,"TestPingServer: error",!1,_)})}function Ki(p,_,C,F,st){try{st&&(st.onload=null,st.onerror=null,st.onabort=null,st.ontimeout=null),F(C)}catch{}}function b0(){this.g=new kn}function Sv(p,_,C){const F=C||"";try{ph(p,function(st,E){let x=st;c(st)&&(x=We(st)),_.push(F+E+"="+encodeURIComponent(x))})}catch(st){throw _.push(F+"type="+encodeURIComponent("_badmap")),st}}function _h(p){this.l=p.Ub||null,this.j=p.eb||!1}v(_h,Wn),_h.prototype.g=function(){return new wh(this.l,this.j)},_h.prototype.i=(function(p){return function(){return p}})({});function wh(p,_){Ht.call(this),this.D=p,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(wh,Ht),s=wh.prototype,s.open=function(p,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=_,this.readyState=1,dc(this)},s.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(_.body=p),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hc(this)),this.readyState=0},s.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,dc(this)),this.g&&(this.readyState=3,dc(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ev(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ev(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}s.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var _=p.value?p.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!p.done}))&&(this.response=this.responseText+=_)}p.done?hc(this):dc(this),this.readyState==3&&Ev(this)}},s.Ra=function(p){this.g&&(this.response=this.responseText=p,hc(this))},s.Qa=function(p){this.g&&(this.response=p,hc(this))},s.ga=function(){this.g&&hc(this)};function hc(p){p.readyState=4,p.l=null,p.j=null,p.v=null,dc(p)}s.setRequestHeader=function(p,_){this.u.append(p,_)},s.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=_.next();return p.join(`\r
`)};function dc(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(wh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function xv(p){let _="";return V(p,function(C,F){_+=F,_+=":",_+=C,_+=`\r
`}),_}function Df(p,_,C){t:{for(F in C){var F=!1;break t}F=!0}F||(C=xv(C),typeof p=="string"?C!=null&&encodeURIComponent(String(C)):Ge(p,_,C))}function hs(p){Ht.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(hs,Ht);var Ah=/^https?$/i,Tv=["POST","PUT"];s=hs.prototype,s.Ha=function(p){this.J=p},s.ea=function(p,_,C,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);_=_?_.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Me.g(),this.v=this.o?Rt(this.o):Rt(Me),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(_,String(p),!0),this.B=!1}catch(E){Cv(this,E);return}if(p=C||"",C=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var st in F)C.set(st,F[st]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const E of F.keys())C.set(E,F.get(E));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(C.keys()).find(E=>E.toLowerCase()=="content-type"),st=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Tv,_,void 0))||F||st||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[E,x]of C)this.g.setRequestHeader(E,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pv(this),this.u=!0,this.g.send(p),this.u=!1}catch(E){Cv(this,E)}};function Cv(p,_){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=_,p.m=5,kv(p),Sh(p)}function kv(p){p.A||(p.A=!0,Lt(p,"complete"),Lt(p,"error"))}s.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Lt(this,"complete"),Lt(this,"abort"),Sh(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sh(this,!0)),hs.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Iv(this):this.bb())},s.bb=function(){Iv(this)};function Iv(p){if(p.h&&typeof o<"u"&&(!p.v[1]||Ji(p)!=4||p.Z()!=2)){if(p.u&&Ji(p)==4)$e(p.Ea,0,p);else if(Lt(p,"readystatechange"),Ji(p)==4){p.h=!1;try{const x=p.Z();t:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var C;if(!(C=_)){var F;if(F=x===0){var st=String(p.D).match(_v)[1]||null;!st&&a.self&&a.self.location&&(st=a.self.location.protocol.slice(0,-1)),F=!Ah.test(st?st.toLowerCase():"")}C=F}if(C)Lt(p,"complete"),Lt(p,"success");else{p.m=6;try{var E=2<Ji(p)?p.g.statusText:""}catch{E=""}p.l=E+" ["+p.Z()+"]",kv(p)}}finally{Sh(p)}}}}function Sh(p,_){if(p.g){Pv(p);const C=p.g,F=p.v[0]?()=>{}:null;p.g=null,p.v=null,_||Lt(p,"ready");try{C.onreadystatechange=F}catch{}}}function Pv(p){p.I&&(a.clearTimeout(p.I),p.I=null)}s.isActive=function(){return!!this.g};function Ji(p){return p.g?p.g.readyState:0}s.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(p){if(this.g){var _=this.g.responseText;return p&&_.indexOf(p)==0&&(_=_.substring(p.length)),_s(_)}};function Rv(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Mv(p){const _={};p=(p.g&&2<=Ji(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<p.length;F++){if(k(p[F]))continue;var C=P(p[F]);const st=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const E=_[st]||[];_[st]=E,E.push(C)}A(_,function(F){return F.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(p,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||_}function Dv(p){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,p),this.cb=Ga("retryDelaySeedMs",1e4,p),this.Wa=Ga("forwardChannelMaxRetries",2,p),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new mv(p&&p.concurrentRequestLimit),this.Da=new b0,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Dv.prototype,s.la=8,s.G=1,s.connect=function(p,_,C,F){ws(0),this.W=p,this.H=_||{},C&&F!==void 0&&(this.H.OSID=C,this.H.OAID=F),this.F=this.X,this.I=Vv(this,null,this.W),Eh(this)};function Of(p){if(Ov(p),p.G==3){var _=p.U++,C=Pi(p.I);if(Ge(C,"SID",p.K),Ge(C,"RID",_),Ge(C,"TYPE","terminate"),fc(p,C),_=new Ae(p,p.j,_),_.L=2,_.v=vh(Pi(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&a.Image&&(new Image().src=_.v,C=!0),C||(_.g=Hv(_.j,null),_.g.ea(_.v)),_.F=Date.now(),uh(_)}Uv(p)}function Lr(p){p.g&&(Nr(p),p.g.cancel(),p.g=null)}function Ov(p){Lr(p),p.u&&(a.clearTimeout(p.u),p.u=null),Th(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function Eh(p){if(!Pf(p.h)&&!p.s){p.s=!0;var _=p.Ga;X||it(),nt||(X(),nt=!0),U.add(_,p),p.B=0}}function y0(p,_){return vv(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=_.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Ii(f(p.Ga,p,_),$v(p,p.B)),p.B++,!0)}s.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const st=new Ae(this,this.j,p);let E=this.o;if(this.S&&(E?(E=S(E),L(E,this.S)):E=this.S),this.m!==null||this.O||(st.H=E,E=null),this.P)t:{for(var _=0,C=0;C<this.i.length;C++){e:{var F=this.i[C];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break e}F=void 0}if(F===void 0)break;if(_+=F,4096<_){_=C;break t}if(_===4096||C===this.i.length-1){_=C+1;break t}}_=1e3}else _=1e3;_=Nv(this,st,_),C=Pi(this.I),Ge(C,"RID",p),Ge(C,"CVER",22),this.D&&Ge(C,"X-HTTP-Session-Id",this.D),fc(this,C),E&&(this.O?_="headers="+encodeURIComponent(String(xv(E)))+"&"+_:this.m&&Df(C,this.m,E)),Mf(this.h,st),this.Ua&&Ge(C,"TYPE","init"),this.P?(Ge(C,"$req",_),Ge(C,"SID","null"),st.T=!0,Cf(st,C,null)):Cf(st,C,_),this.G=2}}else this.G==3&&(p?Lv(this,p):this.i.length==0||Pf(this.h)||Lv(this))};function Lv(p,_){var C;_?C=_.l:C=p.U++;const F=Pi(p.I);Ge(F,"SID",p.K),Ge(F,"RID",C),Ge(F,"AID",p.T),fc(p,F),p.m&&p.o&&Df(F,p.m,p.o),C=new Ae(p,p.j,C,p.B+1),p.m===null&&(C.H=p.o),_&&(p.i=_.D.concat(p.i)),_=Nv(p,C,1e3),C.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Mf(p.h,C),Cf(C,F,_)}function fc(p,_){p.H&&V(p.H,function(C,F){Ge(_,F,C)}),p.l&&ph({},function(C,F){Ge(_,F,C)})}function Nv(p,_,C){C=Math.min(p.i.length,C);var F=p.l?f(p.l.Na,p.l,p):null;t:{var st=p.i;let E=-1;for(;;){const x=["count="+C];E==-1?0<C?(E=st[0].g,x.push("ofs="+E)):E=0:x.push("ofs="+E);let K=!0;for(let at=0;at<C;at++){let W=st[at].g;const mt=st[at].map;if(W-=E,0>W)E=Math.max(0,st[at].g-100),K=!1;else try{Sv(mt,x,"req"+W+"_")}catch{F&&F(mt)}}if(K){F=x.join("&");break t}}}return p=p.i.splice(0,C),_.D=p,F}function Fv(p){if(!p.g&&!p.u){p.Y=1;var _=p.Fa;X||it(),nt||(X(),nt=!0),U.add(_,p),p.v=0}}function Lf(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Ii(f(p.Fa,p),$v(p,p.v)),p.v++,!0)}s.Fa=function(){if(this.u=null,xh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Ii(f(this.ab,this),p)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ws(10),Lr(this),xh(this))};function Nr(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function xh(p){p.g=new Ae(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var _=Pi(p.qa);Ge(_,"RID","rpc"),Ge(_,"SID",p.K),Ge(_,"AID",p.T),Ge(_,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ge(_,"TO",p.ja),Ge(_,"TYPE","xmlhttp"),fc(p,_),p.m&&p.o&&Df(_,p.m,p.o),p.L&&(p.g.I=p.L);var C=p.g;p=p.ia,C.L=1,C.v=vh(Pi(_)),C.m=null,C.P=!0,gv(C,p)}s.Za=function(){this.C!=null&&(this.C=null,Lr(this),Lf(this),ws(19))};function Th(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function Bv(p,_){var C=null;if(p.g==_){Th(p),Nr(p),p.g=null;var F=2}else if(Rf(p.h,_))C=_.D,bv(p.h,_),F=1;else return;if(p.G!=0){if(_.o)if(F==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var st=p.B;F=Ha(),Lt(F,new wo(F,C)),Eh(p)}else Fv(p);else if(st=_.s,st==3||st==0&&0<_.X||!(F==1&&y0(p,_)||F==2&&Lf(p)))switch(C&&0<C.length&&(_=p.h,_.i=_.i.concat(C)),st){case 1:xo(p,5);break;case 4:xo(p,10);break;case 3:xo(p,6);break;default:xo(p,2)}}}function $v(p,_){let C=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(C*=2),C*_}function xo(p,_){if(p.j.info("Error code "+_),_==2){var C=f(p.fb,p),F=p.Xa;const st=!F;F=new Eo(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ac(F,"https"),vh(F),st?m0(F.toString(),C):v0(F.toString(),C)}else ws(2);p.G=0,p.l&&p.l.sa(_),Uv(p),Ov(p)}s.fb=function(p){p?(this.j.info("Successfully pinged google.com"),ws(2)):(this.j.info("Failed to ping google.com"),ws(1))};function Uv(p){if(p.G=0,p.ka=[],p.l){const _=yv(p.h);(_.length!=0||p.i.length!=0)&&(y(p.ka,_),y(p.ka,p.i),p.h.i.length=0,b(p.i),p.i.length=0),p.l.ra()}}function Vv(p,_,C){var F=C instanceof Eo?Pi(C):new Eo(C);if(F.g!="")_&&(F.g=_+"."+F.g),mh(F,F.s);else{var st=a.location;F=st.protocol,_=_?_+"."+st.hostname:st.hostname,st=+st.port;var E=new Eo(null);F&&ac(E,F),_&&(E.g=_),st&&mh(E,st),C&&(E.l=C),F=E}return C=p.D,_=p.ya,C&&_&&Ge(F,C,_),Ge(F,"VER",p.la),fc(p,F),F}function Hv(p,_,C){if(_&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=p.Ca&&!p.pa?new hs(new _h({eb:C})):new hs(p.pa),_.Ha(p.J),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nf(){}s=Nf.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Gn(p,_){Ht.call(this),this.g=new Dv(_),this.l=p,this.h=_&&_.messageUrlParams||null,p=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(p?p["X-WebChannel-Content-Type"]=_.messageContentType:p={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(p?p["X-WebChannel-Client-Profile"]=_.va:p={"X-WebChannel-Client-Profile":_.va}),this.g.S=p,(p=_&&_.Sb)&&!k(p)&&(this.g.m=p),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!k(_)&&(this.g.D=_,p=this.h,p!==null&&_ in p&&(p=this.h,_ in p&&delete p[_])),this.j=new To(this)}v(Gn,Ht),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){Of(this.g)},Gn.prototype.o=function(p){var _=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.u&&(C={},C.__data__=We(p),p=C);_.i.push(new dh(_.Ya++,p)),_.G==3&&Eh(_)},Gn.prototype.N=function(){this.g.l=null,delete this.j,Of(this.g),delete this.g,Gn.aa.N.call(this)};function jv(p){Zs.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var _=p.__sm__;if(_){t:{for(const C in _){p=C;break t}p=void 0}(this.i=p)&&(p=this.i,_=_!==null&&p in _?_[p]:void 0),this.data=_}else this.data=p}v(jv,Zs);function Ff(){an.call(this),this.status=1}v(Ff,an);function To(p){this.g=p}v(To,Nf),To.prototype.ua=function(){Lt(this.g,"a")},To.prototype.ta=function(p){Lt(this.g,new jv(p))},To.prototype.sa=function(p){Lt(this.g,new Ff)},To.prototype.ra=function(){Lt(this.g,"b")},Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,ne.COMPLETE="complete",qt.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",Ht.prototype.listen=Ht.prototype.K,hs.prototype.listenOnce=hs.prototype.L,hs.prototype.getLastError=hs.prototype.Ka,hs.prototype.getLastErrorCode=hs.prototype.Ba,hs.prototype.getStatus=hs.prototype.Z,hs.prototype.getResponseJson=hs.prototype.Oa,hs.prototype.getResponseText=hs.prototype.oa,hs.prototype.send=hs.prototype.ea,hs.prototype.setWithCredentials=hs.prototype.Ha}).apply(typeof Jv<"u"?Jv:typeof self<"u"?self:typeof window<"u"?window:{});const oT="@firebase/firestore",aT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iv="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new aS("@firebase/firestore");function vr(s,...t){if(mf.logLevel<=Be.DEBUG){const e=t.map(AS);mf.debug(`Firestore (${iv}): ${s}`,...e)}}function rP(s,...t){if(mf.logLevel<=Be.ERROR){const e=t.map(AS);mf.error(`Firestore (${iv}): ${s}`,...e)}}function JB(s,...t){if(mf.logLevel<=Be.WARN){const e=t.map(AS);mf.warn(`Firestore (${iv}): ${s}`,...e)}}function AS(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(s,t,e){let n="Unexpected state";typeof t=="string"?n=t:e=t,oP(s,n,e)}function oP(s,t,e){let n=`FIRESTORE (${iv}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{n+=" CONTEXT: "+JSON.stringify(e)}catch{n+=" CONTEXT: "+e}throw rP(n),new Error(n)}function Fp(s,t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,s||oP(t,i,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class xe extends Fa{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ZB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Bn.UNAUTHENTICATED)))}shutdown(){}}class QB{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class t${constructor(t){this.t=t,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Fp(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,e(l)):Promise.resolve();let r=new Bp;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Bp,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=r;t.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{vr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(vr("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Bp)}}),0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((n=>this.i!==t?(vr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Fp(typeof n.accessToken=="string",31837,{l:n}),new aP(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Fp(t===null||typeof t=="string",2055,{h:t}),new Bn(t)}}class e${constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s${constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new e$(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n${constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Fp(this.o===void 0,3512);const n=r=>{r.error!=null&&vr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,vr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>n(r)))};const i=r=>{vr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):vr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Fp(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new lT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<s;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=i$(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%62))}return n}}function Er(s,t){return s<t?-1:s>t?1:0}function a$(s,t){let e=0;for(;e<s.length&&e<t.length;){const n=s.codePointAt(e),i=t.codePointAt(e);if(n!==i){if(n<128&&i<128)return Er(n,i);{const r=r$(),o=l$(r.encode(cT(s,e)),r.encode(cT(t,e)));return o!==0?o:Er(n,i)}}e+=n>65535?2:1}return Er(s.length,t.length)}function cT(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function l$(s,t){for(let e=0;e<s.length&&e<t.length;++e)if(s[e]!==t[e])return Er(s[e],t[e]);return Er(s.length,t.length)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="__name__";class Gr{constructor(t,e,n){e===void 0?e=0:e>t.length&&ig(637,{offset:e,range:t.length}),n===void 0?n=t.length-e:n>t.length-e&&ig(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Gr.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Gr?t.forEach((n=>{e.push(n)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=Gr.compareSegments(t.get(i),e.get(i));if(r!==0)return r}return Er(t.length,e.length)}static compareSegments(t,e){const n=Gr.isNumericId(t),i=Gr.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?Gr.extractNumericId(t).compare(Gr.extractNumericId(e)):a$(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return wS.fromString(t.substring(4,t.length-2))}}class pr extends Gr{construct(t,e,n){return new pr(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new xe(Ee.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((i=>i.length>0)))}return new pr(e)}static emptyPath(){return new pr([])}}const c$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cc extends Gr{construct(t,e,n){return new Cc(t,e,n)}static isValidIdentifier(t){return c$.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cc.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uT}static keyField(){return new Cc([uT])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(n.length===0)throw new xe(Ee.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new xe(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new xe(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(n+=a,i++):(r(),i++)}if(r(),o)throw new xe(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Cc(e)}static emptyPath(){return new Cc([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t){this.path=t}static fromPath(t){return new Dc(pr.fromString(t))}static fromName(t){return new Dc(pr.fromString(t).popFirst(5))}static empty(){return new Dc(pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return pr.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Dc(new pr(t.slice()))}}function u$(s,t,e,n){if(t===!0&&n===!0)throw new xe(Ee.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function h$(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function d$(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ig(12329,{type:typeof s})}function f$(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new xe(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=d$(s);throw new xe(Ee.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(s,t){const e={typeString:s};return t&&(e.value=t),e}function rv(s,t){if(!h$(s))throw new xe(Ee.INVALID_ARGUMENT,"JSON must be an object");let e;for(const n in t)if(t[n]){const i=t[n].typeString,r="value"in t[n]?{value:t[n].value}:void 0;if(!(n in s)){e=`JSON missing required field: '${n}'`;break}const o=s[n];if(i&&typeof o!==i){e=`JSON field '${n}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){e=`Expected '${n}' field to equal '${r.value}'`;break}}if(e)throw new xe(Ee.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=-62135596800,dT=1e6;class ho{static now(){return ho.fromMillis(Date.now())}static fromDate(t){return ho.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*dT);return new ho(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new xe(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new xe(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<hT)throw new xe(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xe(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dT}_compareTo(t){return this.seconds===t.seconds?Er(this.nanoseconds,t.nanoseconds):Er(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ho._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(rv(t,ho._jsonSchema))return new ho(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-hT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ho._jsonSchemaVersion="firestore/timestamp/1.0",ho._jsonSchema={type:Ms("string",ho._jsonSchemaVersion),seconds:Ms("number"),nanoseconds:Ms("number")};function p$(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new g$("Invalid base64 string: "+r):r}})(t);return new Qu(e)}static fromUint8Array(t){const e=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(t);return new Qu(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Er(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qu.EMPTY_BYTE_STRING=new Qu("");const qw="(default)";class Hy{constructor(t,e){this.projectId=t,this.database=e||qw}static empty(){return new Hy("","")}get isDefaultDatabase(){return this.database===qw}isEqual(t){return t instanceof Hy&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(t,e=null,n=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function v$(s){return new m$(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fT,Se;(Se=fT||(fT={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new wS([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=1048576;function G0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(t,e,n=1e3,i=1.5,r=6e4){this.Fi=t,this.timerId=e,this.d_=n,this.E_=i,this.A_=r,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const e=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),i=Math.max(0,e-n);i>0&&vr("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Bp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const o=Date.now()+n,a=new SS(t,e,o,i,r);return a.start(n),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(Ee.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var pT,gT;(gT=pT||(pT={})).Fa="default",gT.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w$(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="firestore.googleapis.com",vT=!0;class bT{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new xe(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lP,this.ssl=vT}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:vT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=b$;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<y$)throw new xe(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}u$("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w$((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xe(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xe(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xe(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class cP{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new xe(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new ZB;switch(n.type){case"firstParty":return new s$(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new xe(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=mT.get(e);n&&(vr("ComponentProvider","Removing Datastore"),mT.delete(e),n.terminate())})(this),Promise.resolve()}}function A$(s,t,e,n={}){var i;s=f$(s,cP);const r=Jm(t),o=s._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:s._getEmulatorOptions()}),l=`${t}:${e}`;r&&(bI(`https://${l}`),yI("Firestore",!0)),o.host!==lP&&o.host!==l&&JB("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:r,emulatorOptions:n});if(!Yu(c,a)&&(s._setSettings(c),n.mockUserToken)){let u,d;if(typeof n.mockUserToken=="string")u=n.mockUserToken,d=Bn.MOCK_USER;else{u=i6(n.mockUserToken,(i=s._app)===null||i===void 0?void 0:i.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new xe(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Bn(f)}s._authCredentials=new QB(new aP(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ES(this.firestore,t,this._query)}}class fo{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xS(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fo(this.firestore,t,this._key)}toJSON(){return{type:fo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(rv(e,fo._jsonSchema))return new fo(t,n||null,new Dc(pr.fromString(e.referencePath)))}}fo._jsonSchemaVersion="firestore/documentReference/1.0",fo._jsonSchema={type:Ms("string",fo._jsonSchemaVersion),referencePath:Ms("string")};class xS extends ES{constructor(t,e,n){super(t,e,v$(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fo(this.firestore,null,new Dc(t))}withConverter(t){return new xS(this.firestore,t,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="AsyncQueue";class _T{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new _$(this,"async_queue_retry"),this.oc=()=>{const n=G0();n&&vr(yT,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=t;const e=G0();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const e=G0();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const e=new Bp;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!p$(t))throw t;vr(yT,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const e=this._c.then((()=>(this.nc=!0,t().catch((n=>{throw this.tc=n,this.nc=!1,rP("INTERNAL UNHANDLED ERROR: ",wT(n)),n})).then((n=>(this.nc=!1,n))))));return this._c=e,e}enqueueAfterDelay(t,e,n){this.ac(),this.sc.indexOf(t)>-1&&(e=0);const i=SS.createAndSchedule(this,t,e,n,(r=>this.lc(r)));return this.ec.push(i),i}ac(){this.tc&&ig(47125,{hc:wT(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const e of this.ec)if(e.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((e,n)=>e.targetTimeMs-n.targetTimeMs));for(const e of this.ec)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const e=this.ec.indexOf(t);this.ec.splice(e,1)}}function wT(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class S$ extends cP{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new _T,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new _T(t),this._firestoreClient=void 0,await t}}}function E$(s,t){const e=typeof s=="object"?s:SI(),n=typeof s=="string"?s:qw,i=cS(e,"firestore").getImmediate({identifier:n});if(!i._initialized){const r=s6("firestore");r&&A$(i,...r)}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ga(Qu.fromBase64String(t))}catch(e){throw new xe(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ga(Qu.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ga._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(rv(t,ga._jsonSchema))return ga.fromBase64String(t.bytes)}}ga._jsonSchemaVersion="firestore/bytes/1.0",ga._jsonSchema={type:Ms("string",ga._jsonSchemaVersion),bytes:Ms("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new xe(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cc(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new xe(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new xe(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Er(this._lat,t._lat)||Er(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hu._jsonSchemaVersion}}static fromJSON(t){if(rv(t,Hu._jsonSchema))return new Hu(t.latitude,t.longitude)}}Hu._jsonSchemaVersion="firestore/geoPoint/1.0",Hu._jsonSchema={type:Ms("string",Hu._jsonSchemaVersion),latitude:Ms("number"),longitude:Ms("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,i){if(n.length!==i.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==i[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ju._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(rv(t,ju._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new ju(t.vectorValues);throw new xe(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ju._jsonSchemaVersion="firestore/vectorValue/1.0",ju._jsonSchema={type:Ms("string",ju._jsonSchemaVersion),vectorValues:Ms("object")};const x$=new RegExp("[~\\*/\\[\\]]");function T$(s,t,e){if(t.search(x$)>=0)throw AT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s);try{return new uP(...t.split("."))._internalPath}catch{throw AT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s)}}function AT(s,t,e,n,i){let r=`Function ${t}() called with invalid data`;r+=". ";let o="";return new xe(Ee.INVALID_ARGUMENT,r+s+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new fo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new C$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(dP("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class C$ extends hP{data(){return super.data()}}function dP(s,t){return typeof t=="string"?T$(s,t):t instanceof uP?t._internalPath:t._delegate._internalPath}class Zv{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Kh extends hP{constructor(t,e,n,i,r,o){super(t,e,n,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Db(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(dP("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Kh._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Kh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kh._jsonSchema={type:Ms("string",Kh._jsonSchemaVersion),bundleSource:Ms("string","DocumentSnapshot"),bundleName:Ms("string"),bundle:Ms("string")};class Db extends Kh{data(t={}){return super.data(t)}}class $p{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Zv(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Db(this._firestore,this._userDataWriter,n.key,n,new Zv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xe(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new Db(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new Db(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:k$(a.type),doc:l,oldIndex:c,newIndex:u}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$p._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=o$.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(e.push(r._document),n.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function k$(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ig(61501,{type:s})}}$p._jsonSchemaVersion="firestore/querySnapshot/1.0",$p._jsonSchema={type:Ms("string",$p._jsonSchemaVersion),bundleSource:Ms("string","QuerySnapshot"),bundleName:Ms("string"),bundle:Ms("string")};(function(t,e=!0){(function(i){iv=i})(Ef),pf(new Ku("firestore",((n,{instanceIdentifier:i,options:r})=>{const o=n.getProvider("app").getImmediate(),a=new S$(new t$(n.getProvider("auth-internal")),new n$(o,n.getProvider("app-check-internal")),(function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new xe(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hy(c.options.projectId,u)})(o,i),o);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Hl(oT,aT,t),Hl(oT,aT,"esm2017")})();let Qv=null;const fP=()=>({apiKey:"AIzaSyBtmGPGYWwafS9eaXYZ0P7S3HbBeb2KyiQ",authDomain:"esigning-6c066.firebaseapp.com",projectId:"esigning-6c066",storageBucket:"esigning-6c066.firebasestorage.app",messagingSenderId:"221152664525",appId:"1:221152664525:web:d1d4d12b5ca6da6bcc4284"}),pP=["apiKey","authDomain","projectId","appId"],ov=()=>{const s=fP();return pP.every(t=>typeof s[t]=="string"&&s[t].length>0)},av=()=>{if(Qv)return Qv;const s=fP(),t=pP.filter(n=>!s[n]);if(t.length>0)throw new Error(`Firebase config missing: ${t.join(", ")}`);const e=AI(s);return Qv={app:e,auth:YB(e),db:E$(e)},Qv},rg=()=>{typeof window<"u"&&window.dispatchEvent(new Event("auth:updated"))};async function I$(s){if(!ov()){const r=await ls.post("/auth/login",s);return localStorage.setItem("auth_token",r.data.token),localStorage.setItem("auth_user",JSON.stringify(r.data.user)),rg(),r.data.user}const{auth:t}=av(),e=await D5(t,s.email,s.password),n=await e.user.getIdToken(),i=await ls.post("/auth/firebase",{idToken:n,name:e.user.displayName??void 0});return localStorage.setItem("auth_token",i.data.token),localStorage.setItem("auth_user",JSON.stringify(i.data.user)),rg(),i.data.user}async function P$(s){if(!ov()){const r=await ls.post("/auth/register",s);return localStorage.setItem("auth_token",r.data.token),localStorage.setItem("auth_user",JSON.stringify(r.data.user)),rg(),r.data.user}const{auth:t}=av(),e=await M5(t,s.email,s.password);s.name&&await L5(e.user,{displayName:s.name});const n=await e.user.getIdToken(!0),i=await ls.post("/auth/firebase",{idToken:n,name:s.name});return localStorage.setItem("auth_token",i.data.token),localStorage.setItem("auth_user",JSON.stringify(i.data.user)),rg(),i.data.user}async function gP(){if(!ov())throw new Error("Firebase is not configured for Google sign-in.");const{auth:s}=av(),t=new pa,e=await iB(s,t),n=await e.user.getIdToken(),i=await ls.post("/auth/firebase",{idToken:n,name:e.user.displayName??void 0});return localStorage.setItem("auth_token",i.data.token),localStorage.setItem("auth_user",JSON.stringify(i.data.user)),rg(),i.data.user}const R$={class:"card auth-card reveal delay-1"},M$={class:"field"},D$={class:"input-shell"},O$={class:"field"},L$={class:"password"},N$=["type"],F$={class:"form-row"},B$={class:"checkbox"},$$={key:0,class:"error"},U$=["disabled"],V$={class:"social"},H$=["disabled"],j$={key:0,class:"spinner","aria-hidden":"true"},z$={class:"footer"},W$=ks({__name:"LoginPage",setup(s){const t=Ia({email:"",password:"",remember:!0}),e=ct(!1),n=ct(!1),i=ct(!1),r=ct(""),o=wf(),a=(u,d)=>{var m,v,b,y;return(((v=(m=u==null?void 0:u.response)==null?void 0:m.data)==null?void 0:v.message)??((y=(b=u==null?void 0:u.response)==null?void 0:b.data)==null?void 0:y.error)??(u instanceof Error?u.message:""))||d},l=async()=>{r.value="",n.value=!0;try{await I$({email:t.email,password:t.password}),o.push("/app/dashboard")}catch(u){r.value=a(u,"Unable to sign in right now.")}finally{n.value=!1}},c=async()=>{r.value="",i.value=!0;try{await gP(),o.push("/app/dashboard")}catch(u){r.value=(u==null?void 0:u.message)??"Google sign-in failed."}finally{i.value=!1}};return Rr(()=>{localStorage.getItem("auth_token")&&o.replace("/app/dashboard")}),(u,d)=>(G(),qi(eS,null,{left:xi(()=>[...d[4]||(d[4]=[g("div",{class:"brand reveal"},[g("div",{class:"logo"},[g("svg",{viewBox:"0 0 48 48","aria-hidden":"true"},[g("path",{d:"M12 9h18c5 0 9 4 9 9v12c0 5-4 9-9 9H12c-5 0-9-4-9-9V18c0-5 4-9 9-9Z",fill:"url(#logoGradient)"}),g("path",{d:"M16 24c6 2 8 8 8 8s4-6 8-8c-4-2-8-8-8-8s-2 6-8 8Z",fill:"#ffffff",opacity:"0.9"}),g("defs",null,[g("linearGradient",{id:"logoGradient",x1:"0",x2:"1",y1:"0",y2:"1"},[g("stop",{offset:"0","stop-color":"#0f766e"}),g("stop",{offset:"1","stop-color":"#0c4a6e"})])])])]),g("div",null,[g("p",{class:"brand-title"},"WilsonFlow"),g("p",{class:"brand-sub"},"Enterprise E-Signature Platform")])],-1),g("div",{class:"hero"},[g("h1",{class:"hero-title reveal delay-1"},"Welcome back."),g("p",{class:"hero-copy reveal delay-2"}," Sign in to access your documents, track signature progress, and keep a verifiable audit trail. "),g("ul",{class:"hero-list"},[g("li",{class:"reveal delay-1"},"Secure document signing"),g("li",{class:"reveal delay-2"},"Real-time status visibility"),g("li",{class:"reveal delay-3"},"Immutable audit trail"),g("li",{class:"reveal delay-4"},"Enterprise-grade governance")])],-1)])]),right:xi(()=>[g("div",R$,[d[14]||(d[14]=g("div",{class:"card-header"},[g("p",{class:"card-title"},"Sign in"),g("p",{class:"helper"},"Enter your credentials to access your account.")],-1)),g("form",{class:"form",onSubmit:on(l,["prevent"])},[g("div",M$,[d[6]||(d[6]=g("label",{class:"label",for:"email"},"Email address",-1)),g("div",D$,[d[5]||(d[5]=g("span",{class:"input-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2"}),g("path",{d:"m3 7 9 6 9-6"})])],-1)),te(g("input",{id:"email","onUpdate:modelValue":d[0]||(d[0]=f=>t.email=f),type:"email",class:"input",placeholder:"you@company.com",autocomplete:"email",required:""},null,512),[[Ze,t.email,void 0,{trim:!0}]])])]),g("div",O$,[d[8]||(d[8]=g("label",{class:"label",for:"password"},"Password",-1)),g("div",L$,[d[7]||(d[7]=g("span",{class:"input-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("rect",{x:"5",y:"10",width:"14",height:"10",rx:"2"}),g("path",{d:"M8 10V7a4 4 0 0 1 8 0v3"})])],-1)),te(g("input",{id:"password","onUpdate:modelValue":d[1]||(d[1]=f=>t.password=f),type:e.value?"text":"password",class:"input",placeholder:"Enter your password",autocomplete:"current-password",required:""},null,8,N$),[[Pw,t.password]]),g("button",{class:"ghost",type:"button",onClick:d[2]||(d[2]=f=>e.value=!e.value)},ot(e.value?"Hide":"Show"),1)])]),g("div",F$,[g("label",B$,[te(g("input",{"onUpdate:modelValue":d[3]||(d[3]=f=>t.remember=f),type:"checkbox"},null,512),[[fr,t.remember]]),d[9]||(d[9]=Kt(" Remember me ",-1))]),os(ve(qu),{class:"link",to:"/forgot-password"},{default:xi(()=>[...d[10]||(d[10]=[Kt("Forgot password?",-1)])]),_:1})]),r.value?(G(),q("p",$$,ot(r.value),1)):Ot("",!0),g("button",{class:"btn btn-primary",type:"submit",disabled:n.value},ot(n.value?"Signing in...":"Sign in"),9,U$)],32),d[15]||(d[15]=g("div",{class:"divider"},"Or continue with",-1)),g("div",V$,[g("button",{class:"btn btn-outline",type:"button",disabled:i.value,onClick:c},[d[11]||(d[11]=g("span",{class:"social-icon google","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"#4285F4",d:"M23.49 12.27c0-.79-.07-1.53-.2-2.27H12v4.29h6.47a5.54 5.54 0 0 1-2.4 3.64v3.02h3.89c2.27-2.09 3.53-5.18 3.53-8.68Z"}),g("path",{fill:"#34A853",d:"M12 24c3.24 0 5.95-1.07 7.94-2.9l-3.89-3.02c-1.08.72-2.47 1.14-4.05 1.14-3.13 0-5.78-2.11-6.73-4.95H1.25v3.12A12 12 0 0 0 12 24Z"}),g("path",{fill:"#FBBC05",d:"M5.27 14.27A7.17 7.17 0 0 1 4.9 12c0-.79.14-1.56.37-2.27V6.6H1.25A12 12 0 0 0 0 12c0 1.93.46 3.75 1.25 5.4l4.02-3.13Z"}),g("path",{fill:"#EA4335",d:"M12 4.8c1.76 0 3.35.6 4.6 1.78l3.45-3.45A11.95 11.95 0 0 0 12 0 12 12 0 0 0 1.25 6.6l4.02 3.13C6.22 6.91 8.87 4.8 12 4.8Z"})])],-1)),i.value?(G(),q("span",j$)):Ot("",!0),Kt(" "+ot(i.value?"Signing in...":"Continue with Google"),1)],8,H$)]),g("p",z$,[d[13]||(d[13]=Kt(" Don't have an account? ",-1)),os(ve(qu),{class:"link",to:"/register"},{default:xi(()=>[...d[12]||(d[12]=[Kt("Sign up for free",-1)])]),_:1})])])]),_:1}))}}),G$=js(W$,[["__scopeId","data-v-ad2ce5c8"]]),q$={class:"card auth-card reveal delay-1"},X$={class:"progress"},Y$={class:"card-header"},K$={class:"card-title"},J$={class:"helper"},Z$={key:0,class:"step"},Q$={class:"field"},tU={class:"input-shell"},eU={class:"field"},sU={class:"input-shell"},nU={class:"field"},iU={class:"password"},rU=["type"],oU={class:"field"},aU={class:"input-shell"},lU=["type"],cU={key:1,class:"step"},uU={class:"field"},hU={class:"input-shell"},dU={class:"field"},fU={class:"input-shell"},pU={key:2,class:"error"},gU={class:"actions"},mU=["disabled"],vU=["disabled"],bU={key:0,class:"spinner","aria-hidden":"true"},yU={class:"footer"},_U=ks({__name:"RegisterPage",setup(s){const t=Ia({name:"",email:"",password:"",confirmPassword:"",organization:"",teamSize:""}),e=ct(1),n=ct(!1),i=ct(!1),r=ct(!1),o=ct(""),a=wf(),l=(m,v)=>{var y,w,k,M;return(((w=(y=m==null?void 0:m.response)==null?void 0:y.data)==null?void 0:w.message)??((M=(k=m==null?void 0:m.response)==null?void 0:k.data)==null?void 0:M.error)??(m instanceof Error?m.message:""))||v},c=()=>!t.name||!t.email||!t.password||!t.confirmPassword?(o.value="Please fill out all required fields.",!1):t.password.length<8?(o.value="Password must be at least 8 characters.",!1):t.password!==t.confirmPassword?(o.value="Passwords do not match.",!1):!0,u=()=>t.organization?!0:(o.value="Organization name is required.",!1),d=async()=>{if(o.value="",e.value===1){if(!c())return;e.value=2;return}if(u()){i.value=!0;try{await P$({name:t.name,email:t.email,password:t.password,organization:t.organization,teamSize:t.teamSize}),a.push("/app/dashboard")}catch(m){o.value=l(m,"Unable to create account right now.")}finally{i.value=!1}}},f=async()=>{o.value="",r.value=!0;try{await gP(),a.push("/app/dashboard")}catch(m){o.value=(m==null?void 0:m.message)??"Google sign-up failed."}finally{r.value=!1}};return Rr(()=>{localStorage.getItem("auth_token")&&a.replace("/app/dashboard")}),(m,v)=>(G(),qi(eS,null,{left:xi(()=>[...v[8]||(v[8]=[g("div",{class:"brand reveal"},[g("div",{class:"logo"},[g("svg",{viewBox:"0 0 48 48","aria-hidden":"true"},[g("path",{d:"M12 9h18c5 0 9 4 9 9v12c0 5-4 9-9 9H12c-5 0-9-4-9-9V18c0-5 4-9 9-9Z",fill:"url(#logoGradient)"}),g("path",{d:"M16 24c6 2 8 8 8 8s4-6 8-8c-4-2-8-8-8-8s-2 6-8 8Z",fill:"#ffffff",opacity:"0.9"}),g("defs",null,[g("linearGradient",{id:"logoGradient",x1:"0",x2:"1",y1:"0",y2:"1"},[g("stop",{offset:"0","stop-color":"#0f766e"}),g("stop",{offset:"1","stop-color":"#0c4a6e"})])])])]),g("div",null,[g("p",{class:"brand-title"},"SignFlow"),g("p",{class:"brand-sub"},"Enterprise E-Signature Platform")])],-1),g("div",{class:"hero"},[g("p",{class:"hero-eyebrow reveal delay-1"},"Join thousands of teams"),g("h1",{class:"hero-title reveal delay-2"},"Start signing with confidence."),g("p",{class:"hero-copy reveal delay-3"}," Create an account to send and track documents with a clear, auditable signing workflow. "),g("ul",{class:"hero-list"},[g("li",{class:"reveal delay-1"},"Fast onboarding in minutes"),g("li",{class:"reveal delay-2"},"No credit card required"),g("li",{class:"reveal delay-3"},"Cancel anytime"),g("li",{class:"reveal delay-4"},"Priority onboarding support")])],-1)])]),right:xi(()=>[g("div",q$,[g("div",X$,[g("span",{class:ie(["dot",e.value===1?"active":""])},"1",2),v[9]||(v[9]=g("span",{class:"line"},null,-1)),g("span",{class:ie(["dot",e.value===2?"active":""])},"2",2)]),g("div",Y$,[g("p",K$,ot(e.value===1?"Personal information":"Organization details"),1),g("p",J$,ot(e.value===1?"Create your personal account.":"Tell us where you work."),1)]),g("form",{class:"form",onSubmit:on(d,["prevent"])},[e.value===1?(G(),q("div",Z$,[g("div",Q$,[v[11]||(v[11]=g("label",{class:"label",for:"name"},"Full name",-1)),g("div",tU,[v[10]||(v[10]=g("span",{class:"input-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("circle",{cx:"12",cy:"8",r:"4"}),g("path",{d:"M4 20a8 8 0 0 1 16 0"})])],-1)),te(g("input",{id:"name","onUpdate:modelValue":v[0]||(v[0]=b=>t.name=b),type:"text",class:"input",placeholder:"Jane Doe",autocomplete:"name",required:""},null,512),[[Ze,t.name,void 0,{trim:!0}]])])]),g("div",eU,[v[13]||(v[13]=g("label",{class:"label",for:"email"},"Work email",-1)),g("div",sU,[v[12]||(v[12]=g("span",{class:"input-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2"}),g("path",{d:"m3 7 9 6 9-6"})])],-1)),te(g("input",{id:"email","onUpdate:modelValue":v[1]||(v[1]=b=>t.email=b),type:"email",class:"input",placeholder:"you@company.com",autocomplete:"email",required:""},null,512),[[Ze,t.email,void 0,{trim:!0}]])])]),g("div",nU,[v[15]||(v[15]=g("label",{class:"label",for:"password"},"Password",-1)),g("div",iU,[v[14]||(v[14]=g("span",{class:"input-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("rect",{x:"5",y:"10",width:"14",height:"10",rx:"2"}),g("path",{d:"M8 10V7a4 4 0 0 1 8 0v3"})])],-1)),te(g("input",{id:"password","onUpdate:modelValue":v[2]||(v[2]=b=>t.password=b),type:n.value?"text":"password",class:"input",placeholder:"At least 8 characters",autocomplete:"new-password",required:""},null,8,rU),[[Pw,t.password]]),g("button",{class:"ghost",type:"button",onClick:v[3]||(v[3]=b=>n.value=!n.value)},ot(n.value?"Hide":"Show"),1)])]),g("div",oU,[v[17]||(v[17]=g("label",{class:"label",for:"confirmPassword"},"Confirm password",-1)),g("div",aU,[v[16]||(v[16]=g("span",{class:"input-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("rect",{x:"5",y:"10",width:"14",height:"10",rx:"2"}),g("path",{d:"M8 10V7a4 4 0 0 1 8 0v3"}),g("path",{d:"M9 16l2 2 4-4"})])],-1)),te(g("input",{id:"confirmPassword","onUpdate:modelValue":v[4]||(v[4]=b=>t.confirmPassword=b),type:n.value?"text":"password",class:"input",placeholder:"Confirm your password",autocomplete:"new-password",required:""},null,8,lU),[[Pw,t.confirmPassword]])])])])):(G(),q("div",cU,[g("div",uU,[v[19]||(v[19]=g("label",{class:"label",for:"organization"},"Organization name",-1)),g("div",hU,[v[18]||(v[18]=g("span",{class:"input-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("path",{d:"M4 21h16"}),g("path",{d:"M6 21V8l6-4 6 4v13"}),g("path",{d:"M9 11h1M14 11h1M9 14h1M14 14h1M9 17h1M14 17h1"})])],-1)),te(g("input",{id:"organization","onUpdate:modelValue":v[5]||(v[5]=b=>t.organization=b),type:"text",class:"input",placeholder:"Company or team name",required:""},null,512),[[Ze,t.organization,void 0,{trim:!0}]])])]),g("div",dU,[v[22]||(v[22]=g("label",{class:"label",for:"teamSize"},"Team size",-1)),g("div",fU,[v[21]||(v[21]=g("span",{class:"input-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("circle",{cx:"8",cy:"9",r:"3"}),g("circle",{cx:"16",cy:"9",r:"3"}),g("path",{d:"M3 21a5 5 0 0 1 10 0"}),g("path",{d:"M11 21a5 5 0 0 1 10 0"})])],-1)),te(g("select",{id:"teamSize","onUpdate:modelValue":v[6]||(v[6]=b=>t.teamSize=b),class:"input"},[...v[20]||(v[20]=[g("option",{value:""},"Select size",-1),g("option",{value:"1-10"},"1-10",-1),g("option",{value:"11-50"},"11-50",-1),g("option",{value:"51-200"},"51-200",-1),g("option",{value:"201-500"},"201-500",-1),g("option",{value:"500+"},"500+",-1)])],512),[[Ar,t.teamSize]])])])])),o.value?(G(),q("p",pU,ot(o.value),1)):Ot("",!0),g("div",gU,[e.value===2?(G(),q("button",{key:0,class:"btn btn-outline",type:"button",onClick:v[7]||(v[7]=b=>e.value=1)}," Back ")):Ot("",!0),g("button",{class:"btn btn-primary",type:"submit",disabled:i.value},ot(e.value===1?"Continue":i.value?"Creating account...":"Create account"),9,mU)])],32),v[26]||(v[26]=g("div",{class:"divider"},"Or continue with",-1)),g("button",{class:"btn btn-outline",type:"button",disabled:r.value,onClick:f},[v[23]||(v[23]=g("span",{class:"social-icon google","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("path",{fill:"#4285F4",d:"M23.49 12.27c0-.79-.07-1.53-.2-2.27H12v4.29h6.47a5.54 5.54 0 0 1-2.4 3.64v3.02h3.89c2.27-2.09 3.53-5.18 3.53-8.68Z"}),g("path",{fill:"#34A853",d:"M12 24c3.24 0 5.95-1.07 7.94-2.9l-3.89-3.02c-1.08.72-2.47 1.14-4.05 1.14-3.13 0-5.78-2.11-6.73-4.95H1.25v3.12A12 12 0 0 0 12 24Z"}),g("path",{fill:"#FBBC05",d:"M5.27 14.27A7.17 7.17 0 0 1 4.9 12c0-.79.14-1.56.37-2.27V6.6H1.25A12 12 0 0 0 0 12c0 1.93.46 3.75 1.25 5.4l4.02-3.13Z"}),g("path",{fill:"#EA4335",d:"M12 4.8c1.76 0 3.35.6 4.6 1.78l3.45-3.45A11.95 11.95 0 0 0 12 0 12 12 0 0 0 1.25 6.6l4.02 3.13C6.22 6.91 8.87 4.8 12 4.8Z"})])],-1)),r.value?(G(),q("span",bU)):Ot("",!0),Kt(" "+ot(r.value?"Signing in...":"Continue with Google"),1)],8,vU),g("p",yU,[v[25]||(v[25]=Kt(" Already have an account? ",-1)),os(ve(qu),{class:"link",to:"/login"},{default:xi(()=>[...v[24]||(v[24]=[Kt("Sign in",-1)])]),_:1})])])]),_:1}))}}),wU=js(_U,[["__scopeId","data-v-9390c365"]]),AU={class:"card auth-card reveal delay-1"},SU={class:"field"},EU={class:"footer"},xU=ks({__name:"ForgotPasswordPage",setup(s){const t=ct(""),e=()=>{console.info("Password reset requested",{email:t.value})};return(n,i)=>(G(),qi(eS,null,{left:xi(()=>[...i[1]||(i[1]=[g("div",{class:"hero"},[g("h1",{class:"hero-title reveal"},"Reset your password"),g("p",{class:"hero-copy reveal delay-1"}," Enter your email and we will send a secure reset link. ")],-1)])]),right:xi(()=>[g("div",AU,[i[6]||(i[6]=g("div",{class:"card-header"},[g("p",{class:"card-title"},"Forgot password"),g("p",{class:"helper"},"We will email you a reset link.")],-1)),g("form",{class:"form",onSubmit:on(e,["prevent"])},[g("div",SU,[i[2]||(i[2]=g("label",{class:"label",for:"email"},"Email address",-1)),te(g("input",{id:"email","onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),type:"email",class:"input",placeholder:"you@company.com",required:""},null,512),[[Ze,t.value,void 0,{trim:!0}]])]),i[5]||(i[5]=g("button",{class:"btn btn-primary",type:"submit"},"Send reset link",-1)),g("p",EU,[i[4]||(i[4]=Kt(" Remembered your password? ",-1)),os(ve(qu),{class:"link",to:"/login"},{default:xi(()=>[...i[3]||(i[3]=[Kt("Back to sign in",-1)])]),_:1})])],32)])]),_:1}))}}),TU=js(xU,[["__scopeId","data-v-addc3979"]]),CU={class:"not-found"},kU={class:"card"},IU=ks({__name:"NotFoundPage",setup(s){return(t,e)=>(G(),q("main",CU,[g("div",kU,[e[1]||(e[1]=g("p",{class:"code"},"404",-1)),e[2]||(e[2]=g("h1",{class:"title"},"Page not found",-1)),e[3]||(e[3]=g("p",{class:"copy"},"We could not find the page you are looking for.",-1)),os(ve(qu),{class:"btn btn-primary",to:"/login"},{default:xi(()=>[...e[0]||(e[0]=[Kt("Back to sign in",-1)])]),_:1})])]))}}),PU=js(IU,[["__scopeId","data-v-beaa41b3"]]);var Up={};Up.d=(s,t)=>{for(var e in t)Up.o(t,e)&&!Up.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};Up.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var se=globalThis.pdfjsLib={};Up.d(se,{AbortException:()=>Xl,AnnotationEditorLayer:()=>sA,AnnotationEditorParamsType:()=>we,AnnotationEditorType:()=>ce,AnnotationEditorUIManager:()=>eh,AnnotationLayer:()=>xH,AnnotationMode:()=>nl,ColorPicker:()=>Xy,DOMSVGFactory:()=>OS,DrawLayer:()=>rA,FeatureTest:()=>Vn,GlobalWorkerOptions:()=>ma,ImageKind:()=>Ob,InvalidPDFException:()=>Yw,MissingPDFException:()=>og,OPS:()=>Qi,OutputScale:()=>Jw,PDFDataRangeTransport:()=>vR,PDFDateString:()=>PS,PDFWorker:()=>Zh,PasswordResponses:()=>OU,PermissionFlag:()=>DU,PixelsPerInch:()=>Yl,RenderingCancelledException:()=>kS,TextLayer:()=>ag,TouchManager:()=>Gy,UnexpectedResponseException:()=>jy,Util:()=>Gt,VerbosityLevel:()=>G_,XfaLayer:()=>yR,build:()=>rH,createValidAbsoluteUrl:()=>BU,fetchData:()=>K_,getDocument:()=>KV,getFilenameFromUrl:()=>qU,getPdfFilenameFromUrl:()=>XU,getXfaPageViewport:()=>YU,isDataScheme:()=>J_,isPdfFile:()=>IS,noContextMenu:()=>Ir,normalizeUnicode:()=>zU,setLayerDimensions:()=>th,shadow:()=>ge,stopEvent:()=>Ei,version:()=>iH});const An=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),mP=[1,0,0,1,0,0],Xw=[.001,0,0,.001,0,0],RU=1e7,q0=1.35,wi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},nl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},MU="pdfjs_internal_editor_",ce={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},we={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},DU={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},un={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ob={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Fs={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},jf={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},G_={ERRORS:0,WARNINGS:1,INFOS:5},Qi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},OU={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let q_=G_.WARNINGS;function LU(s){Number.isInteger(s)&&(q_=s)}function NU(){return q_}function X_(s){q_>=G_.INFOS&&console.log(`Info: ${s}`)}function ue(s){q_>=G_.WARNINGS&&console.log(`Warning: ${s}`)}function Xe(s){throw new Error(s)}function Rs(s,t){s||Xe(t)}function FU(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function BU(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=jU(s)}catch{}}const n=t?new URL(s,t):new URL(s);if(FU(n))return n}catch{}return null}function ge(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const ec=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class ST extends ec{constructor(t,e){super(t,"PasswordException"),this.code=e}}class X0 extends ec{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Yw extends ec{constructor(t){super(t,"InvalidPDFException")}}class og extends ec{constructor(t){super(t,"MissingPDFException")}}class jy extends ec{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class $U extends ec{constructor(t){super(t,"FormatError")}}class Xl extends ec{constructor(t){super(t,"AbortException")}}function vP(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&Xe("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=s.subarray(i,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Y_(s){typeof s!="string"&&Xe("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function UU(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function TS(s){const t=Object.create(null);for(const[e,n]of s)t[e]=n;return t}function VU(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function HU(){try{return new Function(""),!0}catch{return!1}}class Vn{static get isLittleEndian(){return ge(this,"isLittleEndian",VU())}static get isEvalSupported(){return ge(this,"isEvalSupported",HU())}static get isOffscreenCanvasSupported(){return ge(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ge(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ge(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ge(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return ge(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Y0=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var xa,Lb,Kw;class Gt{static makeHexColor(t,e,n){return`#${Y0[t]}${Y0[e]}${Y0[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(n+o)/2,l=Math.sqrt((n+o)**2-4*(n*o-r*i))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,i,o]}static bezierBoundingBox(t,e,n,i,r,o,a,l,c){return c?(c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],e,l)):c=[Math.min(t,a),Math.min(e,l),Math.max(t,a),Math.max(e,l)],D(this,xa,Kw).call(this,t,n,r,a,e,i,o,l,3*(-t+3*(n-r)+a),6*(t-2*n+r),3*(n-t),c),D(this,xa,Kw).call(this,t,n,r,a,e,i,o,l,3*(-e+3*(i-o)+l),6*(e-2*i+o),3*(i-e),c),c}}xa=new WeakSet,Lb=function(t,e,n,i,r,o,a,l,c,u){if(c<=0||c>=1)return;const d=1-c,f=c*c,m=f*c,v=d*(d*(d*t+3*c*e)+3*f*n)+m*i,b=d*(d*(d*r+3*c*o)+3*f*a)+m*l;u[0]=Math.min(u[0],v),u[1]=Math.min(u[1],b),u[2]=Math.max(u[2],v),u[3]=Math.max(u[3],b)},Kw=function(t,e,n,i,r,o,a,l,c,u,d,f){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&D(this,xa,Lb).call(this,t,e,n,i,r,o,a,l,-d/u,f);return}const m=u**2-4*d*c;if(m<0)return;const v=Math.sqrt(m),b=2*c;D(this,xa,Lb).call(this,t,e,n,i,r,o,a,l,(-u+v)/b,f),D(this,xa,Lb).call(this,t,e,n,i,r,o,a,l,(-u-v)/b,f)},R(Gt,xa);function jU(s){return decodeURIComponent(escape(s))}let K0=null,ET=null;function zU(s){return K0||(K0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ET=new Map([["","t"]])),s.replaceAll(K0,(t,e,n)=>e?e.normalize("NFKC"):ET.get(n))}function WU(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),vP(s)}const CS="pdfjs_internal_id_";function GU(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(vP(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});const Po="http://www.w3.org/2000/svg",kc=class kc{};ht(kc,"CSS",96),ht(kc,"PDF",72),ht(kc,"PDF_TO_CSS_UNITS",kc.CSS/kc.PDF);let Yl=kc;async function K_(s,t="text"){if(ip(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class lv{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=o,n*=e;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let u,d,f,m;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,f=0,m=1;break;case 90:u=0,d=1,f=1,m=0;break;case 270:u=0,d=-1,f=-1,m=0;break;case 0:u=1,d=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,m=-m);let v,b,y,w;u===0?(v=Math.abs(c-t[1])*n+r,b=Math.abs(l-t[0])*n+o,y=(t[3]-t[1])*n,w=(t[2]-t[0])*n):(v=Math.abs(l-t[0])*n+r,b=Math.abs(c-t[1])*n+o,y=(t[2]-t[0])*n,w=(t[3]-t[1])*n),this.transform=[u*n,d*n,f*n,m*n,v-u*n*l-f*n*c,b-d*n*l-m*n*c],this.width=y,this.height=w}get rawDims(){const{userUnit:t,viewBox:e}=this,n=e.map(i=>i*t);return ge(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new lv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return Gt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Gt.applyTransform([t[0],t[1]],this.transform),n=Gt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Gt.applyInverseTransform([t,e],this.transform)}}class kS extends ec{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function J_(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function IS(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function qU(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function XU(s,t="document.pdf"){if(typeof s!="string")return t;if(J_(s))return ue('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(s);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class xT{constructor(){ht(this,"started",Object.create(null));ht(this,"times",[])}time(t){t in this.started&&ue(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ue(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms
`);return t.join("")}}function ip(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function Ir(s){s.preventDefault()}function Ei(s){s.preventDefault(),s.stopPropagation()}var yg;class PS{static toDateObject(t){if(!t||typeof t!="string")return null;h(this,yg)||T(this,yg,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=h(this,yg).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(n,i,r,o,a,l))}}yg=new WeakMap,R(PS,yg);function YU(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new lv({viewBox:r,userUnit:1,scale:t,rotation:e})}function RS(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ue(`Not a valid color format: "${s}"`),[0,0,0])}function KU(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,RS(n))}t.remove()}function ns(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform();return[t,e,n,i,r,o]}function Ur(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform().invertSelf();return[t,e,n,i,r,o]}function th(s,t,e=!1,n=!0){if(t instanceof lv){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=s,a=Vn.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,c=`var(--scale-factor) * ${r}px`,u=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Jw{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var il,Lc,tr,Nc,_g,wg,o_,bP,Hn,yP,_P,Nb,wP,Qw;const No=class No{constructor(t){R(this,Hn);R(this,il,null);R(this,Lc,null);R(this,tr);R(this,Nc,null);R(this,_g,null);T(this,tr,t),h(No,wg)||T(No,wg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=T(this,il,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=h(this,tr)._uiManager._signal;t.addEventListener("contextmenu",Ir,{signal:e}),t.addEventListener("pointerdown",D(No,o_,bP),{signal:e});const n=T(this,Nc,document.createElement("div"));n.className="buttons",t.append(n);const i=h(this,tr).toolbarPosition;if(i){const{style:r}=t,o=h(this,tr)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return D(this,Hn,wP).call(this),t}get div(){return h(this,il)}hide(){var t;h(this,il).classList.add("hidden"),(t=h(this,Lc))==null||t.hideDropdown()}show(){var t;h(this,il).classList.remove("hidden"),(t=h(this,_g))==null||t.shown()}async addAltText(t){const e=await t.render();D(this,Hn,Nb).call(this,e),h(this,Nc).prepend(e,h(this,Hn,Qw)),T(this,_g,t)}addColorPicker(t){T(this,Lc,t);const e=t.renderButton();D(this,Hn,Nb).call(this,e),h(this,Nc).prepend(e,h(this,Hn,Qw))}remove(){var t;h(this,il).remove(),(t=h(this,Lc))==null||t.destroy(),T(this,Lc,null)}};il=new WeakMap,Lc=new WeakMap,tr=new WeakMap,Nc=new WeakMap,_g=new WeakMap,wg=new WeakMap,o_=new WeakSet,bP=function(t){t.stopPropagation()},Hn=new WeakSet,yP=function(t){h(this,tr)._focusEventsAllowed=!1,Ei(t)},_P=function(t){h(this,tr)._focusEventsAllowed=!0,Ei(t)},Nb=function(t){const e=h(this,tr)._uiManager._signal;t.addEventListener("focusin",D(this,Hn,yP).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",D(this,Hn,_P).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ir,{signal:e})},wP=function(){const{editorType:t,_uiManager:e}=h(this,tr),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",h(No,wg)[t]),D(this,Hn,Nb).call(this,n),n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),h(this,Nc).append(n)},Qw=function(){const t=document.createElement("div");return t.className="divider",t},R(No,o_),R(No,wg,null);let Zw=No;var Ag,Fc,Bc,Zl,AP,SP,EP;class JU{constructor(t){R(this,Zl);R(this,Ag,null);R(this,Fc,null);R(this,Bc);T(this,Bc,t)}show(t,e,n){const[i,r]=D(this,Zl,SP).call(this,e,n),{style:o}=h(this,Fc)||T(this,Fc,D(this,Zl,AP).call(this));t.append(h(this,Fc)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,Fc).remove()}}Ag=new WeakMap,Fc=new WeakMap,Bc=new WeakMap,Zl=new WeakSet,AP=function(){const t=T(this,Fc,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ir,{signal:h(this,Bc)._signal});const e=T(this,Ag,document.createElement("div"));return e.className="buttons",t.append(e),D(this,Zl,EP).call(this),t},SP=function(t,e){let n=0,i=0;for(const r of t){const o=r.y+r.height;if(o<n)continue;const a=r.x+(e?r.width:0);if(o>n){i=a,n=o;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,n]},EP=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=h(this,Bc)._signal;t.addEventListener("contextmenu",Ir,{signal:n}),t.addEventListener("click",()=>{h(this,Bc).highlightSelection("floating_button")},{signal:n}),h(this,Ag).append(t)};function zy(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}var a_;class ZU{constructor(){R(this,a_,0)}get id(){return`${MU}${In(this,a_)._++}`}}a_=new WeakMap;var sd,Sg,fn,nd,Fb;const aE=class aE{constructor(){R(this,nd);R(this,sd,WU());R(this,Sg,0);R(this,fn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ge(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return D(this,nd,Fb).call(this,`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return D(this,nd,Fb).call(this,t,t)}async getFromBlob(t,e){const n=await e;return D(this,nd,Fb).call(this,t,n)}async getFromId(t){h(this,fn)||T(this,fn,new Map);const e=h(this,fn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){h(this,fn)||T(this,fn,new Map);let n=h(this,fn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${h(this,sd)}_${In(this,Sg)._++}`,refCounter:1,isSvg:!1},h(this,fn).set(t,n),h(this,fn).set(n.id,n),n}getSvgUrl(t){const e=h(this,fn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;h(this,fn)||T(this,fn,new Map);const e=h(this,fn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${h(this,sd)}_`)}};sd=new WeakMap,Sg=new WeakMap,fn=new WeakMap,nd=new WeakSet,Fb=async function(t,e){h(this,fn)||T(this,fn,new Map);let n=h(this,fn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${h(this,sd)}_${In(this,Sg)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await K_(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=aE._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,c()},o.onload=async()=>{const d=n.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=u});o.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){ue(i),n=null}return h(this,fn).set(t,n),n&&h(this,fn).set(n.id,n),n};let t1=aE;var As,rl,Eg,fs;class QU{constructor(t=128){R(this,As,[]);R(this,rl,!1);R(this,Eg);R(this,fs,-1);T(this,Eg,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&t(),h(this,rl))return;const l={cmd:t,undo:e,post:n,type:r};if(h(this,fs)===-1){h(this,As).length>0&&(h(this,As).length=0),T(this,fs,0),h(this,As).push(l);return}if(o&&h(this,As)[h(this,fs)].type===r){a&&(l.undo=h(this,As)[h(this,fs)].undo),h(this,As)[h(this,fs)]=l;return}const c=h(this,fs)+1;c===h(this,Eg)?h(this,As).splice(0,1):(T(this,fs,c),c<h(this,As).length&&h(this,As).splice(c)),h(this,As).push(l)}undo(){if(h(this,fs)===-1)return;T(this,rl,!0);const{undo:t,post:e}=h(this,As)[h(this,fs)];t(),e==null||e(),T(this,rl,!1),T(this,fs,h(this,fs)-1)}redo(){if(h(this,fs)<h(this,As).length-1){T(this,fs,h(this,fs)+1),T(this,rl,!0);const{cmd:t,post:e}=h(this,As)[h(this,fs)];t(),e==null||e(),T(this,rl,!1)}}hasSomethingToUndo(){return h(this,fs)!==-1}hasSomethingToRedo(){return h(this,fs)<h(this,As).length-1}cleanType(t){if(h(this,fs)!==-1){for(let e=h(this,fs);e>=0;e--)if(h(this,As)[e].type!==t){h(this,As).splice(e+1,h(this,fs)-e),T(this,fs,e);return}h(this,As).length=0,T(this,fs,-1)}}destroy(){T(this,As,null)}}As=new WeakMap,rl=new WeakMap,Eg=new WeakMap,fs=new WeakMap;var l_,xP;class cv{constructor(t){R(this,l_);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Vn.platform;for(const[n,i,r={}]of t)for(const o of n){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(D(this,l_,xP).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=n;a&&!a(t,e)||(i.bind(t,...o,e)(),r||Ei(e))}}l_=new WeakSet,xP=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const c_=class c_{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return KU(t),ge(this,"_colors",t)}convert(t){const e=RS(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((r,o)=>r===e[o]))return c_._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Gt.makeHexColor(...e):t}};ht(c_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let e1=c_;var id,ci,$s,Qs,rd,$o,od,Di,ol,$c,ad,Uc,qr,er,Vc,xg,Tg,ld,Cg,Xr,al,cd,ll,Yr,u_,cl,kg,ul,Hc,Ig,Pg,zs,Ue,Uo,jc,Rg,Mg,hl,Kr,Vo,Dg,Oi,Mt,Bb,s1,TP,CP,$b,kP,IP,PP,n1,RP,i1,r1,MP,Rn,Ro,DP,OP,o1,LP,rp,a1;const Uh=class Uh{constructor(t,e,n,i,r,o,a,l,c,u,d,f,m){R(this,Mt);R(this,id,new AbortController);R(this,ci,null);R(this,$s,new Map);R(this,Qs,new Map);R(this,rd,null);R(this,$o,null);R(this,od,null);R(this,Di,new QU);R(this,ol,null);R(this,$c,null);R(this,ad,0);R(this,Uc,new Set);R(this,qr,null);R(this,er,null);R(this,Vc,new Set);ht(this,"_editorUndoBar",null);R(this,xg,!1);R(this,Tg,!1);R(this,ld,!1);R(this,Cg,null);R(this,Xr,null);R(this,al,null);R(this,cd,null);R(this,ll,!1);R(this,Yr,null);R(this,u_,new ZU);R(this,cl,!1);R(this,kg,!1);R(this,ul,null);R(this,Hc,null);R(this,Ig,null);R(this,Pg,null);R(this,zs,ce.NONE);R(this,Ue,new Set);R(this,Uo,null);R(this,jc,null);R(this,Rg,null);R(this,Mg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});R(this,hl,[0,0]);R(this,Kr,null);R(this,Vo,null);R(this,Dg,null);R(this,Oi,null);const v=this._signal=h(this,id).signal;T(this,Vo,t),T(this,Dg,e),T(this,rd,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:v}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),i._on("setpreference",this.onSetPreference.bind(this),{signal:v}),i._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),D(this,Mt,kP).call(this),D(this,Mt,MP).call(this),D(this,Mt,n1).call(this),T(this,$o,r.annotationStorage),T(this,Cg,r.filterFactory),T(this,jc,o),T(this,cd,a||null),T(this,xg,l),T(this,Tg,c),T(this,ld,u),T(this,Pg,d||null),this.viewParameters={realScale:Yl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=m!==!1}static get _keyboardManager(){const t=Uh.prototype,e=o=>h(o,Vo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ge(this,"_keyboardManager",new cv([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,Vo).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,Vo).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,i,r;(t=h(this,Oi))==null||t.resolve(),T(this,Oi,null),(e=h(this,id))==null||e.abort(),T(this,id,null),this._signal=null;for(const o of h(this,Qs).values())o.destroy();h(this,Qs).clear(),h(this,$s).clear(),h(this,Vc).clear(),T(this,ci,null),h(this,Ue).clear(),h(this,Di).destroy(),(n=h(this,rd))==null||n.destroy(),(i=h(this,Yr))==null||i.hide(),T(this,Yr,null),h(this,Xr)&&(clearTimeout(h(this,Xr)),T(this,Xr,null)),h(this,Kr)&&(clearTimeout(h(this,Kr)),T(this,Kr,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return h(this,Pg)}get useNewAltTextFlow(){return h(this,Tg)}get useNewAltTextWhenAddingImage(){return h(this,ld)}get hcmFilter(){return ge(this,"hcmFilter",h(this,jc)?h(this,Cg).addHCMFilter(h(this,jc).foreground,h(this,jc).background):"none")}get direction(){return ge(this,"direction",getComputedStyle(h(this,Vo)).direction)}get highlightColors(){return ge(this,"highlightColors",h(this,cd)?new Map(h(this,cd).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return ge(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),T(this,$c,t)}setMainHighlightColorPicker(t){T(this,Ig,t)}editAltText(t,e=!1){var n;(n=h(this,rd))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":T(this,ld,e);break}}onPageChanging({pageNumber:t}){T(this,ad,t-1)}focusMainContainer(){h(this,Vo).focus()}findParent(t,e){for(const n of h(this,Qs).values()){const{x:i,y:r,width:o,height:a}=n.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+a)return n}return null}disableUserSelect(t=!1){h(this,Dg).classList.toggle("noUserSelect",t)}addShouldRescale(t){h(this,Vc).add(t)}removeShouldRescale(t){h(this,Vc).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Yl.PDF_TO_CSS_UNITS;for(const n of h(this,Vc))n.onScaleChanging();(e=h(this,$c))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=e,a=e.toString(),c=D(this,Mt,Bb).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;e.empty();const d=D(this,Mt,s1).call(this,c),f=h(this,zs)===ce.NONE,m=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(ce.HIGHLIGHT,m);return}m()}addToAnnotationStorage(t){!t.isEmpty()&&h(this,$o)&&!h(this,$o).has(t.id)&&h(this,$o).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,h(this,ll)&&(T(this,ll,!1),D(this,Mt,$b).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of h(this,Ue))if(e.div.contains(t)){T(this,Hc,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!h(this,Hc))return;const[t,e]=h(this,Hc);T(this,Hc,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){D(this,Mt,n1).call(this),D(this,Mt,i1).call(this)}removeEditListeners(){D(this,Mt,RP).call(this),D(this,Mt,r1).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of h(this,er))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of h(this,er))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=h(this,ci))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of h(this,Ue)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of h(this,er))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){ue(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of n){const c=await i.deserialize(l);if(!c)return;r.push(c)}const o=()=>{for(const l of r)D(this,Mt,o1).call(this,l);D(this,Mt,a1).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){ue(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,zs)!==ce.NONE&&!this.isEditorHandlingKeyboard&&Uh._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,ll)&&(T(this,ll,!1),D(this,Mt,$b).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(D(this,Mt,IP).call(this),D(this,Mt,i1).call(this),D(this,Mt,Rn).call(this,{isEditing:h(this,zs)!==ce.NONE,isEmpty:D(this,Mt,rp).call(this),hasSomethingToUndo:h(this,Di).hasSomethingToUndo(),hasSomethingToRedo:h(this,Di).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,Mt,PP).call(this),D(this,Mt,r1).call(this),D(this,Mt,Rn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!h(this,er)){T(this,er,t);for(const e of h(this,er))D(this,Mt,Ro).call(this,e.defaultPropertiesToUpdate)}}getId(){return h(this,u_).id}get currentLayer(){return h(this,Qs).get(h(this,ad))}getLayer(t){return h(this,Qs).get(t)}get currentPageIndex(){return h(this,ad)}addLayer(t){h(this,Qs).set(t.pageIndex,t),h(this,cl)?t.enable():t.disable()}removeLayer(t){h(this,Qs).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var i;if(h(this,zs)!==t&&!(h(this,Oi)&&(await h(this,Oi).promise,!h(this,Oi)))){if(T(this,Oi,Promise.withResolvers()),T(this,zs,t),t===ce.NONE){this.setEditingState(!1),D(this,Mt,OP).call(this),(i=this._editorUndoBar)==null||i.hide(),h(this,Oi).resolve();return}this.setEditingState(!0),await D(this,Mt,DP).call(this),this.unselectAll();for(const r of h(this,Qs).values())r.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),h(this,Oi).resolve();return}for(const r of h(this,$s).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();h(this,Oi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==h(this,zs)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(h(this,er)){switch(t){case we.CREATE:this.currentLayer.addNewEditor();return;case we.HIGHLIGHT_DEFAULT_COLOR:(n=h(this,Ig))==null||n.updateColor(e);break;case we.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,Rg)||T(this,Rg,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of h(this,Ue))i.updateParams(t,e);for(const i of h(this,er))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const o of h(this,$s).values())o.editorType===t&&o.show(e);(((r=h(this,Rg))==null?void 0:r.get(we.HIGHLIGHT_SHOW_ALL))??!0)!==e&&D(this,Mt,Ro).call(this,[[we.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(h(this,kg)!==t){T(this,kg,t);for(const e of h(this,Qs).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of h(this,$s).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return h(this,$s).get(t)}addEditor(t){h(this,$s).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(h(this,Xr)&&clearTimeout(h(this,Xr)),T(this,Xr,setTimeout(()=>{this.focusMainContainer(),T(this,Xr,null)},0))),h(this,$s).delete(t.id),this.unselect(t),(!t.annotationElementId||!h(this,Uc).has(t.annotationElementId))&&((e=h(this,$o))==null||e.remove(t.id))}addDeletedAnnotationElement(t){h(this,Uc).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return h(this,Uc).has(t)}removeDeletedAnnotationElement(t){h(this,Uc).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){h(this,ci)!==t&&(T(this,ci,t),t&&D(this,Mt,Ro).call(this,t.propertiesToUpdate))}updateUI(t){h(this,Mt,LP)===t&&D(this,Mt,Ro).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){D(this,Mt,Ro).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(h(this,Ue).has(t)){h(this,Ue).delete(t),t.unselect(),D(this,Mt,Rn).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,Ue).add(t),t.select(),D(this,Mt,Ro).call(this,t.propertiesToUpdate),D(this,Mt,Rn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=h(this,$c))==null||e.commitOrRemove();for(const n of h(this,Ue))n!==t&&n.unselect();h(this,Ue).clear(),h(this,Ue).add(t),t.select(),D(this,Mt,Ro).call(this,t.propertiesToUpdate),D(this,Mt,Rn).call(this,{hasSelectedEditor:!0})}isSelected(t){return h(this,Ue).has(t)}get firstSelectedEditor(){return h(this,Ue).values().next().value}unselect(t){t.unselect(),h(this,Ue).delete(t),D(this,Mt,Rn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,Ue).size!==0}get isEnterHandled(){return h(this,Ue).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;h(this,Di).undo(),D(this,Mt,Rn).call(this,{hasSomethingToUndo:h(this,Di).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,Mt,rp).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){h(this,Di).redo(),D(this,Mt,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,Di).hasSomethingToRedo(),isEmpty:D(this,Mt,rp).call(this)})}addCommands(t){h(this,Di).add(t),D(this,Mt,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,Mt,rp).call(this)})}cleanUndoStack(t){h(this,Di).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...h(this,Ue)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},i=()=>{for(const o of e)D(this,Mt,o1).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=h(this,ci))==null||t.commitOrRemove()}hasSomethingToControl(){return h(this,ci)||this.hasSelection}selectAll(){for(const t of h(this,Ue))t.commit();D(this,Mt,a1).call(this,h(this,$s).values())}unselectAll(){var t;if(!(h(this,ci)&&(h(this,ci).commitOrRemove(),h(this,zs)!==ce.NONE))&&!((t=h(this,$c))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of h(this,Ue))e.unselect();h(this,Ue).clear(),D(this,Mt,Rn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;h(this,hl)[0]+=t,h(this,hl)[1]+=e;const[i,r]=h(this,hl),o=[...h(this,Ue)],a=1e3;h(this,Kr)&&clearTimeout(h(this,Kr)),T(this,Kr,setTimeout(()=>{T(this,Kr,null),h(this,hl)[0]=h(this,hl)[1]=0,this.addCommands({cmd:()=>{for(const l of o)h(this,$s).has(l.id)&&l.translateInPage(i,r)},undo:()=>{for(const l of o)h(this,$s).has(l.id)&&l.translateInPage(-i,-r)},mustExec:!1})},a));for(const l of o)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,qr,new Map);for(const t of h(this,Ue))h(this,qr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,qr))return!1;this.disableUserSelect(!1);const t=h(this,qr);T(this,qr,null);let e=!1;for(const[{x:i,y:r,pageIndex:o},a]of t)a.newX=i,a.newY=r,a.newPageIndex=o,e||(e=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const n=(i,r,o,a)=>{if(h(this,$s).has(i.id)){const l=h(this,Qs).get(a);l?i._setParentAndPosition(l,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of t)n(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of t)n(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(h(this,qr))for(const n of h(this,qr).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||h(this,Ue).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return h(this,ci)===t}getActive(){return h(this,ci)}getMode(){return h(this,zs)}get imageManager(){return ge(this,"imageManager",new t1)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let c=0,u=e.rangeCount;c<u;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(c,u,d,f)=>({x:(u-i)/o,y:1-(c+d-n)/r,width:f/o,height:d/r});break;case"180":a=(c,u,d,f)=>({x:1-(c+d-n)/r,y:1-(u+f-i)/o,width:d/r,height:f/o});break;case"270":a=(c,u,d,f)=>({x:1-(u+f-i)/o,y:(c-n)/r,width:f/o,height:d/r});break;default:a=(c,u,d,f)=>({x:(c-n)/r,y:(u-i)/o,width:d/r,height:f/o});break}const l=[];for(let c=0,u=e.rangeCount;c<u;c++){const d=e.getRangeAt(c);if(!d.collapsed)for(const{x:f,y:m,width:v,height:b}of d.getClientRects())v===0||b===0||l.push(a(f,m,v,b))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(h(this,od)||T(this,od,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=h(this,od))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=h(this,od))==null?void 0:i.get(t.data.id);if(!e)return;const n=h(this,$o).getRawValue(e);n&&(h(this,zs)===ce.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};id=new WeakMap,ci=new WeakMap,$s=new WeakMap,Qs=new WeakMap,rd=new WeakMap,$o=new WeakMap,od=new WeakMap,Di=new WeakMap,ol=new WeakMap,$c=new WeakMap,ad=new WeakMap,Uc=new WeakMap,qr=new WeakMap,er=new WeakMap,Vc=new WeakMap,xg=new WeakMap,Tg=new WeakMap,ld=new WeakMap,Cg=new WeakMap,Xr=new WeakMap,al=new WeakMap,cd=new WeakMap,ll=new WeakMap,Yr=new WeakMap,u_=new WeakMap,cl=new WeakMap,kg=new WeakMap,ul=new WeakMap,Hc=new WeakMap,Ig=new WeakMap,Pg=new WeakMap,zs=new WeakMap,Ue=new WeakMap,Uo=new WeakMap,jc=new WeakMap,Rg=new WeakMap,Mg=new WeakMap,hl=new WeakMap,Kr=new WeakMap,Vo=new WeakMap,Dg=new WeakMap,Oi=new WeakMap,Mt=new WeakSet,Bb=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},s1=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of h(this,Qs).values())if(n.hasTextLayer(t))return n;return null},TP=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=D(this,Mt,Bb).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(h(this,Yr)||T(this,Yr,new JU(this)),h(this,Yr).show(n,i,this.direction==="ltr"))},CP=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){h(this,Uo)&&((r=h(this,Yr))==null||r.hide(),T(this,Uo,null),D(this,Mt,Rn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===h(this,Uo))return;const i=D(this,Mt,Bb).call(this,t).closest(".textLayer");if(!i){h(this,Uo)&&((o=h(this,Yr))==null||o.hide(),T(this,Uo,null),D(this,Mt,Rn).call(this,{hasSelectedText:!1}));return}if((a=h(this,Yr))==null||a.hide(),T(this,Uo,e),D(this,Mt,Rn).call(this,{hasSelectedText:!0}),!(h(this,zs)!==ce.HIGHLIGHT&&h(this,zs)!==ce.NONE)&&(h(this,zs)===ce.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,ll,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=h(this,zs)===ce.HIGHLIGHT?D(this,Mt,s1).call(this,i):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&D(this,Mt,$b).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}},$b=function(t=""){h(this,zs)===ce.HIGHLIGHT?this.highlightSelection(t):h(this,xg)&&D(this,Mt,TP).call(this)},kP=function(){document.addEventListener("selectionchange",D(this,Mt,CP).bind(this),{signal:this._signal})},IP=function(){if(h(this,al))return;T(this,al,new AbortController);const t=this.combinedSignal(h(this,al));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},PP=function(){var t;(t=h(this,al))==null||t.abort(),T(this,al,null)},n1=function(){if(h(this,ul))return;T(this,ul,new AbortController);const t=this.combinedSignal(h(this,ul));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},RP=function(){var t;(t=h(this,ul))==null||t.abort(),T(this,ul,null)},i1=function(){if(h(this,ol))return;T(this,ol,new AbortController);const t=this.combinedSignal(h(this,ol));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},r1=function(){var t;(t=h(this,ol))==null||t.abort(),T(this,ol,null)},MP=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Rn=function(t){Object.entries(t).some(([n,i])=>h(this,Mg)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,Mg),t)}),h(this,zs)===ce.HIGHLIGHT&&t.hasSelectedEditor===!1&&D(this,Mt,Ro).call(this,[[we.HIGHLIGHT_FREE,!0]]))},Ro=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},DP=async function(){if(!h(this,cl)){T(this,cl,!0);const t=[];for(const e of h(this,Qs).values())t.push(e.enable());await Promise.all(t);for(const e of h(this,$s).values())e.enable()}},OP=function(){if(this.unselectAll(),h(this,cl)){T(this,cl,!1);for(const t of h(this,Qs).values())t.disable();for(const t of h(this,$s).values())t.disable()}},o1=function(t){const e=h(this,Qs).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},LP=function(){let t=null;for(t of h(this,Ue));return t},rp=function(){if(h(this,$s).size===0)return!0;if(h(this,$s).size===1)for(const t of h(this,$s).values())return t.isEmpty();return!1},a1=function(t){for(const e of h(this,Ue))e.unselect();h(this,Ue).clear();for(const e of t)e.isEmpty()||(h(this,Ue).add(e),e.select());D(this,Mt,Rn).call(this,{hasSelectedEditor:this.hasSelection})},ht(Uh,"TRANSLATE_SMALL",1),ht(Uh,"TRANSLATE_BIG",10);let eh=Uh;var Ws,Jr,sr,ud,Zr,ui,hd,Qr,Jn,Ho,zc,to,dl,yr,op,Ub;const Mn=class Mn{constructor(t){R(this,yr);R(this,Ws,null);R(this,Jr,!1);R(this,sr,null);R(this,ud,null);R(this,Zr,null);R(this,ui,null);R(this,hd,!1);R(this,Qr,null);R(this,Jn,null);R(this,Ho,null);R(this,zc,null);R(this,to,!1);T(this,Jn,t),T(this,to,t._uiManager.useNewAltTextFlow),h(Mn,dl)||T(Mn,dl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Mn._l10n??(Mn._l10n=t)}async render(){const t=T(this,sr,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=T(this,ud,document.createElement("span"));t.append(e),h(this,to)?(t.classList.add("new"),t.setAttribute("data-l10n-id",h(Mn,dl).missing),e.setAttribute("data-l10n-id",h(Mn,dl)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=h(this,Jn)._uiManager._signal;t.addEventListener("contextmenu",Ir,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),h(this,Jn)._uiManager.editAltText(h(this,Jn)),h(this,to)&&h(this,Jn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:h(this,yr,op)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(T(this,hd,!0),i(r))},{signal:n}),await D(this,yr,Ub).call(this),t}finish(){h(this,sr)&&(h(this,sr).focus({focusVisible:h(this,hd)}),T(this,hd,!1))}isEmpty(){return h(this,to)?h(this,Ws)===null:!h(this,Ws)&&!h(this,Jr)}hasData(){return h(this,to)?h(this,Ws)!==null||!!h(this,Ho):this.isEmpty()}get guessedText(){return h(this,Ho)}async setGuessedText(t){h(this,Ws)===null&&(T(this,Ho,t),T(this,zc,await Mn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),D(this,yr,Ub).call(this))}toggleAltTextBadge(t=!1){var e;if(!h(this,to)||h(this,Ws)){(e=h(this,Qr))==null||e.remove(),T(this,Qr,null);return}if(!h(this,Qr)){const n=T(this,Qr,document.createElement("div"));n.className="noAltTextBadge",h(this,Jn).div.append(n)}h(this,Qr).classList.toggle("hidden",!t)}serialize(t){let e=h(this,Ws);return!t&&h(this,Ho)===e&&(e=h(this,zc)),{altText:e,decorative:h(this,Jr),guessedText:h(this,Ho),textWithDisclaimer:h(this,zc)}}get data(){return{altText:h(this,Ws),decorative:h(this,Jr)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:r=!1}){n&&(T(this,Ho,n),T(this,zc,i)),!(h(this,Ws)===t&&h(this,Jr)===e)&&(r||(T(this,Ws,t),T(this,Jr,e)),D(this,yr,Ub).call(this))}toggle(t=!1){h(this,sr)&&(!t&&h(this,ui)&&(clearTimeout(h(this,ui)),T(this,ui,null)),h(this,sr).disabled=!t)}shown(){h(this,Jn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:h(this,yr,op)}})}destroy(){var t,e;(t=h(this,sr))==null||t.remove(),T(this,sr,null),T(this,ud,null),T(this,Zr,null),(e=h(this,Qr))==null||e.remove(),T(this,Qr,null)}};Ws=new WeakMap,Jr=new WeakMap,sr=new WeakMap,ud=new WeakMap,Zr=new WeakMap,ui=new WeakMap,hd=new WeakMap,Qr=new WeakMap,Jn=new WeakMap,Ho=new WeakMap,zc=new WeakMap,to=new WeakMap,dl=new WeakMap,yr=new WeakSet,op=function(){return h(this,Ws)&&"added"||h(this,Ws)===null&&this.guessedText&&"review"||"missing"},Ub=async function(){var i,r,o;const t=h(this,sr);if(!t)return;if(h(this,to)){if(t.classList.toggle("done",!!h(this,Ws)),t.setAttribute("data-l10n-id",h(Mn,dl)[h(this,yr,op)]),(i=h(this,ud))==null||i.setAttribute("data-l10n-id",h(Mn,dl)[`${h(this,yr,op)}-label`]),!h(this,Ws)){(r=h(this,Zr))==null||r.remove();return}}else{if(!h(this,Ws)&&!h(this,Jr)){t.classList.remove("done"),(o=h(this,Zr))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=h(this,Zr);if(!e){T(this,Zr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${h(this,Jn).id}`;const a=100,l=h(this,Jn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(h(this,ui)),T(this,ui,null)},{once:!0}),t.addEventListener("mouseenter",()=>{T(this,ui,setTimeout(()=>{T(this,ui,null),h(this,Zr).classList.add("show"),h(this,Jn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var c;h(this,ui)&&(clearTimeout(h(this,ui)),T(this,ui,null)),(c=h(this,Zr))==null||c.classList.remove("show")},{signal:l})}h(this,Jr)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=h(this,Ws)),e.parentNode||t.append(e);const n=h(this,Jn).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},R(Mn,dl,null),ht(Mn,"_l10n",null);let Wy=Mn;var Og,Wc,Lg,Ng,Fg,Bg,$g,dd,jo,Gc,fl,Oa,NP,FP,l1;const lE=class lE{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){R(this,Oa);R(this,Og);R(this,Wc,!1);R(this,Lg,null);R(this,Ng);R(this,Fg);R(this,Bg);R(this,$g);R(this,dd);R(this,jo,null);R(this,Gc);R(this,fl,null);T(this,Og,t),T(this,Lg,n),T(this,Ng,e),T(this,Fg,i),T(this,Bg,r),T(this,$g,o),T(this,Gc,new AbortController),T(this,dd,AbortSignal.any([a,h(this,Gc).signal])),t.addEventListener("touchstart",D(this,Oa,NP).bind(this),{passive:!1,signal:h(this,dd)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ge(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=h(this,Gc))==null||t.abort(),T(this,Gc,null)}};Og=new WeakMap,Wc=new WeakMap,Lg=new WeakMap,Ng=new WeakMap,Fg=new WeakMap,Bg=new WeakMap,$g=new WeakMap,dd=new WeakMap,jo=new WeakMap,Gc=new WeakMap,fl=new WeakMap,Oa=new WeakSet,NP=function(t){var i,r,o;if((i=h(this,Ng))!=null&&i.call(this)||t.touches.length<2)return;if(!h(this,fl)){T(this,fl,new AbortController);const a=AbortSignal.any([h(this,dd),h(this,fl).signal]),l=h(this,Og),c={signal:a,passive:!1};l.addEventListener("touchmove",D(this,Oa,FP).bind(this),c),l.addEventListener("touchend",D(this,Oa,l1).bind(this),c),l.addEventListener("touchcancel",D(this,Oa,l1).bind(this),c),(r=h(this,Fg))==null||r.call(this)}if(Ei(t),t.touches.length!==2||(o=h(this,Lg))!=null&&o.call(this)){T(this,jo,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),T(this,jo,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},FP=function(t){var O;if(!h(this,jo)||t.touches.length!==2)return;let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:a}=n,l=h(this,jo),{touch0X:c,touch0Y:u,touch1X:d,touch1Y:f}=l,m=d-c,v=f-u,b=o-i,y=a-r,w=Math.hypot(b,y)||1,k=Math.hypot(m,v)||1;if(!h(this,Wc)&&Math.abs(k-w)<=lE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,t.preventDefault(),!h(this,Wc)){T(this,Wc,!0);return}const M=[(i+o)/2,(r+a)/2];(O=h(this,Bg))==null||O.call(this,M,k,w)},l1=function(t){var e;h(this,fl).abort(),T(this,fl,null),(e=h(this,$g))==null||e.call(this),h(this,jo)&&(t.preventDefault(),T(this,jo,null),T(this,Wc,!1))};let Gy=lE;var qc,nr,ts,fd,pl,Ug,Xc,tn,Yc,zo,gl,Vg,Kc,hi,Hg,Jc,Wo,eo,pd,gd,Li,Zc,jg,h_,Jt,c1,zg,u1,Vb,BP,$P,h1,Hb,d1,UP,VP,HP,f1,jP,p1,zP,WP,GP,g1,ap;const de=class de{constructor(t){R(this,Jt);R(this,qc,null);R(this,nr,null);R(this,ts,null);R(this,fd,!1);R(this,pl,null);R(this,Ug,"");R(this,Xc,!1);R(this,tn,null);R(this,Yc,null);R(this,zo,null);R(this,gl,null);R(this,Vg,"");R(this,Kc,!1);R(this,hi,null);R(this,Hg,!1);R(this,Jc,!1);R(this,Wo,!1);R(this,eo,null);R(this,pd,0);R(this,gd,0);R(this,Li,null);R(this,Zc,null);ht(this,"_editToolbar",null);ht(this,"_initialOptions",Object.create(null));ht(this,"_initialData",null);ht(this,"_isVisible",!0);ht(this,"_uiManager",null);ht(this,"_focusEventsAllowed",!0);R(this,jg,!1);R(this,h_,de._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=de.prototype._resizeWithKeyboard,e=eh.TRANSLATE_SMALL,n=eh.TRANSLATE_BIG;return ge(this,"_resizerKeyboardManager",new cv([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],de.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ge(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new tV({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(de._l10n??(de._l10n=t),de._l10nResizer||(de._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),de._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);de._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Xe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,jg)}set _isDraggable(t){var e;T(this,jg,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,h_)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):D(this,Jt,ap).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(h(this,Kc)?T(this,Kc,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/o,this.fixAndSetPosition()}translate(t,e){D(this,Jt,c1).call(this,this.parentDimensions,t,e)}translateInPage(t,e){h(this,hi)||T(this,hi,[this.x,this.y,this.width,this.height]),D(this,Jt,c1).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){h(this,hi)||T(this,hi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=n;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!h(this,hi)&&(h(this,hi)[0]!==this.x||h(this,hi)[1]!==this.y)}get _hasBeenResized(){return!!h(this,hi)&&(h(this,hi)[2]!==this.width||h(this,hi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=de,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=n,l*=i,r*=n,o*=i,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(n-a,r)),o=Math.max(0,Math.min(i-l,o));break;case 90:r=Math.max(0,Math.min(n-l,r)),o=Math.min(i,Math.max(a,o));break;case 180:r=Math.min(n,Math.max(a,r)),o=Math.min(i,Math.max(l,o));break;case 270:r=Math.min(n,Math.max(l,r)),o=Math.max(0,Math.min(i-a,o));break}this.x=r/=n,this.y=o/=i;const[c,u]=this.getBaseTranslation();r+=c,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return D(n=de,zg,u1).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return D(n=de,zg,u1).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/n).toFixed(2)}%`,h(this,Xc)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),r=!h(this,Xc)&&e.endsWith("%");if(i&&r)return;const[o,a]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!h(this,Xc)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=h(this,ts))==null||t.finish()}async addEditToolbar(){return this._editToolbar||h(this,Jc)?this._editToolbar:(this._editToolbar=new Zw(this),this.div.append(this._editToolbar.render()),h(this,ts)&&await this._editToolbar.addAltText(h(this,ts)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=h(this,ts))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){h(this,ts)||(Wy.initialize(de._l10n),T(this,ts,new Wy(this)),h(this,qc)&&(h(this,ts).data=h(this,qc),T(this,qc,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=h(this,ts))==null?void 0:t.data}set altTextData(t){h(this,ts)&&(h(this,ts).data=t)}get guessedAltText(){var t;return(t=h(this,ts))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=h(this,ts))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=h(this,ts))==null?void 0:e.serialize(t)}hasAltText(){return!!h(this,ts)&&!h(this,ts).isEmpty()}hasAltTextData(){var t;return((t=h(this,ts))==null?void 0:t.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=h(this,fd)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),D(this,Jt,p1).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),zy(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(h(this,Zc)||T(this,Zc,new Gy({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,Jt,UP).bind(this),onPinching:D(this,Jt,VP).bind(this),onPinchEnd:D(this,Jt,HP).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(t){const{isMac:e}=Vn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(T(this,Kc,!0),this._isDraggable){D(this,Jt,jP).call(this,t);return}D(this,Jt,f1).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){h(this,eo)&&clearTimeout(h(this,eo)),T(this,eo,setTimeout(()=>{var t;T(this,eo,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=t/i,u=e/i,d=this.x*r,f=this.y*o,m=this.width*r,v=this.height*o;switch(n){case 0:return[d+c+a,o-f-u-v+l,d+c+m+a,o-f-u+l];case 90:return[d+u+a,o-f+c+l,d+u+v+a,o-f+c+m+l];case 180:return[d-c-m+a,o-f+u+l,d-c+a,o-f+u+v+l];case 270:return[d-u-v+a,o-f-c-m+l,d-u+a,o-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,o]=t,a=r-n,l=o-i;switch(this.rotation){case 0:return[n,e-o,a,l];case 90:return[n,e-i,l,a];case 180:return[r,e-i,a,l];case 270:return[r,e-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){T(this,Jc,!0)}disableEditMode(){T(this,Jc,!1)}isInEditMode(){return h(this,Jc)}shouldGetKeyboardEvents(){return h(this,Wo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&n>0}rebuild(){D(this,Jt,p1).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Xe("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,T(i,qc,t.accessibilityData);const[r,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(t.rect,o);return i.x=a/r,i.y=l/o,i.width=c/r,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=h(this,gl))==null||t.abort(),T(this,gl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(this,eo)&&(clearTimeout(h(this,eo)),T(this,eo,null)),D(this,Jt,ap).call(this),this.removeEditToolbar(),h(this,Li)){for(const n of h(this,Li).values())clearTimeout(n);T(this,Li,null)}this.parent=null,(e=h(this,Zc))==null||e.destroy(),T(this,Zc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,Jt,BP).call(this),h(this,tn).classList.remove("hidden"),zy(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),T(this,zo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=h(this,tn).children;if(!h(this,nr)){T(this,nr,Array.from(e));const o=D(this,Jt,zP).bind(this),a=D(this,Jt,WP).bind(this),l=this._uiManager._signal;for(const c of h(this,nr)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",D(this,Jt,GP).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",de._l10nResizer[u])}}const n=h(this,nr)[0];let i=0;for(const o of e){if(o===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(h(this,nr).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)h(this,tn).append(h(this,tn).firstChild);else if(r>i)for(let a=0;a<r-i;a++)h(this,tn).firstChild.before(h(this,tn).lastChild);let o=0;for(const a of e){const c=h(this,nr)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",de._l10nResizer[c])}}D(this,Jt,g1).call(this,0),T(this,Wo,!0),h(this,tn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){h(this,Wo)&&D(this,Jt,d1).call(this,h(this,Vg),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,Jt,ap).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=h(this,ts))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,i,r;(t=h(this,tn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=h(this,ts))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return h(this,Hg)}set isEditing(t){T(this,Hg,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){T(this,Xc,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){h(this,Li)||T(this,Li,new Map);const{action:n}=t;let i=h(this,Li).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),h(this,Li).delete(n),h(this,Li).size===0&&T(this,Li,null)},de._telemetryTimeout),h(this,Li).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),T(this,fd,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,fd,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};qc=new WeakMap,nr=new WeakMap,ts=new WeakMap,fd=new WeakMap,pl=new WeakMap,Ug=new WeakMap,Xc=new WeakMap,tn=new WeakMap,Yc=new WeakMap,zo=new WeakMap,gl=new WeakMap,Vg=new WeakMap,Kc=new WeakMap,hi=new WeakMap,Hg=new WeakMap,Jc=new WeakMap,Wo=new WeakMap,eo=new WeakMap,pd=new WeakMap,gd=new WeakMap,Li=new WeakMap,Zc=new WeakMap,jg=new WeakMap,h_=new WeakMap,Jt=new WeakSet,c1=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},zg=new WeakSet,u1=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Vb=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},BP=function(){if(h(this,tn))return;T(this,tn,document.createElement("div")),h(this,tn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");h(this,tn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",D(this,Jt,$P).bind(this,n),{signal:e}),i.addEventListener("contextmenu",Ir,{signal:e}),i.tabIndex=-1}this.div.prepend(h(this,tn))},$P=function(t,e){var u;e.preventDefault();const{isMac:n}=Vn.platform;if(e.button!==0||e.ctrlKey&&n)return;(u=h(this,ts))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,T(this,Yc,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,Jt,d1).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Ei,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ir,{signal:o}),T(this,zo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const c=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=h(this,ts))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,D(this,Jt,Hb).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},h1=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*n,o*i),this.fixAndSetPosition(),this._onResized()},Hb=function(){if(!h(this,zo))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=h(this,zo);T(this,zo,null);const r=this.x,o=this.y,a=this.width,l=this.height;r===t&&o===e&&a===n&&l===i||this.addCommands({cmd:D(this,Jt,h1).bind(this,r,o,a,l),undo:D(this,Jt,h1).bind(this,t,e,n,i),mustExec:!0})},d1=function(t,e){const[n,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=de.MIN_SIZE/n,u=de.MIN_SIZE/i,d=D(this,Jt,Vb).call(this,this.rotation),f=(tt,X)=>[d[0]*tt+d[2]*X,d[1]*tt+d[3]*X],m=D(this,Jt,Vb).call(this,360-this.rotation),v=(tt,X)=>[m[0]*tt+m[2]*X,m[1]*tt+m[3]*X];let b,y,w=!1,k=!1;switch(t){case"topLeft":w=!0,b=(tt,X)=>[0,0],y=(tt,X)=>[tt,X];break;case"topMiddle":b=(tt,X)=>[tt/2,0],y=(tt,X)=>[tt/2,X];break;case"topRight":w=!0,b=(tt,X)=>[tt,0],y=(tt,X)=>[0,X];break;case"middleRight":k=!0,b=(tt,X)=>[tt,X/2],y=(tt,X)=>[0,X/2];break;case"bottomRight":w=!0,b=(tt,X)=>[tt,X],y=(tt,X)=>[0,0];break;case"bottomMiddle":b=(tt,X)=>[tt/2,X],y=(tt,X)=>[tt/2,0];break;case"bottomLeft":w=!0,b=(tt,X)=>[0,X],y=(tt,X)=>[tt,0];break;case"middleLeft":k=!0,b=(tt,X)=>[0,X/2],y=(tt,X)=>[tt,X/2];break}const M=b(a,l),O=y(a,l);let B=f(...O);const V=de._round(r+B[0]),A=de._round(o+B[1]);let S=1,I=1,L,P;if(e.fromKeyboard)({deltaX:L,deltaY:P}=e);else{const{screenX:tt,screenY:X}=e,[nt,U]=h(this,Yc);[L,P]=this.screenToPageTranslation(tt-nt,X-U),h(this,Yc)[0]=tt,h(this,Yc)[1]=X}if([L,P]=v(L/n,P/i),w){const tt=Math.hypot(a,l);S=I=Math.max(Math.min(Math.hypot(O[0]-M[0]-L,O[1]-M[1]-P)/tt,1/a,1/l),c/a,u/l)}else k?S=Math.max(c,Math.min(1,Math.abs(O[0]-M[0]-L)))/a:I=Math.max(u,Math.min(1,Math.abs(O[1]-M[1]-P)))/l;const $=de._round(a*S),N=de._round(l*I);B=f(...y($,N));const _t=V-B[0],xt=A-B[1];h(this,hi)||T(this,hi,[this.x,this.y,this.width,this.height]),this.width=$,this.height=N,this.x=_t,this.y=xt,this.setDims(n*$,i*N),this.fixAndSetPosition(),this._onResizing()},UP=function(){var t;T(this,zo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=h(this,ts))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},VP=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const o=D(this,Jt,Vb).call(this,this.rotation),a=(V,A)=>[o[0]*V+o[2]*A,o[1]*V+o[3]*A],[l,c]=this.parentDimensions,u=this.x,d=this.y,f=this.width,m=this.height,v=de.MIN_SIZE/l,b=de.MIN_SIZE/c;r=Math.max(Math.min(r,1/f,1/m),v/f,b/m);const y=de._round(f*r),w=de._round(m*r);if(y===f&&w===m)return;h(this,hi)||T(this,hi,[u,d,f,m]);const k=a(f/2,m/2),M=de._round(u+k[0]),O=de._round(d+k[1]),B=a(y/2,w/2);this.x=M-B[0],this.y=O-B[1],this.width=y,this.height=w,this.setDims(l*y,c*w),this.fixAndSetPosition(),this._onResizing()},HP=function(){var t;(t=h(this,ts))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),D(this,Jt,Hb).call(this)},f1=function(t){const{isMac:e}=Vn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},jP=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=c=>{i.abort(),T(this,pl,null),T(this,Kc,!1),this._uiManager.endDragSession()||D(this,Jt,f1).call(this,c),n&&this._onStopDragging()};e&&(T(this,pd,t.clientX),T(this,gd,t.clientY),T(this,pl,t.pointerId),T(this,Ug,t.pointerType),window.addEventListener("pointermove",c=>{n||(n=!0,this._onStartDragging());const{clientX:u,clientY:d,pointerId:f}=c;if(f!==h(this,pl)){Ei(c);return}const[m,v]=this.screenToPageTranslation(u-h(this,pd),d-h(this,gd));T(this,pd,u),T(this,gd,d),this._uiManager.dragSelectedEditors(m,v)},o),window.addEventListener("touchmove",Ei,o),window.addEventListener("pointerdown",c=>{c.pointerType===h(this,Ug)&&(h(this,Zc)||c.isPrimary)&&a(c),Ei(c)},o));const l=c=>{if(!h(this,pl)||h(this,pl)===c.pointerId){a(c);return}Ei(c)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},p1=function(){if(h(this,gl)||!this.div)return;T(this,gl,new AbortController);const t=this._uiManager.combinedSignal(h(this,gl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},zP=function(t){de._resizerKeyboardManager.exec(this,t)},WP=function(t){var e;h(this,Wo)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==h(this,tn)&&D(this,Jt,ap).call(this)},GP=function(t){T(this,Vg,h(this,Wo)?t:"")},g1=function(t){if(h(this,nr))for(const e of h(this,nr))e.tabIndex=t},ap=function(){T(this,Wo,!1),D(this,Jt,g1).call(this,-1),D(this,Jt,Hb).call(this)},R(de,zg),ht(de,"_l10n",null),ht(de,"_l10nResizer",null),ht(de,"_borderLineWidth",-1),ht(de,"_colorManager",new e1),ht(de,"_zIndex",1),ht(de,"_telemetryTimeout",1e3);let gs=de;class tV extends gs{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const TT=3285377520,Ri=4294901760,Vr=65535;class qP{constructor(t){this.h1=t?t&4294967295:TT,this.h2=t?t&4294967295:TT}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let b=0,y=t.length;b<y;b++){const w=t.charCodeAt(b);w<=255?e[n++]=w:(e[n++]=w>>>8,e[n++]=w&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,o=new Uint32Array(e.buffer,0,i);let a=0,l=0,c=this.h1,u=this.h2;const d=3432918353,f=461845907,m=d&Vr,v=f&Vr;for(let b=0;b<i;b++)b&1?(a=o[b],a=a*d&Ri|a*m&Vr,a=a<<15|a>>>17,a=a*f&Ri|a*v&Vr,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[b],l=l*d&Ri|l*m&Vr,l=l<<15|l>>>17,l=l*f&Ri|l*v&Vr,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*d&Ri|a*m&Vr,a=a<<15|a>>>17,a=a*f&Ri|a*v&Vr,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ri|t*36045&Vr,e=e*4283543511&Ri|((e<<16|t>>>16)*2950163797&Ri)>>>16,t^=e>>>1,t=t*444984403&Ri|t*60499&Vr,e=e*3301882366&Ri|((e<<16|t>>>16)*3120437893&Ri)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const m1=Object.freeze({map:null,hash:"",transfer:void 0});var Qc,tu,Gs,d_,XP;class MS{constructor(){R(this,d_);R(this,Qc,!1);R(this,tu,null);R(this,Gs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=h(this,Gs).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return h(this,Gs).get(t)}remove(t){if(h(this,Gs).delete(t),h(this,Gs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of h(this,Gs).values())if(e instanceof gs)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=h(this,Gs).get(t);let i=!1;if(n!==void 0)for(const[r,o]of Object.entries(e))n[r]!==o&&(i=!0,n[r]=o);else i=!0,h(this,Gs).set(t,e);i&&D(this,d_,XP).call(this),e instanceof gs&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return h(this,Gs).has(t)}getAll(){return h(this,Gs).size>0?TS(h(this,Gs)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return h(this,Gs).size}resetModified(){h(this,Qc)&&(T(this,Qc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new YP(this)}get serializable(){if(h(this,Gs).size===0)return m1;const t=new Map,e=new qP,n=[],i=Object.create(null);let r=!1;for(const[o,a]of h(this,Gs)){const l=a instanceof gs?a.serialize(!1,i):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:m1}get editorStats(){let t=null;const e=new Map;for(const n of h(this,Gs).values()){if(!(n instanceof gs))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,l]of Object.entries(i)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){T(this,tu,null)}get modifiedIds(){if(h(this,tu))return h(this,tu);const t=[];for(const e of h(this,Gs).values())!(e instanceof gs)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return T(this,tu,{ids:new Set(t),hash:t.join(",")})}}Qc=new WeakMap,tu=new WeakMap,Gs=new WeakMap,d_=new WeakSet,XP=function(){h(this,Qc)||(T(this,Qc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Wg;class YP extends MS{constructor(e){super();R(this,Wg);const{map:n,hash:i,transfer:r}=e.serializable,o=structuredClone(n,r?{transfer:r}:null);T(this,Wg,{map:o,hash:i,transfer:r})}get print(){Xe("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,Wg)}get modifiedIds(){return ge(this,"modifiedIds",{ids:new Set,hash:""})}}Wg=new WeakMap;var md;class eV{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){R(this,md,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),h(this,md).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||h(this,md).has(t.loadedName))){if(Rs(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:r}=t,o=new FontFace(n,i,r);this.addNativeFontFace(o);try{await o.load(),h(this,md).add(n),e==null||e(t)}catch{ue(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Xe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw ue(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return ge(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(An||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),ge(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Rs(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ge(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(O,B){return O.charCodeAt(B)<<24|O.charCodeAt(B+1)<<16|O.charCodeAt(B+2)<<8|O.charCodeAt(B+3)&255}function i(O,B,V,A){const S=O.substring(0,B),I=O.substring(B+V);return S+A+I}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(O,B){if(++c>30){ue("Load test font never loaded."),B();return}if(l.font="30px "+O,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(u.bind(null,O,B))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const v=16,b=1482184792;let y=n(f,v);for(r=0,o=d.length-3;r<o;r+=4)y=y-b+n(d,r)|0;r<d.length&&(y=y-b+n(d+"XXX",r)|0),f=i(f,v,4,UU(y));const w=`url(data:font/opentype;base64,${btoa(f)});`,k=`@font-face {font-family:"${d}";src:${w}}`;this.insertRule(k);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const O of[t.loadedName,d]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=O,M.append(B)}this._document.body.append(M),u(d,()=>{M.remove(),e.complete()})}}md=new WeakMap;class sV{constructor(t,{disableFontFace:e=!1,fontExtraProperties:n=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this.fontExtraProperties=n===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${GU(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(o){ue(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}const tb={DATA:1,ERROR:2},Ps={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function CT(){}function Yn(s){if(s instanceof Xl||s instanceof Yw||s instanceof og||s instanceof ST||s instanceof jy||s instanceof X0)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Xe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Xl(s.message);case"InvalidPDFException":return new Yw(s.message);case"MissingPDFException":return new og(s.message);case"PasswordException":return new ST(s.message,s.code);case"UnexpectedResponseException":return new jy(s.message,s.status);case"UnknownErrorException":return new X0(s.message,s.details)}return new X0(s.message,s.toString())}var vd,Gi,KP,JP,ZP,jb;class lp{constructor(t,e,n){R(this,Gi);R(this,vd,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",D(this,Gi,KP).bind(this),{signal:h(this,vd).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:Ps.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Rs(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Ps.CANCEL,streamId:r,reason:Yn(c)}),u.promise}},n)}destroy(){var t;(t=h(this,vd))==null||t.abort(),T(this,vd,null)}}vd=new WeakMap,Gi=new WeakSet,KP=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){D(this,Gi,ZP).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===tb.DATA)i.resolve(t.data);else if(t.callback===tb.ERROR)i.reject(Yn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:n,targetName:i,callback:tb.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:i,callback:tb.ERROR,callbackId:t.callbackId,reason:Yn(o)})});return}if(t.streamId){D(this,Gi,JP).call(this,t);return}e(t.data)},JP=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Ps.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ps.CLOSE,streamId:e}),delete o.streamSinks[e])},error(c){Rs(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ps.ERROR,streamId:e,reason:Yn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ps.START_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:n,targetName:i,stream:Ps.START_COMPLETE,streamId:e,reason:Yn(c)})})},ZP=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Ps.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Yn(t.reason));break;case Ps.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Yn(t.reason));break;case Ps.PULL:if(!a){r.postMessage({sourceName:n,targetName:i,stream:Ps.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||CT).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ps.PULL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:n,targetName:i,stream:Ps.PULL_COMPLETE,streamId:e,reason:Yn(c)})});break;case Ps.ENQUEUE:if(Rs(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Ps.CLOSE:if(Rs(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),D(this,Gi,jb).call(this,o,e);break;case Ps.ERROR:Rs(o,"error should have stream controller"),o.controller.error(Yn(t.reason)),D(this,Gi,jb).call(this,o,e);break;case Ps.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Yn(t.reason)),D(this,Gi,jb).call(this,o,e);break;case Ps.CANCEL:if(!a)break;const l=Yn(t.reason);Promise.try(a.onCancel||CT,l).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ps.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:n,targetName:i,stream:Ps.CANCEL_COMPLETE,streamId:e,reason:Yn(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},jb=async function(t,e){var n,i,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Gg;class QP{constructor({enableHWA:t=!1}){R(this,Gg,!1);T(this,Gg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!h(this,Gg)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Xe("Abstract method `_createCanvas` called.")}}Gg=new WeakMap;class nV extends QP{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class tR{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Xe("Abstract method `_fetch` called.")}}class eR extends tR{async _fetch(t){const e=await K_(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Y_(e)}}class sR{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(t=!1){}}var eu,bd,Go,qo,pn,su,nu,Nt,hn,cp,Mh,zb,Dh,nR,v1,Oh,up,hp,b1,dp;class iV extends sR{constructor({docId:e,ownerDocument:n=globalThis.document}){super();R(this,Nt);R(this,eu);R(this,bd);R(this,Go);R(this,qo);R(this,pn);R(this,su);R(this,nu,0);T(this,qo,e),T(this,pn,n)}addFilter(e){if(!e)return"none";let n=h(this,Nt,hn).get(e);if(n)return n;const[i,r,o]=D(this,Nt,zb).call(this,e),a=e.length===1?i:`${i}${r}${o}`;if(n=h(this,Nt,hn).get(a),n)return h(this,Nt,hn).set(e,n),n;const l=`g_${h(this,qo)}_transfer_map_${In(this,nu)._++}`,c=D(this,Nt,Dh).call(this,l);h(this,Nt,hn).set(e,c),h(this,Nt,hn).set(a,c);const u=D(this,Nt,Oh).call(this,l);return D(this,Nt,hp).call(this,i,r,o,u),c}addHCMFilter(e,n){var v;const i=`${e}-${n}`,r="base";let o=h(this,Nt,cp).get(r);if((o==null?void 0:o.key)===i||(o?((v=o.filter)==null||v.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},h(this,Nt,cp).set(r,o)),!e||!n))return o.url;const a=D(this,Nt,dp).call(this,e);e=Gt.makeHexColor(...a);const l=D(this,Nt,dp).call(this,n);if(n=Gt.makeHexColor(...l),h(this,Nt,Mh).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const c=new Array(256);for(let b=0;b<=255;b++){const y=b/255;c[b]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}const u=c.join(","),d=`g_${h(this,qo)}_hcm_filter`,f=o.filter=D(this,Nt,Oh).call(this,d);D(this,Nt,hp).call(this,u,u,u,f),D(this,Nt,v1).call(this,f);const m=(b,y)=>{const w=a[b]/255,k=l[b]/255,M=new Array(y+1);for(let O=0;O<=y;O++)M[O]=w+O/y*(k-w);return M.join(",")};return D(this,Nt,hp).call(this,m(0,5),m(1,5),m(2,5),f),o.url=D(this,Nt,Dh).call(this,d),o.url}addAlphaFilter(e){let n=h(this,Nt,hn).get(e);if(n)return n;const[i]=D(this,Nt,zb).call(this,[e]),r=`alpha_${i}`;if(n=h(this,Nt,hn).get(r),n)return h(this,Nt,hn).set(e,n),n;const o=`g_${h(this,qo)}_alpha_map_${In(this,nu)._++}`,a=D(this,Nt,Dh).call(this,o);h(this,Nt,hn).set(e,a),h(this,Nt,hn).set(r,a);const l=D(this,Nt,Oh).call(this,o);return D(this,Nt,b1).call(this,i,l),a}addLuminosityFilter(e){let n=h(this,Nt,hn).get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=D(this,Nt,zb).call(this,[e]),r=`luminosity_${i}`):r="luminosity",n=h(this,Nt,hn).get(r),n)return h(this,Nt,hn).set(e,n),n;const o=`g_${h(this,qo)}_luminosity_map_${In(this,nu)._++}`,a=D(this,Nt,Dh).call(this,o);h(this,Nt,hn).set(e,a),h(this,Nt,hn).set(r,a);const l=D(this,Nt,Oh).call(this,o);return D(this,Nt,nR).call(this,l),e&&D(this,Nt,b1).call(this,i,l),a}addHighlightHCMFilter(e,n,i,r,o){var k;const a=`${n}-${i}-${r}-${o}`;let l=h(this,Nt,cp).get(e);if((l==null?void 0:l.key)===a||(l?((k=l.filter)==null||k.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},h(this,Nt,cp).set(e,l)),!n||!i))return l.url;const[c,u]=[n,i].map(D(this,Nt,dp).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,v]=[r,o].map(D(this,Nt,dp).bind(this));f<d&&([d,f,m,v]=[f,d,v,m]),h(this,Nt,Mh).style.color="";const b=(M,O,B)=>{const V=new Array(256),A=(f-d)/B,S=M/255,I=(O-M)/(255*B);let L=0;for(let P=0;P<=B;P++){const $=Math.round(d+P*A),N=S+P*I;for(let _t=L;_t<=$;_t++)V[_t]=N;L=$+1}for(let P=L;P<256;P++)V[P]=V[L-1];return V.join(",")},y=`g_${h(this,qo)}_hcm_${e}_filter`,w=l.filter=D(this,Nt,Oh).call(this,y);return D(this,Nt,v1).call(this,w),D(this,Nt,hp).call(this,b(m[0],v[0],5),b(m[1],v[1],5),b(m[2],v[2],5),w),l.url=D(this,Nt,Dh).call(this,y),l.url}destroy(e=!1){var n,i,r,o;e&&((n=h(this,su))!=null&&n.size)||((i=h(this,Go))==null||i.parentNode.parentNode.remove(),T(this,Go,null),(r=h(this,bd))==null||r.clear(),T(this,bd,null),(o=h(this,su))==null||o.clear(),T(this,su,null),T(this,nu,0))}}eu=new WeakMap,bd=new WeakMap,Go=new WeakMap,qo=new WeakMap,pn=new WeakMap,su=new WeakMap,nu=new WeakMap,Nt=new WeakSet,hn=function(){return h(this,bd)||T(this,bd,new Map)},cp=function(){return h(this,su)||T(this,su,new Map)},Mh=function(){if(!h(this,Go)){const e=h(this,pn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=h(this,pn).createElementNS(Po,"svg");i.setAttribute("width",0),i.setAttribute("height",0),T(this,Go,h(this,pn).createElementNS(Po,"defs")),e.append(i),i.append(h(this,Go)),h(this,pn).body.append(e)}return h(this,Go)},zb=function(e){if(e.length===1){const c=e[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=c[f]/255;const d=u.join(",");return[d,d,d]}const[n,i,r]=e,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=n[c]/255,a[c]=i[c]/255,l[c]=r[c]/255;return[o.join(","),a.join(","),l.join(",")]},Dh=function(e){if(h(this,eu)===void 0){T(this,eu,"");const n=h(this,pn).URL;n!==h(this,pn).baseURI&&(J_(n)?ue('#createUrl: ignore "data:"-URL for performance reasons.'):T(this,eu,n.split("#",1)[0]))}return`url(${h(this,eu)}#${e})`},nR=function(e){const n=h(this,pn).createElementNS(Po,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},v1=function(e){const n=h(this,pn).createElementNS(Po,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Oh=function(e){const n=h(this,pn).createElementNS(Po,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),h(this,Nt,Mh).append(n),n},up=function(e,n,i){const r=h(this,pn).createElementNS(Po,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},hp=function(e,n,i,r){const o=h(this,pn).createElementNS(Po,"feComponentTransfer");r.append(o),D(this,Nt,up).call(this,o,"feFuncR",e),D(this,Nt,up).call(this,o,"feFuncG",n),D(this,Nt,up).call(this,o,"feFuncB",i)},b1=function(e,n){const i=h(this,pn).createElementNS(Po,"feComponentTransfer");n.append(i),D(this,Nt,up).call(this,i,"feFuncA",e)},dp=function(e){return h(this,Nt,Mh).style.color=e,RS(getComputedStyle(h(this,Nt,Mh)).getPropertyValue("color"))};class iR{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Xe("Abstract method `_fetch` called.")}}class rR extends iR{async _fetch(t){const e=await K_(t,"arraybuffer");return new Uint8Array(e)}}An&&ue("Please use the `legacy` build in Node.js environments.");async function oR(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class rV extends sR{}class oV extends QP{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class aV extends tR{async _fetch(t){return oR(t)}}class lV extends iR{async _fetch(t){return oR(t)}}const bn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function y1(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class DS{getPattern(){Xe("Abstract method `getPattern` called.")}}class cV extends DS{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===bn.STROKE||i===bn.FILL){const o=e.current.getClippedPathBoundingBox(i,ns(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=e.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),n=Gt.transform(n,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),y1(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else y1(t,this._bbox),r=this._createGradient(t);return r}}function J0(s,t,e,n,i,r,o,a){const l=t.coords,c=t.colors,u=s.data,d=s.width*4;let f;l[e+1]>l[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f),l[n+1]>l[i+1]&&(f=n,n=i,i=f,f=o,o=a,a=f),l[e+1]>l[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f);const m=(l[e]+t.offsetX)*t.scaleX,v=(l[e+1]+t.offsetY)*t.scaleY,b=(l[n]+t.offsetX)*t.scaleX,y=(l[n+1]+t.offsetY)*t.scaleY,w=(l[i]+t.offsetX)*t.scaleX,k=(l[i+1]+t.offsetY)*t.scaleY;if(v>=k)return;const M=c[r],O=c[r+1],B=c[r+2],V=c[o],A=c[o+1],S=c[o+2],I=c[a],L=c[a+1],P=c[a+2],$=Math.round(v),N=Math.round(k);let _t,xt,tt,X,nt,U,it,vt;for(let j=$;j<=N;j++){if(j<y){const Y=j<v?0:(v-j)/(v-y);_t=m-(m-b)*Y,xt=M-(M-V)*Y,tt=O-(O-A)*Y,X=B-(B-S)*Y}else{let Y;j>k?Y=1:y===k?Y=0:Y=(y-j)/(y-k),_t=b-(b-w)*Y,xt=V-(V-I)*Y,tt=A-(A-L)*Y,X=S-(S-P)*Y}let Z;j<v?Z=0:j>k?Z=1:Z=(v-j)/(v-k),nt=m-(m-w)*Z,U=M-(M-I)*Z,it=O-(O-L)*Z,vt=B-(B-P)*Z;const dt=Math.round(Math.min(_t,nt)),Ft=Math.round(Math.max(_t,nt));let kt=d*j+dt*4;for(let Y=dt;Y<=Ft;Y++)Z=(_t-Y)/(_t-nt),Z<0?Z=0:Z>1&&(Z=1),u[kt++]=xt-(xt-U)*Z|0,u[kt++]=tt-(tt-it)*Z|0,u[kt++]=X-(X-vt)*Z|0,u[kt++]=255}}function uV(s,t,e){const n=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(n.length/a)-1,c=a-1;for(r=0;r<l;r++){let u=r*a;for(let d=0;d<c;d++,u++)J0(s,e,n[u],n[u+1],n[u+a],i[u],i[u+1],i[u+a]),J0(s,e,n[u+a+1],n[u+1],n[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)J0(s,e,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class hV extends DS{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),m=c/d,v=u/f,b={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/v},y=d+4,w=f+4,k=n.getCanvas("mesh",y,w),M=k.context,O=M.createImageData(d,f);if(e){const V=O.data;for(let A=0,S=V.length;A<S;A+=4)V[A]=e[0],V[A+1]=e[1],V[A+2]=e[2],V[A+3]=255}for(const V of this._figures)uV(O,V,b);return M.putImageData(O,2,2),{canvas:k.canvas,offsetX:a-2*m,offsetY:l-2*v,scaleX:m,scaleY:v}}getPattern(t,e,n,i){y1(t,this._bbox);let r;if(i===bn.SHADING)r=Gt.singularValueDecompose2dScale(ns(t));else if(r=Gt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const a=Gt.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,i===bn.SHADING?null:this._background,e.cachedCanvases);return i!==bn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class dV extends DS{getPattern(){return"hotpink"}}function fV(s){switch(s[0]){case"RadialAxial":return new cV(s);case"Mesh":return new hV(s);case"Dummy":return new dV}throw new Error(`Unknown IR type: ${s[0]}`)}const kT={COLORED:1,UNCOLORED:2},f_=class f_{constructor(t,e,n,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),X_("TilingType: "+r);const u=e[0],d=e[1],f=e[2],m=e[3],v=f-u,b=m-d,y=Gt.singularValueDecompose2dScale(this.matrix),w=Gt.singularValueDecompose2dScale(this.baseTransform),k=y[0]*w[0],M=y[1]*w[1];let O=v,B=b,V=!1,A=!1;const S=Math.ceil(l*k),I=Math.ceil(c*M),L=Math.ceil(v*k),P=Math.ceil(b*M);S>=L?O=l:V=!0,I>=P?B=c:A=!0;const $=this.getSizeAndScale(O,this.ctx.canvas.width,k),N=this.getSizeAndScale(B,this.ctx.canvas.height,M),_t=t.cachedCanvases.getCanvas("pattern",$.size,N.size),xt=_t.context,tt=a.createCanvasGraphics(xt);if(tt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(tt,i,o),xt.translate(-$.scale*u,-N.scale*d),tt.transform($.scale,0,0,N.scale,0,0),xt.save(),this.clipBbox(tt,u,d,f,m),tt.baseTransform=ns(tt.ctx),tt.executeOperatorList(n),tt.endDrawing(),xt.restore(),V||A){const X=_t.canvas;V&&(O=l),A&&(B=c);const nt=this.getSizeAndScale(O,this.ctx.canvas.width,k),U=this.getSizeAndScale(B,this.ctx.canvas.height,M),it=nt.size,vt=U.size,j=t.cachedCanvases.getCanvas("pattern-workaround",it,vt),Z=j.context,dt=V?Math.floor(v/l):0,Ft=A?Math.floor(b/c):0;for(let kt=0;kt<=dt;kt++)for(let Y=0;Y<=Ft;Y++)Z.drawImage(X,it*kt,vt*Y,it,vt,0,0,it,vt);return{canvas:j.canvas,scaleX:nt.scale,scaleY:U.scale,offsetX:u,offsetY:d}}return{canvas:_t.canvas,scaleX:$.scale,scaleY:N.scale,offsetX:u,offsetY:d}}getSizeAndScale(t,e,n){const i=Math.max(f_.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const o=i-e,a=r-n;t.ctx.rect(e,n,o,a),t.current.updateRectMinMax(ns(t.ctx),[e,n,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case kT.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case kT.UNCOLORED:const a=Gt.makeHexColor(n[0],n[1],n[2]);i.fillStyle=a,i.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new $U(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let r=n;i!==bn.SHADING&&(r=Gt.transform(r,e.baseTransform),this.matrix&&(r=Gt.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=t.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};ht(f_,"MAX_PATTERN_SIZE",3e3);let _1=f_;function pV({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Vn.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],u=n>>3,d=n&7,f=s.length;e=new Uint32Array(e.buffer);let m=0;for(let v=0;v<i;v++){for(const y=t+u;t<y;t++){const w=t<f?s[t]:255;e[m++]=w&128?c:l,e[m++]=w&64?c:l,e[m++]=w&32?c:l,e[m++]=w&16?c:l,e[m++]=w&8?c:l,e[m++]=w&4?c:l,e[m++]=w&2?c:l,e[m++]=w&1?c:l}if(d===0)continue;const b=t<f?s[t++]:255;for(let y=0;y<d;y++)e[m++]=b&1<<7-y?c:l}return{srcPos:t,destPos:m}}const IT=16,PT=100,gV=15,RT=10,MT=1e3,ei=16;function mV(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},s.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},s.transform=function(n,i,r,o,a,l){t.transform(n,i,r,o,a,l),this.__originalTransform(n,i,r,o,a,l)},s.setTransform=function(n,i,r,o,a,l){t.setTransform(n,i,r,o,a,l),this.__originalSetTransform(n,i,r,o,a,l)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){t.rotate(n),this.__originalRotate(n)},s.clip=function(n){t.clip(n),this.__originalClip(n)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,r,o,a){t.bezierCurveTo(e,n,i,r,o,a),this.__originalBezierCurveTo(e,n,i,r,o,a)},s.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class vV{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function eb(s,t,e,n,i,r,o,a,l,c){const[u,d,f,m,v,b]=ns(s);if(d===0&&f===0){const k=o*u+v,M=Math.round(k),O=a*m+b,B=Math.round(O),V=(o+l)*u+v,A=Math.abs(Math.round(V)-M)||1,S=(a+c)*m+b,I=Math.abs(Math.round(S)-B)||1;return s.setTransform(Math.sign(u),0,0,Math.sign(m),M,B),s.drawImage(t,e,n,i,r,0,0,A,I),s.setTransform(u,d,f,m,v,b),[A,I]}if(u===0&&m===0){const k=a*f+v,M=Math.round(k),O=o*d+b,B=Math.round(O),V=(a+c)*f+v,A=Math.abs(Math.round(V)-M)||1,S=(o+l)*d+b,I=Math.abs(Math.round(S)-B)||1;return s.setTransform(0,Math.sign(d),Math.sign(f),0,M,B),s.drawImage(t,e,n,i,r,0,0,I,A),s.setTransform(u,d,f,m,v,b),[I,A]}s.drawImage(t,e,n,i,r,o,a,l,c);const y=Math.hypot(u,d),w=Math.hypot(f,m);return[y*l,w*c]}function bV(s){const{width:t,height:e}=s;if(t>MT||e>MT)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),a,l,c;const u=t+7&-8;let d=new Uint8Array(u*e),f=0;for(const w of s.data){let k=128;for(;k>0;)d[f++]=w&k?0:255,k>>=1}let m=0;for(f=0,d[f]!==0&&(o[0]=1,++m),l=1;l<t;l++)d[f]!==d[f+1]&&(o[l]=d[f]?2:1,++m),f++;for(d[f]!==0&&(o[l]=2,++m),a=1;a<e;a++){f=a*u,c=a*r,d[f-u]!==d[f]&&(o[c]=d[f]?1:8,++m);let w=(d[f]?4:0)+(d[f-u]?8:0);for(l=1;l<t;l++)w=(w>>2)+(d[f+1]?4:0)+(d[f-u+1]?8:0),i[w]&&(o[c+l]=i[w],++m),f++;if(d[f-u]!==d[f]&&(o[c+l]=d[f]?2:4,++m),m>n)return null}for(f=u*(e-1),c=a*r,d[f]!==0&&(o[c]=8,++m),l=1;l<t;l++)d[f]!==d[f+1]&&(o[c+l]=d[f]?4:8,++m),f++;if(d[f]!==0&&(o[c+l]=4,++m),m>n)return null;const v=new Int32Array([0,r,-1,0,-r,0,0,0,1]),b=new Path2D;for(a=0;m&&a<=e;a++){let w=a*r;const k=w+t;for(;w<k&&!o[w];)w++;if(w===k)continue;b.moveTo(w%r,a);const M=w;let O=o[w];do{const B=v[O];do w+=B;while(!o[w]);const V=o[w];V!==5&&V!==10?(O=V,o[w]=0):(O=V&51*O>>4,o[w]&=O>>2|O<<2),b.lineTo(w%r,w/r|0),o[w]||--m}while(M!==w);--a}return d=null,o=null,function(w){w.save(),w.scale(1/t,-1/e),w.translate(0,-e),w.fill(b),w.beginPath(),w.restore()}}class DT{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=mP,this.textMatrixScale=1,this.fontMatrix=Xw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=un.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Gt.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Gt.applyTransform(e,t),i=Gt.applyTransform(e.slice(2),t),r=Gt.applyTransform([e[0],e[3]],t),o=Gt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],r[0],o[0]),this.minY=Math.min(this.minY,n[1],i[1],r[1],o[1]),this.maxX=Math.max(this.maxX,n[0],i[0],r[0],o[0]),this.maxY=Math.max(this.maxY,n[1],i[1],r[1],o[1])}updateScalingPathMinMax(t,e){Gt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,r,o,a,l,c,u){const d=Gt.bezierBoundingBox(e,n,i,r,o,a,l,c,u);u||this.updateRectMinMax(t,d)}getPathBoundingBox(t=bn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===bn.STROKE){e||Xe("Stroke bounding box must include transform.");const i=Gt.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=Gt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=bn.FILL,e=null){return Gt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function OT(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%ei,r=(e-i)/ei,o=i===0?r:r+1,a=s.createImageData(n,ei);let l=0,c;const u=t.data,d=a.data;let f,m,v,b;if(t.kind===Ob.GRAYSCALE_1BPP){const y=u.byteLength,w=new Uint32Array(d.buffer,0,d.byteLength>>2),k=w.length,M=n+7>>3,O=4294967295,B=Vn.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(v=f<r?ei:i,c=0,m=0;m<v;m++){const V=y-l;let A=0;const S=V>M?n:V*8-7,I=S&-8;let L=0,P=0;for(;A<I;A+=8)P=u[l++],w[c++]=P&128?O:B,w[c++]=P&64?O:B,w[c++]=P&32?O:B,w[c++]=P&16?O:B,w[c++]=P&8?O:B,w[c++]=P&4?O:B,w[c++]=P&2?O:B,w[c++]=P&1?O:B;for(;A<S;A++)L===0&&(P=u[l++],L=128),w[c++]=P&L?O:B,L>>=1}for(;c<k;)w[c++]=0;s.putImageData(a,0,f*ei)}}else if(t.kind===Ob.RGBA_32BPP){for(m=0,b=n*ei*4,f=0;f<r;f++)d.set(u.subarray(l,l+b)),l+=b,s.putImageData(a,0,m),m+=ei;f<o&&(b=n*i*4,d.set(u.subarray(l,l+b)),s.putImageData(a,0,m))}else if(t.kind===Ob.RGB_24BPP)for(v=ei,b=n*v,f=0;f<o;f++){for(f>=r&&(v=i,b=n*v),c=0,m=b;m--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;s.putImageData(a,0,f*ei)}else throw new Error(`bad image kind: ${t.kind}`)}function LT(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%ei,r=(e-i)/ei,o=i===0?r:r+1,a=s.createImageData(n,ei);let l=0;const c=t.data,u=a.data;for(let d=0;d<o;d++){const f=d<r?ei:i;({srcPos:l}=pV({src:c,srcPos:l,dest:u,width:n,height:f,nonBlackColor:0})),s.putImageData(a,0,d*ei)}}function zf(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function sb(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!An){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function NT(s,t){if(t)return!0;const e=Gt.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Yl.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const yV=["butt","round","square"],_V=["miter","round","bevel"],wV={},FT={};var Pr,w1,A1,S1;const cE=class cE{constructor(t,e,n,i,r,{optionalContentConfig:o,markedContentStack:a=null},l,c){R(this,Pr);this.ctx=t,this.current=new DT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new vV(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,n){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...ns(this.compositeCtx))}this.ctx.save(),sb(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ns(this.ctx)}executeOperatorList(t,e,n,i){const r=t.argsArray,o=t.fnArray;let a=e||0;const l=r.length;if(l===a)return a;const c=l-a>RT&&typeof n=="function",u=c?Date.now()+gV:0;let d=0;const f=this.commonObjs,m=this.objs;let v;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(v=o[a],v!==Qi.dependency)this[v].apply(this,r[a]);else for(const b of r[a]){const y=b.startsWith("g_")?f:m;if(!y.has(b))return y.get(b,n),a}if(a++,a===l)return a;if(c&&++d>RT){if(Date.now()>u)return n(),a;d=0}}}endDrawing(){D(this,Pr,w1).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),D(this,Pr,A1).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=n,l=i,c="prescale1",u,d;for(;r>2&&a>1||o>2&&l>1;){let f=a,m=l;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/m),u=this.cachedCanvases.getCanvas(c,f,m),d=u.context,d.clearRect(0,0,f,m),d.drawImage(t,0,0,a,l,0,0,f,m),t=u.canvas,a=f,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,r=this.current.fillColor,o=this.current.patternFill,a=ns(e);let l,c,u,d;if((t.bitmap||t.data)&&t.count>1){const S=t.bitmap||t.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(S),l||(l=new Map,this._cachedBitmapsMap.set(S,l));const I=l.get(c);if(I&&!o){const L=Math.round(Math.min(a[0],a[2])+a[4]),P=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:I,offsetX:L,offsetY:P}}u=I}u||(d=this.cachedCanvases.getCanvas("maskCanvas",n,i),LT(d.context,t));let f=Gt.transform(a,[1/n,0,0,-1/i,0,0]);f=Gt.transform(f,[1,0,0,1,0,-i]);const[m,v,b,y]=Gt.getAxialAlignedBoundingBox([0,0,n,i],f),w=Math.round(b-m)||1,k=Math.round(y-v)||1,M=this.cachedCanvases.getCanvas("fillCanvas",w,k),O=M.context,B=m,V=v;O.translate(-B,-V),O.transform(...f),u||(u=this._scaleImage(d.canvas,Ur(O)),u=u.img,l&&o&&l.set(c,u)),O.imageSmoothingEnabled=NT(ns(O),t.interpolate),eb(O,u,0,0,u.width,u.height,0,0,n,i),O.globalCompositeOperation="source-in";const A=Gt.transform(Ur(O),[1,0,0,1,-B,-V]);return O.fillStyle=o?r.getPattern(e,this,A,bn.FILL):r,O.fillRect(0,0,n,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,M.canvas)),{canvas:M.canvas,offsetX:Math.round(B),offsetY:Math.round(V)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=yV[t]}setLineJoin(t){this.ctx.lineJoin=_V[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...ns(this.suspendedCtx)),zf(this.suspendedCtx,r),mV(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],o=i[1],a=i[2]-r,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,n,a,l,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,o,a,l,c,u,d){let f=t.canvas,m=l-u,v=c-d;if(o){const y=Gt.makeHexColor(...o);if(m<0||v<0||m+n>f.width||v+i>f.height){const w=this.cachedCanvases.getCanvas("maskExtension",n,i),k=w.context;k.drawImage(f,-m,-v),k.globalCompositeOperation="destination-atop",k.fillStyle=y,k.fillRect(0,0,n,i),k.globalCompositeOperation="source-over",f=w.canvas,m=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(m,v,n,i),t.clip(w),t.globalCompositeOperation="destination-atop",t.fillStyle=y,t.fillRect(m,v,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const b=new Path2D;b.rect(l,c,n,i),e.clip(b),e.globalCompositeOperation="destination-in",e.drawImage(f,m,v,n,i,l,c,n,i),e.restore()}save(){this.inSMaskMode?(zf(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),zf(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,r,o){this.ctx.transform(t,e,n,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,r=this.current;let o=r.x,a=r.y,l,c;const u=ns(i),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,f=d?n.slice(0):null;for(let m=0,v=0,b=t.length;m<b;m++)switch(t[m]|0){case Qi.rectangle:o=e[v++],a=e[v++];const y=e[v++],w=e[v++],k=o+y,M=a+w;i.moveTo(o,a),y===0||w===0?i.lineTo(k,M):(i.lineTo(k,a),i.lineTo(k,M),i.lineTo(o,M)),d||r.updateRectMinMax(u,[o,a,k,M]),i.closePath();break;case Qi.moveTo:o=e[v++],a=e[v++],i.moveTo(o,a),d||r.updatePathMinMax(u,o,a);break;case Qi.lineTo:o=e[v++],a=e[v++],i.lineTo(o,a),d||r.updatePathMinMax(u,o,a);break;case Qi.curveTo:l=o,c=a,o=e[v+4],a=e[v+5],i.bezierCurveTo(e[v],e[v+1],e[v+2],e[v+3],o,a),r.updateCurvePathMinMax(u,l,c,e[v],e[v+1],e[v+2],e[v+3],o,a,f),v+=6;break;case Qi.curveTo2:l=o,c=a,i.bezierCurveTo(o,a,e[v],e[v+1],e[v+2],e[v+3]),r.updateCurvePathMinMax(u,l,c,o,a,e[v],e[v+1],e[v+2],e[v+3],f),o=e[v+2],a=e[v+3],v+=4;break;case Qi.curveTo3:l=o,c=a,o=e[v+2],a=e[v+3],i.bezierCurveTo(e[v],e[v+1],o,a,o,a),r.updateCurvePathMinMax(u,l,c,e[v],e[v+1],o,a,o,a,f),v+=4;break;case Qi.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(u,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,Ur(e),bn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,Ur(e),bn.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=wV}eoClip(){this.pendingClip=FT}beginText(){this.current.textMatrix=mP,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const n=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:c}of t)n.addPath(c,new DOMMatrix(r).preMultiplySelf(i).translate(o,a).scale(l,-l));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||Xw,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ue("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",o=((u=n.systemFontInfo)==null?void 0:u.css)||`"${r}", ${n.fallbackName}`;let a="normal";n.black?a="900":n.bold&&(a="bold");const l=n.italic?"italic":"normal";let c=e;e<IT?c=IT:e>PT&&(c=PT),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,r,o){this.current.textMatrix=[t,e,n,i,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i,r){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,d=c&un.FILL_STROKE_MASK,f=!!(c&un.ADD_TO_PATH_FLAG),m=a.patternFill&&!l.missingFile,v=a.patternStroke&&!l.missingFile;let b;if((l.disableFontFace||f||m||v)&&(b=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||m||v){if(o.save(),o.translate(e,n),o.scale(u,-u),d===un.FILL||d===un.FILL_STROKE)if(i){const y=o.getTransform();o.setTransform(...i),o.fill(D(this,Pr,S1).call(this,b,y,i))}else o.fill(b);if(d===un.STROKE||d===un.FILL_STROKE)if(r){const y=o.getTransform();o.setTransform(...r),o.stroke(D(this,Pr,S1).call(this,b,y,r))}else o.lineWidth/=u,o.stroke(b);o.restore()}else(d===un.FILL||d===un.FILL_STROKE)&&o.fillText(t,e,n),(d===un.STROKE||d===un.FILL_STROKE)&&o.strokeText(t,e,n);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ns(o),x:e,y:n,fontSize:u,path:b})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return ge(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,d=t.length,f=n.vertical,m=f?1:-1,v=n.defaultVMetrics,b=i*e.fontMatrix[0],y=e.textRenderingMode===un.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),c>0?r.scale(u,-1):r.scale(u,1);let w,k;if(e.patternFill){r.save();const A=e.fillColor.getPattern(r,this,Ur(r),bn.FILL);w=ns(r),r.restore(),r.fillStyle=A}if(e.patternStroke){r.save();const A=e.strokeColor.getPattern(r,this,Ur(r),bn.STROKE);k=ns(r),r.restore(),r.strokeStyle=A}let M=e.lineWidth;const O=e.textMatrixScale;if(O===0||M===0){const A=e.textRenderingMode&un.FILL_STROKE_MASK;(A===un.STROKE||A===un.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=O;if(o!==1&&(r.scale(o,o),M/=o),r.lineWidth=M,n.isInvalidPDFjsFont){const A=[];let S=0;for(const I of t)A.push(I.unicode),S+=I.width;r.fillText(A.join(""),0,0),e.x+=S*b*u,r.restore(),this.compose();return}let B=0,V;for(V=0;V<d;++V){const A=t[V];if(typeof A=="number"){B+=m*A*i/1e3;continue}let S=!1;const I=(A.isSpace?l:0)+a,L=A.fontChar,P=A.accent;let $,N,_t=A.width;if(f){const tt=A.vmetric||v,X=-(A.vmetric?tt[1]:_t*.5)*b,nt=tt[2]*b;_t=tt?-tt[0]:_t,$=X/o,N=(B+nt)/o}else $=B/o,N=0;if(n.remeasure&&_t>0){const tt=r.measureText(L).width*1e3/i*o;if(_t<tt&&this.isFontSubpixelAAEnabled){const X=_t/tt;S=!0,r.save(),r.scale(X,1),$/=X}else _t!==tt&&($+=(_t-tt)/2e3*i/o)}if(this.contentVisible&&(A.isInFont||n.missingFile)){if(y&&!P)r.fillText(L,$,N);else if(this.paintChar(L,$,N,w,k),P){const tt=$+i*P.offset.x/o,X=N-i*P.offset.y/o;this.paintChar(P.fontChar,tt,X,w,k)}}const xt=f?_t*b-I*c:_t*b+I*c;B+=xt,S&&r.restore()}f?e.y-=B:e.x+=B*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,r=n.fontSize,o=n.fontDirection,a=i.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,u=n.textHScale*o,d=n.fontMatrix||Xw,f=t.length,m=n.textRenderingMode===un.INVISIBLE;let v,b,y,w;if(!(m||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(u,o),v=0;v<f;++v){if(b=t[v],typeof b=="number"){w=a*b*r/1e3,this.ctx.translate(w,0),n.x+=w*u;continue}const k=(b.isSpace?c:0)+l,M=i.charProcOperatorList[b.operatorListId];if(!M){ue(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(M),this.restore()),y=Gt.applyTransform([b.width,0],d)[0]*r+k,e.translate(y,0),n.x+=y*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,r,o){this.ctx.rect(n,i,r-n,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],i=this.baseTransform||ns(this.ctx),r={createCanvasGraphics:o=>new cE(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new _1(t,n,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Gt.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Gt.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=fV(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Ur(e),bn.SHADING);const i=Ur(e);if(i){const{width:r,height:o}=e.canvas,[a,l,c,u]=Gt.getAxialAlignedBoundingBox([0,0,r,o],i);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Xe("Should not call beginInlineImage")}beginImageData(){Xe("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=ns(this.ctx),e)){const n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(ns(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||X_("TODO: Support non-isolated groups."),t.knockout&&ue("Knockout groups not supported.");const n=ns(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Gt.getAxialAlignedBoundingBox(t.bbox,ns(e));const r=[0,0,e.canvas.width,e.canvas.height];i=Gt.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),c=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,l,c),f=d.context;f.translate(-o,-a),f.transform(...n),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),zf(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=ns(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=Gt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,i,r){if(D(this,Pr,w1).call(this),sb(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a;const[l,c]=Gt.singularValueDecompose2dScale(ns(this.ctx)),{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),f=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:m,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),sb(this.ctx)}else sb(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new DT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),D(this,Pr,A1).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=bV(t)),i.compiled)){i.compiled(n);return}const r=this._createMaskCanvas(t),o=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=ns(a);a.transform(e,n,i,r,0,0);const c=this._createMaskCanvas(t);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=o.length;u<d;u+=2){const f=Gt.transform(l,[e,n,i,r,o[u],o[u+1]]),[m,v]=Gt.applyTransform([0,0],f);a.drawImage(c.canvas,m,v)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:o,width:a,height:l,transform:c}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save();const f=this.getObject(o,r);LT(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?n.getPattern(d,this,Ur(e),bn.FILL):n,d.fillRect(0,0,a,l),d.restore(),e.save(),e.transform(...c),e.scale(1,-1),eb(e,u.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){ue("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){ue("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[e,0,0,n,i[c],i[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!An){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,n).context;OT(l,t),r=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(r,Ur(i));i.imageSmoothingEnabled=NT(ns(i),t.interpolate),eb(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;OT(l,t),i=this.applyTransferMapsToCanvas(l)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),eb(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===FT?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ns(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let o,a;if(n===0&&i===0){const l=Math.abs(e),c=Math.abs(r);if(l===c)if(t===0)o=a=1/l;else{const u=l*t;o=a=u<1?1/u:1}else if(t===0)o=1/l,a=1/c;else{const u=l*t,d=c*t;o=u<1?1/u:1,a=d<1?1/d:1}}else{const l=Math.abs(e*r-n*i),c=Math.hypot(e,n),u=Math.hypot(i,r);if(t===0)o=u/l,a=c/l;else{const d=t*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(i,r),o.length>0){const a=Math.max(i,r);e.setLineDash(o.map(l=>l/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Pr=new WeakSet,w1=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},A1=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},S1=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let Jh=cE;for(const s in Qi)Jh.prototype[s]!==void 0&&(Jh.prototype[Qi[s]]=Jh.prototype[s]);var qg,Xg;class ma{static get workerPort(){return h(this,qg)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");T(this,qg,t)}static get workerSrc(){return h(this,Xg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");T(this,Xg,t)}}qg=new WeakMap,Xg=new WeakMap,R(ma,qg,null),R(ma,Xg,"");var iu,Yg;class AV{constructor({parsedData:t,rawData:e}){R(this,iu);R(this,Yg);T(this,iu,t),T(this,Yg,e)}getRaw(){return h(this,Yg)}get(t){return h(this,iu).get(t)??null}getAll(){return TS(h(this,iu))}has(t){return h(this,iu).has(t)}}iu=new WeakMap,Yg=new WeakMap;const Lh=Symbol("INTERNAL");var Kg,Jg,Zg,yd;class SV{constructor(t,{name:e,intent:n,usage:i,rbGroups:r}){R(this,Kg,!1);R(this,Jg,!1);R(this,Zg,!1);R(this,yd,!0);T(this,Kg,!!(t&wi.DISPLAY)),T(this,Jg,!!(t&wi.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=r}get visible(){if(h(this,Zg))return h(this,yd);if(!h(this,yd))return!1;const{print:t,view:e}=this.usage;return h(this,Kg)?(e==null?void 0:e.viewState)!=="OFF":h(this,Jg)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Lh&&Xe("Internal method `_setVisible` called."),T(this,Zg,n),T(this,yd,e)}}Kg=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,yd=new WeakMap;var ml,Ve,_d,wd,Qg,E1;class EV{constructor(t,e=wi.DISPLAY){R(this,Qg);R(this,ml,null);R(this,Ve,new Map);R(this,_d,null);R(this,wd,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,T(this,wd,t.order);for(const n of t.groups)h(this,Ve).set(n.id,new SV(e,n));if(t.baseState==="OFF")for(const n of h(this,Ve).values())n._setVisible(Lh,!1);for(const n of t.on)h(this,Ve).get(n)._setVisible(Lh,!0);for(const n of t.off)h(this,Ve).get(n)._setVisible(Lh,!1);T(this,_d,this.getHash())}}isVisible(t){if(h(this,Ve).size===0)return!0;if(!t)return X_("Optional content group not defined."),!0;if(t.type==="OCG")return h(this,Ve).has(t.id)?h(this,Ve).get(t.id).visible:(ue(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return D(this,Qg,E1).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!h(this,Ve).has(e))return ue(`Optional content group not found: ${e}`),!0;if(h(this,Ve).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!h(this,Ve).has(e))return ue(`Optional content group not found: ${e}`),!0;if(!h(this,Ve).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!h(this,Ve).has(e))return ue(`Optional content group not found: ${e}`),!0;if(!h(this,Ve).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!h(this,Ve).has(e))return ue(`Optional content group not found: ${e}`),!0;if(h(this,Ve).get(e).visible)return!1}return!0}return ue(`Unknown optional content policy ${t.policy}.`),!0}return ue(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const i=h(this,Ve).get(t);if(!i){ue(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==t&&((r=h(this,Ve).get(a))==null||r._setVisible(Lh,!1,!0));i._setVisible(Lh,!!e,!0),T(this,ml,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=h(this,Ve).get(i);if(r)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}T(this,ml,null)}get hasInitialVisibility(){return h(this,_d)===null||this.getHash()===h(this,_d)}getOrder(){return h(this,Ve).size?h(this,wd)?h(this,wd).slice():[...h(this,Ve).keys()]:null}getGroups(){return h(this,Ve).size>0?TS(h(this,Ve)):null}getGroup(t){return h(this,Ve).get(t)||null}getHash(){if(h(this,ml)!==null)return h(this,ml);const t=new qP;for(const[e,n]of h(this,Ve))t.update(`${e}:${n.visible}`);return T(this,ml,t.hexdigest())}}ml=new WeakMap,Ve=new WeakMap,_d=new WeakMap,wd=new WeakMap,Qg=new WeakSet,E1=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=D(this,Qg,E1).call(this,r);else if(h(this,Ve).has(r))o=h(this,Ve).get(r).visible;else return ue(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class xV{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Rs(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Rs(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Rs(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new TV(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new CV(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class TV{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=IS(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class CV{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function kV(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let u=a(e);return u=unescape(u),u=l(u),u=c(u),r(u)}if(e=o(s),e){const u=c(e);return r(u)}if(e=n("filename","i").exec(s),e){e=e[1];let u=a(e);return u=c(u),r(u)}function n(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),m=Y_(d);d=f.decode(m),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),t&&(u=i("iso-8859-1",u))),u}function o(u){const d=[];let f;const m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(u))!==null;){let[,b,y,w]=f;if(b=parseInt(b,10),b in d){if(b===0)break;continue}d[b]=[y,w]}const v=[];for(let b=0;b<d.length&&b in d;++b){let[y,w]=d[b];w=a(w),y&&(w=unescape(w),b===0&&(w=l(w))),v.push(w)}return v.join("")}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const m=d[f].indexOf('"');m!==-1&&(d[f]=d[f].slice(0,m),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),v=u.slice(d+1).replace(/^[^']*'/,"");return i(f,v)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,m,v){if(m==="q"||m==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,y){return String.fromCharCode(parseInt(y,16))}),i(f,v);try{v=atob(v)}catch{}return i(f,v)})}return""}function aR(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function Z_(s){try{return new URL(s).origin}catch{}return null}function lR({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function cR(s){const t=s.get("Content-Disposition");if(t){let e=kV(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(IS(e))return e}return null}function Q_(s,t){return s===404||s===0&&t.startsWith("file:")?new og('Missing PDF "'+t+'".'):new jy(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function uR(s){return s===200||s===206}function hR(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function dR(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(ue(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class BT{constructor(t){ht(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=aR(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Rs(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new IV(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new PV(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class IV{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,hR(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Z_(r.url),!uR(r.status))throw Q_(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=lR({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=cR(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Xl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:dR(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class PV{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const o=i.url;fetch(o,hR(r,this._withCredentials,this._abortController)).then(a=>{const l=Z_(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!uR(a.status))throw Q_(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:dR(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Z0=200,Q0=206;function RV(s){const t=s.response;return typeof t!="string"?t:Y_(t).buffer}class MV{constructor({url:t,httpHeaders:e,withCredentials:n}){ht(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=aR(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Q0):i.expectedStatus=Z0,e.responseType="arraybuffer",Rs(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const r=i.status||Z0;if(!(r===Z0&&n.expectedStatus===Q0)&&r!==n.expectedStatus){n.onError(i.status);return}const a=RV(i);if(r===Q0){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?n.onDone({begin:parseInt(c[1],10),chunk:a}):(ue('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class DV{constructor(t){this._source=t,this._manager=new MV(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Rs(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new OV(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new LV(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class OV{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Z_(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=lR({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=cR(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Q_(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class LV{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Z_((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Q_(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const NV=/^[a-z][a-z0-9\-+.]+:/i;function FV(s){if(NV.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class BV{constructor(t){this.source=t,this.url=FV(t.url),Rs(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Rs(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new $V(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new UV(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class $V{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new og(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Xl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class UV{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const VV=1e5,qn=30,HV=.8;var bk,vl,Zn,tm,em,ru,Xo,sm,nm,ou,Ad,Sd,bl,Ed,im,xd,au,rm,om,lu,cu,am,yl,Td,La,fR,pR,x1,ki,Wb,T1,gR,mR;const Bs=class Bs{constructor({textContentSource:t,container:e,viewport:n}){R(this,La);R(this,vl,Promise.withResolvers());R(this,Zn,null);R(this,tm,!1);R(this,em,!!((bk=globalThis.FontInspector)!=null&&bk.enabled));R(this,ru,null);R(this,Xo,null);R(this,sm,0);R(this,nm,0);R(this,ou,null);R(this,Ad,null);R(this,Sd,0);R(this,bl,0);R(this,Ed,Object.create(null));R(this,im,[]);R(this,xd,null);R(this,au,[]);R(this,rm,new WeakMap);R(this,om,null);var l;if(t instanceof ReadableStream)T(this,xd,t);else if(typeof t=="object")T(this,xd,new ReadableStream({start(c){c.enqueue(t),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,Zn,T(this,Ad,e)),T(this,bl,n.scale*(globalThis.devicePixelRatio||1)),T(this,Sd,n.rotation),T(this,Xo,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=n.rawDims;T(this,om,[1,0,0,-1,-o,a+r]),T(this,nm,i),T(this,sm,r),D(l=Bs,ki,gR).call(l),th(e,n),h(this,vl).promise.finally(()=>{h(Bs,Td).delete(this),T(this,Xo,null),T(this,Ed,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Vn.platform;return ge(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{h(this,ou).read().then(({value:e,done:n})=>{if(n){h(this,vl).resolve();return}h(this,ru)??T(this,ru,e.lang),Object.assign(h(this,Ed),e.styles),D(this,La,fR).call(this,e.items),t()},h(this,vl).reject)};return T(this,ou,h(this,xd).getReader()),h(Bs,Td).add(this),t(),h(this,vl).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==h(this,Sd)&&(e==null||e(),T(this,Sd,i),th(h(this,Ad),{rotation:i})),n!==h(this,bl)){e==null||e(),T(this,bl,n);const o={div:null,properties:null,ctx:D(r=Bs,ki,Wb).call(r,h(this,ru))};for(const a of h(this,au))o.properties=h(this,rm).get(a),o.div=a,D(this,La,x1).call(this,o)}}cancel(){var e;const t=new Xl("TextLayer task cancelled.");(e=h(this,ou))==null||e.cancel(t).catch(()=>{}),T(this,ou,null),h(this,vl).reject(t)}get textDivs(){return h(this,au)}get textContentItemsStr(){return h(this,im)}static cleanup(){if(!(h(this,Td).size>0)){h(this,lu).clear();for(const{canvas:t}of h(this,cu).values())t.remove();h(this,cu).clear()}}};vl=new WeakMap,Zn=new WeakMap,tm=new WeakMap,em=new WeakMap,ru=new WeakMap,Xo=new WeakMap,sm=new WeakMap,nm=new WeakMap,ou=new WeakMap,Ad=new WeakMap,Sd=new WeakMap,bl=new WeakMap,Ed=new WeakMap,im=new WeakMap,xd=new WeakMap,au=new WeakMap,rm=new WeakMap,om=new WeakMap,lu=new WeakMap,cu=new WeakMap,am=new WeakMap,yl=new WeakMap,Td=new WeakMap,La=new WeakSet,fR=function(t){var i,r;if(h(this,tm))return;(r=h(this,Xo)).ctx??(r.ctx=D(i=Bs,ki,Wb).call(i,h(this,ru)));const e=h(this,au),n=h(this,im);for(const o of t){if(e.length>VV){ue("Ignoring additional textDivs for performance reasons."),T(this,tm,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=h(this,Zn);T(this,Zn,document.createElement("span")),h(this,Zn).classList.add("markedContent"),o.id!==null&&h(this,Zn).setAttribute("id",`${o.id}`),a.append(h(this,Zn))}else o.type==="endMarkedContent"&&T(this,Zn,h(this,Zn).parentNode);continue}n.push(o.str),D(this,La,pR).call(this,o)}},pR=function(t){var b;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};h(this,au).push(e);const i=Gt.transform(h(this,om),t.transform);let r=Math.atan2(i[1],i[0]);const o=h(this,Ed)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=h(this,em)&&o.fontSubstitution||o.fontFamily;a=Bs.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*D(b=Bs,ki,mR).call(b,a,h(this,ru));let u,d;r===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(r),d=i[5]-c*Math.cos(r));const f="calc(var(--scale-factor)*",m=e.style;h(this,Zn)===h(this,Ad)?(m.left=`${(100*u/h(this,nm)).toFixed(2)}%`,m.top=`${(100*d/h(this,sm)).toFixed(2)}%`):(m.left=`${f}${u.toFixed(2)}px)`,m.top=`${f}${d.toFixed(2)}px)`),m.fontSize=`${f}${(h(Bs,yl)*l).toFixed(2)}px)`,m.fontFamily=a,n.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,h(this,em)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const y=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);y!==w&&Math.max(y,w)/Math.min(y,w)>1.5&&(v=!0)}if(v&&(n.canvasWidth=o.vertical?t.height:t.width),h(this,rm).set(e,n),h(this,Xo).div=e,h(this,Xo).properties=n,D(this,La,x1).call(this,h(this,Xo)),n.hasText&&h(this,Zn).append(e),n.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),h(this,Zn).append(y)}},x1=function(t){var a;const{div:e,properties:n,ctx:i}=t,{style:r}=e;let o="";if(h(Bs,yl)>1&&(o=`scale(${1/h(Bs,yl)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=r,{canvasWidth:c,fontSize:u}=n;D(a=Bs,ki,T1).call(a,i,u*h(this,bl),l);const{width:d}=i.measureText(e.textContent);d>0&&(o=`scaleX(${c*h(this,bl)/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},ki=new WeakSet,Wb=function(t=null){let e=h(this,cu).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,cu).set(t,e),h(this,am).set(e,{size:0,family:""})}return e},T1=function(t,e,n){const i=h(this,am).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},gR=function(){if(h(this,yl)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),T(this,yl,t.getBoundingClientRect().height),t.remove()},mR=function(t,e){const n=h(this,lu).get(t);if(n)return n;const i=D(this,ki,Wb).call(this,e);i.canvas.width=i.canvas.height=qn,D(this,ki,T1).call(this,i,qn,t);const r=i.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const u=o/(o+a);return h(this,lu).set(t,u),i.canvas.width=i.canvas.height=0,u}i.strokeStyle="red",i.clearRect(0,0,qn,qn),i.strokeText("g",0,0);let l=i.getImageData(0,0,qn,qn).data;a=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){a=Math.ceil(u/4/qn);break}i.clearRect(0,0,qn,qn),i.strokeText("A",0,qn),l=i.getImageData(0,0,qn,qn).data,o=0;for(let u=0,d=l.length;u<d;u+=4)if(l[u]>0){o=qn-Math.floor(u/4/qn);break}i.canvas.width=i.canvas.height=0;const c=o?o/(o+a):HV;return h(this,lu).set(t,c),c},R(Bs,ki),R(Bs,lu,new Map),R(Bs,cu,new Map),R(Bs,am,new WeakMap),R(Bs,yl,null),R(Bs,Td,new Set);let ag=Bs;class lg{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(lg.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const c of r.children)i(c)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const jV=65536,zV=100,WV=5e3,GV=An?oV:nV,qV=An?aV:eR,XV=An?rV:iV,YV=An?lV:rR;function KV(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new C1,{docId:e}=t,n=s.url?JV(s.url):null,i=s.data?ZV(s.data):null,r=s.httpHeaders||null,o=s.withCredentials===!0,a=s.password??null,l=s.range instanceof vR?s.range:null,c=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:jV;let u=s.worker instanceof Zh?s.worker:null;const d=s.verbosity,f=typeof s.docBaseUrl=="string"&&!J_(s.docBaseUrl)?s.docBaseUrl:null,m=typeof s.cMapUrl=="string"?s.cMapUrl:null,v=s.cMapPacked!==!1,b=s.CMapReaderFactory||qV,y=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,w=s.StandardFontDataFactory||YV,k=s.stopAtErrors!==!0,M=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,O=s.isEvalSupported!==!1,B=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!An,V=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!An&&(Vn.platform.isFirefox||!globalThis.chrome),A=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,S=typeof s.disableFontFace=="boolean"?s.disableFontFace:An,I=s.fontExtraProperties===!0,L=s.enableXfa===!0,P=s.ownerDocument||globalThis.document,$=s.disableRange===!0,N=s.disableStream===!0,_t=s.disableAutoFetch===!0,xt=s.pdfBug===!0,tt=s.CanvasFactory||GV,X=s.FilterFactory||XV,nt=s.enableHWA===!0,U=l?l.length:s.length??NaN,it=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!An&&!S,vt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:b===eR&&w===rR&&m&&y&&ip(m,document.baseURI)&&ip(y,document.baseURI),j=null;LU(d);const Z={canvasFactory:new tt({ownerDocument:P,enableHWA:nt}),filterFactory:new X({docId:e,ownerDocument:P}),cMapReaderFactory:vt?null:new b({baseUrl:m,isCompressed:v}),standardFontDataFactory:vt?null:new w({baseUrl:y})};if(!u){const kt={verbosity:d,port:ma.workerPort};u=kt.port?Zh.fromPort(kt):new Zh(kt),t._worker=u}const dt={docId:e,apiVersion:"4.10.38",data:i,password:a,disableAutoFetch:_t,rangeChunkSize:c,length:U,docBaseUrl:f,enableXfa:L,evaluatorOptions:{maxImageSize:M,disableFontFace:S,ignoreErrors:k,isEvalSupported:O,isOffscreenCanvasSupported:B,isImageDecoderSupported:V,canvasMaxAreaInBytes:A,fontExtraProperties:I,useSystemFonts:it,cMapUrl:vt?m:null,standardFontDataUrl:vt?y:null}},Ft={disableFontFace:S,fontExtraProperties:I,ownerDocument:P,pdfBug:xt,styleElement:j,loadingParams:{disableAutoFetch:_t,enableXfa:L}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const kt=u.messageHandler.sendWithPromise("GetDocRequest",dt,i?[i.buffer]:null);let Y;if(l)Y=new xV(l,{disableRange:$,disableStream:N});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let bt;if(An)if(ip(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");bt=BT}else bt=BV;else bt=ip(n)?BT:DV;Y=new bt({url:n,length:U,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:$,disableStream:N})}return kt.then(bt=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const At=new lp(e,bt,u.port),Pt=new sH(At,t,Y,Ft,Z);t._transport=Pt,At.send("Ready",null)})}).catch(t._capability.reject),t}function JV(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(An&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ZV(s){if(An&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Y_(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $T(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var p_;const g_=class g_{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${In(g_,p_)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};p_=new WeakMap,R(g_,p_,0);let C1=g_;class vR{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Xe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class QV{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ge(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var _l,Yo,Vi,Nh,Gb;class tH{constructor(t,e,n,i=!1){R(this,Vi);R(this,_l,null);R(this,Yo,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new xT:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new bR,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new lv({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ge(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=nl.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){var O,B;(O=this._stats)==null||O.time("Overall");const f=this._transport.getRenderingIntent(n,i,u,d),{renderingIntent:m,cacheKey:v}=f;T(this,Yo,!1),D(this,Vi,Gb).call(this),a||(a=this._transport.getOptionalContentConfig(m));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const y=!!(m&wi.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(B=this._stats)==null||B.time("Page Request"),this._pumpOperatorList(f));const w=V=>{var A;b.renderTasks.delete(k),(this._maybeCleanupAfterRender||y)&&T(this,Yo,!0),D(this,Vi,Nh).call(this,!y),V?(k.capability.reject(V),this._abortOperatorList({intentState:b,reason:V instanceof Error?V:new Error(V)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(A=globalThis.Stats)!=null&&A.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new I1({callback:w,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c});(b.renderTasks||(b.renderTasks=new Set)).add(k);const M=k.task;return Promise.all([b.displayReadyCapability.promise,a]).then(([V,A])=>{var S;if(this.destroyed){w();return}if((S=this._stats)==null||S.time("Rendering"),!(A.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:V,optionalContentConfig:A}),k.operatorListChanged()}).catch(w),M}getOperatorList({intent:t="display",annotationMode:e=nl.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var c;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(t,e,n,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>lg.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function r(){o.read().then(function({value:l,done:c}){if(c){n(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},i)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),T(this,Yo,!1),D(this,Vi,Gb).call(this),Promise.all(t)}cleanup(t=!1){T(this,Yo,!0);const e=D(this,Vi,Nh).call(this,!1);return t&&e&&this._stats&&(this._stats=new xT),e}_startRenderPage(t,e){var i,r;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&D(this,Vi,Nh).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:r,transfer:o}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),c=this._intentStates.get(e);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();D(this,Vi,Nh).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof kS){let i=zV;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Xl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}_l=new WeakMap,Yo=new WeakMap,Vi=new WeakSet,Nh=function(t=!1){if(D(this,Vi,Gb).call(this),!h(this,Yo)||this.destroyed)return!1;if(t)return T(this,_l,setTimeout(()=>{T(this,_l,null),D(this,Vi,Nh).call(this,!1)},WV)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Yo,!1),!0},Gb=function(){h(this,_l)&&(clearTimeout(h(this,_l)),T(this,_l,null))};var Ko,m_;class eH{constructor(){R(this,Ko,new Map);R(this,m_,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};h(this,m_).then(()=>{for(const[i]of h(this,Ko))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){ue("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}h(this,Ko).set(e,i)}removeEventListener(t,e){const n=h(this,Ko).get(e);n==null||n(),h(this,Ko).delete(e)}terminate(){for(const[,t]of h(this,Ko))t==null||t();h(this,Ko).clear()}}Ko=new WeakMap,m_=new WeakMap;var v_,uu,hu,Cd,qb,kd,Xb;const ss=class ss{constructor({name:t=null,port:e=null,verbosity:n=NU()}={}){R(this,Cd);var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=h(ss,hu))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(h(ss,hu)||T(ss,hu,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new lp("main","worker",t),this._messageHandler.on("ready",function(){}),D(this,Cd,qb).call(this)}_initialize(){if(h(ss,uu)||h(ss,kd,Xb)){this._setupFakeWorker();return}let{workerSrc:t}=ss;try{ss._isSameOrigin(window.location.href,t)||(t=ss._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new lp("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),n.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}this._messageHandler=n,this._port=e,this._webWorker=e,D(this,Cd,qb).call(this)}),n.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{X_("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){h(ss,uu)||(ue("Setting up fake worker."),T(ss,uu,!0)),ss._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new eH;this._port=e;const n=`fake${In(ss,v_)._++}`,i=new lp(n+"_worker",n,e);t.setup(i,e),this._messageHandler=new lp(n,n+"_worker",e),D(this,Cd,qb).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=h(ss,hu))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=h(this,hu))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ss(t)}static get workerSrc(){if(ma.workerSrc)return ma.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ge(this,"_setupFakeWorkerGlobal",(async()=>h(this,kd,Xb)?h(this,kd,Xb):(await import(this.workerSrc)).WorkerMessageHandler)())}};v_=new WeakMap,uu=new WeakMap,hu=new WeakMap,Cd=new WeakSet,qb=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},kd=new WeakSet,Xb=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},R(ss,kd),R(ss,v_,0),R(ss,uu,!1),R(ss,hu),An&&(T(ss,uu,!0),ma.workerSrc||(ma.workerSrc="./pdf.worker.mjs")),ss._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(e,n);return n.origin===i.origin},ss._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Zh=ss;var Jo,so,Id,Pd,Zo,du,fp;class sH{constructor(t,e,n,i,r){R(this,du);R(this,Jo,new Map);R(this,so,new Map);R(this,Id,new Map);R(this,Pd,new Map);R(this,Zo,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new bR,this.fontLoader=new eV({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ge(this,"annotationStorage",new MS)}getRenderingIntent(t,e=nl.ENABLE,n=null,i=!1,r=!1){let o=wi.DISPLAY,a=m1;switch(t){case"any":o=wi.ANY;break;case"display":break;case"print":o=wi.PRINT;break;default:ue(`getRenderingIntent - invalid intent: ${t}`)}const l=o&wi.PRINT&&n instanceof YP?n:this.annotationStorage;switch(e){case nl.DISABLE:o+=wi.ANNOTATIONS_DISABLE;break;case nl.ENABLE:break;case nl.ENABLE_FORMS:o+=wi.ANNOTATIONS_FORMS;break;case nl.ENABLE_STORAGE:o+=wi.ANNOTATIONS_STORAGE,a=l.serializable;break;default:ue(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=wi.IS_EDITING),r&&(o+=wi.OPLIST);const{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=h(this,Zo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of h(this,so).values())t.push(i._destroy());h(this,so).clear(),h(this,Id).clear(),h(this,Pd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),h(this,Jo).clear(),this.filterFactory.destroy(),ag.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Xl("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Rs(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Rs(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=e.onProgress)==null||c.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(n,i)=>{Rs(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}Rs(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new QV(n,this))}),t.on("DocException",n=>{e._capability.reject(Yn(n))}),t.on("PasswordRequest",n=>{T(this,Zo,Promise.withResolvers());try{if(!e.onPassword)throw Yn(n);const i=r=>{r instanceof Error?h(this,Zo).reject(r):h(this,Zo).resolve({password:r})};e.onPassword(i,n.code)}catch(i){h(this,Zo).reject(i)}return h(this,Zo).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;h(this,so).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in r){const m=r.error;ue(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const u=c&&((o=globalThis.FontInspector)!=null&&o.enabled)?(m,v)=>globalThis.FontInspector.fontAdded(m,v):null,d=new sV(r,{disableFontFace:a,fontExtraProperties:l,inspectFont:u});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Rs(f,"The imageRef must be defined.");for(const m of h(this,so).values())for(const[,v]of m.objs)if((v==null?void 0:v.ref)===f)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,r,o])=>{var l;if(this.destroyed)return;const a=h(this,so).get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":a.objs.resolve(n,o),(o==null?void 0:o.dataLen)>RU&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&ue("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=h(this,Id).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&h(this,Pd).set(r.refStr,t);const o=new tH(e,r,this,this._params.pdfBug);return h(this,so).set(e,o),o});return h(this,Id).set(e,i),i}getPageIndex(t){return $T(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return D(this,du,fp).call(this,"GetFieldObjects")}hasJSActions(){return D(this,du,fp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return D(this,du,fp).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return D(this,du,fp).call(this,"GetOptionalContentConfig").then(e=>new EV(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=h(this,Jo).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new AV(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return h(this,Jo).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of h(this,so).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),h(this,Jo).clear(),this.filterFactory.destroy(!0),ag.cleanup()}}cachedPageNumber(t){if(!$T(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return h(this,Pd).get(e)??null}}Jo=new WeakMap,so=new WeakMap,Id=new WeakMap,Pd=new WeakMap,Zo=new WeakMap,du=new WeakSet,fp=function(t,e=null){const n=h(this,Jo).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return h(this,Jo).set(t,i),i};const Wf=Symbol("INITIAL_DATA");var di,lm,k1;class bR{constructor(){R(this,lm);R(this,di,Object.create(null))}get(t,e=null){if(e){const i=D(this,lm,k1).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=h(this,di)[t];if(!n||n.data===Wf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=h(this,di)[t];return!!e&&e.data!==Wf}delete(t){const e=h(this,di)[t];return!e||e.data===Wf?!1:(delete h(this,di)[t],!0)}resolve(t,e=null){const n=D(this,lm,k1).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in h(this,di)){const{data:n}=h(this,di)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}T(this,di,Object.create(null))}*[Symbol.iterator](){for(const t in h(this,di)){const{data:e}=h(this,di)[t];e!==Wf&&(yield[t,e])}}}di=new WeakMap,lm=new WeakSet,k1=function(t){var e;return(e=h(this,di))[t]||(e[t]={...Promise.withResolvers(),data:Wf})};var wl;class nH{constructor(t){R(this,wl,null);T(this,wl,t),this.onContinue=null}get promise(){return h(this,wl).capability.promise}cancel(t=0){h(this,wl).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=h(this,wl).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=h(this,wl);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}wl=new WeakMap;var Al,fu;const Ic=class Ic{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null}){R(this,Al,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new nH(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,l;if(this.cancelled)return;if(this._canvas){if(h(Ic,fu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(Ic,fu).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:r,background:o}=this.params;this.gfx=new Jh(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),h(this,Al)&&(window.cancelAnimationFrame(h(this,Al)),T(this,Al,null)),h(Ic,fu).delete(this._canvas),this.callback(t||new kS(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?T(this,Al,window.requestAnimationFrame(()=>{T(this,Al,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(Ic,fu).delete(this._canvas),this.callback())))}};Al=new WeakMap,fu=new WeakMap,R(Ic,fu,new WeakSet);let I1=Ic;const iH="4.10.38",rH="f9bea397f";function UT(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Gf(s){return Math.max(0,Math.min(255,255*s))}class VT{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Gf(t),[t,t,t]}static G_HTML([t]){const e=UT(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Gf)}static RGB_HTML(t){return`#${t.map(UT).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[Gf(1-Math.min(1,t+i)),Gf(1-Math.min(1,n+i)),Gf(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,o=1-n,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class oH{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Xe("Abstract method `_createSVG` called.")}}class OS extends oH{_createSVG(t){return document.createElementNS(Po,t)}}class yR{static setupStorage(t,e,n,i,r){const o=i.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}a&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:n});const a=r!=="richText",l=t.div;if(l.append(o),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);o.append(m),a&&lg.shouldBuildText(i.name)&&c.push(m)}return{textDivs:c}}const u=[[i,-1,o]];for(;u.length>0;){const[m,v,b]=u.at(-1);if(v+1===m.children.length){u.pop();continue}const y=m.children[++u.at(-1)[1]];if(y===null)continue;const{name:w}=y;if(w==="#text"){const M=document.createTextNode(y.value);c.push(M),b.append(M);continue}const k=(d=y==null?void 0:y.attributes)!=null&&d.xmlns?document.createElementNS(y.attributes.xmlns,w):document.createElement(w);if(b.append(k),y.attributes&&this.setAttributes({html:k,element:y,storage:e,intent:r,linkService:n}),((f=y.children)==null?void 0:f.length)>0)u.push([y,-1,k]);else if(y.value){const M=document.createTextNode(y.value);a&&lg.shouldBuildText(w)&&c.push(M),k.append(M)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const uv=1e3,aH=9,sh=new WeakSet;function jl(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class lH{static create(t){switch(t.data.annotationType){case Fs.LINK:return new _R(t);case Fs.TEXT:return new cH(t);case Fs.WIDGET:switch(t.data.fieldType){case"Tx":return new uH(t);case"Btn":return t.data.radioButton?new SR(t):t.data.checkBox?new dH(t):new fH(t);case"Ch":return new pH(t);case"Sig":return new hH(t)}return new ah(t);case Fs.POPUP:return new R1(t);case Fs.FREETEXT:return new kR(t);case Fs.LINE:return new mH(t);case Fs.SQUARE:return new vH(t);case Fs.CIRCLE:return new bH(t);case Fs.POLYLINE:return new IR(t);case Fs.CARET:return new _H(t);case Fs.INK:return new LS(t);case Fs.POLYGON:return new yH(t);case Fs.HIGHLIGHT:return new PR(t);case Fs.UNDERLINE:return new wH(t);case Fs.SQUIGGLY:return new AH(t);case Fs.STRIKEOUT:return new SH(t);case Fs.STAMP:return new RR(t);case Fs.FILEATTACHMENT:return new EH(t);default:return new Cs(t)}}}var pu,Rd,Md,cm,P1;const uE=class uE{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){R(this,cm);R(this,pu,null);R(this,Rd,!1);R(this,Md,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return uE._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;h(this,pu)||T(this,pu,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&D(this,cm,P1).call(this,e),(n=h(this,Md))==null||n.popup.updateEdited(t)}resetEdited(){var t;h(this,pu)&&(D(this,cm,P1).call(this,h(this,pu).rect),(t=h(this,Md))==null||t.popup.resetEdited(),T(this,pu,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof ah||(r.tabIndex=uv);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof R1){const{rotation:b}=e;return!e.hasOwnCanvas&&b!==0&&this.setRotation(b,r),r}const{width:a,height:l}=jl(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const b=e.borderStyle.horizontalCornerRadius,y=e.borderStyle.verticalCornerRadius;if(b>0||y>0){const k=`calc(${b}px * var(--scale-factor)) / calc(${y}px * var(--scale-factor))`;o.borderRadius=k}else if(this instanceof SR){const k=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=k}switch(e.borderStyle.style){case jf.SOLID:o.borderStyle="solid";break;case jf.DASHED:o.borderStyle="dashed";break;case jf.BEVELED:ue("Unimplemented border style: beveled");break;case jf.INSET:ue("Unimplemented border style: inset");break;case jf.UNDERLINE:o.borderBottomStyle="solid";break}const w=e.borderColor||null;w?(T(this,Rd,!0),o.borderColor=Gt.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const c=Gt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:m}=i.rawDims;o.left=`${100*(c[0]-f)/u}%`,o.top=`${100*(c[1]-m)/d}%`;const{rotation:v}=e;return e.hasOwnCanvas||v===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(v,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=jl(this.data.rect);let a,l;t%180===0?(a=100*r/n,l=100*o/i):(a=100*o/n,l=100*r/i),e.style.width=`${a}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const r=i.detail[e],o=r[0],a=r.slice(1);i.target.style[n]=VT[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:VT[`${o}_rgb`](a)})};return ge(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const o=n[i];if(o){const a={detail:{[i]:r},target:t};o(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(b=>Math.fround(b));if(t.length===8){const[b,y,w,k]=t.subarray(2,6);if(i===b&&r===y&&e===w&&n===k)return}const{style:o}=this.container;let a;if(h(this,Rd)){const{borderColor:b,borderWidth:y}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const l=i-e,c=r-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=u.createElement("defs");d.append(f);const m=u.createElement("clipPath"),v=`clippath_${this.data.id}`;m.setAttribute("id",v),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let b=2,y=t.length;b<y;b+=8){const w=t[b],k=t[b+1],M=t[b+2],O=t[b+3],B=u.createElement("rect"),V=(M-e)/l,A=(r-k)/c,S=(w-M)/l,I=(k-O)/c;B.setAttribute("x",V),B.setAttribute("y",A),B.setAttribute("width",S),B.setAttribute("height",I),m.append(B),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${V}" y="${A}" width="${S}" height="${I}"/>`)}h(this,Rd)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:t}=this,e=T(this,Md,new R1({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Xe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===e)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!sh.has(c)){ue(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:l,domElement:c})}return n}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&sh.has(i)&&n.push({id:o,exportValue:r,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};pu=new WeakMap,Rd=new WeakMap,Md=new WeakMap,cm=new WeakSet,P1=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;n==null||n.splice(0,4,...t);const{width:c,height:u}=jl(t);e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+l)/o}%`,i===0?(e.width=`${100*c/r}%`,e.height=`${100*u/o}%`):this.setRotation(i)};let Cs=uE;var Ai,Ac,wR,AR;class _R extends Cs{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});R(this,Ai);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(D(this,Ai,wR).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(D(this,Ai,AR).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&D(this,Ai,Ac).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),D(this,Ai,Ac).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=i.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),D(this,Ai,Ac).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),D(this,Ai,Ac).call(this),!this._fieldObjects){ue('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:a}=n,l=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const m of r){const v=this._fieldObjects[m]||[];for(const{id:b}of v)f.add(b)}for(const m of Object.values(this._fieldObjects))for(const v of m)f.has(v.id)===a&&l.push(v)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,u=[];for(const f of l){const{id:m}=f;switch(u.push(m),f.type){case"text":{const b=f.defaultValue||"";c.setValue(m,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;c.setValue(m,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";c.setValue(m,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!sh.has(v)){ue(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Ai=new WeakSet,Ac=function(){this.container.setAttribute("data-internal-link","")},wR=function(e,n,i=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,i),!1},D(this,Ai,Ac).call(this)},AR=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),D(this,Ai,Ac).call(this)};class cH extends Cs{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ah extends Cs{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Vn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var a;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(t,e,n,i){var r,o,a;for(const[l,c]of n)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,c,i),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Gt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||aH,r=t.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(q0*i))||1,d=c/u;o=Math.min(i,l(d/q0))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/q0))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=Gt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class uH extends ah{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[i]:n})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",c??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),sh.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=uv,this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue??"";n.value=u.userValue=m,u.formattedValue=null});let d=f=>{const{formattedValue:m}=u;m!=null&&(f.target.value=m),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",m=>{var b;if(u.focused)return;const{target:v}=m;u.userValue&&(v.value=u.userValue),u.lastCommittedValue=v.value,u.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const v={value(b){u.userValue=b.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),b.target.value=u.userValue},formattedValue(b){const{formattedValue:y}=b.detail;u.formattedValue=y,y!=null&&b.target!==document.activeElement&&(b.target.value=y),t.setValue(e,{formattedValue:y})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var M;const{charLimit:y}=b.detail,{target:w}=b;if(y===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",y);let k=u.userValue;!k||k.length<=y||(k=k.slice(0,y),w.value=u.userValue=k,t.setValue(e,{value:k}),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(v,m)}),n.addEventListener("keydown",m=>{var y;u.commitKey=1;let v=-1;if(m.key==="Escape"?v=0:m.key==="Enter"&&!this.data.multiLine?v=2:m.key==="Tab"&&(u.commitKey=3),v===-1)return;const{value:b}=m.target;u.lastCommittedValue!==b&&(u.lastCommittedValue=b,u.userValue=b,(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:v,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",m=>{var b,y;if(!u.focused||!m.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(u.focused=!1);const{value:v}=m.target;u.userValue=v,u.lastCommittedValue!==v&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:u.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),f(m)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",m=>{var B;u.lastCommittedValue=null;const{data:v,target:b}=m,{value:y,selectionStart:w,selectionEnd:k}=b;let M=w,O=k;switch(m.inputType){case"deleteWordBackward":{const V=y.substring(0,w).match(/\w*[^\w]*$/);V&&(M-=V[0].length);break}case"deleteWordForward":{const V=y.substring(w).match(/^[^\w]*\w*/);V&&(O+=V[0].length);break}case"deleteContentBackward":w===k&&(M-=1);break;case"deleteContentForward":w===k&&(O+=1);break}m.preventDefault(),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,change:v||"",willCommit:!1,selStart:M,selEnd:O}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class hH extends ah{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class dH extends ah{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return sh.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=uv,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,n)){const u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(n,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class SR extends ah{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(sh.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=uv,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,n))t.setValue(c.id,{value:!1});t.setValue(n,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const f=u&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class fH extends _R{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class pH extends ah{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");sh.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=uv;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,n.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:f,multiple:m}=i;return m?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const c=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const d={value(f){o==null||o();const m=f.detail.value,v=new Set(Array.isArray(m)?m:[m]);for(const b of i.options)b.selected=v.has(b.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const m=i.options,v=f.detail.remove;m[v].selected=!1,i.remove(v),m.length>0&&Array.prototype.findIndex.call(m,y=>y.selected)===-1&&(m[0].selected=!0),t.setValue(e,{value:a(!0),items:c(f)}),l=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(f){const{index:m,displayValue:v,exportValue:b}=f.detail.insert,y=i.children[m],w=document.createElement("option");w.textContent=v,w.value=b,y?y.before(w):i.append(w),t.setValue(e,{value:a(!0),items:c(f)}),l=a(!1)},items(f){const{items:m}=f.detail;for(;i.length!==0;)i.remove(0);for(const v of m){const{displayValue:b,exportValue:y}=v,w=document.createElement("option");w.textContent=b,w.value=y,i.append(w)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:c(f)}),l=a(!1)},indices(f){const m=new Set(f.detail.indices);for(const v of f.target.options)v.selected=m.has(v.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{var m;const d=a(!0),f=a(!1);t.setValue(e,{value:d}),u.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class R1 extends Cs{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Cs._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new gH({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${CS}${n}`).join(",")),this.container}}var Dd,b_,y_,Od,gu,ms,Qo,Ld,um,hm,Nd,ta,ir,ea,dm,sa,fm,mu,vu,ze,Yb,M1,ER,xR,TR,CR,Kb,Jb,D1;class gH{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}){R(this,ze);R(this,Dd,D(this,ze,TR).bind(this));R(this,b_,D(this,ze,D1).bind(this));R(this,y_,D(this,ze,Jb).bind(this));R(this,Od,D(this,ze,Kb).bind(this));R(this,gu,null);R(this,ms,null);R(this,Qo,null);R(this,Ld,null);R(this,um,null);R(this,hm,null);R(this,Nd,null);R(this,ta,!1);R(this,ir,null);R(this,ea,null);R(this,dm,null);R(this,sa,null);R(this,fm,null);R(this,mu,null);R(this,vu,!1);var f;T(this,ms,t),T(this,fm,i),T(this,Qo,o),T(this,sa,a),T(this,hm,l),T(this,gu,e),T(this,dm,c),T(this,Nd,u),T(this,um,n),T(this,Ld,PS.toDateObject(r)),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",h(this,Od)),m.addEventListener("mouseenter",h(this,y_)),m.addEventListener("mouseleave",h(this,b_)),m.classList.add("popupTriggerArea");for(const m of n)(f=m.container)==null||f.addEventListener("keydown",h(this,Dd));h(this,ms).hidden=!0,d&&D(this,ze,Kb).call(this)}render(){if(h(this,ir))return;const t=T(this,ir,document.createElement("div"));if(t.className="popup",h(this,gu)){const r=t.style.outlineColor=Gt.makeHexColor(...h(this,gu));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Gt.makeHexColor(...h(this,gu).map(a=>Math.floor(.7*(255-a)+a)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=h(this,fm),t.append(e),h(this,Ld)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:h(this,Ld).valueOf()})),e.append(r)}const i=h(this,ze,Yb);if(i)yR.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(h(this,Qo));t.append(r)}h(this,ms).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const a=i[r];n.append(document.createTextNode(a)),r<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;h(this,mu)||T(this,mu,{contentsObj:h(this,Qo),richText:h(this,sa)}),t&&T(this,ea,null),e&&(T(this,sa,D(this,ze,xR).call(this,e)),T(this,Qo,null)),(n=h(this,ir))==null||n.remove(),T(this,ir,null)}resetEdited(){var t;h(this,mu)&&({contentsObj:In(this,Qo)._,richText:In(this,sa)._}=h(this,mu),T(this,mu,null),(t=h(this,ir))==null||t.remove(),T(this,ir,null),T(this,ea,null))}forceHide(){T(this,vu,this.isVisible),h(this,vu)&&(h(this,ms).hidden=!0)}maybeShow(){h(this,vu)&&(h(this,ir)||D(this,ze,Jb).call(this),T(this,vu,!1),h(this,ms).hidden=!1)}get isVisible(){return h(this,ms).hidden===!1}}Dd=new WeakMap,b_=new WeakMap,y_=new WeakMap,Od=new WeakMap,gu=new WeakMap,ms=new WeakMap,Qo=new WeakMap,Ld=new WeakMap,um=new WeakMap,hm=new WeakMap,Nd=new WeakMap,ta=new WeakMap,ir=new WeakMap,ea=new WeakMap,dm=new WeakMap,sa=new WeakMap,fm=new WeakMap,mu=new WeakMap,vu=new WeakMap,ze=new WeakSet,Yb=function(){const t=h(this,sa),e=h(this,Qo);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&h(this,sa).html||null},M1=function(){var t,e,n;return((n=(e=(t=h(this,ze,Yb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},ER=function(){var t,e,n;return((n=(e=(t=h(this,ze,Yb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},xR=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:h(this,ze,ER),fontSize:h(this,ze,M1)?`calc(${h(this,ze,M1)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return n},TR=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&h(this,ta))&&D(this,ze,Kb).call(this)},CR=function(){if(h(this,ea)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=h(this,hm);let o=!!h(this,Nd),a=o?h(this,Nd):h(this,dm);for(const v of h(this,um))if(!a||Gt.intersect(v.data.rect,a)!==null){a=v.data.rect,o=!0;break}const l=Gt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,d=l[0]+u,f=l[1];T(this,ea,[100*(d-i)/e,100*(f-r)/n]);const{style:m}=h(this,ms);m.left=`${h(this,ea)[0]}%`,m.top=`${h(this,ea)[1]}%`},Kb=function(){T(this,ta,!h(this,ta)),h(this,ta)?(D(this,ze,Jb).call(this),h(this,ms).addEventListener("click",h(this,Od)),h(this,ms).addEventListener("keydown",h(this,Dd))):(D(this,ze,D1).call(this),h(this,ms).removeEventListener("click",h(this,Od)),h(this,ms).removeEventListener("keydown",h(this,Dd)))},Jb=function(){h(this,ir)||this.render(),this.isVisible?h(this,ta)&&h(this,ms).classList.add("focused"):(D(this,ze,CR).call(this),h(this,ms).hidden=!1,h(this,ms).style.zIndex=parseInt(h(this,ms).style.zIndex)+1e3)},D1=function(){h(this,ms).classList.remove("focused"),!(h(this,ta)||!this.isVisible)&&(h(this,ms).hidden=!0,h(this,ms).style.zIndex=parseInt(h(this,ms).style.zIndex)-1e3)};class kR extends Cs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ce.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pm;class mH extends Cs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,pm,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:i}=jl(e.rect),r=this.svgFactory.create(n,i,!0),o=T(this,pm,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,pm)}addHighlightArea(){this.container.classList.add("highlightArea")}}pm=new WeakMap;var gm;class vH extends Cs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,gm,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:i}=jl(e.rect),r=this.svgFactory.create(n,i,!0),o=e.borderStyle.width,a=T(this,gm,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",n-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,gm)}addHighlightArea(){this.container.classList.add("highlightArea")}}gm=new WeakMap;var mm;class bH extends Cs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,mm,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:i}=jl(e.rect),r=this.svgFactory.create(n,i,!0),o=e.borderStyle.width,a=T(this,mm,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,mm)}addHighlightArea(){this.container.classList.add("highlightArea")}}mm=new WeakMap;var vm;class IR extends Cs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,vm,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r}}=this;if(!n)return this.container;const{width:o,height:a}=jl(e),l=this.svgFactory.create(o,a,!0);let c=[];for(let d=0,f=n.length;d<f;d+=2){const m=n[d]-e[0],v=e[3]-n[d+1];c.push(`${m},${v}`)}c=c.join(" ");const u=T(this,vm,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,vm)}addHighlightArea(){this.container.classList.add("highlightArea")}}vm=new WeakMap;class yH extends IR{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _H extends Cs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var bm,bu,ym,O1;class LS extends Cs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,ym);R(this,bm,null);R(this,bu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ce.HIGHLIGHT:ce.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:a,width:l,height:c}=D(this,ym,O1).call(this,n,e),u=this.svgFactory.create(l,c,!0),d=T(this,bm,this.svgFactory.createElement("svg:g"));u.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,m=i.length;f<m;f++){const v=this.svgFactory.createElement(this.svgElementName);h(this,bu).push(v),v.setAttribute("points",i[f].join(",")),d.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:r}=e,o=h(this,bm);if(n>=0&&o.setAttribute("stroke-width",n||1),i)for(let a=0,l=h(this,bu).length;a<l;a++)h(this,bu)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:l,height:c}=D(this,ym,O1).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return h(this,bu)}addHighlightArea(){this.container.classList.add("highlightArea")}}bm=new WeakMap,bu=new WeakMap,ym=new WeakSet,O1=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class PR extends Cs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ce.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class wH extends Cs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class AH extends Cs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class SH extends Cs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class RR extends Cs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ce.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var _m,wm,L1;class EH extends Cs{constructor(e){var i;super(e,{isRenderable:!0});R(this,wm);R(this,_m,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",D(this,wm,L1).bind(this)),T(this,_m,i);const{isMac:r}=Vn.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&D(this,wm,L1).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return h(this,_m)}addHighlightArea(){this.container.classList.add("highlightArea")}}_m=new WeakMap,wm=new WeakSet,L1=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Am,yu,_u,Sm,oh,MR,N1;class xH{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a}){R(this,oh);R(this,Am,null);R(this,yu,null);R(this,_u,new Map);R(this,Sm,null);this.div=t,T(this,Am,e),T(this,yu,n),T(this,Sm,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return h(this,_u).size>0}async render(t){var o;const{annotations:e}=t,n=this.div;th(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new OS,annotationStorage:t.annotationStorage||new MS,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const l=a.annotationType===Fs.POPUP;if(l){const d=i.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=jl(a.rect);if(d<=0||f<=0)continue}r.data=a;const c=lH.create(r);if(!c.isRenderable)continue;if(!l&&a.popupRef){const d=i.get(a.popupRef);d?d.push(c):i.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),await D(this,oh,MR).call(this,u,a.id),c._isEditable&&(h(this,_u).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}D(this,oh,N1).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,th(e,{rotation:t.rotation}),D(this,oh,N1).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(h(this,_u).values())}getEditableAnnotation(t){return h(this,_u).get(t)}}Am=new WeakMap,yu=new WeakMap,_u=new WeakMap,Sm=new WeakMap,oh=new WeakSet,MR=async function(t,e){var o,a;const n=t.firstChild||t,i=n.id=`${CS}${e}`,r=await((o=h(this,Sm))==null?void 0:o.getAriaAttributes(i));if(r)for(const[l,c]of r)n.setAttribute(l,c);this.div.append(t),(a=h(this,Am))==null||a.moveElementInDOM(this.div,t,n,!1)},N1=function(){if(!h(this,yu))return;const t=this.div;for(const[e,n]of h(this,yu)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n)}h(this,yu).clear()};const nb=/\r\n?|\n/g;var rr,fi,Em,wu,pi,Os,DR,OR,LR,Zb,Ta,Qb,ty,NR,B1,FR;const Ke=class Ke extends gs{constructor(e){super({...e,name:"freeTextEditor"});R(this,Os);R(this,rr);R(this,fi,"");R(this,Em,`${this.id}-editor`);R(this,wu,null);R(this,pi);T(this,rr,e.color||Ke._defaultColor||gs._defaultLineColor),T(this,pi,e.fontSize||Ke._defaultFontSize)}static get _keyboardManager(){const e=Ke.prototype,n=o=>o.isEmpty(),i=eh.TRANSLATE_SMALL,r=eh.TRANSLATE_BIG;return ge(this,"_keyboardManager",new cv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){gs.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case we.FREETEXT_SIZE:Ke._defaultFontSize=n;break;case we.FREETEXT_COLOR:Ke._defaultColor=n;break}}updateParams(e,n){switch(e){case we.FREETEXT_SIZE:D(this,Os,DR).call(this,n);break;case we.FREETEXT_COLOR:D(this,Os,OR).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[we.FREETEXT_SIZE,Ke._defaultFontSize],[we.FREETEXT_COLOR,Ke._defaultColor||gs._defaultLineColor]]}get propertiesToUpdate(){return[[we.FREETEXT_SIZE,h(this,pi)],[we.FREETEXT_COLOR,h(this,rr)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ke._internalPadding*e,-(Ke._internalPadding+h(this,pi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ce.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),T(this,wu,new AbortController);const e=this._uiManager.combinedSignal(h(this,wu));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,Em)),this._isDraggable=!0,(e=h(this,wu))==null||e.abort(),T(this,wu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=h(this,fi),n=T(this,fi,D(this,Os,LR).call(this).trimEnd());if(e===n)return;const i=r=>{if(T(this,fi,r),!r){this.remove();return}D(this,Os,ty).call(this),this._uiManager.rebuild(this),D(this,Os,Zb).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),D(this,Os,Zb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ke._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,Em)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${h(this,pi)}px * var(--scale-factor))`,i.color=h(this,rr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),zy(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,d]=this.pageDimensions,[f,m]=this.pageTranslation;let v,b;switch(this.rotation){case 0:v=e+(a[0]-f)/u,b=n+this.height-(a[1]-m)/d;break;case 90:v=e+(a[0]-f)/u,b=n-(a[1]-m)/d,[l,c]=[c,-l];break;case 180:v=e-this.width+(a[0]-f)/u,b=n-(a[1]-m)/d,[l,c]=[-l,-c];break;case 270:v=e+(a[0]-f-this.height*d)/u,b=n+(a[1]-m-this.width*u)/d,[l,c]=[-c,l];break}this.setAt(v*r,b*o,l,c)}else this.setAt(e*r,n*o,this.width*r,this.height*o);D(this,Os,ty).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var v,b,y;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=D(v=Ke,Ta,B1).call(v,n.getData("text")||"").replaceAll(nb,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,u=[],d=[];if(l.nodeType===Node.TEXT_NODE){const w=l.parentElement;if(d.push(l.nodeValue.slice(c).replaceAll(nb,"")),w!==this.editorDiv){let k=u;for(const M of this.editorDiv.childNodes){if(M===w){k=d;continue}k.push(D(b=Ke,Ta,Qb).call(b,M))}}u.push(l.nodeValue.slice(0,c).replaceAll(nb,""))}else if(l===this.editorDiv){let w=u,k=0;for(const M of this.editorDiv.childNodes)k++===c&&(w=d),w.push(D(y=Ke,Ta,Qb).call(y,M))}T(this,fi,`${u.join(`
`)}${r}${d.join(`
`)}`),D(this,Os,ty).call(this);const f=new Range;let m=u.reduce((w,k)=>w+k.length,0);for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const k=w.nodeValue.length;if(m<=k){f.setStart(w,m),f.setEnd(w,m);break}m-=k}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,i){var a;let r=null;if(e instanceof kR){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:d,id:f,popupRef:m},textContent:v,textPosition:b,parent:{page:{pageNumber:y}}}=e;if(!v||v.length===0)return null;r=e={annotationType:ce.FREETEXT,color:Array.from(c),fontSize:l,value:v.join(`
`),position:b,pageIndex:y-1,rect:u.slice(0),rotation:d,id:f,deleted:!1,popupRef:m}}const o=await super.deserialize(e,n,i);return T(o,pi,e.fontSize),T(o,rr,Gt.makeHexColor(...e.color)),T(o,fi,D(a=Ke,Ta,B1).call(a,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ke._internalPadding*this.parentScale,i=this.getRect(n,n),r=gs._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,rr)),o={annotationType:ce.FREETEXT,color:r,fontSize:h(this,pi),value:D(this,Os,NR).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!D(this,Os,FR).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${h(this,pi)}px * var(--scale-factor))`,i.color=h(this,rr),n.replaceChildren();for(const o of h(this,fi).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),n.append(a)}const r=Ke._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:h(this,fi)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};rr=new WeakMap,fi=new WeakMap,Em=new WeakMap,wu=new WeakMap,pi=new WeakMap,Os=new WeakSet,DR=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-h(this,pi))*this.parentScale),T(this,pi,r),D(this,Os,Zb).call(this)},i=h(this,pi);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},OR=function(e){const n=r=>{T(this,rr,this.editorDiv.style.color=r)},i=h(this,rr);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},LR=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(D(i=Ke,Ta,Qb).call(i,r)),n=r);return e.join(`
`)},Zb=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},Ta=new WeakSet,Qb=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(nb,"")},ty=function(){if(this.editorDiv.replaceChildren(),!!h(this,fi))for(const e of h(this,fi).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},NR=function(){return h(this,fi).replaceAll(""," ")},B1=function(e){return e.replaceAll(" ","")},FR=function(e){const{value:n,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((a,l)=>a!==r[l])||e.pageIndex!==o},R(Ke,Ta),ht(Ke,"_freeTextDefaultContent",""),ht(Ke,"_internalPadding",0),ht(Ke,"_defaultColor",null),ht(Ke,"_defaultFontSize",10),ht(Ke,"_type","freetext"),ht(Ke,"_editorType",ce.FREETEXT);let F1=Ke;class $t{toSVGPath(){Xe("Abstract method `toSVGPath` must be implemented.")}get box(){Xe("Abstract getter `box` must be implemented.")}serialize(t,e){Xe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a]*i,o[a+1]=n+t[a+1]*r;return o}static _rescaleAndSwap(t,e,n,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a+1]*i,o[a+1]=n+t[a]*r;return o}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,r,o){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+o)/6,(n+r)/2,(i+o)/2]}}ht($t,"PRECISION",1e-4);var gi,or,Fd,Bd,no,pe,Au,Su,xm,Tm,$d,Ud,Sl,Cm,__,w_,Hs,pp,BR,$R,UR,VR,HR,jR;const Fo=class Fo{constructor({x:t,y:e},n,i,r,o,a=0){R(this,Hs);R(this,gi);R(this,or,[]);R(this,Fd);R(this,Bd);R(this,no,[]);R(this,pe,new Float32Array(18));R(this,Au);R(this,Su);R(this,xm);R(this,Tm);R(this,$d);R(this,Ud);R(this,Sl,[]);T(this,gi,n),T(this,Ud,r*i),T(this,Bd,o),h(this,pe).set([NaN,NaN,NaN,NaN,t,e],6),T(this,Fd,a),T(this,Tm,h(Fo,Cm)*i),T(this,xm,h(Fo,w_)*i),T(this,$d,i),h(this,Sl).push(t,e)}isEmpty(){return isNaN(h(this,pe)[8])}add({x:t,y:e}){var I;T(this,Au,t),T(this,Su,e);const[n,i,r,o]=h(this,gi);let[a,l,c,u]=h(this,pe).subarray(8,12);const d=t-c,f=e-u,m=Math.hypot(d,f);if(m<h(this,xm))return!1;const v=m-h(this,Tm),b=v/m,y=b*d,w=b*f;let k=a,M=l;a=c,l=u,c+=y,u+=w,(I=h(this,Sl))==null||I.push(t,e);const O=-w/v,B=y/v,V=O*h(this,Ud),A=B*h(this,Ud);return h(this,pe).set(h(this,pe).subarray(2,8),0),h(this,pe).set([c+V,u+A],4),h(this,pe).set(h(this,pe).subarray(14,18),12),h(this,pe).set([c-V,u-A],16),isNaN(h(this,pe)[6])?(h(this,no).length===0&&(h(this,pe).set([a+V,l+A],2),h(this,no).push(NaN,NaN,NaN,NaN,(a+V-n)/r,(l+A-i)/o),h(this,pe).set([a-V,l-A],14),h(this,or).push(NaN,NaN,NaN,NaN,(a-V-n)/r,(l-A-i)/o)),h(this,pe).set([k,M,a,l,c,u],6),!this.isEmpty()):(h(this,pe).set([k,M,a,l,c,u],6),Math.abs(Math.atan2(M-l,k-a)-Math.atan2(w,y))<Math.PI/2?([a,l,c,u]=h(this,pe).subarray(2,6),h(this,no).push(NaN,NaN,NaN,NaN,((a+c)/2-n)/r,((l+u)/2-i)/o),[a,l,k,M]=h(this,pe).subarray(14,18),h(this,or).push(NaN,NaN,NaN,NaN,((k+a)/2-n)/r,((M+l)/2-i)/o),!0):([k,M,a,l,c,u]=h(this,pe).subarray(0,6),h(this,no).push(((k+5*a)/6-n)/r,((M+5*l)/6-i)/o,((5*a+c)/6-n)/r,((5*l+u)/6-i)/o,((a+c)/2-n)/r,((l+u)/2-i)/o),[c,u,a,l,k,M]=h(this,pe).subarray(12,18),h(this,or).push(((k+5*a)/6-n)/r,((M+5*l)/6-i)/o,((5*a+c)/6-n)/r,((5*l+u)/6-i)/o,((a+c)/2-n)/r,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=h(this,no),e=h(this,or);if(isNaN(h(this,pe)[6])&&!this.isEmpty())return D(this,Hs,BR).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);D(this,Hs,UR).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return D(this,Hs,$R).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,r,o){return new zR(t,e,n,i,r,o)}getOutlines(){var d;const t=h(this,no),e=h(this,or),n=h(this,pe),[i,r,o,a]=h(this,gi),l=new Float32Array((((d=h(this,Sl))==null?void 0:d.length)??0)+2);for(let f=0,m=l.length-2;f<m;f+=2)l[f]=(h(this,Sl)[f]-i)/o,l[f+1]=(h(this,Sl)[f+1]-r)/a;if(l[l.length-2]=(h(this,Au)-i)/o,l[l.length-1]=(h(this,Su)-r)/a,isNaN(n[6])&&!this.isEmpty())return D(this,Hs,VR).call(this,l);const c=new Float32Array(h(this,no).length+24+h(this,or).length);let u=t.length;for(let f=0;f<u;f+=2){if(isNaN(t[f])){c[f]=c[f+1]=NaN;continue}c[f]=t[f],c[f+1]=t[f+1]}u=D(this,Hs,jR).call(this,c,u);for(let f=e.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(e[f+m])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[f+m],c[u+1]=e[f+m+1],u+=2}return D(this,Hs,HR).call(this,c,u),this.newFreeDrawOutline(c,l,h(this,gi),h(this,$d),h(this,Fd),h(this,Bd))}};gi=new WeakMap,or=new WeakMap,Fd=new WeakMap,Bd=new WeakMap,no=new WeakMap,pe=new WeakMap,Au=new WeakMap,Su=new WeakMap,xm=new WeakMap,Tm=new WeakMap,$d=new WeakMap,Ud=new WeakMap,Sl=new WeakMap,Cm=new WeakMap,__=new WeakMap,w_=new WeakMap,Hs=new WeakSet,pp=function(){const t=h(this,pe).subarray(4,6),e=h(this,pe).subarray(16,18),[n,i,r,o]=h(this,gi);return[(h(this,Au)+(t[0]-e[0])/2-n)/r,(h(this,Su)+(t[1]-e[1])/2-i)/o,(h(this,Au)+(e[0]-t[0])/2-n)/r,(h(this,Su)+(e[1]-t[1])/2-i)/o]},BR=function(){const[t,e,n,i]=h(this,gi),[r,o,a,l]=D(this,Hs,pp).call(this);return`M${(h(this,pe)[2]-t)/n} ${(h(this,pe)[3]-e)/i} L${(h(this,pe)[4]-t)/n} ${(h(this,pe)[5]-e)/i} L${r} ${o} L${a} ${l} L${(h(this,pe)[16]-t)/n} ${(h(this,pe)[17]-e)/i} L${(h(this,pe)[14]-t)/n} ${(h(this,pe)[15]-e)/i} Z`},$R=function(t){const e=h(this,or);t.push(`L${e[4]} ${e[5]} Z`)},UR=function(t){const[e,n,i,r]=h(this,gi),o=h(this,pe).subarray(4,6),a=h(this,pe).subarray(16,18),[l,c,u,d]=D(this,Hs,pp).call(this);t.push(`L${(o[0]-e)/i} ${(o[1]-n)/r} L${l} ${c} L${u} ${d} L${(a[0]-e)/i} ${(a[1]-n)/r}`)},VR=function(t){const e=h(this,pe),[n,i,r,o]=h(this,gi),[a,l,c,u]=D(this,Hs,pp).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(d,t,h(this,gi),h(this,$d),h(this,Fd),h(this,Bd))},HR=function(t,e){const n=h(this,or);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},jR=function(t,e){const n=h(this,pe).subarray(4,6),i=h(this,pe).subarray(16,18),[r,o,a,l]=h(this,gi),[c,u,d,f]=D(this,Hs,pp).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l],e),e+=24},R(Fo,Cm,8),R(Fo,__,2),R(Fo,w_,h(Fo,Cm)+h(Fo,__));let qy=Fo;var Vd,Eu,na,km,mi,Im,Ss,A_,WR;class zR extends $t{constructor(e,n,i,r,o,a){super();R(this,A_);R(this,Vd);R(this,Eu,new Float32Array(4));R(this,na);R(this,km);R(this,mi);R(this,Im);R(this,Ss);T(this,Ss,e),T(this,mi,n),T(this,Vd,i),T(this,Im,r),T(this,na,o),T(this,km,a),this.lastPoint=[NaN,NaN],D(this,A_,WR).call(this,a);const[l,c,u,d]=h(this,Eu);for(let f=0,m=e.length;f<m;f+=2)e[f]=(e[f]-l)/u,e[f+1]=(e[f+1]-c)/d;for(let f=0,m=n.length;f<m;f+=2)n[f]=(n[f]-l)/u,n[f+1]=(n[f+1]-c)/d}toSVGPath(){const e=[`M${h(this,Ss)[4]} ${h(this,Ss)[5]}`];for(let n=6,i=h(this,Ss).length;n<i;n+=6){if(isNaN(h(this,Ss)[n])){e.push(`L${h(this,Ss)[n+4]} ${h(this,Ss)[n+5]}`);continue}e.push(`C${h(this,Ss)[n]} ${h(this,Ss)[n+1]} ${h(this,Ss)[n+2]} ${h(this,Ss)[n+3]} ${h(this,Ss)[n+4]} ${h(this,Ss)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],o){const a=i-e,l=r-n;let c,u;switch(o){case 0:c=$t._rescale(h(this,Ss),e,r,a,-l),u=$t._rescale(h(this,mi),e,r,a,-l);break;case 90:c=$t._rescaleAndSwap(h(this,Ss),e,n,a,l),u=$t._rescaleAndSwap(h(this,mi),e,n,a,l);break;case 180:c=$t._rescale(h(this,Ss),i,n,-a,l),u=$t._rescale(h(this,mi),i,n,-a,l);break;case 270:c=$t._rescaleAndSwap(h(this,Ss),i,r,-a,-l),u=$t._rescaleAndSwap(h(this,mi),i,r,-a,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return h(this,Eu)}newOutliner(e,n,i,r,o,a=0){return new qy(e,n,i,r,o,a)}getNewOutline(e,n){const[i,r,o,a]=h(this,Eu),[l,c,u,d]=h(this,Vd),f=o*u,m=a*d,v=i*u+l,b=r*d+c,y=this.newOutliner({x:h(this,mi)[0]*f+v,y:h(this,mi)[1]*m+b},h(this,Vd),h(this,Im),e,h(this,km),n??h(this,na));for(let w=2;w<h(this,mi).length;w+=2)y.add({x:h(this,mi)[w]*f+v,y:h(this,mi)[w+1]*m+b});return y.getOutlines()}}Vd=new WeakMap,Eu=new WeakMap,na=new WeakMap,km=new WeakMap,mi=new WeakMap,Im=new WeakMap,Ss=new WeakMap,A_=new WeakSet,WR=function(e){const n=h(this,Ss);let i=n[4],r=n[5],o=i,a=r,l=i,c=r,u=i,d=r;const f=e?Math.max:Math.min;for(let v=6,b=n.length;v<b;v+=6){if(isNaN(n[v]))o=Math.min(o,n[v+4]),a=Math.min(a,n[v+5]),l=Math.max(l,n[v+4]),c=Math.max(c,n[v+5]),d<n[v+5]?(u=n[v+4],d=n[v+5]):d===n[v+5]&&(u=f(u,n[v+4]));else{const y=Gt.bezierBoundingBox(i,r,...n.slice(v,v+6));o=Math.min(o,y[0]),a=Math.min(a,y[1]),l=Math.max(l,y[2]),c=Math.max(c,y[3]),d<y[3]?(u=y[2],d=y[3]):d===y[3]&&(u=f(u,y[2]))}i=n[v+4],r=n[v+5]}const m=h(this,Eu);m[0]=o-h(this,na),m[1]=a-h(this,na),m[2]=l-o+2*h(this,na),m[3]=c-a+2*h(this,na),this.lastPoint=[u,d]};var Pm,Rm,El,ar,jn,GR,ey,qR,XR,U1;class $1{constructor(t,e=0,n=0,i=!0){R(this,jn);R(this,Pm);R(this,Rm);R(this,El,[]);R(this,ar,[]);let r=1/0,o=-1/0,a=1/0,l=-1/0;const c=10**-4;for(const{x:y,y:w,width:k,height:M}of t){const O=Math.floor((y-e)/c)*c,B=Math.ceil((y+k+e)/c)*c,V=Math.floor((w-e)/c)*c,A=Math.ceil((w+M+e)/c)*c,S=[O,V,A,!0],I=[B,V,A,!1];h(this,El).push(S,I),r=Math.min(r,O),o=Math.max(o,B),a=Math.min(a,V),l=Math.max(l,A)}const u=o-r+2*n,d=l-a+2*n,f=r-n,m=a-n,v=h(this,El).at(i?-1:-2),b=[v[0],v[2]];for(const y of h(this,El)){const[w,k,M]=y;y[0]=(w-f)/u,y[1]=(k-m)/d,y[2]=(M-m)/d}T(this,Pm,new Float32Array([f,m,u,d])),T(this,Rm,b)}getOutlines(){h(this,El).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of h(this,El))e[3]?(t.push(...D(this,jn,U1).call(this,e)),D(this,jn,qR).call(this,e)):(D(this,jn,XR).call(this,e),t.push(...D(this,jn,U1).call(this,e)));return D(this,jn,GR).call(this,t)}}Pm=new WeakMap,Rm=new WeakMap,El=new WeakMap,ar=new WeakMap,jn=new WeakSet,GR=function(t){const e=[],n=new Set;for(const o of t){const[a,l,c]=o;e.push([a,l,o],[a,c,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const l=e[o][2],c=e[o+1][2];l.push(c),c.push(l),n.add(l),n.add(c)}const i=[];let r;for(;n.size>0;){const o=n.values().next().value;let[a,l,c,u,d]=o;n.delete(o);let f=a,m=l;for(r=[a,c],i.push(r);;){let v;if(n.has(u))v=u;else if(n.has(d))v=d;else break;n.delete(v),[a,l,c,u,d]=v,f!==a&&(r.push(f,m,a,m===l?l:c),f=a),m=m===l?c:l}r.push(f,m)}return new TH(i,h(this,Pm),h(this,Rm))},ey=function(t){const e=h(this,ar);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,o=e[r][0];if(o===t)return r;o<t?n=r+1:i=r-1}return i+1},qR=function([,t,e]){const n=D(this,jn,ey).call(this,t);h(this,ar).splice(n,0,[t,e])},XR=function([,t,e]){const n=D(this,jn,ey).call(this,t);for(let i=n;i<h(this,ar).length;i++){const[r,o]=h(this,ar)[i];if(r!==t)break;if(r===t&&o===e){h(this,ar).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,o]=h(this,ar)[i];if(r!==t)break;if(r===t&&o===e){h(this,ar).splice(i,1);return}}},U1=function(t){const[e,n,i]=t,r=[[e,n,i]],o=D(this,jn,ey).call(this,i);for(let a=0;a<o;a++){const[l,c]=h(this,ar)[a];for(let u=0,d=r.length;u<d;u++){const[,f,m]=r[u];if(!(c<=f||m<=l)){if(f>=l){if(m>c)r[u][1]=c;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=l,m>c&&r.push([e,c,m])}}}return r};var Mm,Hd;class TH extends $t{constructor(e,n,i){super();R(this,Mm);R(this,Hd);T(this,Hd,e),T(this,Mm,n),this.lastPoint=i}toSVGPath(){const e=[];for(const n of h(this,Hd)){let[i,r]=n;e.push(`M${i} ${r}`);for(let o=2;o<n.length;o+=2){const a=n[o],l=n[o+1];a===i?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],o){const a=[],l=i-e,c=r-n;for(const u of h(this,Hd)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=e+u[f]*l,d[f+1]=r-u[f+1]*c;a.push(d)}return a}get box(){return h(this,Mm)}get classNamesForOutlining(){return["highlightOutline"]}}Mm=new WeakMap,Hd=new WeakMap;class V1 extends qy{newFreeDrawOutline(t,e,n,i,r,o){return new CH(t,e,n,i,r,o)}}class CH extends zR{newOutliner(t,e,n,i,r,o=0){return new V1(t,e,n,i,r,o)}}var lr,xu,jd,Us,Dm,zd,Om,Lm,xl,cr,Wd,Nm,je,H1,j1,z1,Sc,YR,Ya;const Kn=class Kn{constructor({editor:t=null,uiManager:e=null}){R(this,je);R(this,lr,null);R(this,xu,null);R(this,jd);R(this,Us,null);R(this,Dm,!1);R(this,zd,!1);R(this,Om,null);R(this,Lm);R(this,xl,null);R(this,cr,null);R(this,Wd);var n;t?(T(this,zd,!1),T(this,Wd,we.HIGHLIGHT_COLOR),T(this,Om,t)):(T(this,zd,!0),T(this,Wd,we.HIGHLIGHT_DEFAULT_COLOR)),T(this,cr,(t==null?void 0:t._uiManager)||e),T(this,Lm,h(this,cr)._eventBus),T(this,jd,(t==null?void 0:t.color)||((n=h(this,cr))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),h(Kn,Nm)||T(Kn,Nm,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ge(this,"_keyboardManager",new cv([[["Escape","mac+Escape"],Kn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Kn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Kn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Kn.prototype._moveToPrevious],[["Home","mac+Home"],Kn.prototype._moveToBeginning],[["End","mac+End"],Kn.prototype._moveToEnd]]))}renderButton(){const t=T(this,lr,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=h(this,cr)._signal;t.addEventListener("click",D(this,je,Sc).bind(this),{signal:e}),t.addEventListener("keydown",D(this,je,z1).bind(this),{signal:e});const n=T(this,xu,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=h(this,jd),t.append(n),t}renderMainDropdown(){const t=T(this,Us,D(this,je,H1).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===h(this,lr)){D(this,je,Sc).call(this,t);return}const e=t.target.getAttribute("data-color");e&&D(this,je,j1).call(this,e,t)}_moveToNext(t){var e,n;if(!h(this,je,Ya)){D(this,je,Sc).call(this,t);return}if(t.target===h(this,lr)){(e=h(this,Us).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=h(this,Us))==null?void 0:e.firstChild)||t.target===h(this,lr)){h(this,je,Ya)&&this._hideDropdownFromKeyboard();return}h(this,je,Ya)||D(this,je,Sc).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!h(this,je,Ya)){D(this,je,Sc).call(this,t);return}(e=h(this,Us).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!h(this,je,Ya)){D(this,je,Sc).call(this,t);return}(e=h(this,Us).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=h(this,Us))==null||t.classList.add("hidden"),(e=h(this,xl))==null||e.abort(),T(this,xl,null)}_hideDropdownFromKeyboard(){var t;if(!h(this,zd)){if(!h(this,je,Ya)){(t=h(this,Om))==null||t.unselect();return}this.hideDropdown(),h(this,lr).focus({preventScroll:!0,focusVisible:h(this,Dm)})}}updateColor(t){if(h(this,xu)&&(h(this,xu).style.backgroundColor=t),!h(this,Us))return;const e=h(this,cr).highlightColors.values();for(const n of h(this,Us).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=h(this,lr))==null||t.remove(),T(this,lr,null),T(this,xu,null),(e=h(this,Us))==null||e.remove(),T(this,Us,null)}};lr=new WeakMap,xu=new WeakMap,jd=new WeakMap,Us=new WeakMap,Dm=new WeakMap,zd=new WeakMap,Om=new WeakMap,Lm=new WeakMap,xl=new WeakMap,cr=new WeakMap,Wd=new WeakMap,Nm=new WeakMap,je=new WeakSet,H1=function(){const t=document.createElement("div"),e=h(this,cr)._signal;t.addEventListener("contextmenu",Ir,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of h(this,cr).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",h(Kn,Nm)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===h(this,jd)),r.addEventListener("click",D(this,je,j1).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",D(this,je,z1).bind(this),{signal:e}),t},j1=function(t,e){e.stopPropagation(),h(this,Lm).dispatch("switchannotationeditorparams",{source:this,type:h(this,Wd),value:t})},z1=function(t){Kn._keyboardManager.exec(this,t)},Sc=function(t){if(h(this,je,Ya)){this.hideDropdown();return}if(T(this,Dm,t.detail===0),h(this,xl)||(T(this,xl,new AbortController),window.addEventListener("pointerdown",D(this,je,YR).bind(this),{signal:h(this,cr).combinedSignal(h(this,xl))})),h(this,Us)){h(this,Us).classList.remove("hidden");return}const e=T(this,Us,D(this,je,H1).call(this));h(this,lr).append(e)},YR=function(t){var e;(e=h(this,Us))!=null&&e.contains(t.target)||this.hideDropdown()},Ya=function(){return h(this,Us)&&!h(this,Us).classList.contains("hidden")},R(Kn,Nm,null);let Xy=Kn;var Gd,Fm,ia,Tu,qd,Qn,Bm,$m,Cu,Ni,vi,en,Xd,ra,gn,Yd,Fi,Um,le,W1,sy,KR,JR,ZR,G1,Ec,Hi,Fh,QR,ny,gp,tM,eM,sM,nM,iM;const Oe=class Oe extends gs{constructor(e){super({...e,name:"highlightEditor"});R(this,le);R(this,Gd,null);R(this,Fm,0);R(this,ia);R(this,Tu,null);R(this,qd,null);R(this,Qn,null);R(this,Bm,null);R(this,$m,0);R(this,Cu,null);R(this,Ni,null);R(this,vi,null);R(this,en,!1);R(this,Xd,null);R(this,ra);R(this,gn,null);R(this,Yd,"");R(this,Fi);R(this,Um,"");this.color=e.color||Oe._defaultColor,T(this,Fi,e.thickness||Oe._defaultThickness),T(this,ra,e.opacity||Oe._defaultOpacity),T(this,ia,e.boxes||null),T(this,Um,e.methodOfCreation||""),T(this,Yd,e.text||""),this._isDraggable=!1,e.highlightId>-1?(T(this,en,!0),D(this,le,sy).call(this,e),D(this,le,Ec).call(this)):h(this,ia)&&(T(this,Gd,e.anchorNode),T(this,Fm,e.anchorOffset),T(this,Bm,e.focusNode),T(this,$m,e.focusOffset),D(this,le,W1).call(this),D(this,le,Ec).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Oe.prototype;return ge(this,"_keyboardManager",new cv([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,en)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(this,Fi),methodOfCreation:h(this,Um)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;gs.initialize(e,n),Oe._defaultColor||(Oe._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case we.HIGHLIGHT_DEFAULT_COLOR:Oe._defaultColor=n;break;case we.HIGHLIGHT_THICKNESS:Oe._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return h(this,Xd)}updateParams(e,n){switch(e){case we.HIGHLIGHT_COLOR:D(this,le,KR).call(this,n);break;case we.HIGHLIGHT_THICKNESS:D(this,le,JR).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[we.HIGHLIGHT_DEFAULT_COLOR,Oe._defaultColor],[we.HIGHLIGHT_THICKNESS,Oe._defaultThickness]]}get propertiesToUpdate(){return[[we.HIGHLIGHT_COLOR,this.color||Oe._defaultColor],[we.HIGHLIGHT_THICKNESS,h(this,Fi)||Oe._defaultThickness],[we.HIGHLIGHT_FREE,h(this,en)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(T(this,qd,new Xy({editor:this})),e.addColorPicker(h(this,qd))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,le,gp).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,D(this,le,gp).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){D(this,le,G1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,le,Ec).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?D(this,le,G1).call(this):e&&(D(this,le,Ec).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,o,a;const{drawLayer:n}=this.parent;let i;h(this,en)?(e=(e-this.rotation+360)%360,i=D(r=Oe,Hi,Fh).call(r,h(this,Ni).box,e)):i=D(o=Oe,Hi,Fh).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(h(this,vi),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(h(this,gn),{bbox:D(a=Oe,Hi,Fh).call(a,h(this,Qn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();h(this,Yd)&&(e.setAttribute("aria-label",h(this,Yd)),e.setAttribute("role","mark")),h(this,en)?e.classList.add("free"):this.div.addEventListener("keydown",D(this,le,QR).bind(this),{signal:this._uiManager._signal});const n=T(this,Cu,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=h(this,Tu);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),zy(this,h(this,Cu),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(h(this,gn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(h(this,gn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:D(this,le,ny).call(this,!0);break;case 1:case 3:D(this,le,ny).call(this,!1);break}}select(){var e;super.select(),h(this,gn)&&((e=this.parent)==null||e.drawLayer.updateProperties(h(this,gn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),h(this,gn)&&((e=this.parent)==null||e.drawLayer.updateProperties(h(this,gn),{rootClass:{selected:!1}}),h(this,en)||D(this,le,ny).call(this,!1))}get _mustFixPosition(){return!h(this,en)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(h(this,vi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(h(this,gn),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:r,y:o}){const{x:a,y:l,width:c,height:u}=i.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),m=v=>{d.abort(),D(this,Hi,nM).call(this,e,v)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",Ei,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ir,{signal:f}),i.addEventListener("pointermove",D(this,Hi,sM).bind(this,e),{signal:f}),this._freeHighlight=new V1({x:r,y:o},[a,l,c,u],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var b,y,w,k;let r=null;if(e instanceof PR){const{data:{quadPoints:M,rect:O,rotation:B,id:V,color:A,opacity:S,popupRef:I},parent:{page:{pageNumber:L}}}=e;r=e={annotationType:ce.HIGHLIGHT,color:Array.from(A),opacity:S,quadPoints:M,boxes:null,pageIndex:L-1,rect:O.slice(0),rotation:B,id:V,deleted:!1,popupRef:I}}else if(e instanceof LS){const{data:{inkLists:M,rect:O,rotation:B,id:V,color:A,borderStyle:{rawWidth:S},popupRef:I},parent:{page:{pageNumber:L}}}=e;r=e={annotationType:ce.HIGHLIGHT,color:Array.from(A),thickness:S,inkLists:M,boxes:null,pageIndex:L-1,rect:O.slice(0),rotation:B,id:V,deleted:!1,popupRef:I}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=e,u=await super.deserialize(e,n,i);u.color=Gt.makeHexColor(...o),T(u,ra,c||1),l&&T(u,Fi,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[d,f]=u.pageDimensions,[m,v]=u.pageTranslation;if(a){const M=T(u,ia,[]);for(let O=0;O<a.length;O+=8)M.push({x:(a[O]-m)/d,y:1-(a[O+1]-v)/f,width:(a[O+2]-a[O])/d,height:(a[O+1]-a[O+5])/f});D(b=u,le,W1).call(b),D(y=u,le,Ec).call(y),u.rotate(u.rotation)}else if(l){T(u,en,!0);const M=l[0],O={x:M[0]-m,y:f-(M[1]-v)},B=new V1(O,[0,0,d,f],1,h(u,Fi)/2,!0,.001);for(let S=0,I=M.length;S<I;S+=2)O.x=M[S]-m,O.y=f-(M[S+1]-v),B.add(O);const{id:V,clipPathId:A}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:B.toSVGPath()}},!0,!0);D(w=u,le,sy).call(w,{highlightOutlines:B.getOutlines(),highlightId:V,clipPathId:A}),D(k=u,le,Ec).call(k)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=gs._colorManager.convert(this.color),r={annotationType:ce.HIGHLIGHT,color:i,opacity:h(this,ra),thickness:h(this,Fi),quadPoints:D(this,le,tM).call(this),outlines:D(this,le,eM).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:D(this,le,gp).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!D(this,le,iM).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Gd=new WeakMap,Fm=new WeakMap,ia=new WeakMap,Tu=new WeakMap,qd=new WeakMap,Qn=new WeakMap,Bm=new WeakMap,$m=new WeakMap,Cu=new WeakMap,Ni=new WeakMap,vi=new WeakMap,en=new WeakMap,Xd=new WeakMap,ra=new WeakMap,gn=new WeakMap,Yd=new WeakMap,Fi=new WeakMap,Um=new WeakMap,le=new WeakSet,W1=function(){const e=new $1(h(this,ia),.001);T(this,Ni,e.getOutlines()),[this.x,this.y,this.width,this.height]=h(this,Ni).box;const n=new $1(h(this,ia),.0025,.001,this._uiManager.direction==="ltr");T(this,Qn,n.getOutlines());const{lastPoint:i}=h(this,Qn);T(this,Xd,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},sy=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var d,f;if(T(this,Ni,e),T(this,Qn,e.getNewOutline(h(this,Fi)/2+1.5,.0025)),n>=0)T(this,vi,n),T(this,Tu,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),T(this,gn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:h(this,Qn).box,path:{d:h(this,Qn).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(h(this,vi),{bbox:D(d=Oe,Hi,Fh).call(d,h(this,Ni).box,(m-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(h(this,gn),{bbox:D(f=Oe,Hi,Fh).call(f,h(this,Qn).box,m),path:{d:h(this,Qn).toSVGPath()}})}const[o,a,l,c]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[m,v]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*v/m,this.height=c*m/v;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[m,v]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*v/m,this.height=c*m/v;break}}const{lastPoint:u}=h(this,Qn);T(this,Xd,[(u[0]-o)/l,(u[1]-a)/c])},KR=function(e){const n=(o,a)=>{var l,c;this.color=o,T(this,ra,a),(l=this.parent)==null||l.drawLayer.updateProperties(h(this,vi),{root:{fill:o,"fill-opacity":a}}),(c=h(this,qd))==null||c.updateColor(o)},i=this.color,r=h(this,ra);this.addCommands({cmd:n.bind(this,e,Oe._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},JR=function(e){const n=h(this,Fi),i=r=>{T(this,Fi,r),D(this,le,ZR).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},ZR=function(e){if(!h(this,en))return;D(this,le,sy).call(this,{highlightOutlines:h(this,Ni).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},G1=function(){h(this,vi)===null||!this.parent||(this.parent.drawLayer.remove(h(this,vi)),T(this,vi,null),this.parent.drawLayer.remove(h(this,gn)),T(this,gn,null))},Ec=function(e=this.parent){h(this,vi)===null&&({id:In(this,vi)._,clipPathId:In(this,Tu)._}=e.drawLayer.draw({bbox:h(this,Ni).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":h(this,ra)},rootClass:{highlight:!0,free:h(this,en)},path:{d:h(this,Ni).toSVGPath()}},!1,!0),T(this,gn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:h(this,en)},bbox:h(this,Qn).box,path:{d:h(this,Qn).toSVGPath()}},h(this,en))),h(this,Cu)&&(h(this,Cu).style.clipPath=h(this,Tu)))},Hi=new WeakSet,Fh=function([e,n,i,r],o){switch(o){case 90:return[1-n-r,e,r,i];case 180:return[1-e-i,1-n-r,i,r];case 270:return[n,1-e-i,r,i]}return[e,n,i,r]},QR=function(e){Oe._keyboardManager.exec(this,e)},ny=function(e){if(!h(this,Gd))return;const n=window.getSelection();e?n.setPosition(h(this,Gd),h(this,Fm)):n.setPosition(h(this,Bm),h(this,$m))},gp=function(){return h(this,en)?this.rotation:0},tM=function(){if(h(this,en))return null;const[e,n]=this.pageDimensions,[i,r]=this.pageTranslation,o=h(this,ia),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:u,width:d,height:f}of o){const m=c*e+i,v=(1-u)*n+r;a[l]=a[l+4]=m,a[l+1]=a[l+3]=v,a[l+2]=a[l+6]=m+d*e,a[l+5]=a[l+7]=v-f*n,l+=8}return a},eM=function(e){return h(this,Ni).serialize(e,D(this,le,gp).call(this))},sM=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},nM=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},iM=function(e){const{color:n}=this._initialData;return e.color.some((i,r)=>i!==n[r])},R(Oe,Hi),ht(Oe,"_defaultColor",null),ht(Oe,"_defaultOpacity",1),ht(Oe,"_defaultThickness",12),ht(Oe,"_type","highlight"),ht(Oe,"_editorType",ce.HIGHLIGHT),ht(Oe,"_freeHighlightId",-1),ht(Oe,"_freeHighlight",null),ht(Oe,"_freeHighlightClipId","");let Yy=Oe;var ku;class kH{constructor(){R(this,ku,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){h(this,ku)[t]=e}toSVGProperties(){const t=h(this,ku);return T(this,ku,Object.create(null)),{root:t}}reset(){T(this,ku,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Xe("Not implemented")}}ku=new WeakMap;var bi,Kd,qs,Iu,Pu,Tl,Cl,kl,Ru,Ce,X1,Y1,K1,mp,rM,iy,vp,Bh;const Vt=class Vt extends gs{constructor(e){super(e);R(this,Ce);R(this,bi,null);R(this,Kd);ht(this,"_drawId",null);T(this,Kd,e.mustBeCommitted||!1),e.drawOutlines&&(D(this,Ce,X1).call(this,e),D(this,Ce,mp).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[r,o]of Object.entries(n))i.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){Xe("Not implemented")}static get typesMap(){Xe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(h(Vt,qs).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,n[r]]);return e}_updateProperty(e,n,i){const r=this._drawingOptions,o=r[n],a=l=>{var u;r.updateProperty(n,l);const c=h(this,bi).updateProperty(n,l);c&&D(this,Ce,vp).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Vt._mergeSVGProperties(h(this,bi).getPathResizingSVGProperties(D(this,Ce,iy).call(this)),{bbox:D(this,Ce,Bh).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Vt._mergeSVGProperties(h(this,bi).getPathResizedSVGProperties(D(this,Ce,iy).call(this)),{bbox:D(this,Ce,Bh).call(this)}))}_onTranslating(e,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:D(this,Ce,Bh).call(this,e,n)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Vt._mergeSVGProperties(h(this,bi).getPathTranslatedSVGProperties(D(this,Ce,iy).call(this),this.parentDimensions),{bbox:D(this,Ce,Bh).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,h(this,Kd)&&(T(this,Kd,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){D(this,Ce,K1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Ce,mp).call(this),D(this,Ce,vp).call(this,h(this,bi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),D(this,Ce,K1).call(this)):e&&(this._uiManager.addShouldRescale(this),D(this,Ce,mp).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Vt._mergeSVGProperties({bbox:D(this,Ce,Bh).call(this)},h(this,bi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,Ce,vp).call(this,h(this,bi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const n=document.createElement("div");e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,n,i,r,o){Xe("Not implemented")}static startDrawing(e,n,i,r){var y;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=r;if(h(Vt,Cl)&&h(Vt,Cl)!==u)return;const{viewport:{rotation:d}}=e,{width:f,height:m}=o.getBoundingClientRect(),v=T(Vt,Iu,new AbortController),b=e.combinedSignal(v);if(h(Vt,Tl)||T(Vt,Tl,c),h(Vt,Cl)??T(Vt,Cl,u),window.addEventListener("pointerup",w=>{var k;h(Vt,Tl)===w.pointerId?this._endDraw(w):(k=h(Vt,kl))==null||k.delete(w.pointerId)},{signal:b}),window.addEventListener("pointercancel",w=>{var k;h(Vt,Tl)===w.pointerId?this._currentParent.endDrawingSession():(k=h(Vt,kl))==null||k.delete(w.pointerId)},{signal:b}),window.addEventListener("pointerdown",w=>{h(Vt,Cl)===w.pointerType&&((h(Vt,kl)||T(Vt,kl,new Set)).add(w.pointerId),h(Vt,qs).isCancellable()&&(h(Vt,qs).removeLastElement(),h(Vt,qs).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ir,{signal:b}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),o.addEventListener("touchmove",w=>{w.timeStamp===h(Vt,Ru)&&Ei(w)},{signal:b}),e.toggleDrawing(),(y=n._editorUndoBar)==null||y.hide(),h(Vt,qs)){e.drawLayer.updateProperties(this._currentDrawId,h(Vt,qs).startNew(a,l,f,m,d));return}n.updateUIForDefaultProperties(this),T(Vt,qs,this.createDrawerInstance(a,l,f,m,d)),T(Vt,Pu,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(h(Vt,Pu).toSVGProperties(),h(Vt,qs).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(T(Vt,Ru,-1),!h(Vt,qs))return;const{offsetX:n,offsetY:i,pointerId:r}=e;if(h(Vt,Tl)===r){if(((o=h(Vt,kl))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,h(Vt,qs).add(n,i)),T(Vt,Ru,e.timeStamp),Ei(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,T(Vt,qs,null),T(Vt,Pu,null),T(Vt,Cl,null),T(Vt,Ru,NaN)),h(Vt,Iu)&&(h(Vt,Iu).abort(),T(Vt,Iu,null),T(Vt,Tl,NaN),T(Vt,kl,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e&&n.drawLayer.updateProperties(this._currentDrawId,h(Vt,qs).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=h(Vt,qs),r=this._currentDrawId,o=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:we.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(we.DRAW_STEP),!h(Vt,qs).isEmpty()){const{pageDimensions:[i,r],scale:o}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:h(Vt,qs).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:h(Vt,Pu),mustBeCommitted:!e});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,r,o,a){Xe("Not implemented")}static async deserialize(e,n,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=n.viewport,c=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,e),u=await super.deserialize(e,n,i);return u.createDrawingOptions(e),D(d=u,Ce,X1).call(d,{drawOutlines:c}),D(f=u,Ce,mp).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[n,i]=this.pageTranslation,[r,o]=this.pageDimensions;return h(this,bi).serialize([n,i,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};bi=new WeakMap,Kd=new WeakMap,qs=new WeakMap,Iu=new WeakMap,Pu=new WeakMap,Tl=new WeakMap,Cl=new WeakMap,kl=new WeakMap,Ru=new WeakMap,Ce=new WeakSet,X1=function({drawOutlines:e,drawId:n,drawingOptions:i}){T(this,bi,e),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=D(this,Ce,Y1).call(this,e,this.parent),D(this,Ce,vp).call(this,e.box)},Y1=function(e,n){const{id:i}=n.drawLayer.draw(Vt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},K1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},mp=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,Ce,Y1).call(this,h(this,bi),e)}},rM=function([e,n,i,r]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[n,1-e,i*(a/o),r*(o/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/o),r*(o/a)];default:return[e,n,i,r]}},iy=function(){const{x:e,y:n,width:i,height:r,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-n,e,i*(o/a),r*(a/o)];case 180:return[1-e,1-n,i,r];case 270:return[n,1-e,i*(o/a),r*(a/o)];default:return[e,n,i,r]}},vp=function(e){if([this.x,this.y,this.width,this.height]=D(this,Ce,rM).call(this,e),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},Bh=function(){const{x:e,y:n,width:i,height:r,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-n-r,e,r,i];case 2:return[1-e-i,1-n-r,i,r];case 3:return[n,1-e-i,r,i];case 4:return[e,n-i*(l/c),r*(c/l),i*(l/c)];case 5:return[1-n,e,i*(l/c),r*(c/l)];case 6:return[1-e-r*(c/l),1-n,r*(c/l),i*(l/c)];case 7:return[n-i*(l/c),1-e-r*(c/l),i*(l/c),r*(c/l)];case 8:return[e-i,n-r,i,r];case 9:return[1-n,e-i,r,i];case 10:return[1-e,1-n,i,r];case 11:return[n-r,1-e,r,i];case 12:return[e-r*(c/l),n,r*(c/l),i*(l/c)];case 13:return[1-n-i*(l/c),e-r*(c/l),i*(l/c),r*(c/l)];case 14:return[1-e,1-n-i*(l/c),r*(c/l),i*(l/c)];case 15:return[n,1-e,i*(l/c),r*(c/l)];default:return[e,n,i,r]}},ht(Vt,"_currentDrawId",-1),ht(Vt,"_currentParent",null),R(Vt,qs,null),R(Vt,Iu,null),R(Vt,Pu,null),R(Vt,Tl,NaN),R(Vt,Cl,null),R(Vt,kl,null),R(Vt,Ru,NaN),ht(Vt,"_INNER_MARGIN",3);let q1=Vt;var io,Xs,Ys,Mu,Jd,Dn,sn,Bi,Du,Ou,Lu,Zd,ry;class IH{constructor(t,e,n,i,r,o){R(this,Zd);R(this,io,new Float64Array(6));R(this,Xs);R(this,Ys);R(this,Mu);R(this,Jd);R(this,Dn);R(this,sn,"");R(this,Bi,0);R(this,Du,new Ky);R(this,Ou);R(this,Lu);T(this,Ou,n),T(this,Lu,i),T(this,Mu,r),T(this,Jd,o),[t,e]=D(this,Zd,ry).call(this,t,e);const a=T(this,Xs,[NaN,NaN,NaN,NaN,t,e]);T(this,Dn,[t,e]),T(this,Ys,[{line:a,points:h(this,Dn)}]),h(this,io).set(a,0)}updateProperty(t,e){t==="stroke-width"&&T(this,Jd,e)}isEmpty(){return!h(this,Ys)||h(this,Ys).length===0}isCancellable(){return h(this,Dn).length<=10}add(t,e){[t,e]=D(this,Zd,ry).call(this,t,e);const[n,i,r,o]=h(this,io).subarray(2,6),a=t-r,l=e-o;return Math.hypot(h(this,Ou)*a,h(this,Lu)*l)<=2?null:(h(this,Dn).push(t,e),isNaN(n)?(h(this,io).set([r,o,t,e],2),h(this,Xs).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(h(this,io)[0])&&h(this,Xs).splice(6,6),h(this,io).set([n,i,r,o,t,e],0),h(this,Xs).push(...$t.createBezierPoints(n,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(h(this,Dn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,r){T(this,Ou,n),T(this,Lu,i),T(this,Mu,r),[t,e]=D(this,Zd,ry).call(this,t,e);const o=T(this,Xs,[NaN,NaN,NaN,NaN,t,e]);T(this,Dn,[t,e]);const a=h(this,Ys).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),h(this,Ys).push({line:o,points:h(this,Dn)}),h(this,io).set(o,0),T(this,Bi,0),this.toSVGPath(),null}getLastElement(){return h(this,Ys).at(-1)}setLastElement(t){return h(this,Ys)?(h(this,Ys).push(t),T(this,Xs,t.line),T(this,Dn,t.points),T(this,Bi,0),{path:{d:this.toSVGPath()}}):h(this,Du).setLastElement(t)}removeLastElement(){if(!h(this,Ys))return h(this,Du).removeLastElement();h(this,Ys).pop(),T(this,sn,"");for(let t=0,e=h(this,Ys).length;t<e;t++){const{line:n,points:i}=h(this,Ys)[t];T(this,Xs,n),T(this,Dn,i),T(this,Bi,0),this.toSVGPath()}return{path:{d:h(this,sn)}}}toSVGPath(){const t=$t.svgRound(h(this,Xs)[4]),e=$t.svgRound(h(this,Xs)[5]);if(h(this,Dn).length===2)return T(this,sn,`${h(this,sn)} M ${t} ${e} Z`),h(this,sn);if(h(this,Dn).length<=6){const i=h(this,sn).lastIndexOf("M");T(this,sn,`${h(this,sn).slice(0,i)} M ${t} ${e}`),T(this,Bi,6)}if(h(this,Dn).length===4){const i=$t.svgRound(h(this,Xs)[10]),r=$t.svgRound(h(this,Xs)[11]);return T(this,sn,`${h(this,sn)} L ${i} ${r}`),T(this,Bi,12),h(this,sn)}const n=[];h(this,Bi)===0&&(n.push(`M ${t} ${e}`),T(this,Bi,6));for(let i=h(this,Bi),r=h(this,Xs).length;i<r;i+=6){const[o,a,l,c,u,d]=h(this,Xs).slice(i,i+6).map($t.svgRound);n.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}return T(this,sn,h(this,sn)+n.join(" ")),T(this,Bi,h(this,Xs).length),h(this,sn)}getOutlines(t,e,n,i){const r=h(this,Ys).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),h(this,Du).build(h(this,Ys),t,e,n,h(this,Mu),h(this,Jd),i),T(this,io,null),T(this,Xs,null),T(this,Ys,null),T(this,sn,null),h(this,Du)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}io=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Mu=new WeakMap,Jd=new WeakMap,Dn=new WeakMap,sn=new WeakMap,Bi=new WeakMap,Du=new WeakMap,Ou=new WeakMap,Lu=new WeakMap,Zd=new WeakSet,ry=function(t,e){return $t._normalizePoint(t,e,h(this,Ou),h(this,Lu),h(this,Mu))};var On,Vm,Hm,yi,ro,oo,Qd,tf,ef,rn,Mo,oM,aM,lM;const hE=class hE extends $t{constructor(){super(...arguments);R(this,rn);R(this,On);R(this,Vm,0);R(this,Hm);R(this,yi);R(this,ro);R(this,oo);R(this,Qd);R(this,tf);R(this,ef)}build(e,n,i,r,o,a,l){T(this,ro,n),T(this,oo,i),T(this,Qd,r),T(this,tf,o),T(this,ef,a),T(this,Hm,l??0),T(this,yi,e),D(this,rn,aM).call(this)}setLastElement(e){return h(this,yi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return h(this,yi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of h(this,yi)){if(e.push(`M${$t.svgRound(n[4])} ${$t.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12){e.push(`L${$t.svgRound(n[10])} ${$t.svgRound(n[11])}`);continue}for(let i=6,r=n.length;i<r;i+=6){const[o,a,l,c,u,d]=n.subarray(i,i+6).map($t.svgRound);e.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}}return e.join("")}serialize([e,n,i,r],o){const a=[],l=[],[c,u,d,f]=D(this,rn,oM).call(this);let m,v,b,y,w,k,M,O,B;switch(h(this,tf)){case 0:B=$t._rescale,m=e,v=n+r,b=i,y=-r,w=e+c*i,k=n+(1-u-f)*r,M=e+(c+d)*i,O=n+(1-u)*r;break;case 90:B=$t._rescaleAndSwap,m=e,v=n,b=i,y=r,w=e+u*i,k=n+c*r,M=e+(u+f)*i,O=n+(c+d)*r;break;case 180:B=$t._rescale,m=e+i,v=n,b=-i,y=r,w=e+(1-c-d)*i,k=n+u*r,M=e+(1-c)*i,O=n+(u+f)*r;break;case 270:B=$t._rescaleAndSwap,m=e+i,v=n+r,b=-i,y=-r,w=e+(1-u-f)*i,k=n+(1-c-d)*r,M=e+(1-u)*i,O=n+(1-c)*r;break}for(const{line:V,points:A}of h(this,yi))a.push(B(V,m,v,b,y,o?new Array(V.length):null)),l.push(B(A,m,v,b,y,o?new Array(A.length):null));return{lines:a,points:l,rect:[w,k,M,O]}}static deserialize(e,n,i,r,o,{paths:{lines:a,points:l},rotation:c,thickness:u}){const d=[];let f,m,v,b,y;switch(c){case 0:y=$t._rescale,f=-e/i,m=n/r+1,v=1/i,b=-1/r;break;case 90:y=$t._rescaleAndSwap,f=-n/r,m=-e/i,v=1/r,b=1/i;break;case 180:y=$t._rescale,f=e/i+1,m=-n/r,v=-1/i,b=1/r;break;case 270:y=$t._rescaleAndSwap,f=n/r+1,m=e/i+1,v=-1/r,b=-1/i;break}if(!a){a=[];for(const k of l){const M=k.length;if(M===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1]]));continue}if(M===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1],NaN,NaN,NaN,NaN,k[2],k[3]]));continue}const O=new Float32Array(3*(M-2));a.push(O);let[B,V,A,S]=k.subarray(0,4);O.set([NaN,NaN,NaN,NaN,B,V],0);for(let I=4;I<M;I+=2){const L=k[I],P=k[I+1];O.set($t.createBezierPoints(B,V,A,S,L,P),(I-2)*3),[B,V,A,S]=[A,S,L,P]}}}for(let k=0,M=a.length;k<M;k++)d.push({line:y(a[k].map(O=>O??NaN),f,m,v,b),points:y(l[k].map(O=>O??NaN),f,m,v,b)});const w=new hE;return w.build(d,i,r,1,c,u,o),w}get box(){return h(this,On)}updateProperty(e,n){return e==="stroke-width"?D(this,rn,lM).call(this,n):null}updateParentDimensions([e,n],i){const[r,o]=D(this,rn,Mo).call(this);T(this,ro,e),T(this,oo,n),T(this,Qd,i);const[a,l]=D(this,rn,Mo).call(this),c=a-r,u=l-o,d=h(this,On);return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateRotation(e){return T(this,Vm,e),{path:{transform:this.rotationTransform}}}get viewBox(){return h(this,On).map($t.svgRound).join(" ")}get defaultProperties(){const[e,n]=h(this,On);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$t.svgRound(e)} ${$t.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=h(this,On);let i=0,r=0,o=0,a=0,l=0,c=0;switch(h(this,Vm)){case 90:r=n/e,o=-e/n,l=e;break;case 180:i=-1,a=-1,l=e,c=n;break;case 270:r=-n/e,o=e/n,c=n;break;default:return""}return`matrix(${i} ${r} ${o} ${a} ${$t.svgRound(l)} ${$t.svgRound(c)})`}getPathResizingSVGProperties([e,n,i,r]){const[o,a]=D(this,rn,Mo).call(this),[l,c,u,d]=h(this,On);if(Math.abs(u-o)<=$t.PRECISION||Math.abs(d-a)<=$t.PRECISION){const y=e+i/2-(l+u/2),w=n+r/2-(c+d/2);return{path:{"transform-origin":`${$t.svgRound(e)} ${$t.svgRound(n)}`,transform:`${this.rotationTransform} translate(${y} ${w})`}}}const f=(i-2*o)/(u-2*o),m=(r-2*a)/(d-2*a),v=u/i,b=d/r;return{path:{"transform-origin":`${$t.svgRound(l)} ${$t.svgRound(c)}`,transform:`${this.rotationTransform} scale(${v} ${b}) translate(${$t.svgRound(o)} ${$t.svgRound(a)}) scale(${f} ${m}) translate(${$t.svgRound(-o)} ${$t.svgRound(-a)})`}}}getPathResizedSVGProperties([e,n,i,r]){const[o,a]=D(this,rn,Mo).call(this),l=h(this,On),[c,u,d,f]=l;if(l[0]=e,l[1]=n,l[2]=i,l[3]=r,Math.abs(d-o)<=$t.PRECISION||Math.abs(f-a)<=$t.PRECISION){const w=e+i/2-(c+d/2),k=n+r/2-(u+f/2);for(const{line:M,points:O}of h(this,yi))$t._translate(M,w,k,M),$t._translate(O,w,k,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$t.svgRound(e)} ${$t.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*o)/(d-2*o),v=(r-2*a)/(f-2*a),b=-m*(c+o)+e+o,y=-v*(u+a)+n+a;if(m!==1||v!==1||b!==0||y!==0)for(const{line:w,points:k}of h(this,yi))$t._rescale(w,b,y,m,v,w),$t._rescale(k,b,y,m,v,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$t.svgRound(e)} ${$t.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[r,o]=i,a=h(this,On),l=e-a[0],c=n-a[1];if(h(this,ro)===r&&h(this,oo)===o)for(const{line:u,points:d}of h(this,yi))$t._translate(u,l,c,u),$t._translate(d,l,c,d);else{const u=h(this,ro)/r,d=h(this,oo)/o;T(this,ro,r),T(this,oo,o);for(const{line:f,points:m}of h(this,yi))$t._rescale(f,l,c,u,d,f),$t._rescale(m,l,c,u,d,m);a[2]*=u,a[3]*=d}return a[0]=e,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${$t.svgRound(e)} ${$t.svgRound(n)}`}}}get defaultSVGProperties(){const e=h(this,On);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${$t.svgRound(e[0])} ${$t.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};On=new WeakMap,Vm=new WeakMap,Hm=new WeakMap,yi=new WeakMap,ro=new WeakMap,oo=new WeakMap,Qd=new WeakMap,tf=new WeakMap,ef=new WeakMap,rn=new WeakSet,Mo=function(e=h(this,ef)){const n=h(this,Hm)+e/2*h(this,Qd);return h(this,tf)%180===0?[n/h(this,ro),n/h(this,oo)]:[n/h(this,oo),n/h(this,ro)]},oM=function(){const[e,n,i,r]=h(this,On),[o,a]=D(this,rn,Mo).call(this,0);return[e+o,n+a,i-2*o,r-2*a]},aM=function(){const e=T(this,On,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of h(this,yi)){if(r.length<=12){for(let l=4,c=r.length;l<c;l+=6){const[u,d]=r.subarray(l,l+2);e[0]=Math.min(e[0],u),e[1]=Math.min(e[1],d),e[2]=Math.max(e[2],u),e[3]=Math.max(e[3],d)}continue}let o=r[4],a=r[5];for(let l=6,c=r.length;l<c;l+=6){const[u,d,f,m,v,b]=r.subarray(l,l+6);Gt.bezierBoundingBox(o,a,u,d,f,m,v,b,e),o=v,a=b}}const[n,i]=D(this,rn,Mo).call(this);e[0]=Math.min(1,Math.max(0,e[0]-n)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+n)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]},lM=function(e){const[n,i]=D(this,rn,Mo).call(this);T(this,ef,e);const[r,o]=D(this,rn,Mo).call(this),[a,l]=[r-n,o-i],c=h(this,On);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};let Ky=hE;var sf;const dE=class dE extends kH{constructor(e){super();R(this,sf);T(this,sf,e),super.updateProperties({fill:"none",stroke:gs._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=h(this,sf).realScale),super.updateSVGProperty(e,n)}clone(){const e=new dE(h(this,sf));return e.updateAll(this),e}};sf=new WeakMap;let J1=dE;var S_,cM;const Vh=class Vh extends q1{constructor(e){super({...e,name:"inkEditor"});R(this,S_);this._willKeepAspectRatio=!0}static initialize(e,n){gs.initialize(e,n),this._defaultDrawingOptions=new J1(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return ge(this,"typesMap",new Map([[we.INK_THICKNESS,"stroke-width"],[we.INK_COLOR,"stroke"],[we.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,r,o){return new IH(e,n,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,r,o,a){return Ky.deserialize(e,n,i,r,o,a)}static async deserialize(e,n,i){let r=null;if(e instanceof LS){const{data:{inkLists:a,rect:l,rotation:c,id:u,color:d,opacity:f,borderStyle:{rawWidth:m},popupRef:v},parent:{page:{pageNumber:b}}}=e;r=e={annotationType:ce.INK,color:Array.from(d),thickness:m,opacity:f,paths:{points:a},boxes:null,pageIndex:b-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:v}}const o=await super.deserialize(e,n,i);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=Vh.getDefaultDrawingOptions({stroke:Gt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,c={annotationType:ce.INK,color:gs._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!D(this,S_,cM).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}};S_=new WeakSet,cM=function(e){const{color:n,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==n[l])||e.thickness!==i||e.opacity!==r||e.pageIndex!==o},ht(Vh,"_type","ink"),ht(Vh,"_editorType",ce.INK),ht(Vh,"_defaultDrawingOptions",null);let Z1=Vh;var ps,nn,Il,oa,Pl,nf,ao,lo,_i,rf,Pe,bp,yp,oy,tA,ay,eA,ly,uM;const Xp=class Xp extends gs{constructor(e){super({...e,name:"stampEditor"});R(this,Pe);R(this,ps,null);R(this,nn,null);R(this,Il,null);R(this,oa,null);R(this,Pl,null);R(this,nf,"");R(this,ao,null);R(this,lo,null);R(this,_i,!1);R(this,rf,!1);T(this,oa,e.bitmapUrl),T(this,Pl,e.bitmapFile)}static initialize(e,n){gs.initialize(e,n)}static get supportedTypes(){return ge(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ge(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(ce.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var e;h(this,nn)&&(T(this,ps,null),this._uiManager.imageManager.deleteId(h(this,nn)),(e=h(this,ao))==null||e.remove(),T(this,ao,null),h(this,lo)&&(clearTimeout(h(this,lo)),T(this,lo,null))),super.remove()}rebuild(){if(!this.parent){h(this,nn)&&D(this,Pe,oy).call(this);return}super.rebuild(),this.div!==null&&(h(this,nn)&&h(this,ao)===null&&D(this,Pe,oy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(h(this,Il)||h(this,ps)||h(this,oa)||h(this,Pl)||h(this,nn))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),h(this,ps)?D(this,Pe,tA).call(this):D(this,Pe,oy).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,n*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;h(this,lo)!==null&&clearTimeout(h(this,lo)),T(this,lo,setTimeout(()=>{T(this,lo,null),D(this,Pe,eA).call(this)},200))}copyCanvas(e,n,i=!1){var m;e||(e=224);const{width:r,height:o}=h(this,ps),a=new Jw;let l=h(this,ps),c=r,u=o,d=null;if(n){if(r>n||o>n){const S=Math.min(n/r,n/o);c=Math.floor(r*S),u=Math.floor(o*S)}d=document.createElement("canvas");const v=d.width=Math.ceil(c*a.sx),b=d.height=Math.ceil(u*a.sy);h(this,_i)||(l=D(this,Pe,ay).call(this,v,b));const y=d.getContext("2d");y.filter=this._uiManager.hcmFilter;let w="white",k="#cfcfd8";this._uiManager.hcmFilter!=="none"?k="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",k="#42414d");const M=15,O=M*a.sx,B=M*a.sy,V=new OffscreenCanvas(O*2,B*2),A=V.getContext("2d");A.fillStyle=w,A.fillRect(0,0,O*2,B*2),A.fillStyle=k,A.fillRect(0,0,O,B),A.fillRect(O,B,O,B),y.fillStyle=y.createPattern(V,"repeat"),y.fillRect(0,0,v,b),y.drawImage(l,0,0,l.width,l.height,0,0,v,b)}let f=null;if(i){let v,b;if(a.symmetric&&l.width<e&&l.height<e)v=l.width,b=l.height;else if(l=h(this,ps),r>e||o>e){const k=Math.min(e/r,e/o);v=Math.floor(r*k),b=Math.floor(o*k),h(this,_i)||(l=D(this,Pe,ay).call(this,v,b))}const w=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,v,b),f={width:v,height:b,data:w.getImageData(0,0,v,b).data}}return{canvas:d,width:c,height:u,imageData:f}}getImageForAltText(){return h(this,ao)}static async deserialize(e,n,i){var b;let r=null;if(e instanceof RR){const{data:{rect:y,rotation:w,id:k,structParent:M,popupRef:O},container:B,parent:{page:{pageNumber:V}}}=e,A=B.querySelector("canvas"),S=i.imageManager.getFromCanvas(B.id,A);A.remove();const I=((b=await n._structTree.getAriaAttributes(`${CS}${k}`))==null?void 0:b.get("aria-label"))||"";r=e={annotationType:ce.STAMP,bitmapId:S.id,bitmap:S.bitmap,pageIndex:V-1,rect:y.slice(0),rotation:w,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:M,popupRef:O}}const o=await super.deserialize(e,n,i),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:d,accessibilityData:f}=e;u&&i.imageManager.isValidId(u)?(T(o,nn,u),l&&T(o,ps,l)):T(o,oa,c),T(o,_i,d);const[m,v]=o.pageDimensions;return o.width=(a[2]-a[0])/m,o.height=(a[3]-a[1])/v,o.annotationElementId=e.id||null,f&&(o.altTextData=f),o._initialData=r,T(o,rf,!!r),o}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:ce.STAMP,bitmapId:h(this,nn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(this,_i),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=D(this,Pe,ly).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=D(this,Pe,uM).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const a=h(this,_i)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(h(this,nn)))n.stamps.set(h(this,nn),{area:a,serialized:i}),i.bitmap=D(this,Pe,ly).call(this,!1);else if(h(this,_i)){const l=n.stamps.get(h(this,nn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=D(this,Pe,ly).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};ps=new WeakMap,nn=new WeakMap,Il=new WeakMap,oa=new WeakMap,Pl=new WeakMap,nf=new WeakMap,ao=new WeakMap,lo=new WeakMap,_i=new WeakMap,rf=new WeakMap,Pe=new WeakSet,bp=function(e,n=!1){if(!e){this.remove();return}T(this,ps,e.bitmap),n||(T(this,nn,e.id),T(this,_i,e.isSvg)),e.file&&T(this,nf,e.file.name),D(this,Pe,tA).call(this)},yp=function(){if(T(this,Il,null),this._uiManager.enableWaiting(!1),!!h(this,ao)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(this,ps)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(this,ps)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},oy=function(){if(h(this,nn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,nn)).then(i=>D(this,Pe,bp).call(this,i,!0)).finally(()=>D(this,Pe,yp).call(this));return}if(h(this,oa)){const i=h(this,oa);T(this,oa,null),this._uiManager.enableWaiting(!0),T(this,Il,this._uiManager.imageManager.getFromUrl(i).then(r=>D(this,Pe,bp).call(this,r)).finally(()=>D(this,Pe,yp).call(this)));return}if(h(this,Pl)){const i=h(this,Pl);T(this,Pl,null),this._uiManager.enableWaiting(!0),T(this,Il,this._uiManager.imageManager.getFromFile(i).then(r=>D(this,Pe,bp).call(this,r)).finally(()=>D(this,Pe,yp).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Xp.supportedTypesStr;const n=this._uiManager._signal;T(this,Il,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,Pe,bp).call(this,r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>D(this,Pe,yp).call(this))),e.click()},tA=function(){var d;const{div:e}=this;let{width:n,height:i}=h(this,ps);const[r,o]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*o;else if(n>a*r||i>a*o){const f=Math.min(a*r/n,a*o/i);n*=f,i*=f}const[l,c]=this.parentDimensions;this.setDims(n*l/r,i*c/o),this._uiManager.enableWaiting(!1);const u=T(this,ao,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=n/r,this.height=i/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),D(this,Pe,eA).call(this),h(this,rf)||(this.parent.addUndoableEditor(this),T(this,rf,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,nf)&&u.setAttribute("aria-label",h(this,nf))},ay=function(e,n){const{width:i,height:r}=h(this,ps);let o=i,a=r,l=h(this,ps);for(;o>2*e||a>2*n;){const c=o,u=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,c,u,0,0,o,a),l=d.transferToImageBitmap()}return l},eA=function(){const[e,n]=this.parentDimensions,{width:i,height:r}=this,o=new Jw,a=Math.ceil(i*e*o.sx),l=Math.ceil(r*n*o.sy),c=h(this,ao);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const u=h(this,_i)?h(this,ps):D(this,Pe,ay).call(this,a,l),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,a,l)},ly=function(e){if(e){if(h(this,_i)){const r=this._uiManager.imageManager.getSvgUrl(h(this,nn));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=h(this,ps),n.getContext("2d").drawImage(h(this,ps),0,0),n.toDataURL()}if(h(this,_i)){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*Yl.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Yl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(h(this,ps),0,0,h(this,ps).width,h(this,ps).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(h(this,ps))},uM=function(e){var a;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},ht(Xp,"_type","stamp"),ht(Xp,"_editorType",ce.STAMP);let Q1=Xp;var Nu,of,co,Rl,aa,$i,Ml,af,Fu,ur,la,mn,ca,Wt,Dl,is,hM,Hr,nA,iA,cy;const Zi=class Zi{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){R(this,is);R(this,Nu);R(this,of,!1);R(this,co,null);R(this,Rl,null);R(this,aa,null);R(this,$i,new Map);R(this,Ml,!1);R(this,af,!1);R(this,Fu,!1);R(this,ur,null);R(this,la,null);R(this,mn,null);R(this,ca,null);R(this,Wt);const d=[...h(Zi,Dl).values()];if(!Zi._initialized){Zi._initialized=!0;for(const f of d)f.initialize(u,t)}t.registerEditorTypes(d),T(this,Wt,t),this.pageIndex=e,this.div=n,T(this,Nu,r),T(this,co,o),this.viewport=c,T(this,mn,l),this.drawLayer=a,this._structTree=i,h(this,Wt).addLayer(this)}get isEmpty(){return h(this,$i).size===0}get isInvisible(){return this.isEmpty&&h(this,Wt).getMode()===ce.NONE}updateToolbar(t){h(this,Wt).updateToolbar(t)}updateMode(t=h(this,Wt).getMode()){switch(D(this,is,cy).call(this),t){case ce.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ce.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ce.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of h(Zi,Dl).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=h(this,mn))==null?void 0:e.div)}setEditingState(t){h(this,Wt).setEditingState(t)}addCommands(t){h(this,Wt).addCommands(t)}cleanUndoStack(t){h(this,Wt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=h(this,co))==null||e.div.classList.toggle("disabled",!t)}async enable(){T(this,Fu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of h(this,$i).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(h(this,Wt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!h(this,co)){T(this,Fu,!1);return}const e=h(this,co).getEditableAnnotations();for(const n of e){if(n.hide(),h(this,Wt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}T(this,Fu,!1)}disable(){var i;T(this,af,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of h(this,$i).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(h(this,co)){const r=h(this,co).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(h(this,Wt).isDeletedAnnotationElement(a))continue;let l=e.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=t.get(a),l&&(h(this,Wt).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}D(this,is,cy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of h(Zi,Dl).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),T(this,af,!1)}getEditableAnnotation(t){var e;return((e=h(this,co))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){h(this,Wt).getActive()!==t&&h(this,Wt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=h(this,mn))!=null&&t.div&&!h(this,ca)){T(this,ca,new AbortController);const e=h(this,Wt).combinedSignal(h(this,ca));h(this,mn).div.addEventListener("pointerdown",D(this,is,hM).bind(this),{signal:e}),h(this,mn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=h(this,mn))!=null&&t.div&&h(this,ca)&&(h(this,ca).abort(),T(this,ca,null),h(this,mn).div.classList.remove("highlighting"))}enableClick(){if(h(this,Rl))return;T(this,Rl,new AbortController);const t=h(this,Wt).combinedSignal(h(this,Rl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=h(this,Rl))==null||t.abort(),T(this,Rl,null)}attach(t){h(this,$i).set(t.id,t);const{annotationElementId:e}=t;e&&h(this,Wt).isDeletedAnnotationElement(e)&&h(this,Wt).removeDeletedAnnotationElement(t)}detach(t){var e;h(this,$i).delete(t.id),(e=h(this,Nu))==null||e.removePointerInTextLayer(t.contentDiv),!h(this,af)&&t.annotationElementId&&h(this,Wt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),h(this,Wt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(h(this,Wt).addDeletedAnnotationElement(t.annotationElementId),gs.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),h(this,Wt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!h(this,Fu)),h(this,Wt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!h(this,aa)&&(t._focusEventsAllowed=!1,T(this,aa,setTimeout(()=>{T(this,aa,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:h(this,Wt)._signal}),e.focus())},0))),t._structTreeParentId=(n=h(this,Nu))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return h(this,Wt).getId()}combinedSignal(t){return h(this,Wt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=h(this,is,Hr))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){h(this,Wt).updateToolbar(t),h(this,Wt).updateMode(t);const{offsetX:n,offsetY:i}=D(this,is,iA).call(this),r=this.getNextId(),o=D(this,is,nA).call(this,{parent:this,id:r,x:n,y:i,uiManager:h(this,Wt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=h(Zi,Dl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,h(this,Wt)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),r=D(this,is,nA).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:h(this,Wt),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(D(this,is,iA).call(this),!0)}setSelected(t){h(this,Wt).setSelected(t)}toggleSelected(t){h(this,Wt).toggleSelected(t)}unselect(t){h(this,Wt).unselect(t)}pointerup(t){var n;const{isMac:e}=Vn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&h(this,Ml)&&(T(this,Ml,!1),!((n=h(this,is,Hr))!=null&&n.isDrawer&&h(this,is,Hr).supportMultipleDrawings))){if(!h(this,of)){T(this,of,!0);return}if(h(this,Wt).getMode()===ce.STAMP){h(this,Wt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var i;if(h(this,Wt).getMode()===ce.HIGHLIGHT&&this.enableTextSelection(),h(this,Ml)){T(this,Ml,!1);return}const{isMac:e}=Vn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(T(this,Ml,!0),(i=h(this,is,Hr))!=null&&i.isDrawer){this.startDrawingSession(t);return}const n=h(this,Wt).getActive();T(this,of,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus(),h(this,ur)){h(this,is,Hr).startDrawing(this,h(this,Wt),!1,t);return}h(this,Wt).setCurrentDrawingSession(this),T(this,ur,new AbortController);const e=h(this,Wt).combinedSignal(h(this,ur));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(T(this,la,null),this.commitOrRemove())},{signal:e}),h(this,is,Hr).startDrawing(this,h(this,Wt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&T(this,la,e);return}h(this,la)&&setTimeout(()=>{var e;(e=h(this,la))==null||e.focus(),T(this,la,null)},0)}endDrawingSession(t=!1){return h(this,ur)?(h(this,Wt).setCurrentDrawingSession(null),h(this,ur).abort(),T(this,ur,null),T(this,la,null),h(this,is,Hr).endDrawing(t)):null}findNewParent(t,e,n){const i=h(this,Wt).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return h(this,ur)?(this.endDrawingSession(),!0):!1}onScaleChanging(){h(this,ur)&&h(this,is,Hr).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=h(this,Wt).getActive())==null?void 0:t.parent)===this&&(h(this,Wt).commitOrRemove(),h(this,Wt).setActiveEditor(null)),h(this,aa)&&(clearTimeout(h(this,aa)),T(this,aa,null));for(const n of h(this,$i).values())(e=h(this,Nu))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,h(this,$i).clear(),h(this,Wt).removeLayer(this)}render({viewport:t}){this.viewport=t,th(this.div,t);for(const e of h(this,Wt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){h(this,Wt).commitOrRemove(),D(this,is,cy).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,th(this.div,{rotation:n}),e!==n)for(const i of h(this,$i).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return h(this,Wt).viewParameters.realScale}};Nu=new WeakMap,of=new WeakMap,co=new WeakMap,Rl=new WeakMap,aa=new WeakMap,$i=new WeakMap,Ml=new WeakMap,af=new WeakMap,Fu=new WeakMap,ur=new WeakMap,la=new WeakMap,mn=new WeakMap,ca=new WeakMap,Wt=new WeakMap,Dl=new WeakMap,is=new WeakSet,hM=function(t){h(this,Wt).unselectAll();const{target:e}=t;if(e===h(this,mn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&h(this,mn).div.contains(e)){const{isMac:n}=Vn.platform;if(t.button!==0||t.ctrlKey&&n)return;h(this,Wt).showAllEditors("highlight",!0,!0),h(this,mn).div.classList.add("free"),this.toggleDrawing(),Yy.startHighlighting(this,h(this,Wt).direction==="ltr",{target:h(this,mn).div,x:t.x,y:t.y}),h(this,mn).div.addEventListener("pointerup",()=>{h(this,mn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:h(this,Wt)._signal}),t.preventDefault()}},Hr=function(){return h(Zi,Dl).get(h(this,Wt).getMode())},nA=function(t){const e=h(this,is,Hr);return e?new e.prototype.constructor(t):null},iA=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+n),l=Math.min(window.innerHeight,e+i),c=(r+a)/2-t,u=(o+l)/2-e,[d,f]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:d,offsetY:f}},cy=function(){for(const t of h(this,$i).values())t.isEmpty()&&t.remove()},ht(Zi,"_initialized",!1),R(Zi,Dl,new Map([F1,Z1,Q1,Yy].map(t=>[t._editorType,t])));let sA=Zi;var hr,jm,Ln,Bu,E_,dM,yo,oA,fM,aA;const dn=class dn{constructor({pageIndex:t}){R(this,yo);R(this,hr,null);R(this,jm,0);R(this,Ln,new Map);R(this,Bu,new Map);this.pageIndex=t}setParent(t){if(!h(this,hr)){T(this,hr,t);return}if(h(this,hr)!==t){if(h(this,Ln).size>0)for(const e of h(this,Ln).values())e.remove(),t.append(e);T(this,hr,t)}}static get _svgFactory(){return ge(this,"_svgFactory",new OS)}draw(t,e=!1,n=!1){const i=In(this,jm)._++,r=D(this,yo,oA).call(this),o=dn._svgFactory.createElement("defs");r.append(o);const a=dn._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&h(this,Bu).set(i,a);const c=n?D(this,yo,fM).call(this,o,l):null,u=dn._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(r,t),h(this,Ln).set(i,r),{id:i,clipPathId:`url(#${c})`}}drawOutline(t,e){const n=In(this,jm)._++,i=D(this,yo,oA).call(this),r=dn._svgFactory.createElement("defs");i.append(r);const o=dn._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const d=dn._svgFactory.createElement("mask");r.append(d),l=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=dn._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=dn._svgFactory.createElement("use");d.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=dn._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,t),h(this,Ln).set(n,i),n}finalizeDraw(t,e){h(this,Bu).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var l;if(!e)return;const{root:n,bbox:i,rootClass:r,path:o}=e,a=typeof t=="number"?h(this,Ln).get(t):t;if(a){if(n&&D(this,yo,aA).call(this,a,n),i&&D(l=dn,E_,dM).call(l,a,i),r){const{classList:c}=a;for(const[u,d]of Object.entries(r))c.toggle(u,d)}if(o){const u=a.firstChild.firstChild;D(this,yo,aA).call(this,u,o)}}}updateParent(t,e){if(e===this)return;const n=h(this,Ln).get(t);n&&(h(e,hr).append(n),h(this,Ln).delete(t),h(e,Ln).set(t,n))}remove(t){h(this,Bu).delete(t),h(this,hr)!==null&&(h(this,Ln).get(t).remove(),h(this,Ln).delete(t))}destroy(){T(this,hr,null);for(const t of h(this,Ln).values())t.remove();h(this,Ln).clear(),h(this,Bu).clear()}};hr=new WeakMap,jm=new WeakMap,Ln=new WeakMap,Bu=new WeakMap,E_=new WeakSet,dM=function(t,[e,n,i,r]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},yo=new WeakSet,oA=function(){const t=dn._svgFactory.create(1,1,!0);return h(this,hr).append(t),t.setAttribute("aria-hidden",!0),t},fM=function(t,e){const n=dn._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=dn._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},aA=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},R(dn,E_);let rA=dn;globalThis.pdfjsTestingUtils={HighlightOutliner:$1};se.AbortException;se.AnnotationEditorLayer;se.AnnotationEditorParamsType;se.AnnotationEditorType;se.AnnotationEditorUIManager;se.AnnotationLayer;se.AnnotationMode;se.ColorPicker;se.DOMSVGFactory;se.DrawLayer;se.FeatureTest;var pM=se.GlobalWorkerOptions;se.ImageKind;se.InvalidPDFException;se.MissingPDFException;se.OPS;se.OutputScale;se.PDFDataRangeTransport;se.PDFDateString;se.PDFWorker;se.PasswordResponses;se.PermissionFlag;se.PixelsPerInch;se.RenderingCancelledException;se.TextLayer;se.TouchManager;se.UnexpectedResponseException;se.Util;se.VerbosityLevel;se.XfaLayer;se.build;se.createValidAbsoluteUrl;se.fetchData;var Vp=se.getDocument;se.getFilenameFromUrl;se.getPdfFilenameFromUrl;se.getXfaPageViewport;se.isDataScheme;se.isPdfFile;se.noContextMenu;se.normalizeUnicode;se.setLayerDimensions;se.shadow;se.stopEvent;se.version;function nh(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`}const HT=s=>typeof structuredClone=="function"?structuredClone(s):JSON.parse(JSON.stringify(s));class PH{constructor(){this.pendingMutations=new Map}begin(t,e){const n=nh(),i=nh(),r=HT(t),o={...e,id:n,correlationId:i},a=o.apply(t);return this.pendingMutations.set(n,{mutation:o,snapshot:r}),{nextState:a,mutation:o}}confirm(t,e,n){return this.pendingMutations.delete(e),this.reapply(n)}reject(t,e){const n=this.pendingMutations.get(e);return n?(this.pendingMutations.delete(e),n.snapshot):t}reconcile(t){return this.reapply(t)}reapply(t){let e=HT(t);for(const{mutation:n}of this.pendingMutations.values())e=n.apply(e);return e}}async function t0(s,t=nh()){const e={...s.headers??{},"x-correlation-id":t};return{data:(await ls.request({...s,headers:e})).data,correlationId:t}}async function RH(s){return(await ls.get(`/sign/${s}`)).data}async function gM(s,t,e,n){return await t0({method:"POST",url:`/docs/${s}/signing-sessions`,headers:{"x-signing-token":t},data:{clientMutationId:e}},n)}async function mM(s){return await t0({method:"POST",url:`/docs/${s.docId}/manifest`,headers:{"x-signing-token":s.signingToken},data:{signingSessionId:s.signingSessionId,fields:s.fields}},s.correlationId)}async function vM(s){return await t0({method:"POST",url:`/docs/${s.docId}/signature`,headers:{"x-signing-token":s.signingToken},data:{signingSessionId:s.signingSessionId,type:s.type,data:s.data}},s.correlationId)}async function bM(s){return await t0({method:"POST",url:`/docs/${s.docId}/apply-signature`,headers:{"x-signing-token":s.signingToken},data:{signingSessionId:s.signingSessionId}},s.correlationId)}const MH={class:"sign-page"},DH={class:"page-header"},OH={key:0},LH={key:1,class:"muted"},NH={key:0,class:"doc-card"},FH={class:"doc-row"},BH={class:"doc-row"},$H={class:"doc-row"},UH=["href"],VH={key:1,class:"sign-body"},HH={class:"viewer-card"},jH={class:"viewer-toolbar"},zH={class:"zoom-controls"},WH={class:"status-meta"},GH={key:0,class:"pdf-error"},qH=["href"],XH=["onDrop"],YH={class:"overlay"},KH=["onClick"],JH={class:"field-label"},ZH={key:0,class:"signature-render"},QH=["src"],t8=["onClick"],e8={class:"signature-panel"},s8={class:"signature-card"},n8={class:"signature-tabs"},i8={class:"signature-area"},r8={key:0,class:"draw-wrap"},o8={key:0,class:"signature-placeholder"},a8={key:1,class:"type-wrap"},l8={key:2,class:"upload-wrap"},c8={class:"upload-btn"},u8={key:0,class:"upload-preview"},h8=["src"],d8={class:"signature-palette"},f8=["draggable"],p8=["src"],g8={key:1},m8={class:"signature-actions"},v8={class:"action-buttons"},b8=["disabled"],y8=["disabled"],_8={key:0,class:"error"},qf="Helvetica, Arial, sans-serif",w8=ks({__name:"SignDocumentPage",setup(s){pM.workerSrc=new URL("/assets/pdf.worker.min-BQvJjbUQ.mjs",import.meta.url).toString();const t=V2(),e=St(()=>String(t.params.token??"")),n=ct(null),i=ct(null),r=ct(null),o=ct([]),a=ct(""),l=ct(null),c=ct(1),u=ct(0),d=ct({}),f=ct(null),m=new Map,v=new Map,b=ct(""),y=ct(0);let w=Promise.resolve();const k=ct("draw"),M=ct(""),O=ct(""),B=ct(!1),V=ct(!1),A=ct(null),S=ct([]),I=ct(""),L=ct(null);let P=null,$=null;const N=ct({}),_t=ct(null),xt=new PH,tt=St(()=>e.value?`esigning:signature-placements:${e.value}`:""),X=Q=>Q.type==="SIGNATURE"||Q.type==="INITIAL",nt=Q=>Q.startsWith("data:image"),U=Q=>{if(!Q.options||typeof Q.options!="object")return null;const et=Q.options.signature;return!et||typeof et!="object"?null:et},it=St(()=>o.value.filter(X)),vt=St(()=>it.value.filter(Q=>!N.value[Q.id]).length),j=St(()=>Object.keys(N.value).length),Z=St(()=>{var et,gt;if(k.value==="draw")return I.value?{type:"DRAWN",dataUrl:I.value,path:(et=L.value)==null?void 0:et.path,viewBox:(gt=L.value)==null?void 0:gt.viewBox}:null;if(k.value==="upload")return O.value?{type:"UPLOADED",dataUrl:O.value}:null;const Q=M.value.trim();return Q?{type:"TYPED",text:Q,font:qf}:null}),dt=Q=>{if(!Q.options||typeof Q.options!="object")return[];const et=Q.options.choices;return Array.isArray(et)?et.filter(gt=>typeof gt=="string"&&gt.trim().length>0):[]},Ft=Q=>{var Bt;const et=(Bt=Q.value)==null?void 0:Bt.trim();if(!et)return null;const gt=U(Q);if(nt(et)){const ne={type:(gt==null?void 0:gt.mode)==="draw"?"DRAWN":"UPLOADED",dataUrl:et};return Pt(Q,ne)}const Ct={type:"TYPED",text:et,font:(gt==null?void 0:gt.font)??qf};return Pt(Q,Ct)},kt=Q=>{var gt,Ct,Bt,Dt,ne;if(Q.value&&Q.value.trim())return Q.value;const et=((gt=r.value)==null?void 0:gt.name)??((Ct=r.value)==null?void 0:Ct.email)??"Signed";switch(Q.type){case"DATE":return new Date().toISOString().slice(0,10);case"EMAIL":return((Bt=r.value)==null?void 0:Bt.email)??et;case"FULL_NAME":return((Dt=r.value)==null?void 0:Dt.name)??((ne=r.value)==null?void 0:ne.email)??et;case"CHECKBOX":return"checked";case"DROPDOWN":case"RADIO":return dt(Q)[0]??et;case"COMPANY":case"JOB_TITLE":case"TEXT":return et;case"IMAGE":case"ATTACHMENT":return Q.value??"Attached";default:return et}},Y=Q=>(Q==null?void 0:Q.signature.dataUrl)??(Q==null?void 0:Q.signature.text)??"",bt=Q=>{const et=Q.trim();if(!et)return"";const Ct=(et.includes("@")?et.split("@")[0]:et).split(/[^A-Za-z0-9]+/).filter(Boolean);return Ct.length===0?et.slice(0,2).toUpperCase():Ct.length===1?Ct[0].slice(0,2).toUpperCase():Ct.map(Bt=>Bt[0]).join("").slice(0,2).toUpperCase()},At=()=>{var et,gt;const Q=M.value.trim()||((et=r.value)==null?void 0:et.name)||((gt=r.value)==null?void 0:gt.email)||"";return bt(Q)||"IN"},Pt=(Q,et)=>{var Dt,ne,Me;if(Q.type!=="INITIAL")return et;const gt=et.text??M.value.trim()??((Dt=r.value)==null?void 0:Dt.name)??((ne=r.value)==null?void 0:ne.email)??"",Ct=bt(gt)||At(),Bt=(Me=U(Q))==null?void 0:Me.font;return{type:"TYPED",text:Ct,font:et.font??Bt??qf}},Yt=(Q,et)=>{var gt,Ct;if(!et)return"";if(Q.type==="INITIAL"){const Bt=et.signature.text??M.value.trim()??((gt=r.value)==null?void 0:gt.name)??((Ct=r.value)==null?void 0:Ct.email)??"";return bt(Bt)||At()}return Y(et)},H=()=>{var Bt,Dt,ne,Me;const Q=o.value.find(us=>us.type==="SIGNATURE"&&N.value[us.id]),gt=(Q?(Bt=N.value[Q.id])==null?void 0:Bt.signature:void 0)??((Dt=Object.values(N.value)[0])==null?void 0:Dt.signature)??Z.value;return gt!=null&&gt.dataUrl?{type:gt.type,data:gt.dataUrl}:gt!=null&&gt.text?{type:"TYPED",data:gt.text}:{type:"TYPED",data:M.value.trim()||((ne=r.value)==null?void 0:ne.name)||((Me=r.value)==null?void 0:Me.email)||"Signed"}},z=St(()=>!i.value||!n.value?!1:vt.value===0),J=Q=>o.value.filter(et=>et.page===Q),rt=Q=>Math.min(1,Math.max(0,Q)),ft=Q=>{if(!Q||typeof Q!="object")return null;const et=Q;if(![et.x,et.y,et.width,et.height].every(Ct=>typeof Ct=="number"&&Number.isFinite(Ct)))return null;const gt={x:et.x,y:et.y,width:et.width,height:et.height};return gt.x<0||gt.y<0||gt.width<=0||gt.height<=0?null:gt},ut=(Q,et)=>{const gt=et.width||1,Ct=et.height||1;return{x:rt(Q.x/gt),y:rt((Ct-Q.y-Q.height)/Ct),width:rt(Q.width/gt),height:rt(Q.height/Ct)}},Et=(Q,et)=>{var Ct;return ft((Ct=Q.options)==null?void 0:Ct.normalized)??ut(Q,et)},yt=(Q,et)=>{const gt=d.value[et];if(!gt)return{};const Ct=Et(Q,gt),Bt=gt.width*c.value,Dt=gt.height*c.value;return{top:`${Ct.y*Dt}px`,left:`${Ct.x*Bt}px`,width:`${Ct.width*Bt}px`,height:`${Ct.height*Dt}px`}},wt=Q=>[X(Q)?"signature":"info",N.value[Q.id]?"filled":""],pt=Q=>Q.label||Q.type.replace("_"," "),Ut=Q=>{var Ct,Bt;const et=(Ct=N.value[Q.id])==null?void 0:Ct.signature.font,gt=(Bt=U(Q))==null?void 0:Bt.font;return{fontSize:`${Math.min(18,Q.height)*c.value}px`,fontFamily:et??gt??qf}},It=Q=>et=>{et&&m.set(Q,et)},Tt=Q=>et=>{et&&v.set(Q,et)},zt=(Q,et)=>Q.x>=et.x&&Q.x<=et.x+et.width&&Q.y>=et.y&&Q.y<=et.y+et.height,Ht=(Q,et)=>{const gt=et??Z.value;if(!gt||!X(Q))return;const Ct=d.value[Q.page];if(!Ct)return;const Bt=Et(Q,Ct),Dt=Pt(Q,gt);N.value={...N.value,[Q.id]:{fieldId:Q.id,page:Q.page,normalized:Bt,signature:{...Dt}}}},Lt=Q=>{!Z.value||!X(Q)||Ht(Q)},ee=Q=>{const et={...N.value};delete et[Q],N.value=et},$e=()=>{N.value={},tt.value&&localStorage.removeItem(tt.value)},he=()=>{if(!tt.value)return;const Q=Object.values(N.value);localStorage.setItem(tt.value,JSON.stringify(Q))},cs=()=>{if(!tt.value)return;const Q=localStorage.getItem(tt.value);if(Q)try{const et=JSON.parse(Q),gt=new Set(o.value.map(Dt=>Dt.id)),Ct=new Map(o.value.map(Dt=>[Dt.id,Dt])),Bt={};et.forEach(Dt=>{if(!Dt||!gt.has(Dt.fieldId)||!Dt.normalized||!Dt.signature)return;const ne=Ct.get(Dt.fieldId),Me=ne?Pt(ne,Dt.signature):Dt.signature;Bt[Dt.fieldId]={...Dt,signature:Me}}),N.value=Bt}catch{N.value={}}},ke=()=>{if(!o.value.length)return;const Q={...N.value};for(const et of o.value){if(!X(et)||Q[et.id])continue;const gt=Ft(et);if(!gt)continue;const Ct=d.value[et.page];Ct&&(Q[et.id]={fieldId:et.id,page:et.page,normalized:Et(et,Ct),signature:{...gt}})}N.value=Q},Re=(Q,et)=>{const gt=_t.value??Z.value;if(!gt)return;const Ct=m.get(et),Bt=d.value[et];if(!Ct||!Bt)return;const Dt=Ct.getBoundingClientRect(),ne=Bt.width*c.value,Me=Bt.height*c.value,us=Math.max(0,Q.clientX-Dt.left),Ae=Math.max(0,Q.clientY-Dt.top),ic={x:us/ne,y:Ae/Me},rc=J(et).find(ai=>X(ai)&&zt(ic,Et(ai,Bt)));rc&&Ht(rc,gt),_t.value=null},Is=Q=>{var et;Z.value&&(_t.value=Z.value,(et=Q.dataTransfer)==null||et.setData("text/plain","signature"))},We=()=>{_t.value=null},_s=async()=>{if(e.value)try{n.value=await RH(e.value),r.value=n.value.signer,i.value={id:n.value.document.id,title:n.value.document.title,status:n.value.document.status,fileUrl:n.value.document.fileUrl,version:1},o.value=n.value.fields,await da(),await Yi(),cs(),ke()}catch(Q){a.value=Q instanceof Error?Q.message:"Unable to load signing session."}},kn=async()=>{if(!i.value||!n.value||!z.value)return;a.value="";const Q=xt.begin(i.value,{description:"signature-applied",apply:et=>({...et,status:"SIGNED"})});i.value=Q.nextState;try{const et=nh(),gt=Q.mutation.correlationId,Ct=await gM(i.value.id,e.value,et,gt),Bt=n.value.fields.map(Me=>{if(X(Me)){const us=N.value[Me.id];return{fieldId:Me.id,value:Yt(Me,us)}}return{fieldId:Me.id,value:kt(Me)}});await mM({docId:i.value.id,signingToken:e.value,signingSessionId:Ct.data.signingSessionId,fields:Bt,correlationId:gt});const Dt=H();await vM({docId:i.value.id,signingToken:e.value,signingSessionId:Ct.data.signingSessionId,type:Dt.type,data:Dt.data,correlationId:gt});const ne=await bM({docId:i.value.id,signingToken:e.value,signingSessionId:Ct.data.signingSessionId,correlationId:gt});i.value=xt.confirm(i.value,Q.mutation.id,{...i.value,status:ne.data.status,version:ne.data.documentVersion}),$e()}catch(et){i.value=xt.reject(i.value,Q.mutation.id),a.value=et instanceof Error?et.message:"Unable to apply signature."}},Wn=()=>getComputedStyle(document.documentElement).getPropertyValue("--ink-strong").trim()||"#0f172a",Rt=()=>{if(!A.value||!P)return;const Q=A.value.getBoundingClientRect();P.clearRect(0,0,A.value.width,A.value.height),P.beginPath(),S.value.forEach(et=>{et.forEach((gt,Ct)=>{const Bt=gt.x*Q.width,Dt=gt.y*Q.height;Ct===0?P==null||P.moveTo(Bt,Dt):P==null||P.lineTo(Bt,Dt)})}),P.stroke(),B.value=S.value.some(et=>et.length>0)},qt=()=>{if(!A.value)return;const Q=A.value,et=window.devicePixelRatio||1,{width:gt,height:Ct}=Q.getBoundingClientRect();Q.width=Math.max(1,Math.floor(gt*et)),Q.height=Math.max(1,Math.floor(Ct*et)),P=Q.getContext("2d"),P&&(P.setTransform(et,0,0,et,0,0),P.lineWidth=2.2,P.lineCap="round",P.lineJoin="round",P.strokeStyle=Wn(),Rt())},me=()=>{!A.value||!P||P.clearRect(0,0,A.value.width,A.value.height)},Zs=()=>{if(!A.value)return"";const Q=A.value,{width:et,height:gt}=Q.getBoundingClientRect(),Ct=2,Bt=document.createElement("canvas");Bt.width=Math.max(1,Math.floor(et*Ct)),Bt.height=Math.max(1,Math.floor(gt*Ct));const Dt=Bt.getContext("2d");return Dt?(Dt.scale(Ct,Ct),Dt.drawImage(Q,0,0,et,gt),Bt.toDataURL("image/png")):Q.toDataURL("image/png")},an=()=>{const Q=S.value.filter(Bt=>Bt.length>0);if(Q.length===0)return null;const et=600,gt=200;return{path:Q.map(Bt=>{const[Dt,...ne]=Bt;let Me=`M ${Dt.x*et} ${Dt.y*gt}`;return ne.forEach(us=>{Me+=` L ${us.x*et} ${us.y*gt}`}),Me}).join(" "),viewBox:`0 0 ${et} ${gt}`}},oi=Q=>{if(k.value!=="draw"||!A.value||!P)return;V.value=!0,P.strokeStyle=Wn(),A.value.setPointerCapture(Q.pointerId);const et=A.value.getBoundingClientRect(),gt=Q.clientX-et.left,Ct=Q.clientY-et.top;$=[],S.value=[...S.value,$],$.push({x:gt/et.width,y:Ct/et.height}),P.beginPath(),P.moveTo(gt,Ct)},nc=Q=>{if(!V.value||k.value!=="draw"||!A.value||!P||!$)return;const et=A.value.getBoundingClientRect(),gt=Q.clientX-et.left,Ct=Q.clientY-et.top;$.push({x:gt/et.width,y:Ct/et.height}),P.lineTo(gt,Ct),P.stroke(),B.value=!0},Ha=Q=>{var et;!V.value||!P||(P.closePath(),V.value=!1,Q&&((et=A.value)!=null&&et.hasPointerCapture(Q.pointerId))&&A.value.releasePointerCapture(Q.pointerId),$=null,B.value&&(I.value=Zs(),L.value=an()))},ch=()=>{k.value==="draw"?(me(),B.value=!1,I.value="",S.value=[],L.value=null):k.value==="upload"?O.value="":M.value=""},Dr=Q=>{var Bt;const et=Q.target,gt=(Bt=et.files)==null?void 0:Bt[0];if(!gt)return;const Ct=new FileReader;Ct.onload=()=>{typeof Ct.result=="string"&&(O.value=Ct.result)},Ct.readAsDataURL(gt),et.value=""},Yi=async()=>{var et,gt,Ct;const Q=y.value+1;y.value=Q,b.value="";try{if(!((et=i.value)!=null&&et.fileUrl))return;let Bt=null;try{const Dt=await fetch(i.value.fileUrl);if(!Dt.ok)throw new Error("Preview unavailable");const ne=await Dt.arrayBuffer();if(Q!==y.value)return;Bt=await Vp({data:ne}).promise}catch{Bt=await Vp(i.value.fileUrl).promise}if(Q!==y.value)return;(gt=l.value)==null||gt.destroy(),l.value=Bt,u.value=Bt.numPages,d.value={},await wo(Q)}catch{if(Q!==y.value)return;(Ct=l.value)==null||Ct.destroy(),l.value=null,u.value=0,d.value={},b.value="Unable to load the PDF preview. Please check access permissions."}},ws=async(Q=y.value)=>{const et=l.value;if(et)for(let gt=1;gt<=et.numPages;gt+=1){if(Q!==y.value)return;const Ct=await et.getPage(gt),Bt=Ct.getViewport({scale:1});d.value={...d.value,[gt]:{width:Bt.width,height:Bt.height}};const Dt=v.get(gt);if(!Dt)continue;const ne=window.devicePixelRatio||1,Me=Ct.getViewport({scale:c.value}),us=Ct.getViewport({scale:c.value*ne});Dt.width=us.width,Dt.height=us.height,Dt.style.width=`${Me.width}px`,Dt.style.height=`${Me.height}px`;const Ae=Dt.getContext("2d");Ae&&await Ct.render({canvasContext:Ae,viewport:us}).promise}},wo=(Q=y.value)=>(w=w.catch(()=>{}).then(()=>ws(Q)),w),Ii=async()=>{c.value=Math.min(2,c.value+.1),await wo()},Ao=async()=>{c.value=Math.max(.6,c.value-.1),await wo()};return bs(c,()=>{wo()}),bs(k,()=>{k.value==="draw"&&requestAnimationFrame(()=>qt())}),bs(Z,Q=>{if(!Q||j.value===0)return;const et=new Map(o.value.map(Ct=>[Ct.id,Ct])),gt={};Object.entries(N.value).forEach(([Ct,Bt])=>{const Dt=et.get(Ct),ne=Dt?Pt(Dt,Q):Q;gt[Ct]={...Bt,signature:{...ne}}}),N.value=gt}),bs(N,()=>he(),{deep:!0}),Rr(async()=>{await _s(),requestAnimationFrame(()=>qt()),window.addEventListener("resize",qt)}),tc(()=>{var Q;window.removeEventListener("resize",qt),y.value+=1,(Q=l.value)==null||Q.destroy(),l.value=null}),(Q,et)=>{var gt,Ct,Bt;return G(),q("div",MH,[g("section",DH,[et[5]||(et[5]=g("h2",null,"Sign Document",-1)),i.value?(G(),q("p",OH,ot(i.value.title),1)):(G(),q("p",LH,"Loading document..."))]),i.value?(G(),q("section",NH,[g("div",FH,[et[6]||(et[6]=g("span",null,"Status",-1)),g("strong",null,ot(i.value.status),1)]),g("div",BH,[et[7]||(et[7]=g("span",null,"Signer",-1)),g("strong",null,ot((gt=r.value)==null?void 0:gt.email),1)]),g("div",$H,[et[8]||(et[8]=g("span",null,"File",-1)),g("a",{href:i.value.fileUrl,target:"_blank",rel:"noreferrer"},"Preview",8,UH)])])):Ot("",!0),i.value?(G(),q("section",VH,[g("div",HH,[g("div",jH,[g("div",zH,[g("button",{class:"icon-btn",type:"button",onClick:Ao},"-"),g("span",null,ot(Math.round(c.value*100))+"%",1),g("button",{class:"icon-btn",type:"button",onClick:Ii},"+")]),g("div",WH,[g("span",{class:ie(["status-pill",vt.value?"warning":"success"])},ot(vt.value)+" signature"+ot(vt.value===1?"":"s")+" left ",3)])]),g("div",{class:"viewer",ref_key:"viewerRef",ref:f},[b.value?(G(),q("div",GH,[g("p",null,ot(b.value),1),i.value.fileUrl?(G(),q("a",{key:0,href:i.value.fileUrl,target:"_blank",rel:"noreferrer"},"Open PDF in new tab",8,qH)):Ot("",!0)])):Ot("",!0),(G(!0),q(Xt,null,ye(u.value,Dt=>(G(),q("div",{key:Dt,class:"page-wrap",ref_for:!0,ref:It(Dt),onDragover:et[0]||(et[0]=on(()=>{},["prevent"])),onDrop:ne=>Re(ne,Dt)},[g("canvas",{ref_for:!0,ref:Tt(Dt),class:"pdf-canvas"},null,512),g("div",YH,[(G(!0),q(Xt,null,ye(J(Dt),ne=>(G(),q("div",{key:ne.id,class:ie(["field",wt(ne)]),style:gr(yt(ne,Dt)),onClick:on(Me=>Lt(ne),["stop"])},[g("span",JH,ot(pt(ne)),1),N.value[ne.id]?(G(),q("div",ZH,[N.value[ne.id].signature.dataUrl?(G(),q("img",{key:0,src:N.value[ne.id].signature.dataUrl,alt:"Signature"},null,8,QH)):(G(),q("span",{key:1,class:"signature-text",style:gr(Ut(ne))},ot(N.value[ne.id].signature.text),5))])):Ot("",!0),N.value[ne.id]?(G(),q("button",{key:1,class:"field-clear",type:"button",onClick:on(Me=>ee(ne.id),["stop"])}," x ",8,t8)):Ot("",!0)],14,KH))),128))])],40,XH))),128))],512)]),g("aside",e8,[g("div",s8,[g("div",n8,[g("button",{type:"button",class:ie(["tab-btn",k.value==="draw"&&"active"]),onClick:et[1]||(et[1]=Dt=>k.value="draw")}," Draw Signature ",2),g("button",{type:"button",class:ie(["tab-btn",k.value==="type"&&"active"]),onClick:et[2]||(et[2]=Dt=>k.value="type")}," Type Signature ",2),g("button",{type:"button",class:ie(["tab-btn",k.value==="upload"&&"active"]),onClick:et[3]||(et[3]=Dt=>k.value="upload")}," Upload Image ",2)]),g("div",i8,[k.value==="draw"?(G(),q("div",r8,[g("canvas",{ref_key:"signatureCanvas",ref:A,class:"signature-canvas",onPointerdown:oi,onPointermove:nc,onPointerup:Ha,onPointerleave:Ha},null,544),B.value?Ot("",!0):(G(),q("span",o8,"Draw your signature here"))])):k.value==="type"?(G(),q("div",a8,[te(g("input",{"onUpdate:modelValue":et[4]||(et[4]=Dt=>M.value=Dt),class:"type-input",type:"text",placeholder:"Type your full name"},null,512),[[Ze,M.value,void 0,{trim:!0}]]),g("div",{class:ie(["type-preview",!M.value&&"empty"]),style:gr({fontFamily:qf})},ot(M.value||"Your signature"),7)])):(G(),q("div",l8,[g("label",c8,[g("input",{type:"file",accept:"image/*",onChange:Dr},null,32),et[9]||(et[9]=Kt(" Upload signature image ",-1))]),O.value?(G(),q("div",u8,[g("img",{src:O.value,alt:"Uploaded signature"},null,8,h8)])):Ot("",!0)]))]),g("div",d8,[g("div",{class:ie(["signature-chip",!Z.value&&"disabled"]),draggable:!!Z.value,onDragstart:Is,onDragend:We},[(Ct=Z.value)!=null&&Ct.dataUrl?(G(),q("img",{key:0,src:Z.value.dataUrl,alt:"Signature"},null,8,p8)):(G(),q("span",g8,ot(((Bt=Z.value)==null?void 0:Bt.text)||"Signature"),1))],42,f8),et[10]||(et[10]=g("p",{class:"helper"},"Drag your signature onto a signature field or click a field to place it.",-1))]),g("div",m8,[g("button",{class:"link-btn",type:"button",onClick:ch},"Clear signature"),g("div",v8,[g("button",{class:"btn btn-outline",type:"button",onClick:$e,disabled:!j.value}," Clear placements ",8,b8),g("button",{class:"btn btn-primary",type:"button",disabled:!z.value,onClick:kn}," Sign Document ",8,y8)])]),a.value?(G(),q("p",_8,ot(a.value),1)):Ot("",!0)])])])):Ot("",!0)])}}}),A8=js(w8,[["__scopeId","data-v-37375c8b"]]),S8=[{label:"Dashboard",path:"/app/dashboard",icon:"dashboard"},{label:"Sign",path:"/app/sign",icon:"sign"},{label:"Documents",path:"/app/documents",icon:"documents"},{label:"Analytics",path:"/app/analytics",icon:"analytics"},{label:"Sent",path:"/app/sent",icon:"sent"},{label:"Received",path:"/app/received",icon:"received"},{label:"Audit Trail",path:"/app/audit-trail",icon:"audit"},{label:"Notifications",path:"/app/notifications",icon:"notifications"},{label:"Settings",path:"/app/settings",icon:"settings"}],si=ct(null),uy=ct(!0),$h=s=>(s??"").trim(),E8=()=>{if(typeof localStorage>"u")return null;const s=localStorage.getItem("auth_user");if(!s)return null;try{return JSON.parse(s)}catch{return null}},x8=s=>{const t=$h(s==null?void 0:s.name);if(t)return t;const e=$h(s==null?void 0:s.email);return e?e.split("@")[0]:"Guest"},T8=s=>{const t=s.split(" ").filter(Boolean);return t.length===0?"G":t.length===1?t[0].slice(0,2).toUpperCase():`${t[0][0]}${t[1][0]}`.toUpperCase()},NS=async()=>{var e;if(!localStorage.getItem("auth_token")){si.value=null,uy.value=!1;return}const t=E8();t&&!si.value&&(si.value=t),uy.value=!0;try{const n=await ls.get("/users/me");si.value=n.data.user,typeof localStorage<"u"&&localStorage.setItem("auth_user",JSON.stringify(n.data.user))}catch(n){((e=n==null?void 0:n.response)==null?void 0:e.status)===401?(si.value=null,typeof localStorage<"u"&&localStorage.removeItem("auth_user")):t&&(si.value=t)}finally{uy.value=!1}};NS().catch(()=>{});let jT=!1;const C8=()=>{jT||typeof window>"u"||(jT=!0,window.addEventListener("auth:updated",()=>{NS()}))};C8();const hv=()=>{const s=St(()=>x8(si.value)),t=St(()=>{var l;return $h((l=si.value)==null?void 0:l.email)}),e=St(()=>T8(s.value)),n=St(()=>{var l;return $h((l=si.value)==null?void 0:l.photoUrl)||""}),i=St(()=>"No organization"),r=St(()=>{var l;return $h((l=si.value)==null?void 0:l.jobTitle)||"N/A"}),o=St(()=>{var l;return $h((l=si.value)==null?void 0:l.role)||"Member"});return{user:si,profile:si,loading:uy,displayName:s,email:t,initials:e,avatarUrl:n,organization:i,jobTitle:r,role:o,updateProfileDetails:async l=>{var f,m;const c=(f=l.name)==null?void 0:f.trim(),u=(m=l.jobTitle)==null?void 0:m.trim();if(!c&&!u)return;const d=await ls.patch("/users/me",{name:c,jobTitle:u});si.value=d.data.user},refresh:NS}},k8={class:"sidebar-header"},I8={class:"brand"},P8={key:0,class:"brand-name"},R8={key:0,viewBox:"0 0 24 24","aria-hidden":"true"},M8={key:1,viewBox:"0 0 24 24","aria-hidden":"true"},D8={class:"nav"},O8=["innerHTML"],L8={key:0,class:"label"},N8={class:"sidebar-footer"},F8={class:"user-card"},B8={class:"avatar"},$8=["src"],U8={key:1},V8={key:0},H8={class:"user-name"},j8={class:"user-email"},z8=ks({__name:"Sidebar",props:{collapsed:{type:Boolean},mobileOpen:{type:Boolean}},emits:["toggle","close"],setup(s){const t=V2(),{displayName:e,email:n,initials:i,avatarUrl:r}=hv(),o=St(()=>e.value),a=St(()=>n.value||"Not signed in"),l=St(()=>i.value),c=St(()=>r.value),u={dashboard:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1.5"/><rect x="14" y="3" width="7" height="7" rx="1.5"/><rect x="3" y="14" width="7" height="7" rx="1.5"/><rect x="14" y="14" width="7" height="7" rx="1.5"/></svg>',sign:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5Z"/></svg>',documents:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path d="M7 3h6l4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"/><path d="M13 3v5h5"/></svg>',analytics:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19V5"/><rect x="7" y="12" width="3" height="7" rx="1"/><rect x="12" y="9" width="3" height="10" rx="1"/><rect x="17" y="6" width="3" height="13" rx="1"/></svg>',sent:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12l18-9-4 18-5-7-9-2Z"/><path d="M12 14l5 5"/></svg>',received:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path d="M20 7v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7"/><path d="M12 3v12"/><path d="m7 10 5 5 5-5"/></svg>',audit:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3h8l3 3v15a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"/><path d="M8 9h8"/><path d="M8 13h8"/><path d="M8 17h5"/></svg>',notifications:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8a6 6 0 0 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"/><path d="M13.7 21a2 2 0 0 1-3.4 0"/></svg>',settings:'<svg viewBox="0 0 24 24" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"/><path d="M4 12h2"/><path d="M18 12h2"/><path d="M12 4v2"/><path d="M12 18v2"/><path d="M6.2 6.2l1.4 1.4"/><path d="M16.4 16.4l1.4 1.4"/><path d="M6.2 17.8l1.4-1.4"/><path d="M16.4 7.6l1.4-1.4"/></svg>'};return(d,f)=>(G(),q("div",null,[s.mobileOpen?(G(),q("div",{key:0,class:"backdrop",onClick:f[0]||(f[0]=m=>d.$emit("close"))})):Ot("",!0),g("aside",{class:ie(["sidebar",{collapsed:s.collapsed,open:s.mobileOpen}])},[g("div",k8,[g("div",I8,[f[3]||(f[3]=ji('<span class="logo" data-v-8fcddd48><svg viewBox="0 0 32 32" aria-hidden="true" data-v-8fcddd48><path d="M7 6h18a7 7 0 0 1 7 7v6a7 7 0 0 1-7 7H7a7 7 0 0 1-7-7v-6a7 7 0 0 1 7-7Z" fill="url(#sidebarGradient)" data-v-8fcddd48></path><path d="M11 16c4 1 5 5 5 5s3-4 5-5c-3-1-5-5-5-5s-1 4-5 5Z" fill="#fff" data-v-8fcddd48></path><defs data-v-8fcddd48><linearGradient id="sidebarGradient" x1="0" x2="1" y1="0" y2="1" data-v-8fcddd48><stop offset="0" stop-color="var(--accent)" data-v-8fcddd48></stop><stop offset="1" stop-color="var(--accent-strong)" data-v-8fcddd48></stop></linearGradient></defs></svg></span>',1)),s.collapsed?Ot("",!0):(G(),q("span",P8,"WilsonFlow"))]),g("button",{class:"collapse",type:"button","aria-label":"Toggle sidebar",onClick:f[1]||(f[1]=m=>d.$emit("toggle"))},[s.collapsed?(G(),q("svg",R8,[...f[4]||(f[4]=[g("path",{d:"m9 6 6 6-6 6"},null,-1)])])):(G(),q("svg",M8,[...f[5]||(f[5]=[g("path",{d:"m15 6-6 6 6 6"},null,-1)])]))])]),g("nav",D8,[(G(!0),q(Xt,null,ye(ve(S8),m=>(G(),qi(ve(qu),{key:m.path,to:m.path,class:ie(["nav-item",{active:ve(t).path.startsWith(m.path)}]),onClick:f[2]||(f[2]=v=>d.$emit("close"))},{default:xi(()=>[g("span",{class:"icon",innerHTML:u[m.icon]},null,8,O8),s.collapsed?Ot("",!0):(G(),q("span",L8,ot(m.label),1))]),_:2},1032,["to","class"]))),128))]),g("div",N8,[g("div",F8,[g("span",B8,[c.value?(G(),q("img",{key:0,src:c.value,alt:"Profile"},null,8,$8)):(G(),q("span",U8,ot(l.value),1))]),s.collapsed?Ot("",!0):(G(),q("div",V8,[g("p",H8,ot(o.value),1),g("p",j8,ot(a.value),1)]))])])],2)]))}}),W8=js(z8,[["__scopeId","data-v-8fcddd48"]]),Hp=ct("system"),lA=s=>{const t=document.documentElement;if(s==="system"){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;t.setAttribute("data-theme",e?"dark":"light")}else t.setAttribute("data-theme",s)},G8=()=>{const s=localStorage.getItem("theme_mode");Hp.value=s??"system",lA(Hp.value),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{Hp.value==="system"&&lA("system")})},q8=()=>({themeMode:Hp,setTheme:t=>{Hp.value=t,localStorage.setItem("theme_mode",t),lA(t)}}),bo=Object.create(null);bo.open="0";bo.close="1";bo.ping="2";bo.pong="3";bo.message="4";bo.upgrade="5";bo.noop="6";const hy=Object.create(null);Object.keys(bo).forEach(s=>{hy[bo[s]]=s});const cA={type:"error",data:"parser error"},yM=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_M=typeof ArrayBuffer=="function",wM=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,FS=({type:s,data:t},e,n)=>yM&&t instanceof Blob?e?n(t):zT(t,n):_M&&(t instanceof ArrayBuffer||wM(t))?e?n(t):zT(new Blob([t]),n):n(bo[s]+(t||"")),zT=(s,t)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(s)};function WT(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let tw;function X8(s,t){if(yM&&s.data instanceof Blob)return s.data.arrayBuffer().then(WT).then(t);if(_M&&(s.data instanceof ArrayBuffer||wM(s.data)))return t(WT(s.data));FS(s,!1,e=>{tw||(tw=new TextEncoder),t(tw.encode(e))})}const GT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_p=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<GT.length;s++)_p[GT.charCodeAt(s)]=s;const Y8=s=>{let t=s.length*.75,e=s.length,n,i=0,r,o,a,l;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const c=new ArrayBuffer(t),u=new Uint8Array(c);for(n=0;n<e;n+=4)r=_p[s.charCodeAt(n)],o=_p[s.charCodeAt(n+1)],a=_p[s.charCodeAt(n+2)],l=_p[s.charCodeAt(n+3)],u[i++]=r<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return c},K8=typeof ArrayBuffer=="function",BS=(s,t)=>{if(typeof s!="string")return{type:"message",data:AM(s,t)};const e=s.charAt(0);return e==="b"?{type:"message",data:J8(s.substring(1),t)}:hy[e]?s.length>1?{type:hy[e],data:s.substring(1)}:{type:hy[e]}:cA},J8=(s,t)=>{if(K8){const e=Y8(s);return AM(e,t)}else return{base64:!0,data:s}},AM=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},SM="",Z8=(s,t)=>{const e=s.length,n=new Array(e);let i=0;s.forEach((r,o)=>{FS(r,!1,a=>{n[o]=a,++i===e&&t(n.join(SM))})})},Q8=(s,t)=>{const e=s.split(SM),n=[];for(let i=0;i<e.length;i++){const r=BS(e[i],t);if(n.push(r),r.type==="error")break}return n};function tj(){return new TransformStream({transform(s,t){X8(s,e=>{const n=e.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(e)})}})}let ew;function ib(s){return s.reduce((t,e)=>t+e.length,0)}function rb(s,t){if(s[0].length===t)return s.shift();const e=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)e[i]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),e}function ej(s,t){ew||(ew=new TextDecoder);const e=[];let n=0,i=-1,r=!1;return new TransformStream({transform(o,a){for(e.push(o);;){if(n===0){if(ib(e)<1)break;const l=rb(e,1);r=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(ib(e)<2)break;const l=rb(e,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(ib(e)<8)break;const l=rb(e,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(cA);break}i=u*Math.pow(2,32)+c.getUint32(4),n=3}else{if(ib(e)<i)break;const l=rb(e,i);a.enqueue(BS(r?l:ew.decode(l),t)),n=0}if(i===0||i>s){a.enqueue(cA);break}}}})}const EM=4;function Ds(s){if(s)return sj(s)}function sj(s){for(var t in Ds.prototype)s[t]=Ds.prototype[t];return s}Ds.prototype.on=Ds.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};Ds.prototype.once=function(s,t){function e(){this.off(s,e),t.apply(this,arguments)}return e.fn=t,this.on(s,e),this};Ds.prototype.off=Ds.prototype.removeListener=Ds.prototype.removeAllListeners=Ds.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+s];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,i=0;i<e.length;i++)if(n=e[i],n===t||n.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+s],this};Ds.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+s],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,i=e.length;n<i;++n)e[n].apply(this,t)}return this};Ds.prototype.emitReserved=Ds.prototype.emit;Ds.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Ds.prototype.hasListeners=function(s){return!!this.listeners(s).length};const e0=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),Ui=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),nj="arraybuffer";function xM(s,...t){return t.reduce((e,n)=>(s.hasOwnProperty(n)&&(e[n]=s[n]),e),{})}const ij=Ui.setTimeout,rj=Ui.clearTimeout;function s0(s,t){t.useNativeTimers?(s.setTimeoutFn=ij.bind(Ui),s.clearTimeoutFn=rj.bind(Ui)):(s.setTimeoutFn=Ui.setTimeout.bind(Ui),s.clearTimeoutFn=Ui.clearTimeout.bind(Ui))}const oj=1.33;function aj(s){return typeof s=="string"?lj(s):Math.ceil((s.byteLength||s.size)*oj)}function lj(s){let t=0,e=0;for(let n=0,i=s.length;n<i;n++)t=s.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function TM(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function cj(s){let t="";for(let e in s)s.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return t}function uj(s){let t={},e=s.split("&");for(let n=0,i=e.length;n<i;n++){let r=e[n].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class hj extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class $S extends Ds{constructor(t){super(),this.writable=!1,s0(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new hj(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=BS(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=cj(t);return e.length?"?"+e:""}}class dj extends $S{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Q8(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Z8(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=TM()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let CM=!1;try{CM=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const fj=CM;function pj(){}class gj extends dj{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}}let Qh=class dy extends Ds{constructor(t,e,n){super(),this.createRequest=t,s0(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const e=xM(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=dy.requestsCount++,dy.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=pj,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dy.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Qh.requestsCount=0;Qh.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",qT);else if(typeof addEventListener=="function"){const s="onpagehide"in Ui?"pagehide":"unload";addEventListener(s,qT,!1)}}function qT(){for(let s in Qh.requests)Qh.requests.hasOwnProperty(s)&&Qh.requests[s].abort()}const mj=(function(){const s=kM({xdomain:!1});return s&&s.responseType!==null})();class vj extends gj{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=mj&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Qh(kM,this.uri(),t)}}function kM(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||fj))return new XMLHttpRequest}catch{}if(!t)try{return new Ui[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const IM=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class bj extends $S{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,n=IM?{}:xM(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;FS(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}i&&e0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=TM()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const sw=Ui.WebSocket||Ui.MozWebSocket;class yj extends bj{createSocket(t,e,n){return IM?new sw(t,e,n):e?new sw(t,e):new sw(t)}doWrite(t,e){this.ws.send(e)}}class _j extends $S{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=ej(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),i=tj();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;this._writer.write(n).then(()=>{i&&e0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const wj={websocket:yj,webtransport:_j,polling:vj},Aj=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Sj=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function uA(s){if(s.length>8e3)throw"URI too long";const t=s,e=s.indexOf("["),n=s.indexOf("]");e!=-1&&n!=-1&&(s=s.substring(0,e)+s.substring(e,n).replace(/:/g,";")+s.substring(n,s.length));let i=Aj.exec(s||""),r={},o=14;for(;o--;)r[Sj[o]]=i[o]||"";return e!=-1&&n!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Ej(r,r.path),r.queryKey=xj(r,r.query),r}function Ej(s,t){const e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function xj(s,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,r){i&&(e[i]=r)}),e}const hA=typeof addEventListener=="function"&&typeof removeEventListener=="function",fy=[];hA&&addEventListener("offline",()=>{fy.forEach(s=>s())},!1);class zl extends Ds{constructor(t,e){if(super(),this.binaryType=nj,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const n=uA(t);e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=uA(e.host).host);s0(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=uj(this.opts.query)),hA&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},fy.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=EM,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&zl.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",zl.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+=aj(i)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,e0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,i){if(typeof e=="function"&&(i=e,e=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:t,data:e,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(zl.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hA&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=fy.indexOf(this._offlineEventListener);n!==-1&&fy.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}zl.protocol=EM;class Tj extends zl{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;zl.priorWebsocketSuccess=!1;const i=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;zl.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=e.name,this.emitReserved("upgradeError",f)}}))};function r(){n||(n=!0,u(),e.close(),e=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=e.name,r(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function c(d){e&&d.name!==e.name&&r()}const u=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};e.once("open",i),e.once("error",o),e.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}let Cj=class extends Tj{constructor(t,e={}){const n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>wj[i]).filter(i=>!!i)),super(t,n)}};function kj(s,t="",e){let n=s;e=e||typeof location<"u"&&location,s==null&&(s=e.protocol+"//"+e.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=e.protocol+s:s=e.host+s),/^(https?|wss?):\/\//.test(s)||(typeof e<"u"?s=e.protocol+"//"+s:s="https://"+s),n=uA(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+t,n.href=n.protocol+"://"+r+(e&&e.port===n.port?"":":"+n.port),n}const Ij=typeof ArrayBuffer=="function",Pj=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,PM=Object.prototype.toString,Rj=typeof Blob=="function"||typeof Blob<"u"&&PM.call(Blob)==="[object BlobConstructor]",Mj=typeof File=="function"||typeof File<"u"&&PM.call(File)==="[object FileConstructor]";function US(s){return Ij&&(s instanceof ArrayBuffer||Pj(s))||Rj&&s instanceof Blob||Mj&&s instanceof File}function py(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let e=0,n=s.length;e<n;e++)if(py(s[e]))return!0;return!1}if(US(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return py(s.toJSON(),!0);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&py(s[e]))return!0;return!1}function Dj(s){const t=[],e=s.data,n=s;return n.data=dA(e,t),n.attachments=t.length,{packet:n,buffers:t}}function dA(s,t){if(!s)return s;if(US(s)){const e={_placeholder:!0,num:t.length};return t.push(s),e}else if(Array.isArray(s)){const e=new Array(s.length);for(let n=0;n<s.length;n++)e[n]=dA(s[n],t);return e}else if(typeof s=="object"&&!(s instanceof Date)){const e={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=dA(s[n],t));return e}return s}function Oj(s,t){return s.data=fA(s.data,t),delete s.attachments,s}function fA(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let e=0;e<s.length;e++)s[e]=fA(s[e],t);else if(typeof s=="object")for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=fA(s[e],t));return s}const RM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Lj=5;var fe;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(fe||(fe={}));class Nj{constructor(t){this.replacer=t}encode(t){return(t.type===fe.EVENT||t.type===fe.ACK)&&py(t)?this.encodeAsBinary({type:t.type===fe.EVENT?fe.BINARY_EVENT:fe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===fe.BINARY_EVENT||t.type===fe.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=Dj(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}}class VS extends Ds{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===fe.BINARY_EVENT;n||e.type===fe.BINARY_ACK?(e.type=n?fe.EVENT:fe.ACK,this.reconstructor=new Fj(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(US(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(fe[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===fe.BINARY_EVENT||n.type===fe.BINARY_ACK){const r=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(r,e)}else n.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const r=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}n.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(VS.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case fe.CONNECT:return Jy(e);case fe.DISCONNECT:return e===void 0;case fe.CONNECT_ERROR:return typeof e=="string"||Jy(e);case fe.EVENT:case fe.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&RM.indexOf(e[0])===-1);case fe.ACK:case fe.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Fj{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=Oj(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Bj(s){return typeof s=="string"}const $j=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s};function Uj(s){return s===void 0||$j(s)}function Jy(s){return Object.prototype.toString.call(s)==="[object Object]"}function Vj(s,t){switch(s){case fe.CONNECT:return t===void 0||Jy(t);case fe.DISCONNECT:return t===void 0;case fe.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&RM.indexOf(t[0])===-1);case fe.ACK:return Array.isArray(t);case fe.CONNECT_ERROR:return typeof t=="string"||Jy(t);default:return!1}}function Hj(s){return Bj(s.nsp)&&Uj(s.id)&&Vj(s.type,s.data)}const jj=Object.freeze(Object.defineProperty({__proto__:null,Decoder:VS,Encoder:Nj,get PacketType(){return fe},isPacketValid:Hj,protocol:Lj},Symbol.toStringTag,{value:"Module"}));function dr(s,t,e){return s.on(t,e),function(){s.off(t,e)}}const zj=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class MM extends Ds{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[dr(t,"open",this.onopen.bind(this)),dr(t,"packet",this.onpacket.bind(this)),dr(t,"error",this.onerror.bind(this)),dr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,i,r;if(zj.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:fe.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const u=this.ids++,d=e.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(r),e.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((n,i)=>{const r=(o,a)=>o?i(o):n(a);r.withError=!0,e.push(r),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>(this._queue[0],i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(i)):(this._queue.shift(),e&&e(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case fe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case fe.EVENT:case fe.BINARY_EVENT:this.onevent(t);break;case fe.ACK:case fe.BINARY_ACK:this.onack(t);break;case fe.DISCONNECT:this.ondisconnect();break;case fe.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...i){n||(n=!0,e.packet({type:fe.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function Tf(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Tf.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*s);s=(Math.floor(t*10)&1)==0?s-e:s+e}return Math.min(s,this.max)|0};Tf.prototype.reset=function(){this.attempts=0};Tf.prototype.setMin=function(s){this.ms=s};Tf.prototype.setMax=function(s){this.max=s};Tf.prototype.setJitter=function(s){this.jitter=s};class pA extends Ds{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,s0(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Tf({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||jj;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Cj(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=dr(e,"open",function(){n.onopen(),t&&t()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=dr(e,"error",r);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),e.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(dr(t,"ping",this.onping.bind(this)),dr(t,"data",this.ondata.bind(this)),dr(t,"error",this.onerror.bind(this)),dr(t,"close",this.onclose.bind(this)),dr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){e0(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new MM(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Xf={};function gy(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const e=kj(s,t.path||"/socket.io"),n=e.source,i=e.id,r=e.path,o=Xf[i]&&r in Xf[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return a?l=new pA(n,t):(Xf[i]||(Xf[i]=new pA(n,t)),l=Xf[i]),e.query&&!t.query&&(t.query=e.queryKey),l.socket(e.path,t)}Object.assign(gy,{Manager:pA,Socket:MM,io:gy,connect:gy});let va=null;const gA=new Set,Wj=()=>"http://localhost:4000/api".replace(/\/api\/?$/,"");function HS(s){if(va)return va;const t=localStorage.getItem("auth_token")??"";return t?(va=gy(Wj(),{auth:{token:t}}),va.on("event",e=>{gA.forEach(n=>n(e))}),va):null}function Gj(){va==null||va.disconnect(),va=null}function jS(s){return gA.add(s),()=>gA.delete(s)}async function qj(s=50){return(await ls.get("/notifications",{params:{limit:s}})).data}async function DM(s){return(await ls.post("/notifications/read",s)).data}async function Xj(){return(await ls.get("/notifications/preferences")).data}async function Yj(s){return(await ls.post("/notifications/preferences",s)).data}const Kj={icon:"mail",tone:"neutral"},cg=s=>{switch(s){case"document.signed":case"signer.signed":return{icon:"check",tone:"success"};case"document.viewed":case"signer.joined":return{icon:"eye",tone:"info"};case"document.completed":return{icon:"check",tone:"success"};case"document.declined":case"signer.declined":return{icon:"alert",tone:"danger"};case"document.expired":case"reminder.expiring_soon":return{icon:"clock",tone:"warning"};case"signer.invited":case"user.invited":case"access.granted":return{icon:"mail",tone:"info"};case"access.revoked":return{icon:"alert",tone:"warning"};case"reminder.pending_signature":return{icon:"clock",tone:"info"};case"system.error":return{icon:"alert",tone:"danger"};default:return Kj}},td=ct([]),OM=s=>{td.value=td.value.filter(t=>t.id!==s)},Jj=(s,t=4500)=>{const e=s.id??nh();if(td.value.some(i=>i.id===e))return e;const n={...s,id:e};return td.value=[n,...td.value].slice(0,5),window.setTimeout(()=>OM(e),t),e},LM=()=>({toasts:td,pushToast:Jj,removeToast:OM}),Ci=ct([]),Ea=ct(0),mA=ct(!1),vA=ct(!1),ug=new Set,Zj=new Set(["document.signed","document.completed","signer.invited","signer.joined","document.viewed"]),Qj=s=>{Ci.value=s.notifications,Ea.value=s.unreadCount,ug.clear(),s.notifications.forEach(t=>ug.add(t.id))},t9=s=>{ug.has(s.id)||(ug.add(s.id),Ci.value=[s,...Ci.value],s.isRead||(Ea.value+=1))},e9=s=>{if(s.event==="notification.created"){const t=s.data.notification;if(t9(t),Zj.has(t.eventType)){const{pushToast:e}=LM(),n=cg(t.eventType);e({id:t.id,title:t.title,message:t.message,tone:n.tone,link:t.link})}}if(s.event==="notification.read"){const t=s.data.notificationIds??[];if(s.data.all){Ci.value=Ci.value.map(n=>({...n,isRead:!0})),Ea.value=0;return}if(t.length===0)return;let e=0;Ci.value=Ci.value.map(n=>t.includes(n.id)&&!n.isRead?(e+=1,{...n,isRead:!0}):n),Ea.value=Math.max(0,Ea.value-e)}},NM=async()=>{mA.value=!0;try{const s=await qj(50);Qj(s)}catch{}finally{mA.value=!1}},s9=async s=>{if(s.length!==0)try{const t=await DM({ids:s});Ci.value=Ci.value.map(e=>s.includes(e.id)?{...e,isRead:!0}:e),Ea.value=t.unreadCount}catch{}},n9=async()=>{try{const s=await DM({all:!0});Ci.value=Ci.value.map(t=>({...t,isRead:!0})),Ea.value=s.unreadCount}catch{}},i9=async()=>{vA.value||(vA.value=!0,HS(),await NM(),jS(e9))},zS=()=>({notifications:St(()=>Ci.value),unreadCount:St(()=>Ea.value),loading:St(()=>mA.value),refresh:NM,initNotifications:i9,markRead:s9,markAllRead:n9,clear:()=>{Ci.value=[],Ea.value=0,ug.clear(),vA.value=!1}}),FM=s=>{const t=typeof s=="string"?new Date(s):s,e=Date.now()-t.getTime(),n=Math.max(Math.floor(e/1e3),0);if(n<60)return"Just now";const i=Math.floor(n/60);if(i<60)return`${i} min ago`;const r=Math.floor(i/60);if(r<24)return`${r} hr ago`;const o=Math.floor(r/24);return o<7?`${o} day${o===1?"":"s"} ago`:t.toLocaleDateString()},r9={class:"topbar"},o9={class:"topbar-left"},a9={class:"title"},l9={class:"topbar-right"},c9={class:"theme"},u9={key:0,class:"menu-card"},h9={key:0,class:"check","aria-hidden":"true"},d9={key:0,class:"check","aria-hidden":"true"},f9={key:0,class:"check","aria-hidden":"true"},p9={class:"notifications"},g9={key:0,class:"badge"},m9={key:1,class:"notification-card"},v9={class:"notification-head"},b9={class:"notification-list"},y9=["onClick"],_9={key:0,viewBox:"0 0 24 24","aria-hidden":"true"},w9={key:1,viewBox:"0 0 24 24","aria-hidden":"true"},A9={key:2,viewBox:"0 0 24 24","aria-hidden":"true"},S9={key:3,viewBox:"0 0 24 24","aria-hidden":"true"},E9={key:4,viewBox:"0 0 24 24","aria-hidden":"true"},x9={key:5,viewBox:"0 0 24 24","aria-hidden":"true"},T9={class:"notification-body"},C9={class:"notification-title"},k9={class:"notification-message"},I9={class:"notification-time"},P9={key:0,class:"notification-dot"},R9={key:0,class:"notification-empty"},M9={class:"avatar"},D9=["src"],O9={key:1},L9={class:"profile-info"},N9={class:"profile-name"},F9={class:"profile-role"},B9={key:0,class:"profile-menu"},$9={class:"profile-card"},U9={class:"profile-card-head"},V9={class:"avatar avatar-lg"},H9=["src"],j9={key:1},z9={class:"profile-name-lg"},W9={class:"profile-email"},G9={class:"org-card"},q9={class:"org-value"},X9=ks({__name:"Topbar",props:{title:{}},emits:["toggle-mobile"],setup(s){const t=wf(),{themeMode:e,setTheme:n}=q8(),i=ct(!1),r=ct(!1),o=ct(!1),{displayName:a,email:l,initials:c,avatarUrl:u,organization:d,role:f}=hv(),{notifications:m,unreadCount:v,markAllRead:b,markRead:y,clear:w}=zS(),k=St(()=>m.value.slice(0,4)),M=tt=>cg(tt).icon,O=tt=>cg(tt).tone,B=St(()=>a.value),V=St(()=>l.value||"Not signed in"),A=St(()=>c.value),S=St(()=>u.value),I=St(()=>d.value),L=St(()=>f.value),P=()=>{r.value=!1,t.push("/app/settings")},$=()=>{r.value=!1,t.push("/app/settings")},N=()=>{o.value=!1,t.push("/app/notifications")},_t=async tt=>{o.value=!1,tt.isRead||await y([tt.id]),tt.link&&(tt.link.startsWith("http")?window.location.href=tt.link:t.push(tt.link))},xt=async()=>{if(r.value=!1,localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),typeof window<"u"&&window.dispatchEvent(new Event("auth:updated")),ov())try{const{auth:tt}=av();await B5(tt)}catch{}Gj(),w(),t.push("/login")};return(tt,X)=>(G(),q("header",r9,[g("div",o9,[g("button",{class:"menu",type:"button",onClick:X[0]||(X[0]=nt=>tt.$emit("toggle-mobile"))},[...X[8]||(X[8]=[g("span",null,null,-1),g("span",null,null,-1),g("span",null,null,-1)])]),g("h1",a9,ot(s.title),1)]),g("div",l9,[g("div",c9,[g("button",{class:"icon-btn",type:"button",onClick:X[1]||(X[1]=nt=>i.value=!i.value)},[...X[9]||(X[9]=[ji('<svg viewBox="0 0 24 24" aria-hidden="true" data-v-6150261b><path d="M12 4v2" data-v-6150261b></path><path d="M12 18v2" data-v-6150261b></path><path d="M4 12h2" data-v-6150261b></path><path d="M18 12h2" data-v-6150261b></path><path d="M6.3 6.3l1.4 1.4" data-v-6150261b></path><path d="M16.3 16.3l1.4 1.4" data-v-6150261b></path><path d="M6.3 17.7l1.4-1.4" data-v-6150261b></path><path d="M16.3 7.7l1.4-1.4" data-v-6150261b></path><circle cx="12" cy="12" r="4" data-v-6150261b></circle></svg>',1)])]),i.value?(G(),q("div",u9,[g("button",{class:"menu-item",type:"button",onClick:X[2]||(X[2]=nt=>ve(n)("light"))},[X[11]||(X[11]=ji('<span class="menu-label" data-v-6150261b><svg class="menu-icon" viewBox="0 0 24 24" aria-hidden="true" data-v-6150261b><path d="M12 4v2" data-v-6150261b></path><path d="M12 18v2" data-v-6150261b></path><path d="M4 12h2" data-v-6150261b></path><path d="M18 12h2" data-v-6150261b></path><path d="M6.3 6.3l1.4 1.4" data-v-6150261b></path><path d="M16.3 16.3l1.4 1.4" data-v-6150261b></path><path d="M6.3 17.7l1.4-1.4" data-v-6150261b></path><path d="M16.3 7.7l1.4-1.4" data-v-6150261b></path><circle cx="12" cy="12" r="4" data-v-6150261b></circle></svg> Light </span>',1)),ve(e)==="light"?(G(),q("span",h9,[...X[10]||(X[10]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{d:"M6 12l4 4 8-8"})],-1)])])):Ot("",!0)]),g("button",{class:"menu-item",type:"button",onClick:X[3]||(X[3]=nt=>ve(n)("dark"))},[X[13]||(X[13]=g("span",{class:"menu-label"},[g("svg",{class:"menu-icon",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M21 12.8A9 9 0 1 1 11.2 3a7 7 0 0 0 9.8 9.8Z"})]),Kt(" Dark ")],-1)),ve(e)==="dark"?(G(),q("span",d9,[...X[12]||(X[12]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{d:"M6 12l4 4 8-8"})],-1)])])):Ot("",!0)]),g("button",{class:"menu-item",type:"button",onClick:X[4]||(X[4]=nt=>ve(n)("system"))},[X[15]||(X[15]=g("span",{class:"menu-label"},[g("svg",{class:"menu-icon",viewBox:"0 0 24 24","aria-hidden":"true"},[g("rect",{x:"3",y:"4",width:"18",height:"14",rx:"2"}),g("path",{d:"M8 20h8"})]),Kt(" System ")],-1)),ve(e)==="system"?(G(),q("span",f9,[...X[14]||(X[14]=[g("svg",{viewBox:"0 0 24 24"},[g("path",{d:"M6 12l4 4 8-8"})],-1)])])):Ot("",!0)])])):Ot("",!0)]),g("div",p9,[g("button",{class:"icon-btn",type:"button",onClick:X[5]||(X[5]=nt=>o.value=!o.value)},[...X[16]||(X[16]=[g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M18 8a6 6 0 0 0-12 0c0 7-3 7-3 7h18s-3 0-3-7"}),g("path",{d:"M13.7 21a2 2 0 0 1-3.4 0"})],-1)])]),ve(v)?(G(),q("span",g9,ot(ve(v)),1)):Ot("",!0),o.value?(G(),q("div",m9,[g("div",v9,[X[17]||(X[17]=g("h4",null,"Notifications",-1)),g("button",{class:"link-btn",type:"button",onClick:X[6]||(X[6]=(...nt)=>ve(b)&&ve(b)(...nt))}," Mark all as read ")]),g("div",b9,[(G(!0),q(Xt,null,ye(k.value,nt=>(G(),q("button",{key:nt.id,class:"notification-item",type:"button",onClick:U=>_t(nt)},[g("span",{class:ie(["notification-icon",O(nt.eventType)])},[M(nt.eventType)==="check"?(G(),q("svg",_9,[...X[18]||(X[18]=[g("path",{d:"M6 12l4 4 8-8"},null,-1)])])):M(nt.eventType)==="eye"?(G(),q("svg",w9,[...X[19]||(X[19]=[g("path",{d:"M2 12s4-6 10-6 10 6 10 6-4 6-10 6-10-6-10-6Z"},null,-1),g("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])):M(nt.eventType)==="clock"?(G(),q("svg",A9,[...X[20]||(X[20]=[g("circle",{cx:"12",cy:"12",r:"9"},null,-1),g("path",{d:"M12 7v5l3 3"},null,-1)])])):M(nt.eventType)==="alert"?(G(),q("svg",S9,[...X[21]||(X[21]=[g("path",{d:"M12 9v4"},null,-1),g("path",{d:"M12 17h.01"},null,-1),g("path",{d:"M10 2h4l8 16H2L10 2Z"},null,-1)])])):M(nt.eventType)==="pen"?(G(),q("svg",E9,[...X[22]||(X[22]=[g("path",{d:"M12 20h9"},null,-1),g("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5Z"},null,-1)])])):(G(),q("svg",x9,[...X[23]||(X[23]=[g("path",{d:"M4 4h16v12H4z"},null,-1),g("path",{d:"m4 8 8 5 8-5"},null,-1)])]))],2),g("span",T9,[g("span",C9,ot(nt.title),1),g("span",k9,ot(nt.message),1),g("span",I9,ot(ve(FM)(nt.createdAt)),1)]),nt.isRead?Ot("",!0):(G(),q("span",P9))],8,y9))),128)),k.value.length===0?(G(),q("p",R9," You're all caught up. ")):Ot("",!0)]),g("button",{class:"view-all",type:"button",onClick:N}," View all notifications ")])):Ot("",!0)]),g("div",{class:"profile",onClick:X[7]||(X[7]=nt=>r.value=!r.value)},[g("span",M9,[S.value?(G(),q("img",{key:0,src:S.value,alt:"Profile"},null,8,D9)):(G(),q("span",O9,ot(A.value),1))]),g("div",L9,[g("p",N9,ot(B.value),1),g("p",F9,ot(L.value),1)]),X[30]||(X[30]=g("svg",{class:"chev",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m6 9 6 6 6-6"})],-1)),r.value?(G(),q("div",B9,[g("div",$9,[g("div",U9,[g("span",V9,[S.value?(G(),q("img",{key:0,src:S.value,alt:"Profile"},null,8,H9)):(G(),q("span",j9,ot(A.value),1))]),g("div",null,[g("p",z9,ot(B.value),1),g("p",W9,ot(V.value),1)])]),g("div",G9,[X[24]||(X[24]=g("p",{class:"org-label"},"Organization",-1)),g("p",q9,ot(I.value),1)])]),X[28]||(X[28]=g("div",{class:"menu-divider"},null,-1)),g("button",{type:"button",class:"menu-item",onClick:P},[...X[25]||(X[25]=[g("span",{class:"menu-label"},[g("svg",{class:"menu-icon",viewBox:"0 0 24 24","aria-hidden":"true"},[g("circle",{cx:"12",cy:"8",r:"4"}),g("path",{d:"M4 20a8 8 0 0 1 16 0"})]),Kt(" My Profile ")],-1)])]),g("button",{type:"button",class:"menu-item",onClick:$},[...X[26]||(X[26]=[ji('<span class="menu-label" data-v-6150261b><svg class="menu-icon" viewBox="0 0 24 24" aria-hidden="true" data-v-6150261b><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z" data-v-6150261b></path><path d="M4 12h2" data-v-6150261b></path><path d="M18 12h2" data-v-6150261b></path><path d="M12 4v2" data-v-6150261b></path><path d="M12 18v2" data-v-6150261b></path><path d="M6.2 6.2l1.4 1.4" data-v-6150261b></path><path d="M16.4 16.4l1.4 1.4" data-v-6150261b></path><path d="M6.2 17.8l1.4-1.4" data-v-6150261b></path><path d="M16.4 7.6l1.4-1.4" data-v-6150261b></path></svg> Settings </span>',1)])]),X[29]||(X[29]=g("div",{class:"menu-divider"},null,-1)),g("button",{type:"button",class:"menu-item danger",onClick:xt},[...X[27]||(X[27]=[ji('<span class="menu-label" data-v-6150261b><svg class="menu-icon" viewBox="0 0 24 24" aria-hidden="true" data-v-6150261b><path d="M10 17l5-5-5-5" data-v-6150261b></path><path d="M15 12H3" data-v-6150261b></path><path d="M19 4h-6a2 2 0 0 0-2 2v3" data-v-6150261b></path><path d="M11 15v3a2 2 0 0 0 2 2h6" data-v-6150261b></path></svg> Logout </span>',1)])])])):Ot("",!0)])])]))}}),Y9=js(X9,[["__scopeId","data-v-6150261b"]]),K9={class:"toast-stack",role:"status","aria-live":"polite"},J9=["onClick"],Z9={class:"toast-title"},Q9={key:0,class:"toast-message"},tz=["onClick"],ez=ks({__name:"ToastStack",setup(s){const t=wf(),{toasts:e,removeToast:n}=LM(),i=o=>{n(o)},r=o=>{if(o.link){if(o.link.startsWith("http")){window.location.href=o.link;return}t.push(o.link)}};return(o,a)=>(G(),qi(R_,{to:"body"},[g("div",K9,[(G(!0),q(Xt,null,ye(ve(e),l=>(G(),q("div",{key:l.id,class:ie(["toast",l.tone||"neutral"])},[g("div",{class:"toast-body",onClick:c=>r(l)},[g("p",Z9,ot(l.title),1),l.message?(G(),q("p",Q9,ot(l.message),1)):Ot("",!0)],8,J9),g("button",{class:"toast-close",type:"button",onClick:c=>i(l.id)},"x",8,tz)],2))),128))])]))}}),sz=js(ez,[["__scopeId","data-v-b6c4b1b9"]]),nz={class:"app-shell"},iz={class:"app-main"},rz={class:"app-content"},oz="Wilson Platform",az=ks({__name:"AppLayout",setup(s){const t=ct(!1),e=ct(!1),n=()=>{t.value=!t.value},{refresh:i}=hv(),{initNotifications:r}=zS();return Rr(()=>{i(),r()}),(o,a)=>(G(),q("div",nz,[os(W8,{collapsed:t.value,"mobile-open":e.value,onToggle:n,onClose:a[0]||(a[0]=l=>e.value=!1)},null,8,["collapsed","mobile-open"]),g("div",iz,[os(Y9,{title:oz,onToggleMobile:a[1]||(a[1]=l=>e.value=!0)}),os(sz),g("main",rz,[os(ve(tS))])])]))}}),lz=js(az,[["__scopeId","data-v-9073690f"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dv(s){return s+.5|0}const Ol=(s,t,e)=>Math.max(Math.min(s,e),t);function wp(s){return Ol(dv(s*2.55),0,255)}function Wl(s){return Ol(dv(s*255),0,255)}function Bo(s){return Ol(dv(s/2.55)/100,0,1)}function XT(s){return Ol(dv(s*100),0,100)}const Mi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bA=[..."0123456789ABCDEF"],cz=s=>bA[s&15],uz=s=>bA[(s&240)>>4]+bA[s&15],ob=s=>(s&240)>>4===(s&15),hz=s=>ob(s.r)&&ob(s.g)&&ob(s.b)&&ob(s.a);function dz(s){var t=s.length,e;return s[0]==="#"&&(t===4||t===5?e={r:255&Mi[s[1]]*17,g:255&Mi[s[2]]*17,b:255&Mi[s[3]]*17,a:t===5?Mi[s[4]]*17:255}:(t===7||t===9)&&(e={r:Mi[s[1]]<<4|Mi[s[2]],g:Mi[s[3]]<<4|Mi[s[4]],b:Mi[s[5]]<<4|Mi[s[6]],a:t===9?Mi[s[7]]<<4|Mi[s[8]]:255})),e}const fz=(s,t)=>s<255?t(s):"";function pz(s){var t=hz(s)?cz:uz;return s?"#"+t(s.r)+t(s.g)+t(s.b)+fz(s.a,t):void 0}const gz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function BM(s,t,e){const n=t*Math.min(e,1-e),i=(r,o=(r+s/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function mz(s,t,e){const n=(i,r=(i+s/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function vz(s,t,e){const n=BM(s,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)n[i]*=1-t-e,n[i]+=t;return n}function bz(s,t,e,n,i){return s===i?(t-e)/n+(t<e?6:0):t===i?(e-s)/n+2:(s-t)/n+4}function WS(s){const e=s.r/255,n=s.g/255,i=s.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=bz(e,n,i,u,r),l=l*60+.5),[l|0,c||0,a]}function GS(s,t,e,n){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,e,n)).map(Wl)}function qS(s,t,e){return GS(BM,s,t,e)}function yz(s,t,e){return GS(vz,s,t,e)}function _z(s,t,e){return GS(mz,s,t,e)}function $M(s){return(s%360+360)%360}function wz(s){const t=gz.exec(s);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?wp(+t[5]):Wl(+t[5]));const i=$M(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=yz(i,r,o):t[1]==="hsv"?n=_z(i,r,o):n=qS(i,r,o),{r:n[0],g:n[1],b:n[2],a:e}}function Az(s,t){var e=WS(s);e[0]=$M(e[0]+t),e=qS(e),s.r=e[0],s.g=e[1],s.b=e[2]}function Sz(s){if(!s)return;const t=WS(s),e=t[0],n=XT(t[1]),i=XT(t[2]);return s.a<255?`hsla(${e}, ${n}%, ${i}%, ${Bo(s.a)})`:`hsl(${e}, ${n}%, ${i}%)`}const YT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},KT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ez(){const s={},t=Object.keys(KT),e=Object.keys(YT);let n,i,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],i=0;i<e.length;i++)r=e[i],a=a.replace(r,YT[r]);r=parseInt(KT[o],16),s[a]=[r>>16&255,r>>8&255,r&255]}return s}let ab;function xz(s){ab||(ab=Ez(),ab.transparent=[0,0,0,0]);const t=ab[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Tz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Cz(s){const t=Tz.exec(s);let e=255,n,i,r;if(t){if(t[7]!==n){const o=+t[7];e=t[8]?wp(o):Ol(o*255,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?wp(n):Ol(n,0,255)),i=255&(t[4]?wp(i):Ol(i,0,255)),r=255&(t[6]?wp(r):Ol(r,0,255)),{r:n,g:i,b:r,a:e}}}function kz(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${Bo(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const nw=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,kh=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function Iz(s,t,e){const n=kh(Bo(s.r)),i=kh(Bo(s.g)),r=kh(Bo(s.b));return{r:Wl(nw(n+e*(kh(Bo(t.r))-n))),g:Wl(nw(i+e*(kh(Bo(t.g))-i))),b:Wl(nw(r+e*(kh(Bo(t.b))-r))),a:s.a+e*(t.a-s.a)}}function lb(s,t,e){if(s){let n=WS(s);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=qS(n),s.r=n[0],s.g=n[1],s.b=n[2]}}function UM(s,t){return s&&Object.assign(t||{},s)}function JT(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Wl(s[3]))):(t=UM(s,{r:0,g:0,b:0,a:1}),t.a=Wl(t.a)),t}function Pz(s){return s.charAt(0)==="r"?Cz(s):wz(s)}class hg{constructor(t){if(t instanceof hg)return t;const e=typeof t;let n;e==="object"?n=JT(t):e==="string"&&(n=dz(t)||xz(t)||Pz(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=UM(this._rgb);return t&&(t.a=Bo(t.a)),t}set rgb(t){this._rgb=JT(t)}rgbString(){return this._valid?kz(this._rgb):void 0}hexString(){return this._valid?pz(this._rgb):void 0}hslString(){return this._valid?Sz(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*i.r+.5,n.g=255&c*n.g+r*i.g+.5,n.b=255&c*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=Iz(this._rgb,t._rgb,e)),this}clone(){return new hg(this.rgb)}alpha(t){return this._rgb.a=Wl(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=dv(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return lb(this._rgb,2,t),this}darken(t){return lb(this._rgb,2,-t),this}saturate(t){return lb(this._rgb,1,t),this}desaturate(t){return lb(this._rgb,1,-t),this}rotate(t){return Az(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Io(){}const Rz=(()=>{let s=0;return()=>s++})();function be(s){return s==null}function rs(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function _e(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function ys(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function li(s,t){return ys(s)?s:t}function re(s,t){return typeof s>"u"?t:s}const Mz=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,VM=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function Qe(s,t,e){if(s&&typeof s.call=="function")return s.apply(e,t)}function He(s,t,e,n){let i,r,o;if(rs(s))for(r=s.length,i=0;i<r;i++)t.call(e,s[i],i);else if(_e(s))for(o=Object.keys(s),r=o.length,i=0;i<r;i++)t.call(e,s[o[i]],o[i])}function Zy(s,t){let e,n,i,r;if(!s||!t||s.length!==t.length)return!1;for(e=0,n=s.length;e<n;++e)if(i=s[e],r=t[e],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Qy(s){if(rs(s))return s.map(Qy);if(_e(s)){const t=Object.create(null),e=Object.keys(s),n=e.length;let i=0;for(;i<n;++i)t[e[i]]=Qy(s[e[i]]);return t}return s}function HM(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function Dz(s,t,e,n){if(!HM(s))return;const i=t[s],r=e[s];_e(i)&&_e(r)?dg(i,r,n):t[s]=Qy(r)}function dg(s,t,e){const n=rs(t)?t:[t],i=n.length;if(!_e(s))return s;e=e||{};const r=e.merger||Dz;let o;for(let a=0;a<i;++a){if(o=n[a],!_e(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],s,o,e)}return s}function jp(s,t){return dg(s,t,{merger:Oz})}function Oz(s,t,e){if(!HM(s))return;const n=t[s],i=e[s];_e(n)&&_e(i)?jp(n,i):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=Qy(i))}const ZT={"":s=>s,x:s=>s.x,y:s=>s.y};function Lz(s){const t=s.split("."),e=[];let n="";for(const i of t)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function Nz(s){const t=Lz(s);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Kl(s,t){return(ZT[t]||(ZT[t]=Nz(t)))(s)}function XS(s){return s.charAt(0).toUpperCase()+s.slice(1)}const fg=s=>typeof s<"u",Jl=s=>typeof s=="function",QT=(s,t)=>{if(s.size!==t.size)return!1;for(const e of s)if(!t.has(e))return!1;return!0};function Fz(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const Ie=Math.PI,es=2*Ie,Bz=es+Ie,t_=Number.POSITIVE_INFINITY,$z=Ie/180,Es=Ie/2,mc=Ie/4,tC=Ie*2/3,Ll=Math.log10,mo=Math.sign;function zp(s,t,e){return Math.abs(s-t)<e}function eC(s){const t=Math.round(s);s=zp(s,t,s/1e3)?t:s;const e=Math.pow(10,Math.floor(Ll(s))),n=s/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function Uz(s){const t=[],e=Math.sqrt(s);let n;for(n=1;n<e;n++)s%n===0&&(t.push(n),t.push(s/n));return e===(e|0)&&t.push(e),t.sort((i,r)=>i-r).pop(),t}function Vz(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function vf(s){return!Vz(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function Hz(s,t){const e=Math.round(s);return e-t<=s&&e+t>=s}function jM(s,t,e){let n,i,r;for(n=0,i=s.length;n<i;n++)r=s[n][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function br(s){return s*(Ie/180)}function YS(s){return s*(180/Ie)}function sC(s){if(!ys(s))return;let t=1,e=0;for(;Math.round(s*t)/t!==s;)t*=10,e++;return e}function zM(s,t){const e=t.x-s.x,n=t.y-s.y,i=Math.sqrt(e*e+n*n);let r=Math.atan2(n,e);return r<-.5*Ie&&(r+=es),{angle:r,distance:i}}function yA(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function jz(s,t){return(s-t+Bz)%es-Ie}function yn(s){return(s%es+es)%es}function pg(s,t,e,n){const i=yn(s),r=yn(t),o=yn(e),a=yn(r-i),l=yn(o-i),c=yn(i-r),u=yn(i-o);return i===r||i===o||n&&r===o||a>l&&c<u}function Js(s,t,e){return Math.max(t,Math.min(e,s))}function zz(s){return Js(s,-32768,32767)}function _a(s,t,e,n=1e-6){return s>=Math.min(t,e)-n&&s<=Math.max(t,e)+n}function KS(s,t,e){e=e||(o=>s[o]<t);let n=s.length-1,i=0,r;for(;n-i>1;)r=i+n>>1,e(r)?i=r:n=r;return{lo:i,hi:n}}const wa=(s,t,e,n)=>KS(s,e,n?i=>{const r=s[i][t];return r<e||r===e&&s[i+1][t]===e}:i=>s[i][t]<e),Wz=(s,t,e)=>KS(s,e,n=>s[n][t]>=e);function Gz(s,t,e){let n=0,i=s.length;for(;n<i&&s[n]<t;)n++;for(;i>n&&s[i-1]>e;)i--;return n>0||i<s.length?s.slice(n,i):s}const WM=["push","pop","shift","splice","unshift"];function qz(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),WM.forEach(e=>{const n="_onData"+XS(e),i=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return s._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function nC(s,t){const e=s._chartjs;if(!e)return;const n=e.listeners,i=n.indexOf(t);i!==-1&&n.splice(i,1),!(n.length>0)&&(WM.forEach(r=>{delete s[r]}),delete s._chartjs)}function GM(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const qM=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function XM(s,t){let e=[],n=!1;return function(...i){e=i,n||(n=!0,qM.call(window,()=>{n=!1,s.apply(t,e)}))}}function Xz(s,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(s,t,n)):s.apply(this,n),t}}const JS=s=>s==="start"?"left":s==="end"?"right":"center",vn=(s,t,e)=>s==="start"?t:s==="end"?e:(t+e)/2,Yz=(s,t,e,n)=>s===(n?"left":"right")?e:s==="center"?(t+e)/2:t;function YM(s,t,e){const n=t.length;let i=0,r=n;if(s._sorted){const{iScale:o,vScale:a,_parsed:l}=s,c=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(i=Math.min(wa(l,u,d).lo,e?n:wa(t,u,o.getPixelForValue(d)).lo),c){const b=l.slice(0,i+1).reverse().findIndex(y=>!be(y[a.axis]));i-=Math.max(0,b)}i=Js(i,0,n-1)}if(v){let b=Math.max(wa(l,o.axis,f,!0).hi+1,e?0:wa(t,u,o.getPixelForValue(f),!0).hi+1);if(c){const y=l.slice(b-1).findIndex(w=>!be(w[a.axis]));b+=Math.max(0,y)}r=Js(b,i,n)-i}else r=n-i}return{start:i,count:r}}function KM(s){const{xScale:t,yScale:e,_scaleRanges:n}=s,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return s._scaleRanges=i,!0;const r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,i),r}const cb=s=>s===0||s===1,iC=(s,t,e)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*es/e)),rC=(s,t,e)=>Math.pow(2,-10*s)*Math.sin((s-t)*es/e)+1,Wp={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*Es)+1,easeOutSine:s=>Math.sin(s*Es),easeInOutSine:s=>-.5*(Math.cos(Ie*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>cb(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>cb(s)?s:iC(s,.075,.3),easeOutElastic:s=>cb(s)?s:rC(s,.075,.3),easeInOutElastic(s){return cb(s)?s:s<.5?.5*iC(s*2,.1125,.45):.5+.5*rC(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-Wp.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Wp.easeInBounce(s*2)*.5:Wp.easeOutBounce(s*2-1)*.5+.5};function ZS(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function oC(s){return ZS(s)?s:new hg(s)}function iw(s){return ZS(s)?s:new hg(s).saturate(.5).darken(.1).hexString()}const Kz=["x","y","borderWidth","radius","tension"],Jz=["color","borderColor","backgroundColor"];function Zz(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:Jz},numbers:{type:"number",properties:Kz}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Qz(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const aC=new Map;function t7(s,t){t=t||{};const e=s+JSON.stringify(t);let n=aC.get(e);return n||(n=new Intl.NumberFormat(s,t),aC.set(e,n)),n}function fv(s,t,e){return t7(t,e).format(s)}const JM={values(s){return rs(s)?s:""+s},numeric(s,t,e){if(s===0)return"0";const n=this.chart.options.locale;let i,r=s;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=e7(s,e)}const o=Ll(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),fv(s,n,l)},logarithmic(s,t,e){if(s===0)return"0";const n=e[t].significand||s/Math.pow(10,Math.floor(Ll(s)));return[1,2,3,5,10,15].includes(n)||t>.8*e.length?JM.numeric.call(this,s,t,e):""}};function e7(s,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&s!==Math.floor(s)&&(e=s-Math.floor(s)),e}var n0={formatters:JM};function s7(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:n0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ih=Object.create(null),_A=Object.create(null);function Gp(s,t){if(!t)return s;const e=t.split(".");for(let n=0,i=e.length;n<i;++n){const r=e[n];s=s[r]||(s[r]=Object.create(null))}return s}function rw(s,t,e){return typeof t=="string"?dg(Gp(s,t),e):dg(Gp(s,""),t)}class n7{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>iw(i.backgroundColor),this.hoverBorderColor=(n,i)=>iw(i.borderColor),this.hoverColor=(n,i)=>iw(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return rw(this,t,e)}get(t){return Gp(this,t)}describe(t,e){return rw(_A,t,e)}override(t,e){return rw(ih,t,e)}route(t,e,n,i){const r=Gp(this,t),o=Gp(this,n),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[i];return _e(l)?Object.assign({},c,l):re(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var as=new n7({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Zz,Qz,s7]);function i7(s){return!s||be(s.size)||be(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function e_(s,t,e,n,i){let r=t[i];return r||(r=t[i]=s.measureText(i).width,e.push(i)),r>n&&(n=r),n}function r7(s,t,e,n){n=n||{};let i=n.data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(i=n.data={},r=n.garbageCollect=[],n.font=t),s.save(),s.font=t;let o=0;const a=e.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=e[l],d!=null&&!rs(d))o=e_(s,i,r,o,d);else if(rs(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!rs(f)&&(o=e_(s,i,r,o,f));s.restore();const m=r.length/2;if(m>e.length){for(l=0;l<m;l++)delete i[r[l]];r.splice(0,m)}return o}function vc(s,t,e){const n=s.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*n)/n+i}function lC(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function wA(s,t,e,n){ZM(s,t,e,n,null)}function ZM(s,t,e,n,i){let r,o,a,l,c,u,d,f;const m=t.pointStyle,v=t.rotation,b=t.radius;let y=(v||0)*$z;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){s.save(),s.translate(e,n),s.rotate(y),s.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),s.restore();return}if(!(isNaN(b)||b<=0)){switch(s.beginPath(),m){default:i?s.ellipse(e,n,i/2,b,0,0,es):s.arc(e,n,b,0,es),s.closePath();break;case"triangle":u=i?i/2:b,s.moveTo(e+Math.sin(y)*u,n-Math.cos(y)*b),y+=tC,s.lineTo(e+Math.sin(y)*u,n-Math.cos(y)*b),y+=tC,s.lineTo(e+Math.sin(y)*u,n-Math.cos(y)*b),s.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(y+mc)*l,d=Math.cos(y+mc)*(i?i/2-c:l),a=Math.sin(y+mc)*l,f=Math.sin(y+mc)*(i?i/2-c:l),s.arc(e-d,n-a,c,y-Ie,y-Es),s.arc(e+f,n-o,c,y-Es,y),s.arc(e+d,n+a,c,y,y+Es),s.arc(e-f,n+o,c,y+Es,y+Ie),s.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*b,u=i?i/2:l,s.rect(e-u,n-l,2*u,2*l);break}y+=mc;case"rectRot":d=Math.cos(y)*(i?i/2:b),o=Math.cos(y)*b,a=Math.sin(y)*b,f=Math.sin(y)*(i?i/2:b),s.moveTo(e-d,n-a),s.lineTo(e+f,n-o),s.lineTo(e+d,n+a),s.lineTo(e-f,n+o),s.closePath();break;case"crossRot":y+=mc;case"cross":d=Math.cos(y)*(i?i/2:b),o=Math.cos(y)*b,a=Math.sin(y)*b,f=Math.sin(y)*(i?i/2:b),s.moveTo(e-d,n-a),s.lineTo(e+d,n+a),s.moveTo(e+f,n-o),s.lineTo(e-f,n+o);break;case"star":d=Math.cos(y)*(i?i/2:b),o=Math.cos(y)*b,a=Math.sin(y)*b,f=Math.sin(y)*(i?i/2:b),s.moveTo(e-d,n-a),s.lineTo(e+d,n+a),s.moveTo(e+f,n-o),s.lineTo(e-f,n+o),y+=mc,d=Math.cos(y)*(i?i/2:b),o=Math.cos(y)*b,a=Math.sin(y)*b,f=Math.sin(y)*(i?i/2:b),s.moveTo(e-d,n-a),s.lineTo(e+d,n+a),s.moveTo(e+f,n-o),s.lineTo(e-f,n+o);break;case"line":o=i?i/2:Math.cos(y)*b,a=Math.sin(y)*b,s.moveTo(e-o,n-a),s.lineTo(e+o,n+a);break;case"dash":s.moveTo(e,n),s.lineTo(e+Math.cos(y)*(i?i/2:b),n+Math.sin(y)*b);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function Aa(s,t,e){return e=e||.5,!t||s&&s.x>t.left-e&&s.x<t.right+e&&s.y>t.top-e&&s.y<t.bottom+e}function i0(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function r0(s){s.restore()}function o7(s,t,e,n,i){if(!t)return s.lineTo(e.x,e.y);if(i==="middle"){const r=(t.x+e.x)/2;s.lineTo(r,t.y),s.lineTo(r,e.y)}else i==="after"!=!!n?s.lineTo(t.x,e.y):s.lineTo(e.x,t.y);s.lineTo(e.x,e.y)}function a7(s,t,e,n){if(!t)return s.lineTo(e.x,e.y);s.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function l7(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),be(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function c7(s,t,e,n,i){if(i.strikethrough||i.underline){const r=s.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=i.decorationWidth||2,s.moveTo(o,u),s.lineTo(a,u),s.stroke()}}function u7(s,t){const e=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=e}function rh(s,t,e,n,i,r={}){const o=rs(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(s.save(),s.font=i.string,l7(s,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&u7(s,r.backdrop),a&&(r.strokeColor&&(s.strokeStyle=r.strokeColor),be(r.strokeWidth)||(s.lineWidth=r.strokeWidth),s.strokeText(c,e,n,r.maxWidth)),s.fillText(c,e,n,r.maxWidth),c7(s,e,n,c,r),n+=Number(i.lineHeight);s.restore()}function gg(s,t){const{x:e,y:n,w:i,h:r,radius:o}=t;s.arc(e+o.topLeft,n+o.topLeft,o.topLeft,1.5*Ie,Ie,!0),s.lineTo(e,n+r-o.bottomLeft),s.arc(e+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,Ie,Es,!0),s.lineTo(e+i-o.bottomRight,n+r),s.arc(e+i-o.bottomRight,n+r-o.bottomRight,o.bottomRight,Es,0,!0),s.lineTo(e+i,n+o.topRight),s.arc(e+i-o.topRight,n+o.topRight,o.topRight,0,-Es,!0),s.lineTo(e+o.topLeft,n)}const h7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,d7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function f7(s,t){const e=(""+s).match(h7);if(!e||e[1]==="normal")return t*1.2;switch(s=+e[2],e[3]){case"px":return s;case"%":s/=100;break}return t*s}const p7=s=>+s||0;function QS(s,t){const e={},n=_e(t),i=n?Object.keys(t):t,r=_e(s)?n?o=>re(s[o],s[t[o]]):o=>s[o]:()=>s;for(const o of i)e[o]=p7(r(o));return e}function QM(s){return QS(s,{top:"y",right:"x",bottom:"y",left:"x"})}function zu(s){return QS(s,["topLeft","topRight","bottomLeft","bottomRight"])}function Cn(s){const t=QM(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Vs(s,t){s=s||{},t=t||as.font;let e=re(s.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=re(s.style,t.style);n&&!(""+n).match(d7)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:re(s.family,t.family),lineHeight:f7(re(s.lineHeight,t.lineHeight),e),size:e,style:n,weight:re(s.weight,t.weight),string:""};return i.string=i7(i),i}function Ap(s,t,e,n){let i,r,o;for(i=0,r=s.length;i<r;++i)if(o=s[i],o!==void 0&&o!==void 0)return o}function g7(s,t,e){const{min:n,max:i}=s,r=VM(t,(i-n)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(i,r)}}function sc(s,t){return Object.assign(Object.create(s),t)}function tE(s,t=[""],e,n,i=()=>s[0]){const r=e||s;typeof n>"u"&&(n=nD("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:r,_fallback:n,_getTarget:i,override:a=>tE([a,...s],t,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete s[0][l],!0},get(a,l){return eD(a,l,()=>S7(l,t,s,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(a,l){return uC(a).includes(l)},ownKeys(a){return uC(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function bf(s,t,e,n){const i={_cacheable:!1,_proxy:s,_context:t,_subProxy:e,_stack:new Set,_descriptors:tD(s,n),setContext:r=>bf(s,r,e,n),override:r=>bf(s.override(r),t,e,n)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete s[o],!0},get(r,o,a){return eD(r,o,()=>v7(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(r,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(r,o,a){return s[o]=a,delete r[o],!0}})}function tD(s,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:i=t.allKeys}=s;return{allKeys:i,scriptable:e,indexable:n,isScriptable:Jl(e)?e:()=>e,isIndexable:Jl(n)?n:()=>n}}const m7=(s,t)=>s?s+XS(t):t,eE=(s,t)=>_e(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function eD(s,t,e){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const n=e();return s[t]=n,n}function v7(s,t,e){const{_proxy:n,_context:i,_subProxy:r,_descriptors:o}=s;let a=n[t];return Jl(a)&&o.isScriptable(t)&&(a=b7(t,a,s,e)),rs(a)&&a.length&&(a=y7(t,a,s,o.isIndexable)),eE(t,a)&&(a=bf(a,i,r&&r[t],o)),a}function b7(s,t,e,n){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=e;if(a.has(s))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+s);a.add(s);let l=t(r,o||n);return a.delete(s),eE(s,l)&&(l=sE(i._scopes,i,s,l)),l}function y7(s,t,e,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&n(s))return t[r.index%t.length];if(_e(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=sE(c,i,s,u);t.push(bf(d,r,o&&o[s],a))}}return t}function sD(s,t,e){return Jl(s)?s(t,e):s}const _7=(s,t)=>s===!0?t:typeof s=="string"?Kl(t,s):void 0;function w7(s,t,e,n,i){for(const r of t){const o=_7(e,r);if(o){s.add(o);const a=sD(o._fallback,e,i);if(typeof a<"u"&&a!==e&&a!==n)return a}else if(o===!1&&typeof n<"u"&&e!==n)return null}return!1}function sE(s,t,e,n){const i=t._rootScopes,r=sD(t._fallback,e,n),o=[...s,...i],a=new Set;a.add(n);let l=cC(a,o,e,r||e,n);return l===null||typeof r<"u"&&r!==e&&(l=cC(a,o,r,l,n),l===null)?!1:tE(Array.from(a),[""],i,r,()=>A7(t,e,n))}function cC(s,t,e,n,i){for(;e;)e=w7(s,t,e,n,i);return e}function A7(s,t,e){const n=s._getTarget();t in n||(n[t]={});const i=n[t];return rs(i)&&_e(e)?e:i||{}}function S7(s,t,e,n){let i;for(const r of t)if(i=nD(m7(r,s),e),typeof i<"u")return eE(s,i)?sE(e,n,s,i):i}function nD(s,t){for(const e of t){if(!e)continue;const n=e[s];if(typeof n<"u")return n}}function uC(s){let t=s._keys;return t||(t=s._keys=E7(s._scopes)),t}function E7(s){const t=new Set;for(const e of s)for(const n of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(n);return Array.from(t)}function iD(s,t,e,n){const{iScale:i}=s,{key:r="r"}=this._parsing,o=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+e,u=t[c],o[a]={r:i.parse(Kl(u,r),c)};return o}const x7=Number.EPSILON||1e-14,yf=(s,t)=>t<s.length&&!s[t].skip&&s[t],rD=s=>s==="x"?"y":"x";function T7(s,t,e,n){const i=s.skip?t:s,r=t,o=e.skip?t:e,a=yA(r,i),l=yA(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=n*c,f=n*u;return{previous:{x:r.x-d*(o.x-i.x),y:r.y-d*(o.y-i.y)},next:{x:r.x+f*(o.x-i.x),y:r.y+f*(o.y-i.y)}}}function C7(s,t,e){const n=s.length;let i,r,o,a,l,c=yf(s,0);for(let u=0;u<n-1;++u)if(l=c,c=yf(s,u+1),!(!l||!c)){if(zp(t[u],0,x7)){e[u]=e[u+1]=0;continue}i=e[u]/t[u],r=e[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=i*o*t[u],e[u+1]=r*o*t[u])}}function k7(s,t,e="x"){const n=rD(e),i=s.length;let r,o,a,l=yf(s,0);for(let c=0;c<i;++c){if(o=a,a=l,l=yf(s,c+1),!a)continue;const u=a[e],d=a[n];o&&(r=(u-o[e])/3,a[`cp1${e}`]=u-r,a[`cp1${n}`]=d-r*t[c]),l&&(r=(l[e]-u)/3,a[`cp2${e}`]=u+r,a[`cp2${n}`]=d+r*t[c])}}function I7(s,t="x"){const e=rD(t),n=s.length,i=Array(n).fill(0),r=Array(n);let o,a,l,c=yf(s,0);for(o=0;o<n;++o)if(a=l,l=c,c=yf(s,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[e]-l[e])/u:0}r[o]=a?c?mo(i[o-1])!==mo(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}C7(s,i,r),k7(s,r,t)}function ub(s,t,e){return Math.max(Math.min(s,e),t)}function P7(s,t){let e,n,i,r,o,a=Aa(s[0],t);for(e=0,n=s.length;e<n;++e)o=r,r=a,a=e<n-1&&Aa(s[e+1],t),r&&(i=s[e],o&&(i.cp1x=ub(i.cp1x,t.left,t.right),i.cp1y=ub(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=ub(i.cp2x,t.left,t.right),i.cp2y=ub(i.cp2y,t.top,t.bottom)))}function R7(s,t,e,n,i){let r,o,a,l;if(t.spanGaps&&(s=s.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")I7(s,i);else{let c=n?s[s.length-1]:s[0];for(r=0,o=s.length;r<o;++r)a=s[r],l=T7(c,a,s[Math.min(r+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&P7(s,e)}function nE(){return typeof window<"u"&&typeof document<"u"}function iE(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function s_(s,t,e){let n;return typeof s=="string"?(n=parseInt(s,10),s.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=s,n}const o0=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function M7(s,t){return o0(s).getPropertyValue(t)}const D7=["top","right","bottom","left"];function Wu(s,t,e){const n={};e=e?"-"+e:"";for(let i=0;i<4;i++){const r=D7[i];n[r]=parseFloat(s[t+"-"+r+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const O7=(s,t,e)=>(s>0||t>0)&&(!e||!e.shadowRoot);function L7(s,t){const e=s.touches,n=e&&e.length?e[0]:s,{offsetX:i,offsetY:r}=n;let o=!1,a,l;if(O7(i,r,s.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function xc(s,t){if("native"in s)return s;const{canvas:e,currentDevicePixelRatio:n}=t,i=o0(e),r=i.boxSizing==="border-box",o=Wu(i,"padding"),a=Wu(i,"border","width"),{x:l,y:c,box:u}=L7(s,e),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:m,height:v}=t;return r&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*e.width/n),y:Math.round((c-f)/v*e.height/n)}}function N7(s,t,e){let n,i;if(t===void 0||e===void 0){const r=s&&iE(s);if(!r)t=s.clientWidth,e=s.clientHeight;else{const o=r.getBoundingClientRect(),a=o0(r),l=Wu(a,"border","width"),c=Wu(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,n=s_(a.maxWidth,r,"clientWidth"),i=s_(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:n||t_,maxHeight:i||t_}}const Nl=s=>Math.round(s*10)/10;function F7(s,t,e,n){const i=o0(s),r=Wu(i,"margin"),o=s_(i.maxWidth,s,"clientWidth")||t_,a=s_(i.maxHeight,s,"clientHeight")||t_,l=N7(s,t,e);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=Wu(i,"border","width"),m=Wu(i,"padding");c-=m.width+f.width,u-=m.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,n?c/n:u-r.height),c=Nl(Math.min(c,o,l.maxWidth)),u=Nl(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Nl(c/2)),(t!==void 0||e!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=Nl(Math.floor(u*n))),{width:c,height:u}}function hC(s,t,e){const n=t||1,i=Nl(s.height*n),r=Nl(s.width*n);s.height=Nl(s.height),s.width=Nl(s.width);const o=s.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==n||o.height!==i||o.width!==r?(s.currentDevicePixelRatio=n,o.height=i,o.width=r,s.ctx.setTransform(n,0,0,n,0,0),!0):!1}const B7=(function(){let s=!1;try{const t={get passive(){return s=!0,!1}};nE()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s})();function dC(s,t){const e=M7(s,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Tc(s,t,e,n){return{x:s.x+e*(t.x-s.x),y:s.y+e*(t.y-s.y)}}function $7(s,t,e,n){return{x:s.x+e*(t.x-s.x),y:n==="middle"?e<.5?s.y:t.y:n==="after"?e<1?s.y:t.y:e>0?t.y:s.y}}function U7(s,t,e,n){const i={x:s.cp2x,y:s.cp2y},r={x:t.cp1x,y:t.cp1y},o=Tc(s,i,e),a=Tc(i,r,e),l=Tc(r,t,e),c=Tc(o,a,e),u=Tc(a,l,e);return Tc(c,u,e)}const V7=function(s,t){return{x(e){return s+s+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},H7=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function ed(s,t,e){return s?V7(t,e):H7()}function oD(s,t){let e,n;(t==="ltr"||t==="rtl")&&(e=s.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),s.prevTextDirection=n)}function aD(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function lD(s){return s==="angle"?{between:pg,compare:jz,normalize:yn}:{between:_a,compare:(t,e)=>t-e,normalize:t=>t}}function fC({start:s,end:t,count:e,loop:n,style:i}){return{start:s%e,end:t%e,loop:n&&(t-s+1)%e===0,style:i}}function j7(s,t,e){const{property:n,start:i,end:r}=e,{between:o,normalize:a}=lD(n),l=t.length;let{start:c,end:u,loop:d}=s,f,m;if(d){for(c+=l,u+=l,f=0,m=l;f<m&&o(a(t[c%l][n]),i,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:s.style}}function cD(s,t,e){if(!e)return[s];const{property:n,start:i,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=lD(n),{start:u,end:d,loop:f,style:m}=j7(s,t,e),v=[];let b=!1,y=null,w,k,M;const O=()=>l(i,M,w)&&a(i,M)!==0,B=()=>a(r,w)===0||l(r,M,w),V=()=>b||O(),A=()=>!b||B();for(let S=u,I=u;S<=d;++S)k=t[S%o],!k.skip&&(w=c(k[n]),w!==M&&(b=l(w,i,r),y===null&&V()&&(y=a(w,i)===0?S:I),y!==null&&A()&&(v.push(fC({start:y,end:S,loop:f,count:o,style:m})),y=null),I=S,M=w));return y!==null&&v.push(fC({start:y,end:d,loop:f,count:o,style:m})),v}function uD(s,t){const e=[],n=s.segments;for(let i=0;i<n.length;i++){const r=cD(n[i],s.points,t);r.length&&e.push(...r)}return e}function z7(s,t,e,n){let i=0,r=t-1;if(e&&!n)for(;i<t&&!s[i].skip;)i++;for(;i<t&&s[i].skip;)i++;for(i%=t,e&&(r+=i);r>i&&s[r%t].skip;)r--;return r%=t,{start:i,end:r}}function W7(s,t,e,n){const i=s.length,r=[];let o=t,a=s[t],l;for(l=t+1;l<=e;++l){const c=s[l%i];c.skip||c.stop?a.skip||(n=!1,r.push({start:t%i,end:(l-1)%i,loop:n}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:n}),r}function G7(s,t){const e=s.points,n=s.options.spanGaps,i=e.length;if(!i)return[];const r=!!s._loop,{start:o,end:a}=z7(e,i,r,n);if(n===!0)return pC(s,[{start:o,end:a,loop:r}],e,t);const l=a<o?a+i:a,c=!!s._fullLoop&&o===0&&a===i-1;return pC(s,W7(e,o,l,c),e,t)}function pC(s,t,e,n){return!n||!n.setContext||!e?t:q7(s,t,e,n)}function q7(s,t,e,n){const i=s._chart.getContext(),r=gC(s.options),{_datasetIndex:o,options:{spanGaps:a}}=s,l=e.length,c=[];let u=r,d=t[0].start,f=d;function m(v,b,y,w){const k=a?-1:1;if(v!==b){for(v+=l;e[v%l].skip;)v-=k;for(;e[b%l].skip;)b+=k;v%l!==b%l&&(c.push({start:v%l,end:b%l,loop:y,style:w}),u=w,d=b%l)}}for(const v of t){d=a?d:v.start;let b=e[d%l],y;for(f=d+1;f<=v.end;f++){const w=e[f%l];y=gC(n.setContext(sc(i,{type:"segment",p0:b,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),X7(y,u)&&m(d,f-1,v.loop,u),b=w,u=y}d<f-1&&m(d,f-1,v.loop,u)}return c}function gC(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function X7(s,t){if(!t)return!1;const e=[],n=function(i,r){return ZS(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(s,n)!==JSON.stringify(t,n)}function hb(s,t,e){return s.options.clip?s[e]:t[e]}function Y7(s,t){const{xScale:e,yScale:n}=s;return e&&n?{left:hb(e,t,"left"),right:hb(e,t,"right"),top:hb(n,t,"top"),bottom:hb(n,t,"bottom")}:t}function hD(s,t){const e=t._clip;if(e.disabled)return!1;const n=Y7(t,s.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?s.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?s.height:n.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class K7{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=qM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Do=new K7;const mC="transparent",J7={boolean(s,t,e){return e>.5?t:s},color(s,t,e){const n=oC(s||mC),i=n.valid&&oC(t||mC);return i&&i.valid?i.mix(n,e).hexString():t},number(s,t,e){return s+(t-s)*e}};class Z7{constructor(t,e,n,i){const r=e[n];i=Ap([t.to,i,r,t.from]);const o=Ap([t.from,r,i]);this._active=!0,this._fn=t.fn||J7[t.type||typeof o],this._easing=Wp[t.easing]||Wp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ap([t.to,e,i,t.from]),this._from=Ap([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<n),!this._active){this._target[i]=a,this._notify(!0);return}if(e<0){this._target[i]=r;return}l=e/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class dD{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!_e(t))return;const e=Object.keys(as.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!_e(r))return;const o={};for(const a of e)o[a]=r[a];(rs(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,e){const n=e.options,i=tW(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&Q7(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,e));continue}const u=e[c];let d=r[c];const f=n.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){t[c]=u;continue}r[c]=d=new Z7(f,t,c,u),i.push(d)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return Do.add(this._chart,n),!0}}function Q7(s,t){const e=[],n=Object.keys(t);for(let i=0;i<n.length;i++){const r=s[n[i]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function tW(s,t){if(!t)return;let e=s.options;if(!e){s.options=t;return}return e.$shared&&(s.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function vC(s,t){const e=s&&s.options||{},n=e.reverse,i=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:n?r:i,end:n?i:r}}function eW(s,t,e){if(e===!1)return!1;const n=vC(s,e),i=vC(t,e);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function sW(s){let t,e,n,i;return _e(s)?(t=s.top,e=s.right,n=s.bottom,i=s.left):t=e=n=i=s,{top:t,right:e,bottom:n,left:i,disabled:s===!1}}function fD(s,t){const e=[],n=s._getSortedDatasetMetas(t);let i,r;for(i=0,r=n.length;i<r;++i)e.push(n[i].index);return e}function bC(s,t,e,n={}){const i=s.keys,r=n.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===e){if(u=!0,n.all)continue;break}c=s.values[l],ys(c)&&(r||t===0||mo(t)===mo(c))&&(t+=c)}return!u&&!n.all?0:t}function nW(s,t){const{iScale:e,vScale:n}=t,i=e.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(s),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:s[u]};return a}function ow(s,t){const e=s&&s.options.stacked;return e||e===void 0&&t.stack!==void 0}function iW(s,t,e){return`${s.id}.${t.id}.${e.stack||e.type}`}function rW(s){const{min:t,max:e,minDefined:n,maxDefined:i}=s.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function oW(s,t,e){const n=s[t]||(s[t]={});return n[e]||(n[e]={})}function yC(s,t,e,n){for(const i of t.getMatchingVisibleMetas(n).reverse()){const r=s[i.index];if(e&&r>0||!e&&r<0)return i.index}return null}function _C(s,t){const{chart:e,_cachedMeta:n}=s,i=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,u=iW(r,o,n),d=t.length;let f;for(let m=0;m<d;++m){const v=t[m],{[l]:b,[c]:y}=v,w=v._stacks||(v._stacks={});f=w[c]=oW(i,u,b),f[a]=y,f._top=yC(f,o,!0,n.type),f._bottom=yC(f,o,!1,n.type);const k=f._visualValues||(f._visualValues={});k[a]=y}}function aw(s,t){const e=s.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function aW(s,t){return sc(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function lW(s,t,e){return sc(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Yf(s,t){const e=s.controller.index,n=s.vScale&&s.vScale.axis;if(n){t=t||s._parsed;for(const i of t){const r=i._stacks;if(!r||r[n]===void 0||r[n][e]===void 0)return;delete r[n][e],r[n]._visualValues!==void 0&&r[n]._visualValues[e]!==void 0&&delete r[n]._visualValues[e]}}}const lw=s=>s==="reset"||s==="none",wC=(s,t)=>t?s:Object.assign({},s),cW=(s,t,e)=>s&&!t.hidden&&t._stacked&&{keys:fD(e,!0),values:null};class xr{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ow(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Yf(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(d,f,m,v)=>d==="x"?f:d==="r"?v:m,r=e.xAxisID=re(n.xAxisID,aw(t,"x")),o=e.yAxisID=re(n.yAxisID,aw(t,"y")),a=e.rAxisID=re(n.rAxisID,aw(t,"r")),l=e.indexAxis,c=e.iAxisID=i(l,r,o,a),u=e.vAxisID=i(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&nC(this._data,this),t._stacked&&Yf(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(_e(e)){const i=this._cachedMeta;this._data=nW(e,i)}else if(n!==e){if(n){nC(n,this);const i=this._cachedMeta;Yf(i),i._parsed=[]}e&&Object.isExtensible(e)&&qz(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=ow(e.vScale,e),e.stack!==n.stack&&(i=!0,Yf(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&(_C(this,e._parsed),e._stacked=ow(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let l=t===0&&e===i.length?!0:n._sorted,c=t>0&&n._parsed[t-1],u,d,f;if(this._parsing===!1)n._parsed=i,n._sorted=!0,f=i;else{rs(i[t])?f=this.parseArrayData(n,i,t,e):_e(i[t])?f=this.parseObjectData(n,i,t,e):f=this.parsePrimitiveData(n,i,t,e);const m=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<e;++u)n._parsed[u+t]=d=f[u],l&&(m()&&(l=!1),c=d);n._sorted=l}o&&_C(this,f)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(i);let f,m,v;for(f=0,m=i;f<m;++f)v=f+n,d[f]={[a]:u||r.parse(c[v],v),[l]:o.parse(e[v],v)};return d}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+n,d=e[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,m;for(u=0,d=i;u<d;++u)f=u+n,m=e[f],c[u]={x:r.parse(Kl(m,a),f),y:o.parse(Kl(m,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:fD(i,!0),values:e._stacks[t.axis]._visualValues};return bC(a,o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=r===null?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,o=bC(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,a=this._getOtherScale(t),l=cW(e,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=rW(a);let f,m;function v(){m=i[f];const b=m[a.axis];return!ys(m[t.axis])||u>b||d<b}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,t,m,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,t,m,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],ys(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=sW(re(this.options.clip,eW(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=lW(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=aW(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&fg(n);if(a)return wC(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),m=Object.keys(as.elements[t]),v=()=>this.getContext(n,i,e),b=c.resolveNamedOptions(f,m,v,d);return b.$shared&&(b.$shared=l,r[o]=Object.freeze(wC(b,l))),b}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,e),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(t,n,e))}const c=new dD(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||lw(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:o}}updateElement(t,e,n,i){lw(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!lw(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Yf(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ht(xr,"defaults",{}),ht(xr,"datasetElementType",null),ht(xr,"dataElementType",null);function uW(s,t){if(!s._cache.$bar){const e=s.getMatchingVisibleMetas(t);let n=[];for(let i=0,r=e.length;i<r;i++)n=n.concat(e[i].controller.getAllParsedValues(s));s._cache.$bar=GM(n.sort((i,r)=>i-r))}return s._cache.$bar}function hW(s){const t=s.iScale,e=uW(t,s.type);let n=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(fg(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(i=0,r=e.length;i<r;++i)o=t.getPixelForValue(e[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return n}function dW(s,t,e,n){const i=e.barThickness;let r,o;return be(i)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=i*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[s]-r/2}}function fW(s,t,e,n){const i=t.pixels,r=i[s];let o=s>0?i[s-1]:null,a=s<i.length-1?i[s+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:e.barPercentage,start:c}}function pW(s,t,e,n){const i=e.parse(s[0],n),r=e.parse(s[1],n),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function pD(s,t,e,n){return rs(s)?pW(s,t,e,n):t[e.axis]=e.parse(s,n),t}function AC(s,t,e,n){const i=s.iScale,r=s.vScale,o=i.getLabels(),a=i===r,l=[];let c,u,d,f;for(c=e,u=e+n;c<u;++c)f=t[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(pD(f,d,r,c));return l}function cw(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function gW(s,t,e){return s!==0?mo(s):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function mW(s){let t,e,n,i,r;return s.horizontal?(t=s.base>s.x,e="left",n="right"):(t=s.base<s.y,e="bottom",n="top"),t?(i="end",r="start"):(i="start",r="end"),{start:e,end:n,reverse:t,top:i,bottom:r}}function vW(s,t,e,n){let i=t.borderSkipped;const r={};if(!i){s.borderSkipped=r;return}if(i===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=mW(s);i==="middle"&&e&&(s.enableBorderRadius=!0,(e._top||0)===n?i=c:(e._bottom||0)===n?i=u:(r[SC(u,o,a,l)]=!0,i=c)),r[SC(i,o,a,l)]=!0,s.borderSkipped=r}function SC(s,t,e,n){return n?(s=bW(s,t,e),s=EC(s,e,t)):s=EC(s,t,e),s}function bW(s,t,e){return s===t?e:s===e?t:s}function EC(s,t,e){return s==="start"?t:s==="end"?e:s}function yW(s,{inflateAmount:t},e){s.inflateAmount=t==="auto"?e===1?.33:0:t}class my extends xr{parsePrimitiveData(t,e,n,i){return AC(t,e,n,i)}parseArrayData(t,e,n,i){return AC(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,m,v,b;for(f=n,m=n+i;f<m;++f)b=e[f],v={},v[r.axis]=r.parse(Kl(b,c),f),d.push(pD(Kl(b,u),v,o,f));return d}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=cw(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(e,i);for(let m=e;m<e+n;m++){const v=this.getParsed(m),b=r||be(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),y=this._calculateBarIndexPixels(m,u),w=(v._stacks||{})[a.axis],k={horizontal:c,base:b.base,enableBorderRadius:!w||cw(v._custom)||o===w._top||o===w._bottom,x:c?b.head:y.center,y:c?y.center:b.head,height:c?y.size:Math.abs(b.size),width:c?Math.abs(b.size):y.size};f&&(k.options=d||this.resolveDataElementOptions(m,t[m].active?"active":i));const M=k.options||t[m].options;vW(k,M,w,o),yW(k,M,u.ratio),this.updateElement(t[m],m,k,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[n.axis],c=u=>{const d=u._parsed.find(m=>m[n.axis]===l),f=d&&d[u.vScale.axis];if(be(f)||isNaN(f))return!0};for(const u of i)if(!(e!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[re(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=e!==void 0?i.indexOf(e):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||hW(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,u=cw(c);let d=l[e.axis],f=0,m=n?this.applyStack(e,l,n):d,v,b;m!==d&&(f=m-d,m=d),u&&(d=c.barStart,m=c.barEnd-c.barStart,d!==0&&mo(d)!==mo(c.barEnd)&&(f=0),f+=d);const y=!be(r)&&!u?r:f;let w=e.getPixelForValue(y);if(this.chart.getDataVisibility(t)?v=e.getPixelForValue(f+m):v=w,b=v-w,Math.abs(b)<o){b=gW(b,e,a)*o,d===a&&(w-=b/2);const k=e.getPixelForDecimal(0),M=e.getPixelForDecimal(1),O=Math.min(k,M),B=Math.max(k,M);w=Math.max(Math.min(w,B),O),v=w+b,n&&!u&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(v)-e.getValueForPixel(w))}if(w===e.getPixelForValue(a)){const k=mo(b)*e.getLineWidthForValue(a)/2;w+=k,b-=k}return{size:b,base:w,head:v,center:v+b/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,o=re(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(e.grouped){const u=r?this._getStackCount(t):e.stackCount,d=i.barThickness==="flex"?fW(t,e,i,u*c):dW(t,e,i,u*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(re(f,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+m;a=d.start+d.chunk*v+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)this.getParsed(r)[e.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}ht(my,"id","bar"),ht(my,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ht(my,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class vy extends xr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let o=0;o<r.length;o++){const a=e[n+o];r[o]._custom=re(a[2],this.resolveDataElementOptions(o+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let o=0;o<r.length;o++){const a=e[n+o];r[o]._custom=re(a&&a.r&&+a.r,this.resolveDataElementOptions(o+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:n[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,i),u=o.axis,d=a.axis;for(let f=e;f<e+n;f++){const m=t[f],v=!r&&this.getParsed(f),b={},y=b[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(v[u]),w=b[d]=r?a.getBasePixel():a.getPixelForValue(v[d]);b.skip=isNaN(y)||isNaN(w),c&&(b.options=l||this.resolveDataElementOptions(f,m.active?"active":i),r&&(b.options.radius=0)),this.updateElement(m,f,b,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return e!=="active"&&(i.radius=0),i.radius+=re(n&&n._custom,r),i}}ht(vy,"id","bubble"),ht(vy,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ht(vy,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function _W(s,t,e){let n=1,i=1,r=0,o=0;if(t<es){const a=s,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),m=(M,O,B)=>pg(M,a,l,!0)?1:Math.max(O,O*e,B,B*e),v=(M,O,B)=>pg(M,a,l,!0)?-1:Math.min(O,O*e,B,B*e),b=m(0,c,d),y=m(Es,u,f),w=v(Ie,c,d),k=v(Ie+Es,u,f);n=(b-w)/2,i=(y-k)/2,r=-(b+w)/2,o=-(y+k)/2}return{ratioX:n,ratioY:i,offsetX:r,offsetY:o}}class Oc extends xr{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let r=l=>+n[l];if(_e(n[t])){const{key:l="value"}=this._parsing;r=c=>+Kl(n[c],l)}let o,a;for(o=t,a=t+e;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return br(this.options.rotation-90)}_getCircumference(){return br(this.options.circumference)}_getRotationExtents(){let t=es,e=-es;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),l=Math.min(Mz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:v,offsetY:b}=_W(d,u,l),y=(n.width-o)/f,w=(n.height-o)/m,k=Math.max(Math.min(y,w)/2,0),M=VM(this.options.radius,k),O=Math.max(M*l,0),B=(M-O)/this._getVisibleDatasetWeightTotal();this.offsetX=v*M,this.offsetY=b*M,i.total=this.calculateTotal(),this.outerRadius=M-B*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-B*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/es)}updateElements(t,e,n,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&c.animateScale,m=f?0:this.innerRadius,v=f?0:this.outerRadius,{sharedOptions:b,includeOptions:y}=this._getSharedOptions(e,i);let w=this._getRotation(),k;for(k=0;k<e;++k)w+=this._circumference(k,r);for(k=e;k<e+n;++k){const M=this._circumference(k,r),O=t[k],B={x:u+this.offsetX,y:d+this.offsetY,startAngle:w,endAngle:w+M,circumference:M,outerRadius:v,innerRadius:m};y&&(B.options=b||this.resolveDataElementOptions(k,O.active?"active":i)),w+=M,this.updateElement(O,k,B,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,i;for(i=0;i<e.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?es*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=fv(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const r=this.resolveDataElementOptions(n);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(re(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ht(Oc,"id","doughnut"),ht(Oc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ht(Oc,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ht(Oc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:n,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((l,c)=>{const d=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:n,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class by extends xr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=YM(e,i,o);this._drawStart=a,this._drawCount=l,KM(e)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,e,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,i),f=o.axis,m=a.axis,{spanGaps:v,segment:b}=this.options,y=vf(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||i==="none",k=e+n,M=t.length;let O=e>0&&this.getParsed(e-1);for(let B=0;B<M;++B){const V=t[B],A=w?V:{};if(B<e||B>=k){A.skip=!0;continue}const S=this.getParsed(B),I=be(S[m]),L=A[f]=o.getPixelForValue(S[f],B),P=A[m]=r||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[m],B);A.skip=isNaN(L)||isNaN(P)||I,A.stop=B>0&&Math.abs(S[f]-O[f])>y,b&&(A.parsed=S,A.raw=c.data[B]),d&&(A.options=u||this.resolveDataElementOptions(B,V.active?"active":i)),w||this.updateElement(V,B,A,i),O=S}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ht(by,"id","line"),ht(by,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ht(by,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class qp extends xr{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=fv(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return iD.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,n,i){const r=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*Ie;let m=f,v;const b=360/this.countVisibleElements();for(v=0;v<e;++v)m+=this._computeAngle(v,i,b);for(v=e;v<e+n;v++){const y=t[v];let w=m,k=m+this._computeAngle(v,i,b),M=o.getDataVisibility(v)?c.getDistanceFromCenterForValue(this.getParsed(v).r):0;m=k,r&&(l.animateScale&&(M=0),l.animateRotate&&(w=k=f));const O={x:u,y:d,innerRadius:0,outerRadius:M,startAngle:w,endAngle:k,options:this.resolveDataElementOptions(v,y.active?"active":i)};this.updateElement(y,v,O,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?br(this.resolveDataElementOptions(t,e).angle||n):0}}ht(qp,"id","polarArea"),ht(qp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ht(qp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class AA extends Oc{}ht(AA,"id","pie"),ht(AA,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class yy extends xr{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return iD.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(n,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=e;a<e+n;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:u.x,f=o?r.yCenter:u.y,m={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,m,i)}}}ht(yy,"id","radar"),ht(yy,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ht(yy,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class _y extends xr{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:o}=YM(e,n,i);if(this._drawStart=r,this._drawCount=o,KM(e)&&(r=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(e,i),d=this.getSharedOptions(u),f=this.includeOptions(i,d),m=o.axis,v=a.axis,{spanGaps:b,segment:y}=this.options,w=vf(b)?b:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||r||i==="none";let M=e>0&&this.getParsed(e-1);for(let O=e;O<e+n;++O){const B=t[O],V=this.getParsed(O),A=k?B:{},S=be(V[v]),I=A[m]=o.getPixelForValue(V[m],O),L=A[v]=r||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,V,l):V[v],O);A.skip=isNaN(I)||isNaN(L)||S,A.stop=O>0&&Math.abs(V[m]-M[m])>w,y&&(A.parsed=V,A.raw=c.data[O]),f&&(A.options=d||this.resolveDataElementOptions(O,B.active?"active":i)),k||this.updateElement(B,O,A,i),M=V}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,o)/2}}ht(_y,"id","scatter"),ht(_y,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ht(_y,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var wW=Object.freeze({__proto__:null,BarController:my,BubbleController:vy,DoughnutController:Oc,LineController:by,PieController:AA,PolarAreaController:qp,RadarController:yy,ScatterController:_y});function bc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class rE{constructor(t){ht(this,"options");this.options=t||{}}static override(t){Object.assign(rE.prototype,t)}init(){}formats(){return bc()}parse(){return bc()}format(){return bc()}add(){return bc()}diff(){return bc()}startOf(){return bc()}endOf(){return bc()}}var AW={_date:rE};function SW(s,t,e,n){const{controller:i,data:r,_sorted:o}=s,a=i._cachedMeta.iScale,l=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?Wz:wa;if(n){if(i._sharedOptions){const u=r[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){const f=c(r,t,e-d),m=c(r,t,e+d);return{lo:f.lo,hi:m.hi}}}}else{const u=c(r,t,e);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=s,m=f.slice(0,u.lo+1).reverse().findIndex(b=>!be(b[d.axis]));u.lo-=Math.max(0,m);const v=f.slice(u.hi).findIndex(b=>!be(b[d.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:r.length-1}}function a0(s,t,e,n,i){const r=s.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:f}=SW(r[a],t,o,i);for(let m=d;m<=f;++m){const v=u[m];v.skip||n(v,c,m)}}}function EW(s){const t=s.indexOf("x")!==-1,e=s.indexOf("y")!==-1;return function(n,i){const r=t?Math.abs(n.x-i.x):0,o=e?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function uw(s,t,e,n,i){const r=[];return!i&&!s.isPointInArea(t)||a0(s,e,t,function(a,l,c){!i&&!Aa(a,s.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function xW(s,t,e,n){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:d}=zM(o,{x:t.x,y:t.y});pg(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return a0(s,e,t,r),i}function TW(s,t,e,n,i,r){let o=[];const a=EW(e);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const m=u.inRange(t.x,t.y,i);if(n&&!m)return;const v=u.getCenterPoint(i);if(!(!!r||s.isPointInArea(v))&&!m)return;const y=a(t,v);y<l?(o=[{element:u,datasetIndex:d,index:f}],l=y):y===l&&o.push({element:u,datasetIndex:d,index:f})}return a0(s,e,t,c),o}function hw(s,t,e,n,i,r){return!r&&!s.isPointInArea(t)?[]:e==="r"&&!n?xW(s,t,e,i):TW(s,t,e,n,i,r)}function xC(s,t,e,n,i){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return a0(s,e,t,(l,c,u)=>{l[o]&&l[o](t[e],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),n&&!a?[]:r}var CW={modes:{index(s,t,e,n){const i=xc(t,s),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?uw(s,i,r,n,o):hw(s,i,r,!1,n,o),l=[];return a.length?(s.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(s,t,e,n){const i=xc(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?uw(s,i,r,n,o):hw(s,i,r,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,c=s.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(s,t,e,n){const i=xc(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;return uw(s,i,r,n,o)},nearest(s,t,e,n){const i=xc(t,s),r=e.axis||"xy",o=e.includeInvisible||!1;return hw(s,i,r,e.intersect,n,o)},x(s,t,e,n){const i=xc(t,s);return xC(s,i,"x",e.intersect,n)},y(s,t,e,n){const i=xc(t,s);return xC(s,i,"y",e.intersect,n)}}};const gD=["left","top","right","bottom"];function Kf(s,t){return s.filter(e=>e.pos===t)}function TC(s,t){return s.filter(e=>gD.indexOf(e.pos)===-1&&e.box.axis===t)}function Jf(s,t){return s.sort((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function kW(s){const t=[];let e,n,i,r,o,a;for(e=0,n=(s||[]).length;e<n;++e)i=s[e],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:e,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function IW(s){const t={};for(const e of s){const{stack:n,pos:i,stackWeight:r}=e;if(!n||!gD.includes(i))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function PW(s,t){const e=IW(s),{vBoxMaxWidth:n,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=s.length;r<o;++r){a=s[r];const{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&t.availableHeight)}return e}function RW(s){const t=kW(s),e=Jf(t.filter(c=>c.box.fullSize),!0),n=Jf(Kf(t,"left"),!0),i=Jf(Kf(t,"right")),r=Jf(Kf(t,"top"),!0),o=Jf(Kf(t,"bottom")),a=TC(t,"x"),l=TC(t,"y");return{fullSize:e,leftAndTop:n.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Kf(t,"chartArea"),vertical:n.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function CC(s,t,e,n){return Math.max(s[e],t[e])+Math.max(s[n],t[n])}function mD(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function MW(s,t,e,n){const{pos:i,box:r}=e,o=s.maxPadding;if(!_e(i)){e.size&&(s[i]-=e.size);const d=n[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?r.height:r.width),e.size=d.size/d.count,s[i]+=e.size}r.getPadding&&mD(o,r.getPadding());const a=Math.max(0,t.outerWidth-CC(o,s,"left","right")),l=Math.max(0,t.outerHeight-CC(o,s,"top","bottom")),c=a!==s.w,u=l!==s.h;return s.w=a,s.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function DW(s){const t=s.maxPadding;function e(n){const i=Math.max(t[n]-s[n],0);return s[n]+=i,i}s.y+=e("top"),s.x+=e("left"),e("right"),e("bottom")}function OW(s,t){const e=t.maxPadding;function n(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return n(s?["left","right"]:["top","bottom"])}function Sp(s,t,e,n){const i=[];let r,o,a,l,c,u;for(r=0,o=s.length,c=0;r<o;++r){a=s[r],l=a.box,l.update(a.width||t.w,a.height||t.h,OW(a.horizontal,t));const{same:d,other:f}=MW(t,e,a,n);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&Sp(i,t,e,n)||u}function db(s,t,e,n,i){s.top=e,s.left=t,s.right=t+n,s.bottom=e+i,s.width=n,s.height=i}function kC(s,t,e,n){const i=e.padding;let{x:r,y:o}=t;for(const a of s){const l=a.box,c=n[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,f=c.size||l.height;fg(c.start)&&(o=c.start),l.fullSize?db(l,i.left,o,e.outerWidth-i.right-i.left,f):db(l,t.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*u,f=c.size||l.width;fg(c.start)&&(r=c.start),l.fullSize?db(l,r,i.top,f,e.outerHeight-i.bottom-i.top):db(l,r,t.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var En={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},s.boxes.push(t)},removeBox(s,t){const e=s.boxes?s.boxes.indexOf(t):-1;e!==-1&&s.boxes.splice(e,1)},configure(s,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(s,t,e,n){if(!s)return;const i=Cn(s.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(e-i.height,0),a=RW(s.boxes),l=a.vertical,c=a.horizontal;He(s.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,y)=>y.box.options&&y.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);mD(f,Cn(n));const m=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),v=PW(l.concat(c),d);Sp(a.fullSize,m,d,v),Sp(l,m,d,v),Sp(c,m,d,v)&&Sp(l,m,d,v),DW(m),kC(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,kC(a.rightAndBottom,m,d,v),s.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},He(a.chartArea,b=>{const y=b.box;Object.assign(y,s.chartArea),y.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class vD{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class LW extends vD{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const wy="$chartjs",NW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},IC=s=>s===null||s==="";function FW(s,t){const e=s.style,n=s.getAttribute("height"),i=s.getAttribute("width");if(s[wy]={initial:{height:n,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",IC(i)){const r=dC(s,"width");r!==void 0&&(s.width=r)}if(IC(n))if(s.style.height==="")s.height=s.width/(t||2);else{const r=dC(s,"height");r!==void 0&&(s.height=r)}return s}const bD=B7?{passive:!0}:!1;function BW(s,t,e){s&&s.addEventListener(t,e,bD)}function $W(s,t,e){s&&s.canvas&&s.canvas.removeEventListener(t,e,bD)}function UW(s,t){const e=NW[s.type]||s.type,{x:n,y:i}=xc(s,t);return{type:e,chart:t,native:s,x:n!==void 0?n:null,y:i!==void 0?i:null}}function n_(s,t){for(const e of s)if(e===t||e.contains(t))return!0}function VW(s,t,e){const n=s.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||n_(a.addedNodes,n),o=o&&!n_(a.removedNodes,n);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function HW(s,t,e){const n=s.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||n_(a.removedNodes,n),o=o&&!n_(a.addedNodes,n);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const mg=new Map;let PC=0;function yD(){const s=window.devicePixelRatio;s!==PC&&(PC=s,mg.forEach((t,e)=>{e.currentDevicePixelRatio!==s&&t()}))}function jW(s,t){mg.size||window.addEventListener("resize",yD),mg.set(s,t)}function zW(s){mg.delete(s),mg.size||window.removeEventListener("resize",yD)}function WW(s,t,e){const n=s.canvas,i=n&&iE(n);if(!i)return;const r=XM((a,l)=>{const c=i.clientWidth;e(a,l),c<i.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),jW(s,r),o}function dw(s,t,e){e&&e.disconnect(),t==="resize"&&zW(s)}function GW(s,t,e){const n=s.canvas,i=XM(r=>{s.ctx!==null&&e(UW(r,s))},s);return BW(n,t,i),i}class qW extends vD{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(FW(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[wy])return!1;const n=e[wy].initial;["height","width"].forEach(r=>{const o=n[r];be(o)?e.removeAttribute(r):e.setAttribute(r,o)});const i=n.style||{};return Object.keys(i).forEach(r=>{e.style[r]=i[r]}),e.width=e.width,delete e[wy],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),o={attach:VW,detach:HW,resize:WW}[e]||GW;i[e]=o(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:dw,detach:dw,resize:dw}[e]||$W)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return F7(t,e,n,i)}isAttached(t){const e=t&&iE(t);return!!(e&&e.isConnected)}}function XW(s){return!nE()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?LW:qW}var yb;let Va=(yb=class{constructor(){ht(this,"x");ht(this,"y");ht(this,"active",!1);ht(this,"options");ht(this,"$animations")}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return vf(this.x)&&vf(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(r=>{i[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),i}},ht(yb,"defaults",{}),ht(yb,"defaultRoutes"),yb);function YW(s,t){const e=s.options.ticks,n=KW(s),i=Math.min(e.maxTicksLimit||n,n),r=e.major.enabled?ZW(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return QW(t,c,r,o/i),c;const u=JW(r,t,i);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(fb(t,c,u,be(m)?0:a-m,a),d=0,f=o-1;d<f;d++)fb(t,c,u,r[d],r[d+1]);return fb(t,c,u,l,be(m)?t.length:l+m),c}return fb(t,c,u),c}function KW(s){const t=s.options.offset,e=s._tickSize(),n=s._length/e+(t?0:1),i=s._maxLength/e;return Math.floor(Math.min(n,i))}function JW(s,t,e){const n=tG(s),i=t.length/e;if(!n)return Math.max(i,1);const r=Uz(n);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function ZW(s){const t=[];let e,n;for(e=0,n=s.length;e<n;e++)s[e].major&&t.push(e);return t}function QW(s,t,e,n){let i=0,r=e[0],o;for(n=Math.ceil(n),o=0;o<s.length;o++)o===r&&(t.push(s[o]),i++,r=e[i*n])}function fb(s,t,e,n,i){const r=re(n,0),o=Math.min(re(i,s.length),s.length);let a=0,l,c,u;for(e=Math.ceil(e),i&&(l=i-n,e=l/Math.floor(l/e)),u=r;u<0;)a++,u=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(s[c]),a++,u=Math.round(r+a*e))}function tG(s){const t=s.length;let e,n;if(t<2)return!1;for(n=s[0],e=1;e<t;++e)if(s[e]-s[e-1]!==n)return!1;return n}const eG=s=>s==="left"?"right":s==="right"?"left":s,RC=(s,t,e)=>t==="top"||t==="left"?s[t]+e:s[t]-e,MC=(s,t)=>Math.min(t||s,s);function DC(s,t){const e=[],n=s.length/t,i=s.length;let r=0;for(;r<i;r+=n)e.push(s[Math.floor(r)]);return e}function sG(s,t,e){const n=s.ticks.length,i=Math.min(t,n-1),r=s._startPixel,o=s._endPixel,a=1e-6;let l=s.getPixelForTick(i),c;if(!(e&&(n===1?c=Math.max(l-r,o-l):t===0?c=(s.getPixelForTick(1)-l)/2:c=(l-s.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function nG(s,t){He(s,e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}})}function Zf(s){return s.drawTicks?s.tickLength:0}function OC(s,t){if(!s.display)return 0;const e=Vs(s.font,t),n=Cn(s.padding);return(rs(s.text)?s.text.length:1)*e.lineHeight+n.height}function iG(s,t){return sc(s,{scale:t,type:"scale"})}function rG(s,t,e){return sc(s,{tick:e,index:t,type:"tick"})}function oG(s,t,e){let n=JS(s);return(e&&t!=="right"||!e&&t==="right")&&(n=eG(n)),n}function aG(s,t,e,n){const{top:i,left:r,bottom:o,right:a,chart:l}=s,{chartArea:c,scales:u}=l;let d=0,f,m,v;const b=o-i,y=a-r;if(s.isHorizontal()){if(m=vn(n,r,a),_e(e)){const w=Object.keys(e)[0],k=e[w];v=u[w].getPixelForValue(k)+b-t}else e==="center"?v=(c.bottom+c.top)/2+b-t:v=RC(s,e,t);f=a-r}else{if(_e(e)){const w=Object.keys(e)[0],k=e[w];m=u[w].getPixelForValue(k)-y+t}else e==="center"?m=(c.left+c.right)/2-y+t:m=RC(s,e,t);v=vn(n,o,i),d=e==="left"?-Es:Es}return{titleX:m,titleY:v,maxWidth:f,rotation:d}}class lh extends Va{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=li(t,Number.POSITIVE_INFINITY),e=li(e,Number.NEGATIVE_INFINITY),n=li(n,Number.POSITIVE_INFINITY),i=li(i,Number.NEGATIVE_INFINITY),{min:li(t,n),max:li(e,i),minDefined:ys(t),maxDefined:ys(e)}}getMinMax(t){let{min:e,max:n,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:e,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(e=Math.min(e,o.min)),r||(n=Math.max(n,o.max));return e=r&&e>n?n:e,n=i&&e>n?e:n,{min:li(e,li(n,e)),max:li(n,li(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qe(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=g7(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?DC(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=YW(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qe(this.options.afterUpdate,[this])}beforeSetDimensions(){Qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Qe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=Qe(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=MC(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,m=Js(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/n:m/(n-1),d+6>a&&(a=m/(n-(t.offset?.5:1)),l=this.maxHeight-Zf(t.grid)-e.padding-OC(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=YS(Math.min(Math.asin(Js((u.highest.height+6)/a,-1,1)),Math.asin(Js(l/c,-1,1))-Math.asin(Js(f/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=OC(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=Zf(r)+l):(t.height=this.maxHeight,t.width=Zf(r)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),m=n.padding*2,v=br(this.labelRotation),b=Math.cos(v),y=Math.sin(v);if(a){const w=n.mirror?0:y*d.width+b*f.height;t.height=Math.min(this.maxHeight,t.height+w+m)}else{const w=n.mirror?0:b*d.width+y*f.height;t.width=Math.min(this.maxWidth,t.width+w+m)}this._calculatePadding(c,u,y,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=i*t.width,m=n*e.height):(f=n*t.height,m=i*e.width):r==="start"?m=e.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,m=e.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let u=e.height/2,d=t.height/2;r==="start"?(u=0,d=t.height):r==="end"&&(u=e.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)be(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=DC(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/MC(e,n));let c=0,u=0,d,f,m,v,b,y,w,k,M,O,B;for(d=0;d<e;d+=l){if(v=t[d].label,b=this._resolveTickFontOptions(d),i.font=y=b.string,w=r[y]=r[y]||{data:{},gc:[]},k=b.lineHeight,M=O=0,!be(v)&&!rs(v))M=e_(i,w.data,w.gc,M,v),O=k;else if(rs(v))for(f=0,m=v.length;f<m;++f)B=v[f],!be(B)&&!rs(B)&&(M=e_(i,w.data,w.gc,M,B),O+=k);o.push(M),a.push(O),c=Math.max(M,c),u=Math.max(O,u)}nG(r,e);const V=o.indexOf(c),A=a.indexOf(u),S=I=>({width:o[I]||0,height:a[I]||0});return{first:S(0),last:S(e-1),widest:S(V),highest:S(A),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return zz(this._alignToPixels?vc(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=rG(this.getContext(),t,n))}return this.$context||(this.$context=iG(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=br(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Zf(r),m=[],v=a.setContext(this.getContext()),b=v.display?v.width:0,y=b/2,w=function(tt){return vc(n,tt,b)};let k,M,O,B,V,A,S,I,L,P,$,N;if(o==="top")k=w(this.bottom),A=this.bottom-f,I=k-y,P=w(t.top)+y,N=t.bottom;else if(o==="bottom")k=w(this.top),P=t.top,N=w(t.bottom)-y,A=k+y,I=this.top+f;else if(o==="left")k=w(this.right),V=this.right-f,S=k-y,L=w(t.left)+y,$=t.right;else if(o==="right")k=w(this.left),L=t.left,$=w(t.right)-y,V=k+y,S=this.left+f;else if(e==="x"){if(o==="center")k=w((t.top+t.bottom)/2+.5);else if(_e(o)){const tt=Object.keys(o)[0],X=o[tt];k=w(this.chart.scales[tt].getPixelForValue(X))}P=t.top,N=t.bottom,A=k+y,I=A+f}else if(e==="y"){if(o==="center")k=w((t.left+t.right)/2);else if(_e(o)){const tt=Object.keys(o)[0],X=o[tt];k=w(this.chart.scales[tt].getPixelForValue(X))}V=k-y,S=V-f,L=t.left,$=t.right}const _t=re(i.ticks.maxTicksLimit,d),xt=Math.max(1,Math.ceil(d/_t));for(M=0;M<d;M+=xt){const tt=this.getContext(M),X=r.setContext(tt),nt=a.setContext(tt),U=X.lineWidth,it=X.color,vt=nt.dash||[],j=nt.dashOffset,Z=X.tickWidth,dt=X.tickColor,Ft=X.tickBorderDash||[],kt=X.tickBorderDashOffset;O=sG(this,M,l),O!==void 0&&(B=vc(n,O,U),c?V=S=L=$=B:A=I=P=N=B,m.push({tx1:V,ty1:A,tx2:S,ty2:I,x1:L,y1:P,x2:$,y2:N,width:U,color:it,borderDash:vt,borderDashOffset:j,tickWidth:Z,tickColor:dt,tickBorderDash:Ft,tickBorderDashOffset:kt}))}return this._ticksLength=d,this._borderValue=k,m}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,f=Zf(n.grid),m=f+u,v=d?-u:m,b=-br(this.labelRotation),y=[];let w,k,M,O,B,V,A,S,I,L,P,$,N="middle";if(i==="top")V=this.bottom-v,A=this._getXAxisLabelAlignment();else if(i==="bottom")V=this.top+v,A=this._getXAxisLabelAlignment();else if(i==="left"){const xt=this._getYAxisLabelAlignment(f);A=xt.textAlign,B=xt.x}else if(i==="right"){const xt=this._getYAxisLabelAlignment(f);A=xt.textAlign,B=xt.x}else if(e==="x"){if(i==="center")V=(t.top+t.bottom)/2+m;else if(_e(i)){const xt=Object.keys(i)[0],tt=i[xt];V=this.chart.scales[xt].getPixelForValue(tt)+m}A=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")B=(t.left+t.right)/2-m;else if(_e(i)){const xt=Object.keys(i)[0],tt=i[xt];B=this.chart.scales[xt].getPixelForValue(tt)}A=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?N="top":l==="end"&&(N="bottom"));const _t=this._getLabelSizes();for(w=0,k=a.length;w<k;++w){M=a[w],O=M.label;const xt=r.setContext(this.getContext(w));S=this.getPixelForTick(w)+r.labelOffset,I=this._resolveTickFontOptions(w),L=I.lineHeight,P=rs(O)?O.length:1;const tt=P/2,X=xt.color,nt=xt.textStrokeColor,U=xt.textStrokeWidth;let it=A;o?(B=S,A==="inner"&&(w===k-1?it=this.options.reverse?"left":"right":w===0?it=this.options.reverse?"right":"left":it="center"),i==="top"?c==="near"||b!==0?$=-P*L+L/2:c==="center"?$=-_t.highest.height/2-tt*L+L:$=-_t.highest.height+L/2:c==="near"||b!==0?$=L/2:c==="center"?$=_t.highest.height/2-tt*L:$=_t.highest.height-P*L,d&&($*=-1),b!==0&&!xt.showLabelBackdrop&&(B+=L/2*Math.sin(b))):(V=S,$=(1-P)*L/2);let vt;if(xt.showLabelBackdrop){const j=Cn(xt.backdropPadding),Z=_t.heights[w],dt=_t.widths[w];let Ft=$-j.top,kt=0-j.left;switch(N){case"middle":Ft-=Z/2;break;case"bottom":Ft-=Z;break}switch(A){case"center":kt-=dt/2;break;case"right":kt-=dt;break;case"inner":w===k-1?kt-=dt:w>0&&(kt-=dt/2);break}vt={left:kt,top:Ft,width:dt+j.width,height:Z+j.height,color:xt.backdropColor}}y.push({label:O,font:I,textOffset:$,options:{rotation:b,color:X,strokeColor:nt,strokeWidth:U,textAlign:it,textBaseline:N,translation:[B,V],backdrop:vt}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-br(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return e==="left"?i?(u=this.right+r,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?i?(u=this.left+r,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const l=i[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=vc(t,this.left,o)-o/2,u=vc(t,this.right,a)+a/2,d=f=l):(d=vc(t,this.top,o)-o/2,f=vc(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,d),e.lineTo(u,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&i0(n,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;rh(n,c,0,u,l,a)}i&&r0(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=Vs(n.font),o=Cn(n.padding),a=n.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||_e(e)?(l+=o.bottom,rs(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=aG(this,l,e,a);rh(t,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:f,textAlign:oG(a,e,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=re(t.grid&&t.grid.z,-1),i=re(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==lh.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[n]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Vs(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class pb{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;uG(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,lG(t,o,n),this.override&&as.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in as[i]&&(delete as[i][n],this.override&&delete ih[n])}}function lG(s,t,e){const n=dg(Object.create(null),[e?as.get(e):{},as.get(t),s.defaults]);as.set(t,n),s.defaultRoutes&&cG(t,s.defaultRoutes),s.descriptors&&as.describe(t,s.descriptors)}function cG(s,t){Object.keys(t).forEach(e=>{const n=e.split("."),i=n.pop(),r=[s].concat(n).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");as.route(r,i,l,a)})}function uG(s){return"id"in s&&"defaults"in s}class hG{constructor(){this.controllers=new pb(xr,"datasets",!0),this.elements=new pb(Va,"elements"),this.plugins=new pb(Object,"plugins"),this.scales=new pb(lh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(i=>{const r=n||this._getRegistryForType(i);n||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):He(i,o=>{const a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,n){const i=XS(t);Qe(n["before"+i],[],n),e[t](n),Qe(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var Wr=new hG;class dG{constructor(){this._init=void 0}notify(t,e,n,i){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,n,i){i=i||{};for(const r of t){const o=r.plugin,a=o[n],l=[e,i,r.options];if(Qe(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=re(n.options&&n.options.plugins,{}),r=fG(n);return i===!1&&!e?[]:gG(t,r,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function fG(s){const t={},e=[],n=Object.keys(Wr.plugins.items);for(let r=0;r<n.length;r++)e.push(Wr.getPlugin(n[r]));const i=s.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function pG(s,t){return!t&&s===!1?null:s===!0?{}:s}function gG(s,{plugins:t,localIds:e},n,i){const r=[],o=s.getContext();for(const a of t){const l=a.id,c=pG(n[l],i);c!==null&&r.push({plugin:a,options:mG(s.config,{plugin:a,local:e[l]},c,o)})}return r}function mG(s,{plugin:t,local:e},n,i){const r=s.pluginScopeKeys(t),o=s.getOptionScopes(n,r);return e&&t.defaults&&o.push(t.defaults),s.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function SA(s,t){const e=as.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function vG(s,t){let e=s;return s==="_index_"?e=t:s==="_value_"&&(e=t==="x"?"y":"x"),e}function bG(s,t){return s===t?"_index_":"_value_"}function LC(s){if(s==="x"||s==="y"||s==="r")return s}function yG(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function EA(s,...t){if(LC(s))return s;for(const e of t){const n=e.axis||yG(e.position)||s.length>1&&LC(s[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function NC(s,t,e){if(e[t+"AxisID"]===s)return{axis:t}}function _G(s,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===s||n.yAxisID===s);if(e.length)return NC(s,"x",e[0])||NC(s,"y",e[0])}return{}}function wG(s,t){const e=ih[s.type]||{scales:{}},n=t.scales||{},i=SA(s.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!_e(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=EA(o,a,_G(o,s),as.scales[a.type]),c=bG(l,i),u=e.scales||{};r[o]=jp(Object.create(null),[{axis:l},a,u[l],u[c]])}),s.data.datasets.forEach(o=>{const a=o.type||s.type,l=o.indexAxis||SA(a,t),u=(ih[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=vG(d,l),m=o[f+"AxisID"]||f;r[m]=r[m]||Object.create(null),jp(r[m],[{axis:f},n[m],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];jp(a,[as.scales[a.type],as.scale])}),r}function _D(s){const t=s.options||(s.options={});t.plugins=re(t.plugins,{}),t.scales=wG(s,t)}function wD(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function AG(s){return s=s||{},s.data=wD(s.data),_D(s),s}const FC=new Map,AD=new Set;function gb(s,t){let e=FC.get(s);return e||(e=t(),FC.set(s,e),AD.add(e)),e}const Qf=(s,t,e)=>{const n=Kl(t,e);n!==void 0&&s.add(n)};class SG{constructor(t){this._config=AG(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=wD(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),_D(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return gb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return gb(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return gb(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return gb(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return(!i||e)&&(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(d=>Qf(l,t,d))),u.forEach(d=>Qf(l,i,d)),u.forEach(d=>Qf(l,ih[r]||{},d)),u.forEach(d=>Qf(l,as,d)),u.forEach(d=>Qf(l,_A,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),AD.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,ih[e]||{},as.datasets[e]||{},{type:e},as,_A]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=BC(this._resolverCache,t,i);let l=o;if(xG(o,e)){r.$shared=!1,n=Jl(n)?n():n;const c=this.createResolver(t,n,a);l=bf(o,n,c)}for(const c of e)r[c]=l[c];return r}createResolver(t,e,n=[""],i){const{resolver:r}=BC(this._resolverCache,t,n);return _e(e)?bf(r,e,void 0,i):r}}function BC(s,t,e){let n=s.get(t);n||(n=new Map,s.set(t,n));const i=e.join();let r=n.get(i);return r||(r={resolver:tE(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,r)),r}const EG=s=>_e(s)&&Object.getOwnPropertyNames(s).some(t=>Jl(s[t]));function xG(s,t){const{isScriptable:e,isIndexable:n}=tD(s);for(const i of t){const r=e(i),o=n(i),a=(o||r)&&s[i];if(r&&(Jl(a)||EG(a))||o&&rs(a))return!0}return!1}var TG="4.5.1";const CG=["top","bottom","left","right","chartArea"];function $C(s,t){return s==="top"||s==="bottom"||CG.indexOf(s)===-1&&t==="x"}function UC(s,t){return function(e,n){return e[s]===n[s]?e[t]-n[t]:e[s]-n[s]}}function VC(s){const t=s.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Qe(e&&e.onComplete,[s],t)}function kG(s){const t=s.chart,e=t.options.animation;Qe(e&&e.onProgress,[s],t)}function SD(s){return nE()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Ay={},HC=s=>{const t=SD(s);return Object.values(Ay).filter(e=>e.canvas===t).pop()};function IG(s,t,e){const n=Object.keys(s);for(const i of n){const r=+i;if(r>=t){const o=s[i];delete s[i],(e>0||r>t)&&(s[r+e]=o)}}}function PG(s,t,e,n){return!e||s.type==="mouseout"?null:n?t:s}class Ks{static register(...t){Wr.add(...t),jC()}static unregister(...t){Wr.remove(...t),jC()}constructor(t,e){const n=this.config=new SG(e),i=SD(t),r=HC(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||XW(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Rz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new dG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Xz(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Ay[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Do.listen(this,"complete",VC),Do.listen(this,"progress",kG),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return be(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Wr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lC(this.canvas,this.ctx),this}stop(){return Do.stop(this),this}resize(t,e){Do.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,hC(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Qe(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};He(e,(n,i)=>{n.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=EA(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),He(r,o=>{const a=o.options,l=a.id,c=EA(l,a),u=re(a.type,o.dtype);(a.position===void 0||$C(a.position,c)!==$C(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in n&&n[l].type===u)d=n[l];else{const f=Wr.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(a,t)}),He(i,(o,a)=>{o||delete n[a]}),He(n,o=>{En.configure(this,o,o.options),En.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((i,r)=>i.index-r.index),n>e){for(let i=e;i<n;++i)this._destroyDatasetMeta(i);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(UC("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,i)=>{e.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const r=e[n];let o=this.getDatasetMeta(n);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||SA(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=Wr.getController(a),{datasetElementType:c,dataElementType:u}=as.datasets[a];Object.assign(l,{dataElementType:Wr.getElement(u),datasetElementType:c&&Wr.getElement(c)}),o.controller=new l(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){He(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||He(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(UC("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){He(this.scales,t=>{En.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!QT(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){const o=n==="_removeElements"?-r:r;IG(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=n(0);for(let r=1;r<e;r++)if(!QT(i,n(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;En.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],He(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Jl(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Do.has(this)?this.attached&&!Do.running(this)&&Do.start(this):(this.draw(),VC({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const o=e[i];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=hD(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&i0(e,i),t.controller.draw(),i&&r0(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Aa(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=CW.modes[e];return typeof r=="function"?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(r=>r&&r._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=sc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);fg(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Do.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),lC(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ay[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};He(this.options.events,r=>n(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){He(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},He(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Zy(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(e,t),a=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,n,o),l=Fz(t),c=PG(t,this._lastEvent,n,l);n&&(this._lastEvent=null,Qe(r.onHover,[t,a,this],this),l&&Qe(r.onClick,[t,a,this],this));const u=!Zy(a,i);return(u||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=c,u}_getActiveElements(t,e,n,i){if(t.type==="mouseout")return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}ht(Ks,"defaults",as),ht(Ks,"instances",Ay),ht(Ks,"overrides",ih),ht(Ks,"registry",Wr),ht(Ks,"version",TG),ht(Ks,"getChart",HC);function jC(){return He(Ks.instances,s=>s._plugins.invalidate())}function RG(s,t,e){const{startAngle:n,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,yn(n-e));if(s.beginPath(),s.arc(i,r,o-c/2,n+d/2,e-d/2),a>0){const f=Math.min(c/a,yn(n-e));s.arc(i,r,a+c/2,e-f/2,n+f/2,!0)}else{const f=Math.min(c/2,o*yn(n-e));if(u==="round")s.arc(i,r,f,e-Ie/2,n+Ie/2,!0);else if(u==="bevel"){const m=2*f*f,v=-m*Math.cos(e+Ie/2)+i,b=-m*Math.sin(e+Ie/2)+r,y=m*Math.cos(n+Ie/2)+i,w=m*Math.sin(n+Ie/2)+r;s.lineTo(v,b),s.lineTo(y,w)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function MG(s,t,e){const{startAngle:n,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;s.beginPath(),s.arc(r,o,a,n-c,e+c),l>i?(c=i/l,s.arc(r,o,l,e+c,n-c,!0)):s.arc(r,o,i,e+Es,n-Es),s.closePath(),s.clip()}function DG(s){return QS(s,["outerStart","outerEnd","innerStart","innerEnd"])}function OG(s,t,e,n){const i=DG(s.options.borderRadius),r=(e-t)/2,o=Math.min(r,n*t/2),a=l=>{const c=(e-Math.min(r,l))*n/2;return Js(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Js(i.innerStart,0,o),innerEnd:Js(i.innerEnd,0,o)}}function Ih(s,t,e,n){return{x:e+s*Math.cos(t),y:n+s*Math.sin(t)}}function i_(s,t,e,n,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+n+e-c,0),f=u>0?u+n+e+c:0;let m=0;const v=i-l;if(n){const xt=u>0?u-n:0,tt=d>0?d-n:0,X=(xt+tt)/2,nt=X!==0?v*X/(X+n):v;m=(v-nt)/2}const b=Math.max(.001,v*d-e/Ie)/d,y=(v-b)/2,w=l+y+m,k=i-y-m,{outerStart:M,outerEnd:O,innerStart:B,innerEnd:V}=OG(t,f,d,k-w),A=d-M,S=d-O,I=w+M/A,L=k-O/S,P=f+B,$=f+V,N=w+B/P,_t=k-V/$;if(s.beginPath(),r){const xt=(I+L)/2;if(s.arc(o,a,d,I,xt),s.arc(o,a,d,xt,L),O>0){const U=Ih(S,L,o,a);s.arc(U.x,U.y,O,L,k+Es)}const tt=Ih($,k,o,a);if(s.lineTo(tt.x,tt.y),V>0){const U=Ih($,_t,o,a);s.arc(U.x,U.y,V,k+Es,_t+Math.PI)}const X=(k-V/f+(w+B/f))/2;if(s.arc(o,a,f,k-V/f,X,!0),s.arc(o,a,f,X,w+B/f,!0),B>0){const U=Ih(P,N,o,a);s.arc(U.x,U.y,B,N+Math.PI,w-Es)}const nt=Ih(A,w,o,a);if(s.lineTo(nt.x,nt.y),M>0){const U=Ih(A,I,o,a);s.arc(U.x,U.y,M,w-Es,I)}}else{s.moveTo(o,a);const xt=Math.cos(I)*d+o,tt=Math.sin(I)*d+a;s.lineTo(xt,tt);const X=Math.cos(L)*d+o,nt=Math.sin(L)*d+a;s.lineTo(X,nt)}s.closePath()}function LG(s,t,e,n,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){i_(s,t,e,n,l,i);for(let c=0;c<r;++c)s.fill();isNaN(a)||(l=o+(a%es||es))}return i_(s,t,e,n,l,i),s.fill(),l}function NG(s,t,e,n,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f,borderRadius:m}=l,v=l.borderAlign==="inner";if(!c)return;s.setLineDash(d||[]),s.lineDashOffset=f,v?(s.lineWidth=c*2,s.lineJoin=u||"round"):(s.lineWidth=c,s.lineJoin=u||"bevel");let b=t.endAngle;if(r){i_(s,t,e,n,b,i);for(let y=0;y<r;++y)s.stroke();isNaN(a)||(b=o+(a%es||es))}v&&MG(s,t,b),l.selfJoin&&b-o>=Ie&&m===0&&u!=="miter"&&RG(s,t,b),r||(i_(s,t,e,n,b,i),s.stroke())}class Ep extends Va{constructor(e){super();ht(this,"circumference");ht(this,"endAngle");ht(this,"fullCircles");ht(this,"innerRadius");ht(this,"outerRadius");ht(this,"pixelMargin");ht(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=zM(r,{x:e,y:n}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,v=re(f,c-l),b=pg(o,l,c)&&l!==c,y=v>=es||b,w=_a(a,u+m,d+m);return y&&w}getCenterPoint(e){const{x:n,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:u}=this.options,d=(r+o)/2,f=(a+l+u+c)/2;return{x:n+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,r=(n.offset||0)/4,o=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>es?Math.floor(i/es):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Ie,i||0)),u=r*c;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,LG(e,this,u,o,a),NG(e,this,u,o,a),e.restore()}}ht(Ep,"id","arc"),ht(Ep,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ht(Ep,"defaultRoutes",{backgroundColor:"backgroundColor"}),ht(Ep,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function ED(s,t,e=t){s.lineCap=re(e.borderCapStyle,t.borderCapStyle),s.setLineDash(re(e.borderDash,t.borderDash)),s.lineDashOffset=re(e.borderDashOffset,t.borderDashOffset),s.lineJoin=re(e.borderJoinStyle,t.borderJoinStyle),s.lineWidth=re(e.borderWidth,t.borderWidth),s.strokeStyle=re(e.borderColor,t.borderColor)}function FG(s,t,e){s.lineTo(e.x,e.y)}function BG(s){return s.stepped?o7:s.tension||s.cubicInterpolationMode==="monotone"?a7:FG}function xD(s,t,e={}){const n=s.length,{start:i=0,end:r=n-1}=e,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function $G(s,t,e,n){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=xD(i,e,n),u=BG(r);let{move:d=!0,reverse:f}=n||{},m,v,b;for(m=0;m<=c;++m)v=i[(a+(f?c-m:m))%o],!v.skip&&(d?(s.moveTo(v.x,v.y),d=!1):u(s,b,v,f,r.stepped),b=v);return l&&(v=i[(a+(f?c:0))%o],u(s,b,v,f,r.stepped)),!!l}function UG(s,t,e,n){const i=t.points,{count:r,start:o,ilen:a}=xD(i,e,n),{move:l=!0,reverse:c}=n||{};let u=0,d=0,f,m,v,b,y,w;const k=O=>(o+(c?a-O:O))%r,M=()=>{b!==y&&(s.lineTo(u,y),s.lineTo(u,b),s.lineTo(u,w))};for(l&&(m=i[k(0)],s.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=i[k(f)],m.skip)continue;const O=m.x,B=m.y,V=O|0;V===v?(B<b?b=B:B>y&&(y=B),u=(d*u+O)/++d):(M(),s.lineTo(O,B),v=V,d=0,b=y=B),w=B}M()}function xA(s){const t=s.options,e=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?UG:$G}function VG(s){return s.stepped?$7:s.tension||s.cubicInterpolationMode==="monotone"?U7:Tc}function HG(s,t,e,n){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,n)&&i.closePath()),ED(s,t.options),s.stroke(i)}function jG(s,t,e,n){const{segments:i,options:r}=t,o=xA(t);for(const a of i)ED(s,r,a.style),s.beginPath(),o(s,t,a,{start:e,end:e+n-1})&&s.closePath(),s.stroke()}const zG=typeof Path2D=="function";function WG(s,t,e,n){zG&&!t.options.segment?HG(s,t,e,n):jG(s,t,e,n)}class Fl extends Va{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;R7(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=G7(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=uD(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],l=VG(n);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],m=r[d],v=r[f];if(m===v){a.push(m);continue}const b=Math.abs((i-m[e])/(v[e]-m[e])),y=l(m,v,b,n.stepped);y[e]=t[e],a.push(y)}return a.length===1?a[0]:a}pathSegment(t,e,n){return xA(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=xA(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),WG(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ht(Fl,"id","line"),ht(Fl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ht(Fl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ht(Fl,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function zC(s,t,e,n){const i=s.options,{[e]:r}=s.getProps([e],n);return Math.abs(t-r)<i.radius+i.hitRadius}class Sy extends Va{constructor(e){super();ht(this,"parsed");ht(this,"skip");ht(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(n-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return zC(this,e,"x",n)}inYRange(e,n){return zC(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!Aa(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,wA(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ht(Sy,"id","point"),ht(Sy,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ht(Sy,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function TD(s,t){const{x:e,y:n,base:i,width:r,height:o}=s.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return s.horizontal?(d=o/2,a=Math.min(e,i),l=Math.max(e,i),c=n-d,u=n+d):(d=r/2,a=e-d,l=e+d,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function Bl(s,t,e,n){return s?0:Js(t,e,n)}function GG(s,t,e){const n=s.options.borderWidth,i=s.borderSkipped,r=QM(n);return{t:Bl(i.top,r.top,0,e),r:Bl(i.right,r.right,0,t),b:Bl(i.bottom,r.bottom,0,e),l:Bl(i.left,r.left,0,t)}}function qG(s,t,e){const{enableBorderRadius:n}=s.getProps(["enableBorderRadius"]),i=s.options.borderRadius,r=zu(i),o=Math.min(t,e),a=s.borderSkipped,l=n||_e(i);return{topLeft:Bl(!l||a.top||a.left,r.topLeft,0,o),topRight:Bl(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Bl(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Bl(!l||a.bottom||a.right,r.bottomRight,0,o)}}function XG(s){const t=TD(s),e=t.right-t.left,n=t.bottom-t.top,i=GG(s,e/2,n/2),r=qG(s,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function fw(s,t,e,n){const i=t===null,r=e===null,a=s&&!(i&&r)&&TD(s,n);return a&&(i||_a(t,a.left,a.right))&&(r||_a(e,a.top,a.bottom))}function YG(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function KG(s,t){s.rect(t.x,t.y,t.w,t.h)}function pw(s,t,e={}){const n=s.x!==e.x?-t:0,i=s.y!==e.y?-t:0,r=(s.x+s.w!==e.x+e.w?t:0)-n,o=(s.y+s.h!==e.y+e.h?t:0)-i;return{x:s.x+n,y:s.y+i,w:s.w+r,h:s.h+o,radius:s.radius}}class Ey extends Va{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=XG(this),a=YG(o.radius)?gg:KG;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,pw(o,e,r)),t.clip(),a(t,pw(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,pw(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return fw(this,t,e,n)}inXRange(t,e){return fw(this,t,null,e)}inYRange(t,e){return fw(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ht(Ey,"id","bar"),ht(Ey,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ht(Ey,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var JG=Object.freeze({__proto__:null,ArcElement:Ep,BarElement:Ey,LineElement:Fl,PointElement:Sy});const TA=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],WC=TA.map(s=>s.replace("rgb(","rgba(").replace(")",", 0.5)"));function CD(s){return TA[s%TA.length]}function kD(s){return WC[s%WC.length]}function ZG(s,t){return s.borderColor=CD(t),s.backgroundColor=kD(t),++t}function QG(s,t){return s.backgroundColor=s.data.map(()=>CD(t++)),t}function tq(s,t){return s.backgroundColor=s.data.map(()=>kD(t++)),t}function eq(s){let t=0;return(e,n)=>{const i=s.getDatasetMeta(n).controller;i instanceof Oc?t=QG(e,t):i instanceof qp?t=tq(e,t):i&&(t=ZG(e,t))}}function GC(s){let t;for(t in s)if(s[t].borderColor||s[t].backgroundColor)return!0;return!1}function sq(s){return s&&(s.borderColor||s.backgroundColor)}function nq(){return as.borderColor!=="rgba(0,0,0,0.1)"||as.backgroundColor!=="rgba(0,0,0,0.1)"}var iq={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(s,t,e){if(!e.enabled)return;const{data:{datasets:n},options:i}=s.config,{elements:r}=i,o=GC(n)||sq(i)||r&&GC(r)||nq();if(!e.forceOverride&&o)return;const a=eq(s);n.forEach(a)}};function rq(s,t,e,n,i){const r=i.samples||n;if(r>=e)return s.slice(t,t+e);const o=[],a=(e-2)/(r-2);let l=0;const c=t+e-1;let u=t,d,f,m,v,b;for(o[l++]=s[u],d=0;d<r-2;d++){let y=0,w=0,k;const M=Math.floor((d+1)*a)+1+t,O=Math.min(Math.floor((d+2)*a)+1,e)+t,B=O-M;for(k=M;k<O;k++)y+=s[k].x,w+=s[k].y;y/=B,w/=B;const V=Math.floor(d*a)+1+t,A=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:S,y:I}=s[u];for(m=v=-1,k=V;k<A;k++)v=.5*Math.abs((S-y)*(s[k].y-I)-(S-s[k].x)*(w-I)),v>m&&(m=v,f=s[k],b=k);o[l++]=f,u=b}return o[l++]=s[c],o}function oq(s,t,e,n){let i=0,r=0,o,a,l,c,u,d,f,m,v,b;const y=[],w=t+e-1,k=s[t].x,O=s[w].x-k;for(o=t;o<t+e;++o){a=s[o],l=(a.x-k)/O*n,c=a.y;const B=l|0;if(B===u)c<v?(v=c,d=o):c>b&&(b=c,f=o),i=(r*i+a.x)/++r;else{const V=o-1;if(!be(d)&&!be(f)){const A=Math.min(d,f),S=Math.max(d,f);A!==m&&A!==V&&y.push({...s[A],x:i}),S!==m&&S!==V&&y.push({...s[S],x:i})}o>0&&V!==m&&y.push(s[V]),y.push(a),u=B,r=0,v=b=c,d=f=m=o}}return y}function ID(s){if(s._decimated){const t=s._data;delete s._decimated,delete s._data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function qC(s){s.data.datasets.forEach(t=>{ID(t)})}function aq(s,t){const e=t.length;let n=0,i;const{iScale:r}=s,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(n=Js(wa(t,r.axis,o).lo,0,e-1)),c?i=Js(wa(t,r.axis,a).hi+1,n,e)-n:i=e-n,{start:n,count:i}}var lq={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(s,t,e)=>{if(!e.enabled){qC(s);return}const n=s.width;s.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,l=s.getDatasetMeta(r),c=o||i.data;if(Ap([a,s.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=s.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||s.options.parsing)return;let{start:d,count:f}=aq(l,c);const m=e.threshold||4*n;if(f<=m){ID(i);return}be(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let v;switch(e.algorithm){case"lttb":v=rq(c,d,f,n,e);break;case"min-max":v=oq(c,d,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=v})},destroy(s){qC(s)}};function cq(s,t,e){const n=s.segments,i=s.points,r=t.points,o=[];for(const a of n){let{start:l,end:c}=a;c=l0(l,c,i);const u=CA(e,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=uD(t,u);for(const f of d){const m=CA(e,r[f.start],r[f.end],f.loop),v=cD(a,i,m);for(const b of v)o.push({source:b,target:f,start:{[e]:XC(u,m,"start",Math.max)},end:{[e]:XC(u,m,"end",Math.min)}})}}return o}function CA(s,t,e,n){if(n)return;let i=t[s],r=e[s];return s==="angle"&&(i=yn(i),r=yn(r)),{property:s,start:i,end:r}}function uq(s,t){const{x:e=null,y:n=null}=s||{},i=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=l0(o,a,i);const l=i[o],c=i[a];n!==null?(r.push({x:l.x,y:n}),r.push({x:c.x,y:n})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function l0(s,t,e){for(;t>s;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function XC(s,t,e,n){return s&&t?n(s[e],t[e]):s?s[e]:t?t[e]:0}function PD(s,t){let e=[],n=!1;return rs(s)?(n=!0,e=s):e=uq(s,t),e.length?new Fl({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function YC(s){return s&&s.fill!==!1}function hq(s,t,e){let i=s[t].fill;const r=[t];let o;if(!e)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!ys(i))return i;if(o=s[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function dq(s,t,e){const n=mq(s);if(_e(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return ys(i)&&Math.floor(i)===i?fq(n[0],t,i,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function fq(s,t,e,n){return(s==="-"||s==="+")&&(e=t+e),e===t||e<0||e>=n?!1:e}function pq(s,t){let e=null;return s==="start"?e=t.bottom:s==="end"?e=t.top:_e(s)?e=t.getPixelForValue(s.value):t.getBasePixel&&(e=t.getBasePixel()),e}function gq(s,t,e){let n;return s==="start"?n=e:s==="end"?n=t.options.reverse?t.min:t.max:_e(s)?n=s.value:n=t.getBaseValue(),n}function mq(s){const t=s.options,e=t.fill;let n=re(e&&e.target,e);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function vq(s){const{scale:t,index:e,line:n}=s,i=[],r=n.segments,o=n.points,a=bq(t,e);a.push(PD({x:null,y:t.bottom},n));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)yq(i,o[u],a)}return new Fl({points:i,options:{}})}function bq(s,t){const e=[],n=s.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const r=n[i];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function yq(s,t,e){const n=[];for(let i=0;i<e.length;i++){const r=e[i],{first:o,last:a,point:l}=_q(r,t,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(s.push(l),!a)break}}s.push(...n)}function _q(s,t,e){const n=s.interpolate(t,e);if(!n)return{};const i=n[e],r=s.segments,o=s.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=o[u.start][e],f=o[u.end][e];if(_a(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:n}}class RD{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:es},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function wq(s){const{chart:t,fill:e,line:n}=s;if(ys(e))return Aq(t,e);if(e==="stack")return vq(s);if(e==="shape")return!0;const i=Sq(s);return i instanceof RD?i:PD(i,n)}function Aq(s,t){const e=s.getDatasetMeta(t);return e&&s.isDatasetVisible(t)?e.dataset:null}function Sq(s){return(s.scale||{}).getPointPositionForValue?xq(s):Eq(s)}function Eq(s){const{scale:t={},fill:e}=s,n=pq(e,t);if(ys(n)){const i=t.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function xq(s){const{scale:t,fill:e}=s,n=t.options,i=t.getLabels().length,r=n.reverse?t.max:t.min,o=gq(e,t,r),a=[];if(n.grid.circular){const l=t.getPointPositionForValue(0,r);return new RD({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function gw(s,t,e){const n=wq(t),{chart:i,index:r,line:o,scale:a,axis:l}=t,c=o.options,u=c.fill,d=c.backgroundColor,{above:f=d,below:m=d}=u||{},v=i.getDatasetMeta(r),b=hD(i,v);n&&o.points.length&&(i0(s,e),Tq(s,{line:o,target:n,above:f,below:m,area:e,scale:a,axis:l,clip:b}),r0(s))}function Tq(s,t){const{line:e,target:n,above:i,below:r,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;s.save();let u=r;r!==i&&(c==="x"?(KC(s,n,o.top),mw(s,{line:e,target:n,color:i,scale:a,property:c,clip:l}),s.restore(),s.save(),KC(s,n,o.bottom)):c==="y"&&(JC(s,n,o.left),mw(s,{line:e,target:n,color:r,scale:a,property:c,clip:l}),s.restore(),s.save(),JC(s,n,o.right),u=i)),mw(s,{line:e,target:n,color:u,scale:a,property:c,clip:l}),s.restore()}function KC(s,t,e){const{segments:n,points:i}=t;let r=!0,o=!1;s.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[l0(l,c,i)];r?(s.moveTo(u.x,u.y),r=!1):(s.lineTo(u.x,e),s.lineTo(u.x,u.y)),o=!!t.pathSegment(s,a,{move:o}),o?s.closePath():s.lineTo(d.x,e)}s.lineTo(t.first().x,e),s.closePath(),s.clip()}function JC(s,t,e){const{segments:n,points:i}=t;let r=!0,o=!1;s.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],d=i[l0(l,c,i)];r?(s.moveTo(u.x,u.y),r=!1):(s.lineTo(e,u.y),s.lineTo(u.x,u.y)),o=!!t.pathSegment(s,a,{move:o}),o?s.closePath():s.lineTo(e,d.y)}s.lineTo(e,t.first().y),s.closePath(),s.clip()}function mw(s,t){const{line:e,target:n,property:i,color:r,scale:o,clip:a}=t,l=cq(e,n,i);for(const{source:c,target:u,start:d,end:f}of l){const{style:{backgroundColor:m=r}={}}=c,v=n!==!0;s.save(),s.fillStyle=m,Cq(s,o,a,v&&CA(i,d,f)),s.beginPath();const b=!!e.pathSegment(s,c);let y;if(v){b?s.closePath():ZC(s,n,f,i);const w=!!n.pathSegment(s,u,{move:b,reverse:!0});y=b&&w,y||ZC(s,n,d,i)}s.closePath(),s.fill(y?"evenodd":"nonzero"),s.restore()}}function Cq(s,t,e,n){const i=t.chart.chartArea,{property:r,start:o,end:a}=n||{};if(r==="x"||r==="y"){let l,c,u,d;r==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),s.beginPath(),e&&(l=Math.max(l,e.left),u=Math.min(u,e.right),c=Math.max(c,e.top),d=Math.min(d,e.bottom)),s.rect(l,c,u-l,d-c),s.clip()}}function ZC(s,t,e,n){const i=t.interpolate(e,n);i&&s.lineTo(i.x,i.y)}var kq={id:"filler",afterDatasetsUpdate(s,t,e){const n=(s.data.datasets||[]).length,i=[];let r,o,a,l;for(o=0;o<n;++o)r=s.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Fl&&(l={visible:s.isDatasetVisible(o),index:o,fill:dq(a,o,n),chart:s,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,i.push(l);for(o=0;o<n;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=hq(i,o,e.propagate))},beforeDraw(s,t,e){const n=e.drawTime==="beforeDraw",i=s.getSortedVisibleDatasetMetas(),r=s.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),n&&a.fill&&gw(s.ctx,a,r))}},beforeDatasetsDraw(s,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const n=s.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const r=n[i].$filler;YC(r)&&gw(s.ctx,r,s.chartArea)}},beforeDatasetDraw(s,t,e){const n=t.meta.$filler;!YC(n)||e.drawTime!=="beforeDatasetDraw"||gw(s.ctx,n,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const QC=(s,t)=>{let{boxHeight:e=t,boxWidth:n=t}=s;return s.usePointStyle&&(e=Math.min(e,t),n=s.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},Iq=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class tk extends Va{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Qe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,i)=>t.sort(n,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,i=Vs(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=QC(n,r);let c,u;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((v,b)=>{const y=n+e/2+r.measureText(v.text).width;(b===0||c[c.length-1]+y+2*a>o)&&(d+=u,c[c.length-(b>0?0:1)]=0,m+=u,f++),l[b]={left:0,top:m,row:f,width:y,height:i},c[c.length-1]+=y+a}),d}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let d=a,f=0,m=0,v=0,b=0;return this.legendItems.forEach((y,w)=>{const{itemWidth:k,itemHeight:M}=Pq(n,e,r,y,i);w>0&&m+M+2*a>u&&(d+=f+a,c.push({width:f,height:m}),v+=f+a,b++,f=m=0),l[w]={left:v,top:m,col:b,width:k,height:M},f=Math.max(f,k),m+=M+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,o=ed(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=vn(n,this.left+i,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=vn(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=vn(n,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=vn(n,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;i0(t,this),this._draw(),r0(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,a=as.color,l=ed(t.rtl,this.left,this.width),c=Vs(o.font),{padding:u}=o,d=c.size,f=d/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:v,boxHeight:b,itemHeight:y}=QC(o,d),w=function(V,A,S){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;i.save();const I=re(S.lineWidth,1);if(i.fillStyle=re(S.fillStyle,a),i.lineCap=re(S.lineCap,"butt"),i.lineDashOffset=re(S.lineDashOffset,0),i.lineJoin=re(S.lineJoin,"miter"),i.lineWidth=I,i.strokeStyle=re(S.strokeStyle,a),i.setLineDash(re(S.lineDash,[])),o.usePointStyle){const L={radius:b*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:I},P=l.xPlus(V,v/2),$=A+f;ZM(i,L,P,$,o.pointStyleWidth&&v)}else{const L=A+Math.max((d-b)/2,0),P=l.leftForLtr(V,v),$=zu(S.borderRadius);i.beginPath(),Object.values($).some(N=>N!==0)?gg(i,{x:P,y:L,w:v,h:b,radius:$}):i.rect(P,L,v,b),i.fill(),I!==0&&i.stroke()}i.restore()},k=function(V,A,S){rh(i,S.text,V,A+y/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},M=this.isHorizontal(),O=this._computeTitleHeight();M?m={x:vn(r,this.left+u,this.right-n[0]),y:this.top+u+O,line:0}:m={x:this.left+u,y:vn(r,this.top+O+u,this.bottom-e[0].height),line:0},oD(this.ctx,t.textDirection);const B=y+u;this.legendItems.forEach((V,A)=>{i.strokeStyle=V.fontColor,i.fillStyle=V.fontColor;const S=i.measureText(V.text).width,I=l.textAlign(V.textAlign||(V.textAlign=o.textAlign)),L=v+f+S;let P=m.x,$=m.y;l.setWidth(this.width),M?A>0&&P+L+u>this.right&&($=m.y+=B,m.line++,P=m.x=vn(r,this.left+u,this.right-n[m.line])):A>0&&$+B>this.bottom&&(P=m.x=P+e[m.line].width+u,m.line++,$=m.y=vn(r,this.top+O+u,this.bottom-e[m.line].height));const N=l.x(P);if(w(N,$,V),P=Yz(I,P+v+f,M?P+L:this.right,t.rtl),k(l.x(P),$,V),M)m.x+=L+u;else if(typeof V.text!="string"){const _t=c.lineHeight;m.y+=MD(V,_t)+u}else m.y+=B}),aD(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Vs(e.font),i=Cn(e.padding);if(!e.display)return;const r=ed(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=n.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=vn(t.align,d,this.right-f);else{const v=this.columnSizes.reduce((b,y)=>Math.max(b,y.height),0);u=c+vn(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const m=vn(a,d,d+f);o.textAlign=r.textAlign(JS(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,rh(o,e.text,m,u,n)}_computeTitleHeight(){const t=this.options.title,e=Vs(t.font),n=Cn(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(_a(t,this.left,this.right)&&_a(e,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],_a(t,i.left,i.left+i.width)&&_a(e,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!Dq(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=Iq(i,n);i&&!r&&Qe(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&Qe(e.onHover,[t,n,this],this)}else n&&Qe(e.onClick,[t,n,this],this)}}function Pq(s,t,e,n,i){const r=Rq(n,s,t,e),o=Mq(i,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function Rq(s,t,e,n){let i=s.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+n.measureText(i).width}function Mq(s,t,e){let n=s;return typeof t.text!="string"&&(n=MD(t,e)),n}function MD(s,t){const e=s.text?s.text.length:0;return t*e}function Dq(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var Oq={id:"legend",_element:tk,start(s,t,e){const n=s.legend=new tk({ctx:s.ctx,options:e,chart:s});En.configure(s,n,e),En.addBox(s,n)},stop(s){En.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,e){const n=s.legend;En.configure(s,n,e),n.options=e},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,e){const n=t.datasetIndex,i=e.chart;i.isDatasetVisible(n)?(i.hide(n),t.hidden=!0):(i.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=s.legend.options;return s._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),u=Cn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class oE extends Va{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const i=rs(n.text)?n.text.length:1;this._padding=Cn(n.padding);const r=i*Vs(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=vn(a,n,r),d=e+t,c=r-n):(o.position==="left"?(u=n+t,d=vn(a,i,e),l=Ie*-.5):(u=r-t,d=vn(a,e,i),l=Ie*.5),c=i-e),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Vs(e.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);rh(t,e.text,0,0,n,{color:e.color,maxWidth:l,rotation:c,textAlign:JS(e.align),textBaseline:"middle",translation:[o,a]})}}function Lq(s,t){const e=new oE({ctx:s.ctx,options:t,chart:s});En.configure(s,e,t),En.addBox(s,e),s.titleBlock=e}var Nq={id:"title",_element:oE,start(s,t,e){Lq(s,e)},stop(s){const t=s.titleBlock;En.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,e){const n=s.titleBlock;En.configure(s,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mb=new WeakMap;var Fq={id:"subtitle",start(s,t,e){const n=new oE({ctx:s.ctx,options:e,chart:s});En.configure(s,n,e),En.addBox(s,n),mb.set(s,n)},stop(s){En.removeBox(s,mb.get(s)),mb.delete(s)},beforeUpdate(s,t,e){const n=mb.get(s);En.configure(s,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const xp={average(s){if(!s.length)return!1;let t,e,n=new Set,i=0,r=0;for(t=0,e=s.length;t<e;++t){const a=s[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/r}},nearest(s,t){if(!s.length)return!1;let e=t.x,n=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=s.length;r<o;++r){const l=s[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=yA(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,n=l.y}return{x:e,y:n}}};function jr(s,t){return t&&(rs(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function Oo(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function Bq(s,t){const{element:e,datasetIndex:n,index:i}=t,r=s.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:s,label:o,parsed:r.getParsed(i),raw:s.data.datasets[n].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:n,element:e}}function ek(s,t){const e=s.chart.ctx,{body:n,footer:i,title:r}=s,{boxWidth:o,boxHeight:a}=t,l=Vs(t.bodyFont),c=Vs(t.titleFont),u=Vs(t.footerFont),d=r.length,f=i.length,m=n.length,v=Cn(t.padding);let b=v.height,y=0,w=n.reduce((O,B)=>O+B.before.length+B.lines.length+B.after.length,0);if(w+=s.beforeBody.length+s.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),w){const O=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=m*O+(w-m)*l.lineHeight+(w-1)*t.bodySpacing}f&&(b+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let k=0;const M=function(O){y=Math.max(y,e.measureText(O).width+k)};return e.save(),e.font=c.string,He(s.title,M),e.font=l.string,He(s.beforeBody.concat(s.afterBody),M),k=t.displayColors?o+2+t.boxPadding:0,He(n,O=>{He(O.before,M),He(O.lines,M),He(O.after,M)}),k=0,e.font=u.string,He(s.footer,M),e.restore(),y+=v.width,{width:y,height:b}}function $q(s,t){const{y:e,height:n}=t;return e<n/2?"top":e>s.height-n/2?"bottom":"center"}function Uq(s,t,e,n){const{x:i,width:r}=n,o=e.caretSize+e.caretPadding;if(s==="left"&&i+r+o>t.width||s==="right"&&i-r-o<0)return!0}function Vq(s,t,e,n){const{x:i,width:r}=e,{width:o,chartArea:{left:a,right:l}}=s;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),Uq(c,s,t,e)&&(c="center"),c}function sk(s,t,e){const n=e.yAlign||t.yAlign||$q(s,e);return{xAlign:e.xAlign||t.xAlign||Vq(s,t,e,n),yAlign:n}}function Hq(s,t){let{x:e,width:n}=s;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function jq(s,t,e){let{y:n,height:i}=s;return t==="top"?n+=e:t==="bottom"?n-=i+e:n-=i/2,n}function nk(s,t,e,n){const{caretSize:i,caretPadding:r,cornerRadius:o}=s,{xAlign:a,yAlign:l}=e,c=i+r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:m}=zu(o);let v=Hq(t,a);const b=jq(t,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(u,f)+i:a==="right"&&(v+=Math.max(d,m)+i),{x:Js(v,0,n.width-t.width),y:Js(b,0,n.height-t.height)}}function vb(s,t,e){const n=Cn(e.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-n.right:s.x+n.left}function ik(s){return jr([],Oo(s))}function zq(s,t,e){return sc(s,{tooltip:t,tooltipItems:e,type:"tooltip"})}function rk(s,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?s.override(e):s}const DD={beforeTitle:Io,title(s){if(s.length>0){const t=s[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:Io,beforeBody:Io,beforeLabel:Io,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const e=s.formattedValue;return be(e)||(t+=e),t},labelColor(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Io,afterBody:Io,beforeFooter:Io,footer:Io,afterFooter:Io};function Xn(s,t,e,n){const i=s[t].call(e,n);return typeof i>"u"?DD[t].call(e,n):i}class kA extends Va{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new dD(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=zq(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,i=Xn(n,"beforeTitle",this,t),r=Xn(n,"title",this,t),o=Xn(n,"afterTitle",this,t);let a=[];return a=jr(a,Oo(i)),a=jr(a,Oo(r)),a=jr(a,Oo(o)),a}getBeforeBody(t,e){return ik(Xn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return He(t,r=>{const o={before:[],lines:[],after:[]},a=rk(n,r);jr(o.before,Oo(Xn(a,"beforeLabel",this,r))),jr(o.lines,Xn(a,"label",this,r)),jr(o.after,Oo(Xn(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,e){return ik(Xn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=Xn(n,"beforeFooter",this,t),r=Xn(n,"footer",this,t),o=Xn(n,"afterFooter",this,t);let a=[];return a=jr(a,Oo(i)),a=jr(a,Oo(r)),a=jr(a,Oo(o)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(Bq(this.chart,e[l]));return t.filter&&(a=a.filter((u,d,f)=>t.filter(u,d,f,n))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,n))),He(a,u=>{const d=rk(t.callbacks,u);i.push(Xn(d,"labelColor",this,u)),r.push(Xn(d,"labelPointStyle",this,u)),o.push(Xn(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=xp[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=ek(this,n),c=Object.assign({},a,l),u=sk(this.chart,n,c),d=nk(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=zu(a),{x:f,y:m}=t,{width:v,height:b}=e;let y,w,k,M,O,B;return r==="center"?(O=m+b/2,i==="left"?(y=f,w=y-o,M=O+o,B=O-o):(y=f+v,w=y+o,M=O-o,B=O+o),k=y):(i==="left"?w=f+Math.max(l,u)+o:i==="right"?w=f+v-Math.max(c,d)-o:w=this.caretX,r==="top"?(M=m,O=M-o,y=w-o,k=w+o):(M=m+b,O=M+o,y=w+o,k=w-o),B=M),{x1:y,x2:w,x3:k,y1:M,y2:O,y3:B}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,a,l;if(r){const c=ed(n.rtl,this.x,this.width);for(t.x=vb(this,n.titleAlign,n),e.textAlign=c.textAlign(n.titleAlign),e.textBaseline="middle",o=Vs(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,u=Vs(r.bodyFont),d=vb(this,"left",r),f=i.x(d),m=l<u.lineHeight?(u.lineHeight-l)/2:0,v=e.y+m;if(r.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=i.leftForLtr(f,c)+c/2,w=v+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,wA(t,b,y,w),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,wA(t,b,y,w)}else{t.lineWidth=_e(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const b=i.leftForLtr(f,c),y=i.leftForLtr(i.xPlus(f,1),c-2),w=zu(o.borderRadius);Object.values(w).some(k=>k!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,gg(t,{x:b,y:v,w:c,h:l,radius:w}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),gg(t,{x:y,y:v+1,w:c-2,h:l-2,radius:w}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(b,v,c,l),t.strokeRect(b,v,c,l),t.fillStyle=o.backgroundColor,t.fillRect(y,v+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,d=Vs(n.bodyFont);let f=d.lineHeight,m=0;const v=ed(n.rtl,this.x,this.width),b=function(S){e.fillText(S,v.x(t.x+m),t.y+f/2),t.y+=f+r},y=v.textAlign(o);let w,k,M,O,B,V,A;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=vb(this,y,n),e.fillStyle=n.bodyColor,He(this.beforeBody,b),m=a&&y!=="right"?o==="center"?c/2+u:c+2+u:0,O=0,V=i.length;O<V;++O){for(w=i[O],k=this.labelTextColors[O],e.fillStyle=k,He(w.before,b),M=w.lines,a&&M.length&&(this._drawColorBox(e,t,O,v,n),f=Math.max(d.lineHeight,l)),B=0,A=M.length;B<A;++B)b(M[B]),f=d.lineHeight;He(w.after,b)}m=0,f=d.lineHeight,He(this.afterBody,b),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,a;if(r){const l=ed(n.rtl,this.x,this.width);for(t.x=vb(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=l.textAlign(n.footerAlign),e.textBaseline="middle",o=Vs(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=n,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:v}=zu(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+d,l),o==="top"&&this.drawCaret(t,e,n,i),e.lineTo(a+c-f,l),e.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,e,n,i),e.lineTo(a+c,l+u-v),e.quadraticCurveTo(a+c,l+u,a+c-v,l+u),o==="bottom"&&this.drawCaret(t,e,n,i),e.lineTo(a+m,l+u),e.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&r==="left"&&this.drawCaret(t,e,n,i),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const o=xp[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=ek(this,t),l=Object.assign({},o,this._size),c=sk(e,t,l),u=nk(t,l,c,e);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Cn(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),oD(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),aD(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Zy(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),a=this._positionChanged(o,t),l=e||!Zy(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,n,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=xp[r.position].call(this,t,e);return o!==!1&&(n!==o.x||i!==o.y)}}ht(kA,"positioners",xp);var Wq={id:"tooltip",_element:kA,positioners:xp,afterInit(s,t,e){e&&(s.tooltip=new kA({chart:s,options:e}))},beforeUpdate(s,t,e){s.tooltip&&s.tooltip.initialize(e)},reset(s,t,e){s.tooltip&&s.tooltip.initialize(e)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",e)}},afterEvent(s,t){if(s.tooltip){const e=t.replay;s.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:DD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Gq=Object.freeze({__proto__:null,Colors:iq,Decimation:lq,Filler:kq,Legend:Oq,SubTitle:Fq,Title:Nq,Tooltip:Wq});const qq=(s,t,e,n)=>(typeof t=="string"?(e=s.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Xq(s,t,e,n){const i=s.indexOf(t);if(i===-1)return qq(s,t,e,n);const r=s.lastIndexOf(t);return i!==r?e:i}const Yq=(s,t)=>s===null?null:Js(Math.round(s),0,t);function ok(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class IA extends lh{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:i,label:r}of e)n[i]===r&&n.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(be(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:Xq(n,t,re(e,t),this._addedLabels),Yq(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)i.push({value:o});return i}getLabelForValue(t){return ok.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ht(IA,"id","category"),ht(IA,"defaults",{ticks:{callback:ok}});function Kq(s,t){const e=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=s,m=r||1,v=u-1,{min:b,max:y}=t,w=!be(o),k=!be(a),M=!be(c),O=(y-b)/(d+1);let B=eC((y-b)/v/m)*m,V,A,S,I;if(B<1e-14&&!w&&!k)return[{value:b},{value:y}];I=Math.ceil(y/B)-Math.floor(b/B),I>v&&(B=eC(I*B/v/m)*m),be(l)||(V=Math.pow(10,l),B=Math.ceil(B*V)/V),i==="ticks"?(A=Math.floor(b/B)*B,S=Math.ceil(y/B)*B):(A=b,S=y),w&&k&&r&&Hz((a-o)/r,B/1e3)?(I=Math.round(Math.min((a-o)/B,u)),B=(a-o)/I,A=o,S=a):M?(A=w?o:A,S=k?a:S,I=c-1,B=(S-A)/I):(I=(S-A)/B,zp(I,Math.round(I),B/1e3)?I=Math.round(I):I=Math.ceil(I));const L=Math.max(sC(B),sC(A));V=Math.pow(10,be(l)?L:l),A=Math.round(A*V)/V,S=Math.round(S*V)/V;let P=0;for(w&&(f&&A!==o?(e.push({value:o}),A<o&&P++,zp(Math.round((A+P*B)*V)/V,o,ak(o,O,s))&&P++):A<o&&P++);P<I;++P){const $=Math.round((A+P*B)*V)/V;if(k&&$>a)break;e.push({value:$})}return k&&f&&S!==a?e.length&&zp(e[e.length-1].value,a,ak(a,O,s))?e[e.length-1].value=a:e.push({value:a}):(!k||S===a)&&e.push({value:S}),e}function ak(s,t,{horizontal:e,minRotation:n}){const i=br(n),r=(e?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+s).length;return Math.min(t/r,o)}class r_ extends lh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return be(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=e?i:l,a=l=>r=n?r:l;if(t){const l=mo(i),c=mo(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=Kq(i,r);return t.bounds==="ticks"&&jM(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return fv(t,this.chart.options.locale,this.options.ticks.format)}}class PA extends r_{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ys(t)?t:0,this.max=ys(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=br(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ht(PA,"id","linear"),ht(PA,"defaults",{ticks:{callback:n0.formatters.numeric}});const vg=s=>Math.floor(Ll(s)),yc=(s,t)=>Math.pow(10,vg(s)+t);function lk(s){return s/Math.pow(10,vg(s))===1}function ck(s,t,e){const n=Math.pow(10,e),i=Math.floor(s/n);return Math.ceil(t/n)-i}function Jq(s,t){const e=t-s;let n=vg(e);for(;ck(s,t,n)>10;)n++;for(;ck(s,t,n)<10;)n--;return Math.min(n,vg(s))}function Zq(s,{min:t,max:e}){t=li(s.min,t);const n=[],i=vg(t);let r=Jq(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,r)),f=li(s.min,Math.round((l+u+d*Math.pow(10,r))*o)/o);for(;f<e;)n.push({value:f,major:lk(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),f=Math.round((l+u+d*Math.pow(10,r))*o)/o;const m=li(s.max,f);return n.push({value:m,major:lk(m),significand:d}),n}class RA extends lh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=r_.prototype.parse.apply(this,[t,e]);if(n===0){this._zero=!0;return}return ys(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ys(t)?Math.max(0,t):null,this.max=ys(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ys(this._userMin)&&(this.min=t===yc(this.min,0)?yc(this.min,-1):yc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=a=>n=t?n:a,o=a=>i=e?i:a;n===i&&(n<=0?(r(1),o(10)):(r(yc(n,-1)),o(yc(i,1)))),n<=0&&r(yc(i,-1)),i<=0&&o(yc(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},n=Zq(e,this);return t.bounds==="ticks"&&jM(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":fv(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ll(t),this._valueRange=Ll(this.max)-Ll(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ll(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}ht(RA,"id","logarithmic"),ht(RA,"defaults",{ticks:{callback:n0.formatters.logarithmic,major:{enabled:!0}}});function MA(s){const t=s.ticks;if(t.display&&s.display){const e=Cn(t.backdropPadding);return re(t.font&&t.font.size,as.font.size)+e.height}return 0}function Qq(s,t,e){return e=rs(e)?e:[e],{w:r7(s,t.string,e),h:e.length*t.lineHeight}}function uk(s,t,e,n,i){return s===n||s===i?{start:t-e/2,end:t+e/2}:s<n||s>i?{start:t-e,end:t}:{start:t,end:t+e}}function tX(s){const t={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},e=Object.assign({},t),n=[],i=[],r=s._pointLabels.length,o=s.options.pointLabels,a=o.centerPointLabels?Ie/r:0;for(let l=0;l<r;l++){const c=o.setContext(s.getPointLabelContext(l));i[l]=c.padding;const u=s.getPointPosition(l,s.drawingArea+i[l],a),d=Vs(c.font),f=Qq(s.ctx,d,s._pointLabels[l]);n[l]=f;const m=yn(s.getIndexAngle(l)+a),v=Math.round(YS(m)),b=uk(v,u.x,f.w,0,180),y=uk(v,u.y,f.h,90,270);eX(e,t,m,b,y)}s.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),s._pointLabelItems=iX(s,n,i)}function eX(s,t,e,n,i){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;n.start<t.l?(a=(t.l-n.start)/r,s.l=Math.min(s.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/r,s.r=Math.max(s.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,s.t=Math.min(s.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,s.b=Math.max(s.b,t.b+l))}function sX(s,t,e){const n=s.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=e,l=s.getPointPosition(t,n+i+o,r),c=Math.round(YS(yn(l.angle+Es))),u=aX(l.y,a.h,c),d=rX(c),f=oX(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function nX(s,t){if(!t)return!0;const{left:e,top:n,right:i,bottom:r}=s;return!(Aa({x:e,y:n},t)||Aa({x:e,y:r},t)||Aa({x:i,y:n},t)||Aa({x:i,y:r},t))}function iX(s,t,e){const n=[],i=s._pointLabels.length,r=s.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:MA(r)/2,additionalAngle:o?Ie/i:0};let c;for(let u=0;u<i;u++){l.padding=e[u],l.size=t[u];const d=sX(s,u,l);n.push(d),a==="auto"&&(d.visible=nX(d,c),d.visible&&(c=d))}return n}function rX(s){return s===0||s===180?"center":s<180?"left":"right"}function oX(s,t,e){return e==="right"?s-=t:e==="center"&&(s-=t/2),s}function aX(s,t,e){return e===90||e===270?s-=t/2:(e>270||e<90)&&(s-=t),s}function lX(s,t,e){const{left:n,top:i,right:r,bottom:o}=e,{backdropColor:a}=t;if(!be(a)){const l=zu(t.borderRadius),c=Cn(t.backdropPadding);s.fillStyle=a;const u=n-c.left,d=i-c.top,f=r-n+c.width,m=o-i+c.height;Object.values(l).some(v=>v!==0)?(s.beginPath(),gg(s,{x:u,y:d,w:f,h:m,radius:l}),s.fill()):s.fillRect(u,d,f,m)}}function cX(s,t){const{ctx:e,options:{pointLabels:n}}=s;for(let i=t-1;i>=0;i--){const r=s._pointLabelItems[i];if(!r.visible)continue;const o=n.setContext(s.getPointLabelContext(i));lX(e,o,r);const a=Vs(o.font),{x:l,y:c,textAlign:u}=r;rh(e,s._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function OD(s,t,e,n){const{ctx:i}=s;if(e)i.arc(s.xCenter,s.yCenter,t,0,es);else{let r=s.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<n;o++)r=s.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function uX(s,t,e,n,i){const r=s.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!n||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),OD(s,e,o,n),r.closePath(),r.stroke(),r.restore())}function hX(s,t,e){return sc(s,{label:e,index:t,type:"pointLabel"})}class Tp extends r_{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Cn(MA(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=ys(t)&&!isNaN(t)?t:0,this.max=ys(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/MA(this.options))}generateTickLabels(t){r_.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const i=Qe(this.options.pointLabels.callback,[e,n],this);return i||i===0?i:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?tX(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){const e=es/(this._pointLabels.length||1),n=this.options.startAngle||0;return yn(t*e+br(n))}getDistanceFromCenterForValue(t){if(be(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(be(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return hX(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-Es+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),OD(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&cX(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),m=i.setContext(f),v=r.setContext(f);uX(this,m,l,o,v)}}),n.display){for(t.save(),a=o-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(t.lineWidth=f,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=n.setContext(this.getContext(l)),u=Vs(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const d=Cn(c.backdropPadding);t.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}rh(t,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}ht(Tp,"id","radialLinear"),ht(Tp,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:n0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),ht(Tp,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ht(Tp,"descriptors",{angleLines:{_fallback:"grid"}});const c0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ni=Object.keys(c0);function hk(s,t){return s-t}function dk(s,t){if(be(t))return null;const e=s._adapter,{parser:n,round:i,isoWeekday:r}=s._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),ys(o)||(o=typeof n=="string"?e.parse(o,n):e.parse(o)),o===null?null:(i&&(o=i==="week"&&(vf(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,i)),+o)}function fk(s,t,e,n){const i=ni.length;for(let r=ni.indexOf(s);r<i-1;++r){const o=c0[ni[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=n)return ni[r]}return ni[i-1]}function dX(s,t,e,n,i){for(let r=ni.length-1;r>=ni.indexOf(e);r--){const o=ni[r];if(c0[o].common&&s._adapter.diff(i,n,o)>=t-1)return o}return ni[e?ni.indexOf(e):0]}function fX(s){for(let t=ni.indexOf(s)+1,e=ni.length;t<e;++t)if(c0[ni[t]].common)return ni[t]}function pk(s,t,e){if(!e)s[t]=!0;else if(e.length){const{lo:n,hi:i}=KS(e,t),r=e[n]>=t?e[n]:e[i];s[r]=!0}}function pX(s,t,e,n){const i=s._adapter,r=+i.startOf(t[0].value,n),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,n))l=e[a],l>=0&&(t[l].major=!0);return t}function gk(s,t,e){const n=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,n.push({value:a,major:!1});return r===0||!e?n:pX(s,n,i,e)}class bg extends lh{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new AW._date(t.adapters.date);i.init(e),jp(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:dk(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ys(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=ys(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=Gz(i,r,o);return this._unit=e.unit||(n.autoSkip?fk(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):dX(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:fX(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),gk(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Js(e,0,o),n=Js(n,0,o),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||fk(r.minUnit,e,n,this._getLabelCapacity(e)),a=re(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=vf(l)||l===!0,u={};let d=e,f,m;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const v=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<n;f=+t.add(f,a,o),m++)pk(u,f,v);return(f===n||i.bounds==="ticks"||m===1)&&pk(u,f,v),Object.keys(u).sort(hk).map(b=>+b)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,r=this._unit,o=e||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.ticks.callback;if(o)return Qe(o,[t,e,n],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=n[e],m=c&&d&&f&&f.major;return this._adapter.format(t,i||(m?d:u))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=br(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,gk(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,n=i.length;e<n;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(dk(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return GM(t.sort(hk))}}ht(bg,"id","time"),ht(bg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bb(s,t,e){let n=0,i=s.length-1,r,o,a,l;e?(t>=s[n].pos&&t<=s[i].pos&&({lo:n,hi:i}=wa(s,"pos",t)),{pos:r,time:a}=s[n],{pos:o,time:l}=s[i]):(t>=s[n].time&&t<=s[i].time&&({lo:n,hi:i}=wa(s,"time",t)),{time:r,pos:a}=s[n],{time:o,pos:l}=s[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class DA extends bg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=bb(e,this.min),this._tableRange=bb(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=n&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(bb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return bb(this._table,n*this._tableRange+this._minPos,!0)}}ht(DA,"id","timeseries"),ht(DA,"defaults",bg.defaults);var gX=Object.freeze({__proto__:null,CategoryScale:IA,LinearScale:PA,LogarithmicScale:RA,RadialLinearScale:Tp,TimeScale:bg,TimeSeriesScale:DA});const mX=[wW,JG,Gq,gX];Ks.register(...mX);async function vX(){return(await ls.get("/documents")).data.documents}async function bX(s){return(await ls.get(`/documents/${s}`)).data}async function yX(s){const t=new FormData;return t.append("title",s.title),t.append("file",s.file),(await ls.post("/documents",t,{headers:{"Content-Type":"multipart/form-data"}})).data}async function _X(s,t){return(await ls.post(`/documents/${s}/fields`,t)).data}async function tp(s,t,e){return(await ls.patch(`/documents/${s}/fields/${t}`,e)).data}async function wX(s,t){return(await ls.delete(`/documents/${s}/fields/${t}`)).data}async function mk(s,t){return(await ls.post(`/documents/${s}/send`,t)).data}const pv=()=>{const s=ct([]),t=ct(!1),e=ct(null),n=ct({}),i=async()=>{t.value=!0,e.value=null;try{s.value=await vX()}catch(l){e.value=l instanceof Error?l.message:"Unable to load documents."}finally{t.value=!1}},r=l=>{const c=s.value.findIndex(f=>f.id===l.id);if(c===-1){i();return}const u=s.value[c],d={...u,title:l.title,status:l.status,version:l.version,updatedAt:l.updatedAt??u.updatedAt};s.value=[...s.value.slice(0,c),d,...s.value.slice(c+1)]},o=l=>{if(l.event==="doc.created"){r(l.data.document);return}if(l.event==="doc.signer.joined"&&l.docId){n.value[l.docId]=(n.value[l.docId]??0)+1;return}if(l.event==="doc.signer.left"&&l.docId){n.value[l.docId]=Math.max(0,(n.value[l.docId]??1)-1);return}if(l.event==="doc.updated"||l.event==="doc.completed"){const c=l.data.document,u=s.value.find(d=>d.id===c.id);if(u&&c.version<=u.version)return;r(c)}};let a=null;return Rr(async()=>{HS(),a=jS(o),await i()}),tc(()=>{a==null||a()}),{documents:s,loading:t,error:e,refresh:i,presence:n}},AX={class:"dashboard"},SX={class:"stats-grid"},EX={class:"stat-meta"},xX={class:"stat-label"},TX={class:"stat-value"},CX={class:"stat-change"},kX=["innerHTML"],IX={class:"grid-two"},PX={class:"panel reveal"},RX={class:"chart chart-canvas"},MX={class:"panel reveal"},DX={class:"donut-wrap"},OX={class:"donut-canvas"},LX={class:"legend"},NX={class:"grid-two wide"},FX={class:"panel reveal"},BX={class:"chart bar-chart"},$X={class:"panel reveal"},UX={class:"activity-list"},VX=["innerHTML"],HX={class:"activity-content"},jX={class:"activity-title"},zX={class:"activity-sub"},WX={class:"activity-meta"},GX={class:"activity-time"},qX=ks({__name:"DashboardPage",setup(s){const{documents:t}=pv(),e=ct(null),n=ct(null),i=ct(null);let r=null,o=null,a=null,l=null;const c=j=>new Date(j.getFullYear(),j.getMonth(),j.getDate()),u=j=>{const Z=j.updatedAt??j.createdAt??new Date().toISOString();return new Date(Z)},d=St(()=>{const j=[],Z=c(new Date);for(let dt=6;dt>=0;dt-=1){const Ft=new Date(Z);Ft.setDate(Z.getDate()-dt),j.push(Ft)}return j}),f=j=>j.toISOString().slice(0,10),m=St(()=>d.value.map(j=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(j))),v=St(()=>{const j=new Map;return d.value.forEach(Z=>j.set(f(Z),0)),t.value.forEach(Z=>{const dt=f(c(u(Z)));j.has(dt)&&j.set(dt,(j.get(dt)??0)+1)}),d.value.map(Z=>j.get(f(Z))??0)}),b=St(()=>d.value.map(j=>new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(j))),y=j=>["SENT","VIEWED","IN_PROGRESS","SIGNED"].includes(j),w=j=>["SIGNED","COMPLETED"].includes(j),k=St(()=>{const j=new Map;return d.value.forEach(Z=>j.set(f(Z),0)),t.value.forEach(Z=>{if(!w(Z.status))return;const dt=f(c(u(Z)));j.has(dt)&&j.set(dt,(j.get(dt)??0)+1)}),d.value.map(Z=>j.get(f(Z))??0)}),M=St(()=>{const j=new Map;return d.value.forEach(Z=>j.set(f(Z),0)),t.value.forEach(Z=>{if(!y(Z.status))return;const dt=f(c(u(Z)));j.has(dt)&&j.set(dt,(j.get(dt)??0)+1)}),d.value.map(Z=>j.get(f(Z))??0)}),O=St(()=>{const j={total:0,sent:0,viewed:0,inProgress:0,signed:0,completed:0,declined:0,expired:0,draft:0,pending:0};return t.value.forEach(Z=>{switch(j.total+=1,Z.status){case"SENT":j.sent+=1;break;case"VIEWED":j.viewed+=1;break;case"IN_PROGRESS":j.inProgress+=1;break;case"SIGNED":j.signed+=1;break;case"COMPLETED":j.completed+=1;break;case"DECLINED":j.declined+=1;break;case"EXPIRED":j.expired+=1;break;case"DRAFT":default:j.draft+=1;break}}),j.pending=j.sent+j.viewed+j.inProgress+j.signed,j}),B=St(()=>{const j=f(c(new Date));return t.value.filter(Z=>w(Z.status)&&f(c(u(Z)))===j).length}),V=St(()=>[{key:"completed",label:"Completed",value:O.value.completed,colorVar:"--success"},{key:"pending",label:"Pending",value:O.value.pending,colorVar:"--accent-warm"},{key:"declined",label:"Declined",value:O.value.declined,colorVar:"--danger"},{key:"expired",label:"Expired",value:O.value.expired,colorVar:"--accent"},{key:"draft",label:"Draft",value:O.value.draft,colorVar:"--muted"}]),A=j=>Number.isFinite(j)?`${j>0?"+":j<0?"-":""}${Math.abs(j).toFixed(1)}%`:"0.0%",S=j=>{const Z=c(new Date),dt=new Date(Z);dt.setDate(Z.getDate()-6);const Ft=new Date(dt);Ft.setDate(dt.getDate()-7);const kt=new Date(dt);kt.setDate(dt.getDate()-1);const Y=(Yt,H)=>t.value.filter(z=>{const J=c(u(z));return J>=Yt&&J<=H&&j(z)}).length,bt=Y(dt,Z),At=Y(Ft,kt),Pt=At===0?bt===0?0:100:(bt-At)/At*100;return{change:A(Pt),trend:Pt>=0?"up":"down"}},I=St(()=>{const j=O.value.total,Z=O.value.completed,dt=O.value.pending,Ft=B.value,kt=S(()=>!0),Y=S(Pt=>w(Pt.status)),bt=S(Pt=>y(Pt.status)),At=S(Pt=>Pt.status==="COMPLETED");return[{label:"Total Documents",value:j,change:kt.change,trend:kt.trend,tone:"accent",icon:'<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 3h6l4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"/><path d="M13 3v5h5"/><path d="M8 13h8"/><path d="M8 17h6"/></svg>'},{label:"Signed Today",value:Ft,change:Y.change,trend:Y.trend,tone:"success",icon:'<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 3h6l4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"/><path d="M13 3v5h5"/><path d="M9 14l2 2 4-4"/></svg>'},{label:"Pending",value:dt,change:bt.change,trend:bt.trend,tone:"warning",icon:'<svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/></svg>'},{label:"Completed",value:Z,change:At.change,trend:At.trend,tone:"success",icon:'<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 3h6l4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"/><path d="M13 3v5h5"/><path d="M9 14l2 2 4-4"/></svg>'}]}),L=j=>{const Z=Date.now()-j.getTime(),dt=Math.floor(Z/(1e3*60));if(dt<1)return"just now";if(dt<60)return`${dt} minutes ago`;const Ft=Math.floor(dt/60);return Ft<24?`${Ft} hours ago`:`${Math.floor(Ft/24)} days ago`},P=j=>{let Z="Document updated",dt="warning",Ft="Pending";return j.status==="COMPLETED"?(Z="Document completed",dt="success",Ft="Completed"):j.status==="SIGNED"?(Z="Document signed",dt="success",Ft="Signed"):j.status==="VIEWED"?(Z="Document viewed",dt="info",Ft="Viewed"):j.status==="DECLINED"?(Z="Document declined",dt="danger",Ft="Declined"):j.status==="EXPIRED"?(Z="Document expired",dt="danger",Ft="Expired"):j.status==="DRAFT"&&(Z="Document drafted",dt="neutral",Ft="Draft"),{title:Z,document:j.title,status:dt,statusLabel:Ft,time:L(u(j)),icon:'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/></svg>'}},$=St(()=>[...t.value].sort((Z,dt)=>u(dt).getTime()-u(Z).getTime()).slice(0,5).map(P)),N=j=>j.startsWith("--")?`var(${j})`:j,_t=()=>document.querySelector(".app-shell")??document.documentElement,xt=j=>getComputedStyle(_t()).getPropertyValue(j).trim(),tt=()=>V.value.map(j=>j.colorVar.startsWith("--")?xt(j.colorVar):j.colorVar),X=()=>{if(!e.value)return;const j=it();r=new Ks(e.value,{type:"line",data:{labels:m.value,datasets:[{label:"Documents",data:[...v.value],borderColor:j.accent,tension:.4,fill:!1,borderWidth:3,pointRadius:4,pointHoverRadius:5,pointBackgroundColor:j.accent,pointBorderColor:j.accent,pointBorderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:j.surface,titleColor:j.inkStrong,bodyColor:j.ink,borderColor:j.line,borderWidth:1}},interaction:{intersect:!1,mode:"index"},scales:{x:{grid:{color:j.line,drawBorder:!1,borderDash:[4,4]},border:{display:!0,color:j.line},ticks:{color:j.muted}},y:{beginAtZero:!0,grid:{color:j.line,drawBorder:!1,borderDash:[4,4]},border:{display:!0,color:j.line},ticks:{color:j.muted,stepSize:4}}}}})},nt=()=>{if(!n.value)return;const j=it();o=new Ks(n.value,{type:"doughnut",data:{labels:V.value.map(Z=>Z.label),datasets:[{data:V.value.map(Z=>Z.value),backgroundColor:tt(),borderWidth:4,borderColor:j.surface,hoverOffset:2,spacing:2}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{display:!1},tooltip:{backgroundColor:j.surface,titleColor:j.inkStrong,bodyColor:j.ink,borderColor:j.line,borderWidth:1}}}})},U=()=>{if(!i.value)return;const j=it();a=new Ks(i.value,{type:"bar",data:{labels:b.value,datasets:[{label:"Signed",data:[...k.value],backgroundColor:j.success,borderRadius:{topLeft:8,topRight:8,bottomLeft:0,bottomRight:0},borderSkipped:"bottom",barPercentage:.7,categoryPercentage:.72},{label:"Pending",data:[...M.value],backgroundColor:j.accentWarm,borderRadius:{topLeft:8,topRight:8,bottomLeft:0,bottomRight:0},borderSkipped:"bottom",barPercentage:.7,categoryPercentage:.72}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:j.surface,titleColor:j.inkStrong,bodyColor:j.ink,borderColor:j.line,borderWidth:1}},scales:{x:{grid:{display:!1},border:{display:!0,color:j.line},ticks:{color:j.muted}},y:{beginAtZero:!0,grid:{color:j.line,drawTicks:!1,borderDash:[4,4]},border:{display:!0,color:j.line},ticks:{color:j.muted,stepSize:4}}}}})},it=()=>({accent:xt("--accent"),accentWarm:xt("--accent-warm"),success:xt("--success"),danger:xt("--danger"),line:xt("--line"),muted:xt("--muted"),ink:xt("--ink"),inkStrong:xt("--ink-strong"),surface:xt("--surface")}),vt=()=>{var Z,dt,Ft;const j=it();if(Ks.defaults.color=j.muted,Ks.defaults.font.family=getComputedStyle(document.body).fontFamily,r){r.data.datasets[0].borderColor=j.accent,r.data.datasets[0].pointBackgroundColor=j.accent,r.data.datasets[0].pointBorderColor=j.accent;const kt=r.options.scales;kt.x.grid.color=j.line,kt.y.grid.color=j.line,kt.x.grid.borderDash=[4,4],kt.y.grid.borderDash=[4,4],kt.x.ticks.color=j.muted,kt.y.ticks.color=j.muted,kt.x.border.color=j.line,kt.y.border.color=j.line;const Y=(Z=r.options.plugins)==null?void 0:Z.tooltip;Y&&(Y.backgroundColor=j.surface,Y.titleColor=j.inkStrong,Y.bodyColor=j.ink,Y.borderColor=j.line)}if(o){o.data.datasets[0].backgroundColor=tt(),o.data.datasets[0].borderColor=j.surface;const kt=(dt=o.options.plugins)==null?void 0:dt.tooltip;kt&&(kt.backgroundColor=j.surface,kt.titleColor=j.inkStrong,kt.bodyColor=j.ink,kt.borderColor=j.line)}if(a){a.data.datasets[0].backgroundColor=j.success,a.data.datasets[1].backgroundColor=j.accentWarm;const kt=a.options.scales;kt.y.grid.color=j.line,kt.y.grid.borderDash=[4,4],kt.x.ticks.color=j.muted,kt.y.ticks.color=j.muted,kt.x.border.color=j.line,kt.y.border.color=j.line;const Y=(Ft=a.options.plugins)==null?void 0:Ft.tooltip;Y&&(Y.backgroundColor=j.surface,Y.titleColor=j.inkStrong,Y.bodyColor=j.ink,Y.borderColor=j.line)}r==null||r.update("none"),o==null||o.update("none"),a==null||a.update("none")};return bs([m,v],()=>{r&&(r.data.labels=[...m.value],r.data.datasets[0].data=[...v.value],r.update())}),bs([b,k,M],()=>{a&&(a.data.labels=[...b.value],a.data.datasets[0].data=[...k.value],a.data.datasets[1].data=[...M.value],a.update())}),bs(V,()=>{o&&(o.data.labels=V.value.map(j=>j.label),o.data.datasets[0].data=V.value.map(j=>j.value),o.update())}),Rr(()=>{X(),nt(),U(),vt(),l=new MutationObserver(()=>{vt()}),l.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}),tc(()=>{l==null||l.disconnect(),r==null||r.destroy(),o==null||o.destroy(),a==null||a.destroy()}),(j,Z)=>(G(),q("div",AX,[Z[6]||(Z[6]=g("section",{class:"page-header reveal"},[g("h2",null,"Dashboard"),g("p",null,"Welcome back! Here's your signing activity overview.")],-1)),g("section",SX,[(G(!0),q(Xt,null,ye(I.value,dt=>(G(),q("article",{key:dt.label,class:"stat-card reveal"},[g("div",EX,[g("p",xX,ot(dt.label),1),g("h3",TX,ot(dt.value),1),g("div",CX,[g("span",{class:ie(["chip",dt.trend])},ot(dt.change),3),Z[0]||(Z[0]=g("span",{class:"stat-note"},"vs last week",-1))])]),g("div",{class:ie(["stat-icon",dt.tone])},[g("span",{innerHTML:dt.icon},null,8,kX)],2)]))),128))]),g("section",IX,[g("article",PX,[Z[1]||(Z[1]=g("div",{class:"panel-header"},[g("h3",null,"Document Activity"),g("p",null,"Documents processed over the last 7 days")],-1)),g("div",RX,[g("canvas",{ref_key:"lineCanvas",ref:e,"aria-label":"Document activity line chart",role:"img"},null,512)])]),g("article",MX,[Z[2]||(Z[2]=g("div",{class:"panel-header"},[g("h3",null,"Status Distribution"),g("p",null,"Document status breakdown")],-1)),g("div",DX,[g("div",OX,[g("canvas",{ref_key:"donutCanvas",ref:n,"aria-label":"Status distribution chart",role:"img"},null,512)]),g("ul",LX,[(G(!0),q(Xt,null,ye(V.value,dt=>(G(),q("li",{key:dt.key},[g("span",{class:"dot",style:gr({background:N(dt.colorVar)})},null,4),Kt(" "+ot(dt.label)+": "+ot(dt.value),1)]))),128))])])])]),g("section",NX,[g("article",FX,[Z[3]||(Z[3]=g("div",{class:"panel-header"},[g("h3",null,"Weekly Performance"),g("p",null,"Signed vs pending documents this week")],-1)),g("div",BX,[g("canvas",{ref_key:"barCanvas",ref:i,"aria-label":"Weekly performance bar chart",role:"img"},null,512)]),Z[4]||(Z[4]=g("div",{class:"bars-legend"},[g("span",null,[g("i",{class:"legend-dot signed"}),Kt(" signed")]),g("span",null,[g("i",{class:"legend-dot pending"}),Kt(" pending")])],-1))]),g("article",$X,[Z[5]||(Z[5]=g("div",{class:"panel-header"},[g("h3",null,"Recent Activity"),g("p",null,"Latest document updates")],-1)),g("div",UX,[(G(!0),q(Xt,null,ye($.value,dt=>(G(),q("div",{key:dt.title,class:"activity-item"},[g("span",{class:"activity-icon",innerHTML:dt.icon},null,8,VX),g("div",HX,[g("p",jX,ot(dt.title),1),g("p",zX,ot(dt.document),1),g("div",WX,[g("span",{class:ie(["status",dt.status])},ot(dt.statusLabel),3),g("span",GX,ot(dt.time),1)])])]))),128))])])])]))}}),XX=js(qX,[["__scopeId","data-v-8e337d75"]]),YX={class:"documents-page"},KX={class:"toolbar"},JX={class:"search"},ZX={class:"filters"},QX={class:"select"},tY=["value"],eY={class:"filters-wrap"},sY={key:0,class:"filter-count"},nY={class:"filter-section"},iY=["value"],rY={class:"filter-section"},oY={class:"select full"},aY={class:"filter-actions"},lY={class:"table-card"},cY={class:"table-body"},uY={key:0,class:"empty-state"},hY={class:"doc-cell"},dY={class:"doc-title"},fY={class:"doc-size"},pY={class:"type-cell"},gY={class:"status-cell"},mY={class:"date-cell"},vY={class:"actions-cell"},bY=["onClick"],yY=["onClick"],_Y={class:"menu-wrap"},wY=["onClick"],AY=["onClick"],SY=["onClick"],EY=["onClick"],xY={class:"table-footer"},TY={class:"pagination"},CY=["disabled"],kY=["onClick"],IY=["disabled"],PY={class:"modal-card"},RY={class:"modal-header"},MY={class:"modal-body"},DY={class:"modal-title"},OY={class:"modal-grid"},LY={class:"value"},NY={class:"value"},FY={class:"value"},BY={class:"value"},$Y={class:"value"},UY={class:"modal-actions"},vw=8,VY=ks({__name:"DocumentsPage",setup(s){const{documents:t,presence:e}=pv(),n=nt=>e.value[nt]??0,i=St(()=>t.value.map(nt=>{var U,it;return{id:nt.id,title:nt.title,size:`${(nt.fileSize/(1024*1024)).toFixed(1)} MB`,type:"PDF",status:A(nt.status),recipient:((it=(U=nt.signers)==null?void 0:U[0])==null?void 0:it.email)??"Not sent",date:nt.updatedAt??nt.createdAt??new Date().toISOString(),fileUrl:nt.fileUrl,signedFileUrl:nt.signedFileUrl??null}})),r=["All Status","Completed","Pending","Signed","Viewed","Expired","Declined","Draft"],o=["Contract","NDA","Agreement"],a=ct(""),l=ct("All Status"),c=ct([]),u=ct("newest"),d=ct(!1),f=ct(null),m=ct(!1),v=ct(null),b=ct(1),y=St(()=>{let nt=0;return c.value.length>0&&(nt+=1),u.value!=="newest"&&(nt+=1),nt}),w=St(()=>{let nt=i.value.slice();const U=a.value.toLowerCase();return U&&(nt=nt.filter(it=>[it.title,it.type,it.recipient].some(vt=>vt.toLowerCase().includes(U)))),l.value!=="All Status"&&(nt=nt.filter(it=>it.status===l.value)),c.value.length>0&&(nt=nt.filter(it=>c.value.includes(it.type))),nt.sort((it,vt)=>{const j=new Date(it.date).getTime(),Z=new Date(vt.date).getTime();return u.value==="newest"?Z-j:j-Z}),nt}),k=St(()=>Math.max(1,Math.ceil(w.value.length/vw))),M=St(()=>{const nt=(b.value-1)*vw;return w.value.slice(nt,nt+vw)}),O=St(()=>Array.from({length:k.value},(nt,U)=>U+1));bs([a,l,c,u],()=>{b.value=1},{deep:!0}),bs(k,nt=>{b.value>nt&&(b.value=nt)});const B=()=>{d.value=!d.value},V=()=>{c.value=[],u.value="newest"},A=nt=>{switch(nt){case"COMPLETED":return"Completed";case"IN_PROGRESS":return"Pending";case"SIGNED":return"Signed";case"VIEWED":return"Viewed";case"DECLINED":return"Declined";case"EXPIRED":return"Expired";default:return nt==="DRAFT"?"Draft":"Pending"}},S=nt=>{switch(nt){case"Completed":return"success";case"Pending":return"warning";case"Signed":return"success";case"Viewed":return"info";case"Declined":return"danger";case"Expired":return"danger";default:return"neutral"}},I=nt=>{const U=new Date(nt);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(U)},L=nt=>{f.value=f.value===nt?null:nt},P=nt=>{v.value=nt,m.value=!0,f.value=null},$=nt=>{f.value=null;const U=nt.signedFileUrl||nt.fileUrl;if(!U)return;const it=document.createElement("a");it.href=U,it.target="_blank",it.rel="noreferrer",document.body.appendChild(it),it.click(),it.remove()},N=nt=>{t.value=t.value.filter(U=>U.id!==nt),f.value=null},_t=()=>{b.value=Math.max(1,b.value-1)},xt=()=>{b.value=Math.min(k.value,b.value+1)},tt=nt=>{b.value=nt},X=nt=>{const U=nt.target;d.value&&!U.closest(".filters")&&(d.value=!1),f.value&&!U.closest(".menu-wrap")&&(f.value=null)};return Rr(()=>{document.addEventListener("click",X)}),tc(()=>{document.removeEventListener("click",X)}),(nt,U)=>(G(),q("div",YX,[U[36]||(U[36]=g("section",{class:"page-header"},[g("div",null,[g("h2",null,"Documents"),g("p",null,"Manage and track all your documents")])],-1)),g("section",KX,[g("div",JX,[U[11]||(U[11]=g("span",{class:"search-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("circle",{cx:"11",cy:"11",r:"7"}),g("path",{d:"m20 20-3.5-3.5"})])],-1)),te(g("input",{"onUpdate:modelValue":U[0]||(U[0]=it=>a.value=it),type:"search",placeholder:"Search documents...","aria-label":"Search documents"},null,512),[[Ze,a.value,void 0,{trim:!0}]])]),g("div",ZX,[g("div",QX,[te(g("select",{"onUpdate:modelValue":U[1]||(U[1]=it=>l.value=it),"aria-label":"Filter by status"},[(G(),q(Xt,null,ye(r,it=>g("option",{key:it,value:it},ot(it),9,tY)),64))],512),[[Ar,l.value]]),U[12]||(U[12]=g("svg",{class:"chev",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m6 9 6 6 6-6"})],-1))]),g("div",eY,[g("button",{class:"filter-btn",type:"button",onClick:on(B,["stop"])},[U[13]||(U[13]=g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M3 5h18l-7 8v5l-4 2v-7L3 5Z"})],-1)),U[14]||(U[14]=Kt(" More Filters ",-1)),y.value?(G(),q("span",sY,ot(y.value),1)):Ot("",!0)]),d.value?(G(),q("div",{key:0,class:"filters-popover",onClick:U[5]||(U[5]=on(()=>{},["stop"]))},[g("div",nY,[U[15]||(U[15]=g("p",{class:"filter-title"},"Document Type",-1)),(G(),q(Xt,null,ye(o,it=>g("label",{key:it,class:"checkbox"},[te(g("input",{"onUpdate:modelValue":U[2]||(U[2]=vt=>c.value=vt),type:"checkbox",value:it},null,8,iY),[[fr,c.value]]),g("span",null,ot(it),1)])),64))]),g("div",rY,[U[18]||(U[18]=g("p",{class:"filter-title"},"Sort by",-1)),g("div",oY,[te(g("select",{"onUpdate:modelValue":U[3]||(U[3]=it=>u.value=it),"aria-label":"Sort order"},[...U[16]||(U[16]=[g("option",{value:"newest"},"Newest",-1),g("option",{value:"oldest"},"Oldest",-1)])],512),[[Ar,u.value]]),U[17]||(U[17]=g("svg",{class:"chev",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m6 9 6 6 6-6"})],-1))])]),g("div",aY,[g("button",{class:"btn btn-outline small",type:"button",onClick:V}," Clear "),g("button",{class:"btn btn-primary small",type:"button",onClick:U[4]||(U[4]=it=>d.value=!1)}," Apply ")])])):Ot("",!0)])])]),g("section",lY,[U[28]||(U[28]=g("div",{class:"table-head"},[g("span",null,"Document"),g("span",null,"Type"),g("span",null,"Status"),g("span",null,"Recipient"),g("span",null,"Date"),g("span",null,"Actions")],-1)),g("div",cY,[M.value.length===0?(G(),q("p",uY,"No documents found.")):Ot("",!0),(G(!0),q(Xt,null,ye(M.value,it=>(G(),q("div",{key:it.id,class:"table-row"},[g("div",hY,[U[19]||(U[19]=ji('<span class="doc-icon" aria-hidden="true" data-v-1e72ba7e><svg viewBox="0 0 24 24" data-v-1e72ba7e><path d="M7 3h6l4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z" data-v-1e72ba7e></path><path d="M13 3v5h5" data-v-1e72ba7e></path><path d="M9 14h6" data-v-1e72ba7e></path><path d="M9 17h4" data-v-1e72ba7e></path></svg></span>',1)),g("div",null,[g("p",dY,ot(it.title),1),g("p",fY,ot(it.size),1)])]),g("div",pY,ot(it.type),1),g("div",gY,[g("span",{class:ie(["status-pill",S(it.status)])},ot(it.status),3)]),g("div",{class:ie(["recipient-cell",{placeholder:it.recipient==="Not sent"}])},[U[20]||(U[20]=g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("circle",{cx:"12",cy:"8",r:"4"}),g("path",{d:"M4 20a8 8 0 0 1 16 0"})],-1)),g("span",null,ot(it.recipient),1)],2),g("div",mY,[U[21]||(U[21]=g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),g("path",{d:"M8 3v4"}),g("path",{d:"M16 3v4"})],-1)),g("span",null,ot(I(it.date)),1)]),g("div",vY,[g("button",{class:"action-btn",type:"button",onClick:vt=>P(it),"aria-label":"View"},[...U[22]||(U[22]=[g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M2 12s4-6 10-6 10 6 10 6-4 6-10 6-10-6-10-6Z"}),g("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,bY),g("button",{class:"action-btn",type:"button",onClick:vt=>$(it),"aria-label":"Download"},[...U[23]||(U[23]=[g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M12 3v12"}),g("path",{d:"m7 10 5 5 5-5"}),g("path",{d:"M5 21h14"})],-1)])],8,yY),g("div",_Y,[g("button",{class:"action-btn",type:"button","aria-label":"More actions",onClick:on(vt=>L(it.id),["stop"])},[...U[24]||(U[24]=[g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("circle",{cx:"12",cy:"5",r:"1.5"}),g("circle",{cx:"12",cy:"12",r:"1.5"}),g("circle",{cx:"12",cy:"19",r:"1.5"})],-1)])],8,wY),f.value===it.id?(G(),q("div",{key:0,class:"row-menu",onClick:U[6]||(U[6]=on(()=>{},["stop"]))},[g("button",{type:"button",class:"menu-item",onClick:vt=>P(it)},[...U[25]||(U[25]=[g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M2 12s4-6 10-6 10 6 10 6-4 6-10 6-10-6-10-6Z"}),g("circle",{cx:"12",cy:"12",r:"3"})],-1),Kt(" View details ",-1)])],8,AY),g("button",{type:"button",class:"menu-item",onClick:vt=>$(it)},[...U[26]||(U[26]=[g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M12 3v12"}),g("path",{d:"m7 10 5 5 5-5"}),g("path",{d:"M5 21h14"})],-1),Kt(" Download ",-1)])],8,SY),g("button",{type:"button",class:"menu-item danger",onClick:vt=>N(it.id)},[...U[27]||(U[27]=[g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M4 7h16"}),g("path",{d:"M9 7V4h6v3"}),g("rect",{x:"6",y:"7",width:"12",height:"13",rx:"2"})],-1),Kt(" Delete ",-1)])],8,EY)])):Ot("",!0)])])]))),128))]),g("div",xY,[g("p",null," Showing "+ot(Math.min(w.value.length,M.value.length))+" of "+ot(w.value.length)+" documents ",1),g("div",TY,[g("button",{class:"page-btn",type:"button",disabled:b.value===1,onClick:_t}," Previous ",8,CY),(G(!0),q(Xt,null,ye(O.value,it=>(G(),q("button",{key:it,class:ie(["page-btn",{active:it===b.value}]),type:"button",onClick:vt=>tt(it)},ot(it),11,kY))),128)),g("button",{class:"page-btn",type:"button",disabled:b.value===k.value,onClick:xt}," Next ",8,IY)])])]),(G(),qi(R_,{to:"body"},[m.value&&v.value?(G(),q("div",{key:0,class:"modal-backdrop",onClick:U[10]||(U[10]=on(it=>m.value=!1,["self"]))},[g("div",PY,[g("div",RY,[U[29]||(U[29]=g("h3",null,"Document details",-1)),g("button",{class:"close",type:"button",onClick:U[7]||(U[7]=it=>m.value=!1)},"Close")]),g("div",MY,[g("p",DY,ot(v.value.title),1),g("div",OY,[g("div",null,[U[30]||(U[30]=g("p",{class:"label"},"Status",-1)),g("span",{class:ie(["status-pill",S(v.value.status)])},ot(v.value.status),3)]),g("div",null,[U[31]||(U[31]=g("p",{class:"label"},"Type",-1)),g("p",LY,ot(v.value.type),1)]),g("div",null,[U[32]||(U[32]=g("p",{class:"label"},"Recipient",-1)),g("p",NY,ot(v.value.recipient),1)]),g("div",null,[U[33]||(U[33]=g("p",{class:"label"},"Date",-1)),g("p",FY,ot(I(v.value.date)),1)]),g("div",null,[U[34]||(U[34]=g("p",{class:"label"},"File size",-1)),g("p",BY,ot(v.value.size),1)]),g("div",null,[U[35]||(U[35]=g("p",{class:"label"},"Active viewers",-1)),g("p",$Y,ot(n(v.value.id)),1)])])]),g("div",UY,[g("button",{class:"btn btn-outline small",type:"button",onClick:U[8]||(U[8]=it=>m.value=!1)}," Close "),g("button",{class:"btn btn-primary small",type:"button",onClick:U[9]||(U[9]=it=>$(v.value))}," Download ")])])])):Ot("",!0)]))]))}}),HY=js(VY,[["__scopeId","data-v-1e72ba7e"]]),jY={class:"analytics-page"},zY={class:"page-header"},WY={class:"range-select"},GY=["value"],qY={class:"stats-grid"},XY={class:"stat-top"},YY=["innerHTML"],KY={class:"stat-value"},JY={class:"stat-label"},ZY={class:"panel"},QY={class:"chart chart-lg"},tK={class:"grid-two"},eK={class:"panel"},sK={class:"chart chart-pie"},nK={class:"panel"},iK={class:"users-list"},rK={class:"user-avatar"},oK={class:"user-info"},aK={class:"user-name"},lK={class:"user-metric"},cK={class:"user-count"},uK={class:"panel"},hK={class:"chart chart-hourly"},dK=ks({__name:"AnalyticsPage",setup(s){const t=["Last 7 days","Last 30 days","Last 90 days","This year"],e=ct("Last 7 days"),{documents:n}=pv(),i=U=>{switch(U){case"Last 7 days":return 7;case"Last 30 days":return 30;case"Last 90 days":return 90;default:return 365}},r=U=>new Date(U.getFullYear(),U.getMonth(),U.getDate()),o=U=>{const it=U.updatedAt??U.createdAt??new Date().toISOString();return new Date(it)},a=U=>{const it=U.completedAt??U.signedAt??U.updatedAt??U.createdAt??new Date().toISOString();return new Date(it)},l=U=>`${U>0?"+":U<0?"-":""}${Math.abs(U).toFixed(1)}%`,c=U=>!Number.isFinite(U)||U<=0?"N/A":U<24?`${U.toFixed(1)}h`:`${(U/24).toFixed(1)}d`,u=U=>{const it=i(U),vt=new Date,j=r(new Date);j.setDate(j.getDate()-it+1);const Z=new Date(j);Z.setDate(Z.getDate()-1);const dt=r(new Date(Z));dt.setDate(dt.getDate()-it+1);const Ft=(Rt,qt,me)=>Rt>=qt&&Rt<=me,kt=n.value.filter(Rt=>Ft(o(Rt),j,vt)),Y=n.value.filter(Rt=>Ft(o(Rt),dt,Z)),bt=Rt=>Rt.status==="SIGNED"||Rt.status==="COMPLETED",At=Rt=>Rt.status==="COMPLETED",Pt=kt.filter(bt).length,Yt=Y.filter(bt).length,H=kt.filter(At).length,z=kt.length?H/kt.length*100:0,J=Y.length?Y.filter(At).length/Y.length*100:0,rt=new Set;kt.forEach(Rt=>{var qt;(qt=Rt.signers)==null||qt.forEach(me=>rt.add(me.email))});const ft=rt.size,ut=new Set;Y.forEach(Rt=>{var qt;(qt=Rt.signers)==null||qt.forEach(me=>ut.add(me.email))});const Et=kt.filter(Rt=>Rt.sentAt&&(Rt.completedAt||Rt.signedAt)).map(Rt=>{const qt=new Date(Rt.sentAt).getTime();return(new Date(Rt.completedAt??Rt.signedAt).getTime()-qt)/(1e3*60*60)}).filter(Rt=>Number.isFinite(Rt)&&Rt>=0),yt=Et.length?Et.reduce((Rt,qt)=>Rt+qt,0)/Et.length:0,wt=Y.filter(Rt=>Rt.sentAt&&(Rt.completedAt||Rt.signedAt)).map(Rt=>{const qt=new Date(Rt.sentAt).getTime();return(new Date(Rt.completedAt??Rt.signedAt).getTime()-qt)/(1e3*60*60)}).filter(Rt=>Number.isFinite(Rt)&&Rt>=0),pt=wt.length?wt.reduce((Rt,qt)=>Rt+qt,0)/wt.length:0,Ut=(Rt,qt)=>qt===0?Rt===0?0:100:(Rt-qt)/qt*100,It=Ut(Pt,Yt),Tt=Ut(yt,pt),zt=Ut(ft,ut.size),Ht=Ut(z,J),Lt=7,ee=Math.max(1,Math.ceil(it/Lt)),$e=[],he=Array.from({length:Lt},()=>0),cs=Array.from({length:Lt},()=>0);for(let Rt=0;Rt<Lt;Rt+=1){const qt=new Date(j);qt.setDate(j.getDate()+Rt*ee);const me=ee>=28?new Intl.DateTimeFormat("en-US",{month:"short"}).format(qt):new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(qt);$e.push(me)}kt.forEach(Rt=>{const qt=o(Rt);if(!Ft(qt,j,vt))return;const me=Math.floor((qt.getTime()-j.getTime())/(1e3*60*60*24)),Zs=Math.min(Lt-1,Math.max(0,Math.floor(me/ee)));he[Zs]+=1,At(Rt)&&(cs[Zs]+=1)});const ke=new Map;kt.forEach(Rt=>{var Zs,an;const qt=((an=(Zs=Rt.fileName)==null?void 0:Zs.split(".").pop())==null?void 0:an.toLowerCase())??"other";let me="Other";qt==="pdf"?me="PDF":qt==="doc"||qt==="docx"?me="DOC":(qt==="png"||qt==="jpg"||qt==="jpeg")&&(me="Image"),ke.set(me,(ke.get(me)??0)+1)});const Re=Array.from(ke.entries()).sort((Rt,qt)=>qt[1]-Rt[1]),Is=Re.length?{labels:Re.map(([Rt])=>Rt),values:Re.map(([,Rt])=>Rt)}:{labels:["PDF"],values:[0]},We=new Map;kt.forEach(Rt=>{var qt;(qt=Rt.signers)==null||qt.forEach(me=>{const Zs=me.email,an=me.name??me.email,oi=We.get(Zs)??{name:an,count:0};We.set(Zs,{name:oi.name,count:oi.count+1})})});const _s=Array.from(We.values()).sort((Rt,qt)=>qt.count-Rt.count).slice(0,5).map(Rt=>{const qt=Rt.name.split(" ").filter(Boolean),me=qt.length>1?`${qt[0][0]}${qt[1][0]}`.toUpperCase():Rt.name.slice(0,2).toUpperCase();return{name:Rt.name,initials:me,documents:Rt.count}}),kn=["8AM","9AM","10AM","11AM","12PM","1PM","2PM","3PM","4PM","5PM"],Wn=Array.from({length:kn.length},()=>0);return kt.forEach(Rt=>{const qt=a(Rt);if(!Ft(qt,j,vt))return;const me=qt.getHours();me<8||me>17||(Wn[me-8]+=1)}),{stats:{totalSigned:Pt.toLocaleString("en-US"),totalDelta:l(It),avgTime:c(yt),avgDelta:l(Tt),activeUsers:ft.toLocaleString("en-US"),activeDelta:l(zt),completionRate:`${z.toFixed(1)}%`,completionDelta:l(Ht),avgTone:Tt<=0?"positive":"negative"},signingTrends:{labels:$e,total:he,completed:cs},documentTypes:Is,topUsers:_s,hourly:{labels:kn,values:Wn}}},d=St(()=>u(e.value)),f=ct(null),m=ct(null),v=ct(null);let b=null,y=null,w=null,k=null;const M=U=>U.trim().startsWith("-")?"negative":"positive",O=St(()=>{const U=d.value.stats;return[{label:"Total Signed",value:U.totalSigned,delta:U.totalDelta,deltaTone:M(U.totalDelta),tone:"accent",icon:'<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 3h6l4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"/><path d="M13 3v5h5"/><path d="M9 13h6"/><path d="M9 17h4"/></svg>'},{label:"Avg. Signing Time",value:U.avgTime,delta:U.avgDelta,deltaTone:U.avgTone,tone:"success",icon:'<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12h6l2-3 4 6 2-3h4"/><path d="M3 12a9 9 0 1 0 9-9"/><path d="M12 7v5l3 3"/></svg>'},{label:"Active Users",value:U.activeUsers,delta:U.activeDelta,deltaTone:M(U.activeDelta),tone:"warning",icon:'<svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="9" cy="8" r="3"/><circle cx="17" cy="8" r="3"/><path d="M2 20a7 7 0 0 1 14 0"/><path d="M12 20a7 7 0 0 1 10 0"/></svg>'},{label:"Completion Rate",value:U.completionRate,delta:U.completionDelta,deltaTone:M(U.completionDelta),tone:"info",icon:'<svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="5" width="18" height="16" rx="2"/><path d="M8 3v4"/><path d="M16 3v4"/><path d="M7 12h10"/><path d="M7 16h6"/></svg>'}]}),B=St(()=>d.value.topUsers),V=()=>document.querySelector(".app-shell")??document.documentElement,A=U=>getComputedStyle(V()).getPropertyValue(U).trim(),S=(U,it)=>{const vt=U.replace("#","");if(vt.length!==6)return U;const j=Number.parseInt(vt.slice(0,2),16),Z=Number.parseInt(vt.slice(2,4),16),dt=Number.parseInt(vt.slice(4,6),16);return`rgba(${j}, ${Z}, ${dt}, ${it})`},I=()=>({accent:A("--accent")||"#4f46e5",success:A("--success")||"#16a34a",warning:A("--accent-warm")||"#f59e0b",info:"#8b5cf6",cyan:"#06b6d4",line:A("--line")||"#e5e7eb",muted:A("--muted")||"#6b7280",ink:A("--ink")||"#1f2937",inkStrong:A("--ink-strong")||"#0f172a",surface:A("--surface")||"#ffffff"}),L=()=>{const U=I();return[U.accent,U.success,U.warning,U.info,U.cyan]},P=U=>it=>{const{chart:vt}=it,{ctx:j,chartArea:Z}=vt;if(!Z)return S(U,.2);const dt=j.createLinearGradient(0,Z.top,0,Z.bottom);return dt.addColorStop(0,S(U,.25)),dt.addColorStop(1,S(U,.02)),dt},$=(U,it)=>vt=>{const{chart:j}=vt,{ctx:Z,chartArea:dt}=j;if(!dt)return U;const Ft=Z.createLinearGradient(0,dt.top,0,dt.bottom);return Ft.addColorStop(0,S(U,.95)),Ft.addColorStop(1,S(it,.45)),Ft},N={id:"pieLabelPlugin",afterDatasetDraw(U){const{ctx:it}=U,vt=U.data.datasets[0];if(!vt)return;const j=U.getDatasetMeta(0),Z=vt.data.reduce((Y,bt)=>Y+bt,0),dt=U.data.labels,Ft=vt.backgroundColor,kt=getComputedStyle(document.body).fontFamily;it.save(),j.data.forEach((Y,bt)=>{const At=vt.data[bt];if(!At)return;const Pt=(Y.startAngle+Y.endAngle)/2,Yt=Y.outerRadius+18,H=Y.x+Math.cos(Pt)*Yt,z=Y.y+Math.sin(Pt)*Yt,J=Math.round(At/Z*100);it.fillStyle=Ft[bt],it.font=`600 12px ${kt}`,it.textAlign=Pt>Math.PI/2&&Pt<Math.PI*3/2?"right":"left",it.textBaseline="middle",it.fillText(`${dt[bt]} ${J}%`,H,z)}),it.restore()}},_t=()=>{if(!f.value)return;const U=I(),it=d.value.signingTrends;b=new Ks(f.value,{type:"line",data:{labels:it.labels,datasets:[{label:"total",data:it.total,borderColor:U.accent,borderWidth:2.5,tension:.35,fill:!0,backgroundColor:P(U.accent),pointRadius:0},{label:"completed",data:it.completed,borderColor:U.success,borderWidth:2,tension:.35,fill:!1,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:U.surface,titleColor:U.inkStrong,bodyColor:U.ink,borderColor:U.line,borderWidth:1}},scales:{x:{grid:{color:U.line,borderDash:[4,4],drawBorder:!1},border:{display:!0,color:U.line},ticks:{color:U.muted}},y:{beginAtZero:!0,grid:{color:U.line,borderDash:[4,4],drawBorder:!1},border:{display:!0,color:U.line},ticks:{color:U.muted,stepSize:40}}}}})},xt=()=>{if(!m.value)return;const U=I(),it=d.value.documentTypes;y=new Ks(m.value,{type:"pie",data:{labels:it.labels,datasets:[{data:it.values,backgroundColor:L(),borderColor:U.surface,borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:U.surface,titleColor:U.inkStrong,bodyColor:U.ink,borderColor:U.line,borderWidth:1}}},plugins:[N]})},tt=()=>{if(!v.value)return;const U=I(),it=d.value.hourly;w=new Ks(v.value,{type:"bar",data:{labels:it.labels,datasets:[{label:"Activity",data:it.values,borderRadius:{topLeft:10,topRight:10,bottomLeft:0,bottomRight:0},borderSkipped:"bottom",backgroundColor:$(U.accent,U.info),barPercentage:.72,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:U.surface,titleColor:U.inkStrong,bodyColor:U.ink,borderColor:U.line,borderWidth:1}},scales:{x:{grid:{color:U.line,borderDash:[4,4],drawBorder:!1},border:{display:!0,color:U.line},ticks:{color:U.muted}},y:{beginAtZero:!0,max:60,grid:{color:U.line,borderDash:[4,4],drawBorder:!1},border:{display:!0,color:U.line},ticks:{color:U.muted,stepSize:15}}}}})},X=()=>{const U=d.value;b&&(b.data.labels=U.signingTrends.labels,b.data.datasets[0].data=U.signingTrends.total,b.data.datasets[1].data=U.signingTrends.completed,b.update()),y&&(y.data.labels=U.documentTypes.labels,y.data.datasets[0].data=U.documentTypes.values,y.update()),w&&(w.data.labels=U.hourly.labels,w.data.datasets[0].data=U.hourly.values,w.update())},nt=()=>{var it,vt,j;const U=I();if(Ks.defaults.color=U.muted,Ks.defaults.font.family=getComputedStyle(document.body).fontFamily,b){b.data.datasets[0].borderColor=U.accent,b.data.datasets[1].borderColor=U.success,b.data.datasets[0].backgroundColor=P(U.accent);const Z=b.options.scales;Z.x.grid.color=U.line,Z.y.grid.color=U.line,Z.x.border.color=U.line,Z.y.border.color=U.line;const dt=(it=b.options.plugins)==null?void 0:it.tooltip;dt&&(dt.backgroundColor=U.surface,dt.titleColor=U.inkStrong,dt.bodyColor=U.ink,dt.borderColor=U.line)}if(y){y.data.datasets[0].backgroundColor=L(),y.data.datasets[0].borderColor=U.surface;const Z=(vt=y.options.plugins)==null?void 0:vt.tooltip;Z&&(Z.backgroundColor=U.surface,Z.titleColor=U.inkStrong,Z.bodyColor=U.ink,Z.borderColor=U.line)}if(w){w.data.datasets[0].backgroundColor=$(U.accent,U.info);const Z=w.options.scales;Z.x.grid.color=U.line,Z.y.grid.color=U.line,Z.x.border.color=U.line,Z.y.border.color=U.line;const dt=(j=w.options.plugins)==null?void 0:j.tooltip;dt&&(dt.backgroundColor=U.surface,dt.titleColor=U.inkStrong,dt.bodyColor=U.ink,dt.borderColor=U.line)}b==null||b.update("none"),y==null||y.update("none"),w==null||w.update("none")};return bs(e,()=>{X()}),bs(d,()=>{X()},{deep:!0}),Rr(()=>{_t(),xt(),tt(),nt(),k=new MutationObserver(()=>{nt()}),k.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}),tc(()=>{k==null||k.disconnect(),b==null||b.destroy(),y==null||y.destroy(),w==null||w.destroy()}),(U,it)=>(G(),q("div",jY,[g("section",zY,[it[2]||(it[2]=g("div",null,[g("h2",null,"Analytics"),g("p",null,"Deep dive into your document signing metrics")],-1)),g("div",WY,[te(g("select",{"onUpdate:modelValue":it[0]||(it[0]=vt=>e.value=vt),"aria-label":"Select time range"},[(G(),q(Xt,null,ye(t,vt=>g("option",{key:vt,value:vt},ot(vt),9,GY)),64))],512),[[Ar,e.value]]),it[1]||(it[1]=g("svg",{class:"chev",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m6 9 6 6 6-6"})],-1))])]),g("section",qY,[(G(!0),q(Xt,null,ye(O.value,vt=>(G(),q("article",{key:vt.label,class:"stat-card"},[g("div",XY,[g("div",{class:ie(["stat-icon",vt.tone])},[g("span",{innerHTML:vt.icon},null,8,YY)],2),g("span",{class:ie(["delta",vt.deltaTone])},ot(vt.delta),3)]),g("p",KY,ot(vt.value),1),g("p",JY,ot(vt.label),1)]))),128))]),g("section",ZY,[it[3]||(it[3]=g("div",{class:"panel-header"},[g("h3",null,"Signing Trends"),g("p",null,"Document completion trends over the selected range")],-1)),g("div",QY,[g("canvas",{ref_key:"signingCanvas",ref:f,"aria-label":"Signing trends chart",role:"img"},null,512)]),it[4]||(it[4]=g("div",{class:"chart-legend"},[g("span",null,[g("i",{class:"legend-dot total"}),Kt(" total")]),g("span",null,[g("i",{class:"legend-dot completed"}),Kt(" completed")])],-1))]),g("section",tK,[g("article",eK,[it[5]||(it[5]=g("div",{class:"panel-header"},[g("h3",null,"Document Types"),g("p",null,"Breakdown by document category")],-1)),g("div",sK,[g("canvas",{ref_key:"typesCanvas",ref:m,"aria-label":"Document types chart",role:"img"},null,512)])]),g("article",nK,[it[8]||(it[8]=g("div",{class:"panel-header"},[g("h3",null,"Top Users"),g("p",null,"Most active signers in the selected range")],-1)),g("div",iK,[(G(!0),q(Xt,null,ye(B.value,vt=>(G(),q("div",{key:vt.name,class:"user-row"},[g("span",rK,ot(vt.initials),1),g("div",oK,[g("p",aK,ot(vt.name),1),it[6]||(it[6]=g("p",{class:"user-status"},"Active",-1))]),g("div",lK,[g("span",cK,ot(vt.documents),1),it[7]||(it[7]=g("span",{class:"user-label"},"documents",-1))])]))),128))])])]),g("section",uK,[it[9]||(it[9]=g("div",{class:"panel-header"},[g("h3",null,"Hourly Activity Distribution"),g("p",null,"Peak signing hours in the selected range")],-1)),g("div",hK,[g("canvas",{ref_key:"hourlyCanvas",ref:v,"aria-label":"Hourly activity chart",role:"img"},null,512)])])]))}}),fK=js(dK,[["__scopeId","data-v-568aa6ab"]]),pK={class:"sent-page"},gK={class:"sent-list"},mK={class:"doc-main"},vK={class:"doc-title"},bK={class:"doc-meta"},yK={class:"meta-item"},_K={class:"meta-value"},wK={class:"meta-item"},AK={class:"meta-item"},SK=ks({__name:"SentPage",setup(s){const{documents:t}=pv(),e=o=>{switch(o){case"VIEWED":return"Viewed";case"SIGNED":return"Signed";case"COMPLETED":return"Completed";case"DECLINED":return"Declined";case"EXPIRED":return"Expired";default:return"Pending"}},n=St(()=>t.value.filter(o=>o.status!=="DRAFT").map(o=>{var l,c,u;const a=((l=o.signers)==null?void 0:l.filter(d=>d.viewedAt||d.status!=="PENDING").length)??0;return{id:o.id,title:o.title,recipient:((u=(c=o.signers)==null?void 0:c[0])==null?void 0:u.email)??"Not sent",date:o.sentAt??o.updatedAt??o.createdAt??new Date().toISOString(),views:a,status:e(o.status)}})),i=o=>{switch(o){case"Pending":return"warning";case"Viewed":return"info";case"Signed":case"Completed":return"success";case"Declined":case"Expired":default:return"danger"}},r=o=>{const a=new Date(o);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(a)};return(o,a)=>(G(),q("div",pK,[a[4]||(a[4]=g("section",{class:"page-header"},[g("h2",null,"Sent Documents"),g("p",null,"Track documents you've sent for signature")],-1)),g("section",gK,[(G(!0),q(Xt,null,ye(n.value,l=>(G(),q("article",{key:l.id,class:"sent-card"},[a[3]||(a[3]=g("span",{class:"doc-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("path",{d:"m3 11 18-8-6 18-3-7-9-3Z"}),g("path",{d:"M12 12h9"})])],-1)),g("div",mK,[g("p",vK,ot(l.title),1),g("div",bK,[g("span",yK,[a[0]||(a[0]=g("span",{class:"meta-label"},"To:",-1)),g("span",_K,ot(l.recipient),1)]),g("span",wK,[a[1]||(a[1]=g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("circle",{cx:"12",cy:"12",r:"9"}),g("path",{d:"M12 7v5l3 3"})],-1)),g("span",null,ot(r(l.date)),1)]),g("span",AK,[a[2]||(a[2]=g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"M2 12s4-6 10-6 10 6 10 6-4 6-10 6-10-6-10-6Z"}),g("circle",{cx:"12",cy:"12",r:"3"})],-1)),g("span",null,ot(l.views)+" views",1)])])]),g("span",{class:ie(["status-pill",i(l.status)])},ot(l.status),3)]))),128))])]))}}),EK=js(SK,[["__scopeId","data-v-615ddbbf"]]),xK={class:"received-page"},TK={class:"received-list"},CK={class:"doc-main"},kK={class:"doc-title"},IK={class:"doc-meta"},PK={class:"meta-item"},RK={class:"meta-value"},MK={class:"meta-item"},DK={class:"meta-value"},OK={class:"meta-item due"},LK={class:"meta-value"},NK={class:"card-actions"},FK=["onClick"],BK={class:"modal-card"},$K={class:"modal-header"},UK={class:"preview-shell"},VK={class:"preview-card"},HK={class:"signature-tabs"},jK={class:"signature-area"},zK={key:0,class:"draw-wrap"},WK={key:0,class:"signature-placeholder"},GK={key:1,class:"type-wrap"},qK={class:"modal-footer"},XK={class:"footer-actions"},YK=["disabled"],KK=ks({__name:"ReceivedPage",setup(s){const t=ct([{id:"recv-1",title:"Freelance Agreement - Design Work",from:"Design Agency LLC",receivedDate:"2026-01-12",dueDate:"2026-01-15",status:"Pending"},{id:"recv-2",title:"Vendor Contract - Services",from:"ABC Corporation",receivedDate:"2026-01-10",dueDate:"2026-01-14",status:"Viewed"},{id:"recv-3",title:"Employee Handbook Acknowledgment",from:"HR Department",receivedDate:"2026-01-08",dueDate:"2026-01-12",status:"Signed"},{id:"recv-4",title:"Updated Terms of Service",from:"Legal Team",receivedDate:"2026-01-05",dueDate:"2026-01-10",status:"Signed"}]),e=ct(!1),n=ct(null),i=ct("draw"),r=ct(""),o=ct(!1),a=ct(!1),l=ct(null);let c=null;const u=St(()=>i.value==="draw"?o.value:r.value.trim().length>0),d=A=>{switch(A){case"Pending":return"warning";case"Viewed":return"info";case"Signed":return"success";default:return"danger"}},f=A=>{const S=new Date(A);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(S)},m=A=>{n.value=A,i.value="draw",r.value="",o.value=!1,e.value=!0},v=()=>{e.value=!1,n.value=null,r.value="",o.value=!1,a.value=!1,M()},b=()=>{if(!n.value||!u.value)return;const A=t.value.find(S=>{var I;return S.id===((I=n.value)==null?void 0:I.id)});A&&(A.status="Signed"),v()},y=()=>{i.value==="draw"?(M(),o.value=!1):r.value=""},w=()=>getComputedStyle(document.documentElement).getPropertyValue("--ink-strong").trim()||"#0f172a",k=()=>{if(!l.value)return;const A=l.value,S=window.devicePixelRatio||1,{width:I,height:L}=A.getBoundingClientRect();A.width=Math.max(1,Math.floor(I*S)),A.height=Math.max(1,Math.floor(L*S)),c=A.getContext("2d"),c&&(c.setTransform(S,0,0,S,0,0),c.lineWidth=2.2,c.lineCap="round",c.lineJoin="round",c.strokeStyle=w())},M=()=>{if(!l.value||!c)return;const A=l.value;c.clearRect(0,0,A.width,A.height)},O=A=>{if(i.value!=="draw"||!l.value||!c)return;a.value=!0,c.strokeStyle=w(),l.value.setPointerCapture(A.pointerId);const S=l.value.getBoundingClientRect(),I=A.clientX-S.left,L=A.clientY-S.top;c.beginPath(),c.moveTo(I,L)},B=A=>{if(!a.value||i.value!=="draw"||!l.value||!c)return;const S=l.value.getBoundingClientRect(),I=A.clientX-S.left,L=A.clientY-S.top;c.lineTo(I,L),c.stroke(),o.value=!0},V=A=>{var S;!a.value||!c||(c.closePath(),a.value=!1,A&&((S=l.value)!=null&&S.hasPointerCapture(A.pointerId))&&l.value.releasePointerCapture(A.pointerId))};return bs(e,A=>{A&&requestAnimationFrame(()=>{k()})}),(A,S)=>(G(),q("div",xK,[S[17]||(S[17]=g("section",{class:"page-header"},[g("h2",null,"Received Documents"),g("p",null,"Documents waiting for your signature")],-1)),g("section",TK,[(G(!0),q(Xt,null,ye(t.value,I=>(G(),q("article",{key:I.id,class:"received-card"},[S[7]||(S[7]=g("span",{class:"doc-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("rect",{x:"4",y:"6",width:"16",height:"12",rx:"3"}),g("path",{d:"M8 6V4h8v2"})])],-1)),g("div",CK,[g("p",kK,ot(I.title),1),g("div",IK,[g("span",PK,[S[3]||(S[3]=g("span",{class:"meta-label"},"From:",-1)),g("span",RK,ot(I.from),1)]),g("span",MK,[S[4]||(S[4]=g("span",{class:"meta-label"},"Received:",-1)),g("span",DK,ot(f(I.receivedDate)),1)]),g("span",OK,[S[5]||(S[5]=g("span",{class:"meta-label"},"Due:",-1)),g("span",LK,ot(f(I.dueDate)),1)])])]),g("div",NK,[g("span",{class:ie(["status-pill",d(I.status)])},ot(I.status),3),I.status==="Pending"?(G(),q("button",{key:0,class:"btn btn-primary sign-btn",type:"button",onClick:L=>m(I)},[...S[6]||(S[6]=[ji('<span class="btn-icon" aria-hidden="true" data-v-77ed824d><svg viewBox="0 0 24 24" data-v-77ed824d><path d="m5 4 6 6-4 4-6-6 4-4Z" data-v-77ed824d></path><path d="m15 6 3 3" data-v-77ed824d></path><path d="M10 15 6 19l-4 1 1-4 4-4" data-v-77ed824d></path></svg></span> Sign Now ',2)])],8,FK)):Ot("",!0)])]))),128))]),(G(),qi(R_,{to:"body"},[e.value&&n.value?(G(),q("div",{key:0,class:"modal-backdrop",onClick:on(v,["self"])},[g("div",BK,[g("div",$K,[g("div",null,[S[8]||(S[8]=g("h3",null,"Sign Document",-1)),g("p",null,ot(n.value.title),1)]),g("button",{class:"close-btn",type:"button",onClick:v,"aria-label":"Close"}," x ")]),g("div",UK,[g("div",VK,[S[11]||(S[11]=g("h4",null,"Document Preview",-1)),S[12]||(S[12]=g("p",null," This is a preview of the document you're about to sign. Please review carefully before signing. ",-1)),g("p",null,[S[9]||(S[9]=g("strong",null,"Effective Date:",-1)),Kt(" "+ot(f(n.value.receivedDate)),1)]),g("p",null,[S[10]||(S[10]=g("strong",null,"Parties:",-1)),Kt(" "+ot(n.value.from)+" and Signee",1)]),S[13]||(S[13]=g("p",null,[g("strong",null,"Terms:"),Kt(" As outlined in the attached agreement")],-1))])]),g("div",HK,[g("button",{type:"button",class:ie(["tab-btn",i.value==="draw"&&"active"]),onClick:S[0]||(S[0]=I=>i.value="draw")},[...S[14]||(S[14]=[g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m5 4 6 6-4 4-6-6 4-4Z"}),g("path",{d:"m15 6 3 3"}),g("path",{d:"M10 15 6 19l-4 1 1-4 4-4"})],-1),Kt(" Draw Signature ",-1)])],2),g("button",{type:"button",class:ie(["tab-btn",i.value==="type"&&"active"]),onClick:S[1]||(S[1]=I=>i.value="type")},[...S[15]||(S[15]=[g("span",{class:"type-icon"},"T",-1),Kt(" Type Signature ",-1)])],2)]),g("div",jK,[i.value==="draw"?(G(),q("div",zK,[g("canvas",{ref_key:"signatureCanvas",ref:l,class:"signature-canvas",onPointerdown:O,onPointermove:B,onPointerup:V,onPointerleave:V},null,544),o.value?Ot("",!0):(G(),q("span",WK,"Draw your signature here"))])):(G(),q("div",GK,[te(g("input",{"onUpdate:modelValue":S[2]||(S[2]=I=>r.value=I),class:"type-input",type:"text",placeholder:"Type your full name","aria-label":"Type your signature"},null,512),[[Ze,r.value,void 0,{trim:!0}]]),g("div",{class:ie(["type-preview",!r.value&&"empty"])},ot(r.value||"Your signature"),3)]))]),g("div",qK,[g("button",{class:"link-btn",type:"button",onClick:y},"Clear"),g("div",XK,[g("button",{class:"btn btn-outline",type:"button",onClick:v},"Cancel"),g("button",{class:"btn btn-primary",type:"button",disabled:!u.value,onClick:b},[...S[16]||(S[16]=[g("span",{class:"btn-icon","aria-hidden":"true"},[g("svg",{viewBox:"0 0 24 24"},[g("path",{d:"m5 4 6 6-4 4-6-6 4-4Z"}),g("path",{d:"m15 6 3 3"}),g("path",{d:"M10 15 6 19l-4 1 1-4 4-4"})])],-1),Kt(" Sign Document ",-1)])],8,YK)])])])])):Ot("",!0)]))]))}}),JK=js(KK,[["__scopeId","data-v-77ed824d"]]);async function vk(s){return(await ls.get("/audit",{params:s})).data}const ZK={class:"audit-page"},QK={class:"filters-card"},tJ={class:"filter-select"},eJ=["value"],sJ={class:"filter-select"},nJ=["value"],iJ={class:"filter-select"},rJ=["value"],oJ={class:"timeline-card"},aJ={class:"timeline"},lJ=["innerHTML"],cJ={class:"event-card"},uJ={class:"event-top"},hJ={class:"event-time"},dJ={class:"event-title"},fJ={class:"event-desc"},pJ={class:"event-meta"},gJ={class:"meta-item"},mJ={key:0,class:"meta-item"},vJ=ks({__name:"AuditTrailPage",setup(s){const t=ct([]),e=ct(null),n=ct(!1),i=ct(""),r=["Last 7 days","Last 30 days","Last 90 days","All time"];function o(A){return{DOCUMENT_UPLOADED:"Created",DOCUMENT_SENT:"Sent",DOCUMENT_VIEWED:"Viewed",DOCUMENT_SIGNED:"Signed",DOCUMENT_COMPLETED:"Completed",DOCUMENT_HASH_COMPUTED:"Hash computed",DOCUMENT_DECLINED:"Declined",DOCUMENT_EXPIRED:"Expired",ACCESS_GRANTED:"Access granted",ACCESS_REVOKED:"Access revoked",FIELD_UPDATED:"Field updated",SIGNING_SESSION_CREATED:"Signing session",MANIFEST_SUBMITTED:"Manifest submitted",SIGNATURE_CAPTURED:"Signature captured",SIGNATURE_APPLIED:"Signature applied",SIGNATURE_REJECTED:"Signature rejected"}[A]??A.replace(/_/g," ").toLowerCase()}const a=St(()=>{const A=new Map;return t.value.forEach(S=>{A.set(S.eventType,o(S.eventType))}),[{value:"ALL",label:"All Events"},...Array.from(A.entries()).map(([S,I])=>({value:S,label:I}))]}),l=St(()=>{const A=new Map;return t.value.forEach(S=>{A.set(S.documentId,S.documentTitle)}),[{value:"ALL",label:"All Documents"},...Array.from(A.entries()).map(([S,I])=>({value:S,label:I}))]}),c=ct("ALL"),u=ct("Last 7 days"),d=ct("ALL"),f=()=>{const A=Date.now();switch(u.value){case"Last 7 days":return A-10080*60*1e3;case"Last 30 days":return A-720*60*60*1e3;case"Last 90 days":return A-2160*60*60*1e3;default:return null}},m=async()=>{n.value=!0,i.value="";try{const A=await vk({limit:80});t.value=A.events,e.value=A.nextCursor??null}catch(A){i.value=A instanceof Error?A.message:"Unable to load audit events."}finally{n.value=!1}},v=async()=>{if(e.value)try{const A=await vk({before:e.value,limit:80});t.value=[...t.value,...A.events],e.value=A.nextCursor??null}catch(A){i.value=A instanceof Error?A.message:"Unable to load more events."}},b=St(()=>!!e.value),y=A=>A.includes("DECLINED")||A.includes("EXPIRED")||A.includes("REJECTED")?"danger":A.includes("SIGNED")||A.includes("COMPLETED")||A.includes("APPLIED")?"success":A.includes("VIEWED")?"info":"warning",w=A=>A.includes("SIGNED")||A.includes("COMPLETED")?'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/><path d="M9 12l2 2 4-4"/></svg>':A.includes("VIEWED")?'<svg viewBox="0 0 24 24"><path d="M2 12s4-6 10-6 10 6 10 6-4 6-10 6-10-6-10-6Z"/><circle cx="12" cy="12" r="3"/></svg>':'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/></svg>',k=A=>`${o(A.eventType)} on ${A.documentTitle}`,M=A=>{var S,I,L;return((S=A.actor)==null?void 0:S.name)||((I=A.actor)==null?void 0:I.email)||(((L=A.actor)==null?void 0:L.type)==="SYSTEM"?"System":"Unknown")},O=St(()=>{let A=t.value.slice();c.value!=="ALL"&&(A=A.filter(I=>I.eventType===c.value)),d.value!=="ALL"&&(A=A.filter(I=>I.documentId===d.value));const S=f();return S&&(A=A.filter(I=>new Date(I.createdAt).getTime()>=S)),A}),B=A=>{const S=new Date(A);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(S)};let V=null;return Rr(async()=>{await m(),HS(),V=jS(A=>{A.event==="doc.audit.appended"&&m()})}),tc(()=>{V==null||V()}),(A,S)=>(G(),q("div",ZK,[S[8]||(S[8]=g("section",{class:"page-header"},[g("h2",null,"Audit Trail"),g("p",null,"Complete history of all document activities")],-1)),g("section",QK,[g("div",tJ,[te(g("select",{"onUpdate:modelValue":S[0]||(S[0]=I=>c.value=I),"aria-label":"Filter by event"},[(G(!0),q(Xt,null,ye(a.value,I=>(G(),q("option",{key:I.value,value:I.value},ot(I.label),9,eJ))),128))],512),[[Ar,c.value]]),S[3]||(S[3]=g("svg",{class:"chev",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m6 9 6 6 6-6"})],-1))]),g("div",sJ,[te(g("select",{"onUpdate:modelValue":S[1]||(S[1]=I=>u.value=I),"aria-label":"Filter by time range"},[(G(),q(Xt,null,ye(r,I=>g("option",{key:I,value:I},ot(I),9,nJ)),64))],512),[[Ar,u.value]]),S[4]||(S[4]=g("svg",{class:"chev",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m6 9 6 6 6-6"})],-1))]),g("div",iJ,[te(g("select",{"onUpdate:modelValue":S[2]||(S[2]=I=>d.value=I),"aria-label":"Filter by document"},[(G(!0),q(Xt,null,ye(l.value,I=>(G(),q("option",{key:I.value,value:I.value},ot(I.label),9,rJ))),128))],512),[[Ar,d.value]]),S[5]||(S[5]=g("svg",{class:"chev",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m6 9 6 6 6-6"})],-1))])]),g("section",oJ,[g("div",aJ,[(G(!0),q(Xt,null,ye(O.value,I=>(G(),q("article",{key:I.id,class:"timeline-item"},[g("div",{class:ie(["event-marker",y(I.eventType)])},[g("span",{innerHTML:w(I.eventType)},null,8,lJ)],2),g("div",cJ,[g("div",uJ,[g("span",{class:ie(["event-type",y(I.eventType)])},ot(o(I.eventType)),3),g("span",hJ,ot(B(I.createdAt)),1)]),g("h4",dJ,ot(I.documentTitle),1),g("p",fJ,ot(k(I)),1),g("div",pJ,[g("span",gJ,[S[6]||(S[6]=g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("circle",{cx:"12",cy:"8",r:"4"}),g("path",{d:"M4 20a8 8 0 0 1 16 0"})],-1)),Kt(" User: "+ot(M(I)),1)]),I.ipAddress?(G(),q("span",mJ,[S[7]||(S[7]=g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("rect",{x:"3",y:"4",width:"18",height:"14",rx:"2"}),g("path",{d:"M8 20h8"})],-1)),Kt(" IP: "+ot(I.ipAddress),1)])):Ot("",!0)])])]))),128))]),b.value?(G(),q("button",{key:0,class:"btn btn-outline load-more",type:"button",onClick:v}," Load More Events ")):Ot("",!0)])]))}}),bJ=js(vJ,[["__scopeId","data-v-220afdd1"]]),yJ={class:"notifications-page"},_J={class:"panel"},wJ={class:"panel-head"},AJ={class:"panel-list"},SJ=["onClick"],EJ={key:0,viewBox:"0 0 24 24","aria-hidden":"true"},xJ={key:1,viewBox:"0 0 24 24","aria-hidden":"true"},TJ={key:2,viewBox:"0 0 24 24","aria-hidden":"true"},CJ={key:3,viewBox:"0 0 24 24","aria-hidden":"true"},kJ={key:4,viewBox:"0 0 24 24","aria-hidden":"true"},IJ={key:5,viewBox:"0 0 24 24","aria-hidden":"true"},PJ={class:"panel-body"},RJ={class:"panel-title"},MJ={class:"panel-message"},DJ={class:"panel-time"},OJ={key:0,class:"panel-dot"},LJ={key:0,class:"panel-empty"},NJ=ks({__name:"NotificationsPage",setup(s){const t=wf(),{notifications:e,markAllRead:n,markRead:i}=zS(),r=l=>cg(l).icon,o=l=>cg(l).tone,a=async l=>{l.isRead||await i([l.id]),l.link&&(l.link.startsWith("http")?window.location.href=l.link:t.push(l.link))};return(l,c)=>(G(),q("div",yJ,[c[8]||(c[8]=g("section",{class:"page-header"},[g("h2",null,"Notifications"),g("p",null,"Your recent document and signer updates")],-1)),g("section",_J,[g("div",wJ,[c[1]||(c[1]=g("h3",null,"All notifications",-1)),g("button",{class:"link-btn",type:"button",onClick:c[0]||(c[0]=(...u)=>ve(n)&&ve(n)(...u))},"Mark all as read")]),g("div",AJ,[(G(!0),q(Xt,null,ye(ve(e),u=>(G(),q("button",{key:u.id,class:"panel-item",type:"button",onClick:d=>a(u)},[g("span",{class:ie(["panel-icon",o(u.eventType)])},[r(u.eventType)==="check"?(G(),q("svg",EJ,[...c[2]||(c[2]=[g("path",{d:"M6 12l4 4 8-8"},null,-1)])])):r(u.eventType)==="eye"?(G(),q("svg",xJ,[...c[3]||(c[3]=[g("path",{d:"M2 12s4-6 10-6 10 6 10 6-4 6-10 6-10-6-10-6Z"},null,-1),g("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])):r(u.eventType)==="clock"?(G(),q("svg",TJ,[...c[4]||(c[4]=[g("circle",{cx:"12",cy:"12",r:"9"},null,-1),g("path",{d:"M12 7v5l3 3"},null,-1)])])):r(u.eventType)==="alert"?(G(),q("svg",CJ,[...c[5]||(c[5]=[g("path",{d:"M12 9v4"},null,-1),g("path",{d:"M12 17h.01"},null,-1),g("path",{d:"M10 2h4l8 16H2L10 2Z"},null,-1)])])):r(u.eventType)==="pen"?(G(),q("svg",kJ,[...c[6]||(c[6]=[g("path",{d:"M12 20h9"},null,-1),g("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5Z"},null,-1)])])):(G(),q("svg",IJ,[...c[7]||(c[7]=[g("path",{d:"M4 4h16v12H4z"},null,-1),g("path",{d:"m4 8 8 5 8-5"},null,-1)])]))],2),g("span",PJ,[g("span",RJ,ot(u.title),1),g("span",MJ,ot(u.message),1),g("span",DJ,ot(ve(FM)(u.createdAt)),1)]),u.isRead?Ot("",!0):(G(),q("span",OJ))],8,SJ))),128)),ve(e).length===0?(G(),q("p",LJ," No notifications yet. ")):Ot("",!0)])])]))}}),FJ=js(NJ,[["__scopeId","data-v-b02e4fac"]]),BJ={class:"sign-builder"},$J={class:"workflow-header"},UJ={class:"stepper"},VJ={class:"step-index"},HJ={class:"step-label"},jJ={key:0,class:"stage stage-choice"},zJ={class:"choice-grid"},WJ={key:1,class:"stage stage-setup"},GJ={class:"setup-grid"},qJ={class:"setup-main"},XJ={class:"setup-card"},YJ={class:"setup-actions"},KJ=["disabled"],JJ={key:0,class:"builder-error"},ZJ={key:0,class:"summary-card"},QJ={class:"summary-title"},tZ={class:"summary-sub"},eZ={class:"summary-tags"},sZ={class:"tag"},nZ={class:"tag"},iZ={class:"setup-panel"},rZ={class:"panel-section"},oZ={class:"field-label"},aZ=["readonly"],lZ={class:"field-label"},cZ={class:"doc-select"},uZ=["value"],hZ={class:"upload-btn upload-block"},dZ={key:0,class:"panel-section"},fZ={class:"signer-list"},pZ={class:"signer-name"},gZ={class:"signer-email"},mZ=["onClick"],vZ={class:"signer-form"},bZ={key:0,class:"builder-error"},yZ={key:1,class:"panel-section"},_Z={class:"self-card"},wZ={class:"self-avatar"},AZ={class:"self-name"},SZ={class:"self-email"},EZ=["disabled"],xZ={key:2,class:"stage stage-builder"},TZ={class:"builder-topbar"},CZ={class:"left-actions"},kZ={class:"doc-meta"},IZ={class:"doc-title"},PZ={class:"doc-sub"},RZ={class:"right-actions"},MZ=["disabled"],DZ=["disabled"],OZ=["disabled"],LZ={key:0,class:"builder-note"},NZ={key:1,class:"builder-error"},FZ={key:2,class:"builder-success"},BZ={key:0,class:"left-panel"},$Z={class:"thumb-list"},UZ=["onClick"],VZ={class:"center-panel"},HZ={key:0,class:"viewer-toolbar"},jZ={key:0,class:"pdf-error"},zZ=["onDrop","onClick"],WZ={class:"overlay"},GZ=["onPointerdown","onClick"],qZ={class:"field-label"},XZ={key:0,class:"signature-render"},YZ=["src"],KZ={key:1,class:"signature-render"},JZ=["src"],ZZ={key:1,class:"field-value"},QZ={key:2,class:"field-value"},tQ={key:3,class:"field-value"},eQ={key:4,class:"field-value"},sQ=["onPointerdown"],nQ={key:1,class:"pdf-error"},iQ={class:"right-panel"},rQ={class:"panel-section"},oQ={class:"signer-list"},aQ={class:"signer-name"},lQ={class:"signer-email"},cQ=["onClick"],uQ={key:0,class:"signer-form"},hQ={key:0,class:"builder-error"},dQ={class:"panel-section"},fQ={class:"palette"},pQ=["disabled","draggable","onDragstart","onClick"],gQ={class:"palette-icon",viewBox:"0 0 24 24","aria-hidden":"true"},mQ=["d"],vQ={class:"palette-label"},bQ={key:0,class:"helper"},yQ={key:1,class:"helper"},_Q={key:0,class:"panel-section"},wQ={class:"field-label"},AQ={class:"field-label"},SQ={class:"field-label"},EQ=["value"],xQ={class:"toggle"},TQ={key:3,class:"signature-modal"},CQ={class:"signature-dialog",role:"dialog","aria-modal":"true","aria-label":"Signature options"},kQ={class:"signature-header"},IQ={key:0,class:"builder-note"},PQ={class:"signature-tabs"},RQ={class:"signature-area"},MQ={key:0,class:"draw-wrap"},DQ={key:0,class:"signature-placeholder"},OQ={key:1,class:"type-wrap"},LQ={key:2,class:"upload-wrap"},NQ={class:"upload-btn"},FQ={key:0,class:"upload-preview"},BQ=["src"],$Q={key:0,class:"signature-style-grid"},UQ=["onClick"],VQ={class:"style-label"},HQ={key:1,class:"builder-error"},jQ={class:"signature-actions"},zQ=["disabled"],WQ=["disabled"],GQ={key:4,class:"field-modal"},qQ={class:"field-dialog",role:"dialog","aria-modal":"true","aria-label":"Field options"},XQ={class:"field-header"},YQ={key:0,class:"builder-note"},KQ={class:"field-body"},JQ={key:0,class:"field-label"},ZQ={key:1,class:"field-label"},QQ={key:2,class:"field-label"},ttt={key:3,class:"field-label"},ett={key:4,class:"toggle"},stt={class:"choice-row"},ntt={key:0,class:"choice-list"},itt=["onClick"],rtt=["onClick"],ott={class:"field-label"},att=["value"],ltt={class:"upload-btn"},ctt={key:0,class:"upload-preview"},utt=["src"],htt={class:"upload-btn"},dtt={key:0,class:"attachment-preview"},ftt={class:"attachment-name"},ptt={class:"attachment-meta"},gtt={key:0,class:"builder-error"},mtt={class:"field-actions"},vtt=["disabled"],btt=["disabled"],ytt=ks({__name:"SignBuilderPage",setup(s){pM.workerSrc=new URL("/assets/pdf.worker.min-BQvJjbUQ.mjs",import.meta.url).toString();const t=wf(),{documents:e,refresh:n}=pv(),{displayName:i,email:r,initials:o}=hv(),a=ct(""),l=ct(null),c=ct([]),u=ct([]),d=ct(""),f=ct(""),m=ct(""),v=ct(null),b=ct(0),y=ct(null),w=ct(""),k=ct(""),M=ct(""),O=ct(""),B=ct(!1),V=ct(!1),A=St(()=>r.value.trim().toLowerCase()),S=St(()=>i.value||r.value||"You"),I=St(()=>u.value.find(E=>E.isSender)),L=St(()=>u.value.filter(E=>!E.isSender));let P=null;const $=[{key:"mode",label:"Choose mode"},{key:"details",label:"Details"},{key:"build",label:"Preview & fields"}],N=jk(null),_t=ct(1),xt=ct(0),tt=ct({}),X=ct(null),nt=new Map,U=new Map,it=new Map,vt=ct(null),j=Ia({label:"",placeholder:"",signerEmail:"",required:!0}),Z=ct(""),dt=ct(""),Ft=ct(""),kt=ct(""),Y=ct(""),bt=ct(0),At=ct(0);let Pt=Promise.resolve(),Yt=Promise.resolve();const H=[{id:"classic",label:"Classic",font:'"Segoe Script", "Lucida Handwriting", cursive'},{id:"modern",label:"Modern",font:'"Trebuchet MS", "Lucida Sans Unicode", sans-serif'},{id:"heritage",label:"Heritage",font:'"Palatino Linotype", "Book Antiqua", serif'},{id:"bold",label:"Bold",font:'"Franklin Gothic Medium", "Arial Black", sans-serif'}],z=ct(!1),J=ct(null),rt=ct("draw"),ft=ct(H[0].font),ut=ct(""),Et=ct(""),yt=ct(null),wt=ct([]),pt=ct(!1),Ut=ct(!1),It=ct("");let Tt=null,zt=null;const Ht=ct(!1),Lt=ct(""),ee=ct(""),$e=ct(!1),he=ct([]),cs=ct(""),ke=ct(""),Re=ct(null),Is=ct(""),We=ct(null),_s=ct(null),kn=ct(null),Wn=[{type:"SIGNATURE",label:"Signature"},{type:"INITIAL",label:"Initial"},{type:"FULL_NAME",label:"Full Name"},{type:"EMAIL",label:"Email"},{type:"DATE",label:"Date"},{type:"TEXT",label:"Text"},{type:"CHECKBOX",label:"Checkbox"},{type:"DROPDOWN",label:"Dropdown"},{type:"RADIO",label:"Radio"},{type:"COMPANY",label:"Company"},{type:"JOB_TITLE",label:"Job Title"},{type:"IMAGE",label:"Stamp (Image)"},{type:"ATTACHMENT",label:"Attachment"}],Rt={SIGNATURE:["M3 21h4l11-11-4-4-11 11v4Z","M14 6l4 4"],INITIAL:["M3 21h4l11-11-4-4-11 11v4Z","M14 6l4 4"],FULL_NAME:["M12 12a4 4 0 1 0 0.001-8.001A4 4 0 0 0 12 12Z","M4 20a8 8 0 0 1 16 0"],EMAIL:["M4 6h16v12H4z","M4 7l8 6 8-6"],DATE:["M6 4v4","M18 4v4","M4 10h16","M5 6h14v14H5z"],TEXT:["M4 6h16","M4 12h16","M4 18h10"],CHECKBOX:["M4 4h16v16H4z","M7 12l3 3 7-7"],DROPDOWN:["M4 7h16","M8 12l4 4 4-4"],RADIO:["M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0","M12 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"],COMPANY:["M4 20h16","M6 20V8h12v12","M9 12h2","M9 16h2","M13 12h2","M13 16h2"],JOB_TITLE:["M8 7V5h8v2","M4 7h16v11H4z","M4 11h16"],IMAGE:["M4 5h16v14H4z","M8 9a2 2 0 1 0 0.001-4.001A2 2 0 0 0 8 9Z","M4 17l4-4 3 3 4-4 5 5"],ATTACHMENT:["M7 13l6-6a3 3 0 1 1 4 4l-7 7a5 5 0 0 1-7-7l7-7"]},qt=E=>Rt[E]??["M4 12h16"],me=St(()=>{var x;const E=(x=l.value)==null?void 0:x.status;return E?E==="COMPLETED"?"success":E==="SIGNED"||E==="IN_PROGRESS"?"warning":E==="DECLINED"||E==="EXPIRED"?"danger":"neutral":"neutral"}),Zs=E=>{M.value=E,P&&window.clearTimeout(P),P=window.setTimeout(()=>{M.value="",P=null},3e3)},an=E=>{var at;if(!E)return"";const K=(((at=E.split("?")[0])==null?void 0:at.split("#")[0])??E).match(/\.([a-z0-9]+)$/i);return K?K[1].toLowerCase():""},oi=E=>E.type.toLowerCase().includes("pdf")||an(E.name)==="pdf",nc=E=>{var at;return E?(((at=E.fileMimeType)==null?void 0:at.toLowerCase())??"").includes("pdf")?!0:(an(E.fileName)||an(E.fileUrl))==="pdf":!1},Ha=St(()=>e.value.filter(E=>nc(E))),ch=E=>/.+@.+\..+/.test(E),Dr=E=>E.startsWith("blob:"),Yi=E=>E.startsWith("data:image"),ws=E=>E.type==="SIGNATURE"||E.type==="INITIAL",wo=E=>{const x=E.trim();if(!x)return"";const at=(x.includes("@")?x.split("@")[0]:x).split(/[^A-Za-z0-9]+/).filter(Boolean);return at.length===0?x.slice(0,2).toUpperCase():at.length===1?at[0].slice(0,2).toUpperCase():at.map(W=>W[0]).join("").slice(0,2).toUpperCase()},Ii=E=>{if(!E.options||typeof E.options!="object")return null;const K=E.options.signature;return!K||typeof K!="object"?null:K},Ao=E=>{const x=Ii(E);return(x==null?void 0:x.font)??H[0].font},Q=E=>{if(!E)return!1;const x=E.toLowerCase();return x==="true"||x==="1"||x==="checked"},et=E=>{if(!E.options||typeof E.options!="object")return null;const x=E.options.attachment;return!x||typeof x!="object"?null:x},gt=E=>{const x=et(E);return(x==null?void 0:x.name)??E.value??"Attachment"},Ct=E=>{if(!E.options||typeof E.options!="object")return[];const x=E.options.choices;return Array.isArray(x)?x.filter(K=>typeof K=="string"&&K.trim().length>0):[]},Bt=(E,x,K=[])=>{const at=E.options&&typeof E.options=="object"?{...E.options}:{};for(const W of K)delete at[W];return{...at,...x}},Dt=new Set(["doc","docx","xls","xlsx","ppt","pptx","odt","ods","odp"]),ne=new Set(["png","jpg","jpeg","gif","webp"]),Me=new Set(["txt","rtf","csv"]),us=St(()=>{var K,at,W,mt;const E=((at=(K=l.value)==null?void 0:K.fileMimeType)==null?void 0:at.toLowerCase())??"";if(E.includes("pdf"))return"pdf";if(E.startsWith("image/"))return"image";if(E.includes("word")||E.includes("officedocument")||E.includes("presentation")||E.includes("spreadsheet"))return"office";if(E.startsWith("text/"))return"text";const x=an((W=l.value)==null?void 0:W.fileName)||an((mt=l.value)==null?void 0:mt.fileUrl);return x==="pdf"?"pdf":ne.has(x)?"image":Dt.has(x)?"office":Me.has(x)?"text":"unknown"}),Ae=St(()=>us.value==="pdf");St(()=>us.value==="image"),St(()=>us.value==="office"),St(()=>us.value==="text");const ic=St(()=>{var E,x;return kt.value||((E=l.value)==null?void 0:E.signedFileUrl)||((x=l.value)==null?void 0:x.fileUrl)||""});St(()=>{const E=ic.value;return E?`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(E)}`:""});const rc=St(()=>ic.value),ai=St(()=>{var E,x;return y.value==="self"?!!((x=(E=I.value)==null?void 0:E.email)!=null&&x.trim().length):y.value==="send"?A.value.length>0&&L.value.length>0:!1}),Cf=St(()=>{var E;return ai.value?y.value==="send"?L.value.length===1?`1 recipient - ${L.value[0].email}`:`${L.value.length} recipients added`:`1 signer - ${((E=I.value)==null?void 0:E.email)??A.value}`:y.value==="self"?"Add your email to sign this document.":"Add at least one recipient to continue."}),gv=St(()=>!!l.value&&ai.value&&Ae.value),kf=St(()=>!!l.value&&ai.value&&Ae.value),u0=St(()=>y.value==="self"?"Start signing":"Send"),uh=St(()=>c.value.find(E=>E.id===J.value)),If=St(()=>{const E=uh.value;return E?E.label?`Field: ${E.label}`:`Field: ${E.type.replace("_"," ")}`:""}),hh=St(()=>ut.value.trim()||i.value||"Your signature"),ja=St(()=>rt.value==="draw"?pt.value:rt.value==="upload"?!!Et.value:ut.value.trim().length>0),So=St(()=>ja.value),oc=()=>{if(!A.value)return;const E=u.value.filter(x=>!x.isSender&&x.email!==A.value);u.value=[{name:S.value,email:A.value,isSender:!0},...E]},dh=()=>{A.value&&(u.value=[{name:S.value,email:A.value,isSender:!0}])},mv=async()=>{var E;await da(),(E=v.value)==null||E.click()},Pf=async E=>{y.value!==E&&(u.value=[]),y.value=E,b.value=1,w.value="",k.value="",O.value="",E==="self"?dh():oc(),l.value||await mv()},vv=E=>x=>{x&&nt.set(E,x)},Rf=E=>x=>{x&&U.set(E,x)},Mf=E=>x=>{x&&it.set(E,x)},bv=E=>c.value.filter(x=>x.page===E),yv=E=>{var x,K,at,W,mt,jt;return y.value==="send"?E==="SIGNATURE"||E==="INITIAL"?((x=I.value)==null?void 0:x.email)??((K=L.value[0])==null?void 0:K.email):((at=L.value[0])==null?void 0:at.email)??((W=I.value)==null?void 0:W.email):((mt=I.value)==null?void 0:mt.email)??((jt=u.value[0])==null?void 0:jt.email)},fh=E=>Math.min(1,Math.max(0,E)),h0=E=>{if(!E||typeof E!="object")return null;const x=E;if(![x.x,x.y,x.width,x.height].every(at=>typeof at=="number"&&Number.isFinite(at)))return null;const K={x:x.x,y:x.y,width:x.width,height:x.height};return K.x<0||K.y<0||K.width<=0||K.height<=0?null:K},ph=(E,x)=>{const K=x.width||1,at=x.height||1;return{x:fh(E.x/K),y:fh((at-E.y-E.height)/at),width:fh(E.width/K),height:fh(E.height/at)}},_v=(E,x)=>{var at;return h0((at=E.options)==null?void 0:at.normalized)??ph(E,x)},gh=(E,x)=>({...E.options&&typeof E.options=="object"?E.options:{},normalized:ph(E,x)}),Eo=E=>{const x=tt.value[E.page];return{label:E.label??void 0,placeholder:E.placeholder??void 0,signerEmail:E.signerEmail||void 0,required:E.required??void 0,value:E.value??void 0,options:x?gh(E,x):E.options??void 0,page:E.page,x:E.x,y:E.y,width:E.width,height:E.height}},Pi=()=>c.value.filter(E=>{var x;return((x=E.signerEmail)==null?void 0:x.toLowerCase())===A.value}),ac=E=>{const x=E.value??"",K=Ii(E),at=!x||Yi(x)?(K==null?void 0:K.text)??S.value??A.value:x;return wo(at||S.value||A.value||"IN")||"IN"},mh=E=>{const x=E.value??"";return E.type==="INITIAL"?ac(E):E.type==="SIGNATURE"?x:E.type==="DATE"?x||new Date().toISOString().slice(0,10):E.type==="EMAIL"?x||A.value:E.type==="FULL_NAME"?x||S.value:E.type==="CHECKBOX"?Q(x)?"checked":"":E.type==="DROPDOWN"||E.type==="RADIO"?x||Ct(E)[0]||"":x},wv=E=>{const x=E.find(at=>at.type==="SIGNATURE"&&at.value)??E.find(at=>at.type==="INITIAL"&&at.value);if(!x)return null;const K=(x.value??"").trim();if(x.type==="INITIAL")return{type:"TYPED",data:ac(x)};if(Yi(K)){const at=Ii(x);return{type:(at==null?void 0:at.mode)==="draw"?"DRAWN":"UPLOADED",data:K}}return{type:"TYPED",data:K}},Ge=(E,x)=>{const K=tt.value[x];if(!K)return{};const at=_v(E,K),W=K.width*_t.value,mt=K.height*_t.value,jt=at.y*mt,Te=at.x*W;return{top:`${jt}px`,left:`${Te}px`,width:`${at.width*W}px`,height:`${at.height*mt}px`}},vh=E=>{vt.value=E;const x=c.value.find(K=>K.id===E);x&&(j.label=x.label||"",j.placeholder=x.placeholder||"",j.signerEmail=x.signerEmail||"",j.required=x.required??!0)},lc=E=>{vh(E.id),ws(E)?Or(E):hs(E)},ln=St(()=>c.value.find(E=>E.id===vt.value)),Ls=St(()=>{var E;return((E=ln.value)==null?void 0:E.type)??null}),Av=St(()=>Ls.value?`${Ls.value.replace("_"," ")} options`:"Field"),d0=St(()=>!!Ls.value),f0=St(()=>{var x;const E=Ls.value;return E==="IMAGE"?!!ke.value:E==="ATTACHMENT"?!!((x=Re.value)!=null&&x.dataUrl):!1}),cc=async()=>{const E=ln.value;if(!l.value||!E)return;const x={label:j.label,placeholder:j.placeholder,signerEmail:j.signerEmail||void 0,required:j.required};try{const K=await tp(l.value.id,E.id,x);c.value=c.value.map(at=>at.id===E.id?{...at,...K}:at)}catch{}},p0=async()=>{const E=ln.value;!l.value||!E||(await wX(l.value.id,E.id),c.value=c.value.filter(x=>x.id!==E.id),vt.value=null)},uc=()=>{rt.value="draw",ft.value=H[0].font,ut.value="",Et.value="",wt.value=[],pt.value=!1,Ut.value=!1,It.value="",zt=null,Tt=null},Or=async E=>{Ht.value=!1,J.value=E.id,uc();const x=Ii(E);x!=null&&x.font&&(ft.value=x.font),x!=null&&x.text&&(ut.value=x.text);const K=E.value??"";K?Yi(K)?(Et.value=K,rt.value=(x==null?void 0:x.mode)==="upload"||(x==null?void 0:x.mode)==="draw"?x.mode:"upload",rt.value==="draw"&&(rt.value="upload")):(ut.value=K,rt.value=(x==null?void 0:x.mode)??"type"):x!=null&&x.mode&&(rt.value=x.mode),z.value=!0,await da(),rt.value==="draw"&&za()},bh=()=>{z.value=!1,J.value=null,It.value=""},yh=()=>"#0f172a",za=()=>{if(!yt.value)return;const E=yt.value,x=window.devicePixelRatio||1,{width:K,height:at}=E.getBoundingClientRect();E.width=Math.max(1,Math.floor(K*x)),E.height=Math.max(1,Math.floor(at*x)),Tt=E.getContext("2d"),Tt&&(Tt.setTransform(x,0,0,x,0,0),Tt.lineWidth=2.2,Tt.lineCap="round",Tt.lineJoin="round",Tt.strokeStyle=yh(),Wa())},Wa=()=>{!yt.value||!Tt||(Tt.clearRect(0,0,yt.value.width,yt.value.height),Tt.beginPath(),wt.value.forEach(E=>{E.forEach((x,K)=>{K===0?Tt==null||Tt.moveTo(x.x,x.y):Tt==null||Tt.lineTo(x.x,x.y)})}),Tt.stroke(),pt.value=wt.value.some(E=>E.length>0))},g0=()=>{!yt.value||!Tt||Tt.clearRect(0,0,yt.value.width,yt.value.height)},m0=E=>{if(rt.value!=="draw"||!yt.value||!Tt)return;Ut.value=!0,Tt.strokeStyle=yh(),yt.value.setPointerCapture(E.pointerId);const x=yt.value.getBoundingClientRect(),K=E.clientX-x.left,at=E.clientY-x.top;zt=[{x:K,y:at}],wt.value=[...wt.value,zt],Tt.beginPath(),Tt.moveTo(K,at)},v0=E=>{if(!Ut.value||rt.value!=="draw"||!yt.value||!Tt)return;const x=yt.value.getBoundingClientRect(),K=E.clientX-x.left,at=E.clientY-x.top;Tt.lineTo(K,at),Tt.stroke(),zt==null||zt.push({x:K,y:at}),pt.value=!0},Ki=E=>{var x;!Ut.value||!Tt||(Tt.closePath(),Ut.value=!1,E&&((x=yt.value)!=null&&x.hasPointerCapture(E.pointerId))&&yt.value.releasePointerCapture(E.pointerId),pt.value=wt.value.some(K=>K.length>0))},b0=()=>{It.value="",rt.value==="draw"?(wt.value=[],pt.value=!1,g0()):rt.value==="upload"?Et.value="":ut.value=""},Sv=()=>{if(!yt.value)return"";const E=yt.value,{width:x,height:K}=E.getBoundingClientRect(),at=window.devicePixelRatio||1,W=document.createElement("canvas");W.width=Math.max(1,Math.floor(x*at)),W.height=Math.max(1,Math.floor(K*at));const mt=W.getContext("2d");return mt?(mt.drawImage(E,0,0,x,K),W.toDataURL("image/png")):E.toDataURL("image/png")},_h=(E,x)=>{const K=E.trim();if(!K)return"";const at=document.createElement("canvas"),W=at.getContext("2d");if(!W)return"";const mt=64,jt=24;W.font=`${mt}px ${x}`;const Te=W.measureText(K),De=Math.ceil(Te.width+jt*2),ds=Math.ceil(mt+jt*2);return at.width=De,at.height=ds,W.font=`${mt}px ${x}`,W.fillStyle=yh(),W.textBaseline="middle",W.textAlign="center",W.fillText(K,De/2,ds/2),at.toDataURL("image/png")},wh=()=>rt.value==="draw"?pt.value?Sv():"":rt.value==="upload"?Et.value:ut.value.trim(),Ev=E=>({...E.options&&typeof E.options=="object"?{...E.options}:{},signature:{mode:rt.value,font:rt.value==="type"?ft.value:void 0,text:rt.value==="type"?ut.value.trim():void 0}}),hc=async()=>{if(It.value="",!l.value||!J.value)return;const E=c.value.find(at=>at.id===J.value);if(!E)return;const x=wh();if(!x){It.value="Add a signature before saving.";return}const K=Ev(E);try{const at=await tp(l.value.id,E.id,{value:x,options:K});c.value=c.value.map(W=>W.id===E.id?{...W,...at}:W),bh()}catch{It.value="Unable to save signature."}},dc=E=>{var W;const x=E.target,K=(W=x.files)==null?void 0:W[0];if(!K)return;if(It.value="",!K.type.startsWith("image/")){It.value="Upload a valid image file.",x.value="";return}const at=new FileReader;at.onload=()=>{Et.value=typeof at.result=="string"?at.result:""},at.readAsDataURL(K),x.value=""},xv=()=>{let E="";if(rt.value==="type"?E=_h(ut.value.trim(),ft.value):rt.value==="upload"?E=Et.value:E=Sv(),!E)return;const x=document.createElement("a");x.href=E,x.download=`signature-${Date.now()}.png`,x.click()},Df=()=>{Lt.value="",ee.value="",$e.value=!1,he.value=[],cs.value="",ke.value="",Re.value=null,Is.value=""},hs=E=>{z.value=!1,J.value=null,Df(),Ht.value=!0,Lt.value=E.value??"",ee.value=E.value??"",$e.value=Q(E.value),he.value=Ct(E),(E.type==="DROPDOWN"||E.type==="RADIO")&&E.value&&!he.value.includes(E.value)&&(he.value=[...he.value,E.value]),E.type==="IMAGE"&&E.value&&Yi(E.value)&&(ke.value=E.value);const x=et(E);x?Re.value={name:x.name??E.value??"Attachment",type:x.type??"",dataUrl:x.dataUrl??""}:E.type==="ATTACHMENT"&&E.value&&(Re.value={name:E.value,type:"",dataUrl:""})},Ah=()=>{Ht.value=!1,Is.value=""},Tv=()=>{const E=cs.value.trim();E&&(he.value.includes(E)||(he.value=[...he.value,E]),Lt.value||(Lt.value=E),cs.value="")},Cv=E=>{he.value=he.value.filter(x=>x!==E),Lt.value===E&&(Lt.value=he.value[0]??"")},kv=E=>{var W;const x=E.target,K=(W=x.files)==null?void 0:W[0];if(!K)return;if(Is.value="",!K.type.startsWith("image/")){Is.value="Upload a valid image file.",x.value="";return}const at=new FileReader;at.onload=()=>{ke.value=typeof at.result=="string"?at.result:""},at.readAsDataURL(K),x.value=""},Iv=E=>{var W;const x=E.target,K=(W=x.files)==null?void 0:W[0];if(!K)return;Is.value="";const at=new FileReader;at.onload=()=>{Re.value={name:K.name,type:K.type||"Attachment",dataUrl:typeof at.result=="string"?at.result:""}},at.readAsDataURL(K),x.value=""},Sh=E=>{var x;switch(E.type){case"TEXT":return Lt.value;case"DATE":return ee.value;case"CHECKBOX":return $e.value?"checked":"";case"DROPDOWN":case"RADIO":return Lt.value||he.value[0]||"";case"IMAGE":return ke.value;case"ATTACHMENT":return((x=Re.value)==null?void 0:x.name)??"";default:return Lt.value.trim()}},Pv=E=>E.type==="DROPDOWN"||E.type==="RADIO"?Bt(E,{choices:he.value}):E.type==="ATTACHMENT"?Re.value?Bt(E,{attachment:{name:Re.value.name,type:Re.value.type,dataUrl:Re.value.dataUrl}}):Bt(E,{},["attachment"]):E.options&&typeof E.options=="object"?{...E.options}:{},Ji=async()=>{if(Is.value="",!l.value||!ln.value)return;const E=ln.value;if((E.type==="DROPDOWN"||E.type==="RADIO")&&he.value.length===0){Is.value="Add at least one option.";return}const x=Sh(E),K=Pv(E);try{const at=await tp(l.value.id,E.id,{value:x,options:K});c.value=c.value.map(W=>W.id===E.id?{...W,...at}:W),Ah()}catch{Is.value="Unable to save field."}},Rv=()=>{var E;if(Ls.value==="IMAGE"&&ke.value){const x=document.createElement("a");x.href=ke.value,x.download=`stamp-${Date.now()}.png`,x.click();return}if(Ls.value==="ATTACHMENT"&&((E=Re.value)!=null&&E.dataUrl)){const x=document.createElement("a");x.href=Re.value.dataUrl,x.download=Re.value.name||`attachment-${Date.now()}`,x.click()}},Mv=()=>{O.value="";const E=d.value.trim(),x=f.value.trim().toLowerCase();if(!E||!x){O.value="Enter the recipient full name and email to add them.";return}if(!ch(x)){O.value="Enter a valid email address.";return}if(A.value&&x===A.value){O.value="Use a recipient email, not your own.";return}if(u.value.some(at=>at.email===x)){O.value="That recipient is already added.",f.value="";return}const K={name:E,email:x};I.value?u.value=[I.value,...L.value,K]:u.value=[...L.value,K],d.value="",f.value=""},Ga=E=>{u.value=u.value.filter(x=>x.email!==E||x.isSender)},Dv=async E=>{var mt;const x=E.target,K=(mt=x.files)==null?void 0:mt[0];if(!K)return;if(w.value="",!oi(K)){w.value="Only PDF files are supported.",x.value="";return}const at=m.value.trim()||K.name.replace(/\.[^/.]+$/,""),W=await yX({title:at,file:K});a.value=W.id,m.value=W.title,await Lr(W.id),await st({allowMissingSigners:!0}),x.value=""},Of=async()=>{var E;if(!a.value){l.value=null,c.value=[],vt.value=null,m.value="",xt.value=0,tt.value={},(E=N.value)==null||E.destroy(),N.value=null,Z.value="",bt.value+=1,dt.value="",Ft.value="",At.value+=1,Y.value&&(URL.revokeObjectURL(Y.value),Y.value=""),kt.value="",w.value="";return}await Lr(a.value)},Lr=async E=>{var at;const x=((at=l.value)==null?void 0:at.id)===E,K=await bX(E);l.value=K,m.value=K.title,w.value=nc(K)?"":"Only PDF documents are supported.",z.value=!1,Ht.value=!1,c.value=K.fields??[],y.value==="self"?(u.value=[],dh()):(K.signers&&K.signers.length>0?u.value=K.signers.slice().sort((W,mt)=>W.signOrder-mt.signOrder).map(W=>({name:W.name??void 0,email:W.email,isSender:W.email.toLowerCase()===A.value})):x||(u.value=[]),oc()),vt.value=null,await fc()},Ov=()=>{var E;(E=N.value)==null||E.destroy(),N.value=null,xt.value=0,tt.value={},Z.value="",bt.value+=1},Eh=()=>{At.value+=1,dt.value="",Ft.value=""},y0=()=>{Y.value&&Dr(Y.value)&&URL.revokeObjectURL(Y.value),Y.value=""},Lv=async()=>{var E,x,K,at;if(kt.value="",!!((E=l.value)!=null&&E.id))try{if((x=l.value)!=null&&x.signedFileUrl){kt.value=l.value.signedFileUrl;return}const W=await ls.get(`/documents/${l.value.id}/preview-url`);kt.value=W.data.url}catch{kt.value=((K=l.value)==null?void 0:K.signedFileUrl)||((at=l.value)==null?void 0:at.fileUrl)||""}},fc=async()=>{var E,x;if(Ov(),Eh(),y0(),kt.value="",!(!((E=l.value)!=null&&E.fileUrl)&&!((x=l.value)!=null&&x.signedFileUrl))){if(await Lv(),!Ae.value){Z.value="Only PDF documents are supported for preview.";return}await Nv()}},Nv=async()=>{var K,at,W,mt;const E=bt.value+1;bt.value=E,Z.value="";const x=rc.value;try{let jt=null;if((K=l.value)!=null&&K.signedFileUrl)try{jt=await Vp(l.value.signedFileUrl).promise}catch{jt=null}if(!jt&&((at=l.value)!=null&&at.id))try{const Te=await ls.get(`/documents/${l.value.id}/file`,{responseType:"arraybuffer"});if(E!==bt.value)return;jt=await Vp({data:Te.data}).promise}catch{jt=null}if(!jt&&x)try{jt=await Vp(x).promise}catch{jt=null}if(!jt)throw new Error("Preview unavailable");if(E!==bt.value)return;(W=N.value)==null||W.destroy(),N.value=jt,xt.value=jt.numPages,tt.value={},await Nr(E),await xh(E)}catch{if(E!==bt.value)return;(mt=N.value)==null||mt.destroy(),N.value=null,xt.value=0,tt.value={},Z.value="Unable to load the PDF preview."}},Fv=async(E=bt.value)=>{const x=N.value;if(x)for(let K=1;K<=x.numPages;K+=1){if(E!==bt.value)return;const at=await x.getPage(K),W=at.getViewport({scale:1});tt.value={...tt.value,[K]:{width:W.width,height:W.height}};const mt=U.get(K);if(!mt)continue;const jt=window.devicePixelRatio||1,Te=at.getViewport({scale:_t.value}),De=at.getViewport({scale:_t.value*jt});mt.width=De.width,mt.height=De.height,mt.style.width=`${Te.width}px`,mt.style.height=`${Te.height}px`;const ds=mt.getContext("2d");ds&&await at.render({canvasContext:ds,viewport:De}).promise}},Lf=async(E=bt.value)=>{const x=N.value;if(x)for(let K=1;K<=x.numPages;K+=1){if(E!==bt.value)return;const at=await x.getPage(K),W=window.devicePixelRatio||1,mt=at.getViewport({scale:.2}),jt=at.getViewport({scale:.2*W}),Te=it.get(K);if(!Te)continue;Te.width=jt.width,Te.height=jt.height,Te.style.width=`${mt.width}px`,Te.style.height=`${mt.height}px`;const De=Te.getContext("2d");De&&await at.render({canvasContext:De,viewport:jt}).promise}},Nr=(E=bt.value)=>(Pt=Pt.catch(()=>{}).then(()=>Fv(E)),Pt),xh=(E=bt.value)=>(Yt=Yt.catch(()=>{}).then(()=>Lf(E)),Yt),Th=async()=>{_t.value=Math.min(2,_t.value+.1),await Nr()},Bv=async()=>{_t.value=Math.max(.6,_t.value-.1),await Nr()},$v=E=>{const x=nt.get(E);!x||!X.value||X.value.scrollTo({top:x.offsetTop-12,behavior:"smooth"})},xo=E=>{Ae.value&&(We.value=E)},Uv=E=>{Ae.value&&(_s.value=E)},Vv=async(E,x)=>{const K=We.value;!K||!l.value||!Ae.value||(await Nf(K,E.clientX,E.clientY,x),We.value=null)},Hv=async(E,x)=>{!_s.value||!l.value||!Ae.value||(await Nf(_s.value,E.clientX,E.clientY,x),_s.value=null)},Nf=async(E,x,K,at)=>{if(!l.value||!Ae.value)return;const W=nt.get(at),mt=tt.value[at];if(!W||!mt)return;const jt=W.getBoundingClientRect(),Te=Math.max(0,x-jt.left),De=Math.max(0,K-jt.top),ds=p(E),cn=Te/_t.value,Fr=mt.height-De/_t.value-ds.height,_0=ph({x:cn,y:Math.max(0,Fr),width:ds.width,height:ds.height},mt),Bf={type:E,page:at,x:cn,y:Math.max(0,Fr),width:ds.width,height:ds.height,required:!0,signerEmail:yv(E),options:{normalized:_0}},fE=`temp-${Date.now()}`,ND={id:fE,...Bf,status:"EMPTY"};c.value=[...c.value,ND];const FD=await _X(l.value.id,Bf);c.value=c.value.map(w0=>w0.id===fE?{...w0,...FD}:w0)},Gn=(E,x,K)=>{const at=nt.get(K),W=tt.value[K];if(!at||!W)return;at.getBoundingClientRect();const mt=x.x*_t.value,jt=(W.height-x.y-x.height)*_t.value;kn.value={fieldId:x.id,page:K,startX:E.clientX,startY:E.clientY,originX:mt,originY:jt,mode:"move"},E.target.setPointerCapture(E.pointerId)},jv=(E,x,K)=>{kn.value={fieldId:x.id,page:K,startX:E.clientX,startY:E.clientY,originX:x.width,originY:x.height,mode:"resize"},E.target.setPointerCapture(E.pointerId)},Ff=async E=>{const x=kn.value;if(!x)return;const K=c.value.find(mt=>mt.id===x.fieldId),at=tt.value[x.page],W=nt.get(x.page);if(!(!K||!at||!W))if(x.mode==="move"){const mt=E.clientX-x.startX,jt=E.clientY-x.startY,Te=Math.max(0,x.originX+mt),De=Math.max(0,x.originY+jt),ds=Math.min(at.width-K.width,Te/_t.value),cn=Math.min(at.height-K.height,at.height-De/_t.value-K.height),Fr={...K,x:ds,y:Math.max(0,cn)},_0=gh(Fr,at);c.value=c.value.map(Bf=>Bf.id===K.id?{...Fr,options:_0}:Bf)}else{const mt=E.clientX-x.startX,jt=E.clientY-x.startY,Te=Math.max(40,x.originX+mt/_t.value),De=Math.max(20,x.originY+jt/_t.value),ds={...K,width:Te,height:De},cn=gh(ds,at);c.value=c.value.map(Fr=>Fr.id===K.id?{...ds,options:cn}:Fr)}},To=async()=>{const E=kn.value;if(!E||!l.value)return;const x=c.value.find(at=>at.id===E.fieldId),K=tt.value[E.page];kn.value=null,x&&await tp(l.value.id,x.id,{x:x.x,y:x.y,width:x.width,height:x.height,options:K?gh(x,K):x.options})},p=E=>{switch(E){case"SIGNATURE":return{width:160,height:50};case"INITIAL":return{width:90,height:40};case"CHECKBOX":return{width:22,height:22};case"DATE":return{width:90,height:26};case"IMAGE":return{width:140,height:90};case"ATTACHMENT":return{width:120,height:32};default:return{width:140,height:32}}},_=async()=>{if(!(!l.value||B.value)){if(k.value="",M.value="",z.value||Ht.value){k.value="Close the open editor before saving.";return}B.value=!0;try{ln.value&&await cc(),c.value.length>0&&await Promise.all(c.value.map(E=>tp(l.value.id,E.id,Eo(E)))),await Lr(l.value.id),Zs("Draft saved.")}catch{k.value="Unable to save draft."}finally{B.value=!1}}},C=async()=>{if(k.value="",M.value="",V.value||B.value||!l.value)return;if(!Ae.value){k.value="Convert this document to PDF before signing.";return}if(y.value!=="send"){k.value="Switch to send mode to sign and invite recipients.";return}if(!ai.value){k.value="Add at least one recipient before signing.";return}if(!A.value){k.value="Add your email before signing.";return}if(z.value||Ht.value){k.value="Close the open editor before signing.";return}const E=Pi();if(E.length===0){k.value="Assign at least one field to yourself before signing.";return}const x=E.filter(ws);if(x.length===0){k.value="Add a signature or initial field for yourself before signing.";return}if(x.some(K=>!(K.value??"").trim())){k.value="Add your signature or initials to all of your signature fields before signing.";return}if(c.value.length===0){k.value="Place at least one field before signing.";return}V.value=!0;try{if(await _(),!l.value||k.value)return;const K=[I.value??{name:S.value,email:A.value},...L.value],W=(await mk(l.value.id,{signers:K.map((cn,Fr)=>({email:cn.email,name:cn.name,order:Fr+1})),inviteStrategy:"sequential"})).signingToken;if(!W){k.value="Unable to start the signing session.";return}const mt=Pi(),jt=wv(mt);if(!jt){k.value="Add a signature before signing.";return}const Te=nh(),De=await gM(l.value.id,W,nh(),Te),ds=mt.map(cn=>({fieldId:cn.id,value:mh(cn)}));await mM({docId:l.value.id,signingToken:W,signingSessionId:De.data.signingSessionId,fields:ds,correlationId:Te}),await vM({docId:l.value.id,signingToken:W,signingSessionId:De.data.signingSessionId,type:jt.type,data:jt.data,correlationId:Te}),await bM({docId:l.value.id,signingToken:W,signingSessionId:De.data.signingSessionId,correlationId:Te}),await Lr(l.value.id),Zs("Signature applied. Inviting the next signer.")}catch(K){k.value=K instanceof Error?K.message:"Unable to sign and send."}finally{V.value=!1}},F=async()=>{if(k.value="",M.value="",B.value||V.value||!l.value)return;if(!Ae.value){k.value="Convert this document to PDF before sending for signatures.";return}if(!ai.value){k.value=y.value==="self"?"Add your email before starting the signing session.":"Add at least one signer before sending.";return}if(!A.value){k.value="Add your email before starting the signing session.";return}if(c.value.length===0){k.value="Place at least one field before sending.";return}if(y.value==="send"&&!c.value.some(at=>{var W;return((W=at.signerEmail)==null?void 0:W.toLowerCase())===A.value})){k.value="Assign at least one field to yourself before sending.";return}const E=y.value==="send"?[I.value??{name:S.value,email:A.value},...L.value]:[{name:S.value,email:A.value}],x=await mk(l.value.id,{signers:E.map((K,at)=>({email:K.email,name:K.name,order:at+1})),inviteStrategy:"sequential"});if(x.signingToken){await t.push(`/sign/${x.signingToken}`);return}await Lr(l.value.id)},st=async E=>{if(w.value="",!l.value){w.value="Select or upload a PDF to continue.";return}if(!Ae.value){w.value="Only PDF documents are supported for preview.";return}if(!ai.value&&!(E!=null&&E.allowMissingSigners)){w.value=y.value==="self"?"Add your email to continue.":"Add at least one recipient to continue.";return}b.value=2,k.value="",await da(),N.value&&(await Nr(),await xh())};return bs(_t,()=>{Nr()}),bs(z,E=>{E?window.addEventListener("resize",za):window.removeEventListener("resize",za)}),bs(rt,async E=>{z.value&&E==="draw"&&(await da(),za())}),bs(r,()=>{if(y.value==="self"){dh();return}y.value==="send"&&oc()}),bs(b,async E=>{E!==2||!N.value||!Ae.value||(await da(),await Nr(),await xh())}),Rr(async()=>{window.addEventListener("pointermove",Ff),window.addEventListener("pointerup",To),await n()}),tc(()=>{var E;window.removeEventListener("pointermove",Ff),window.removeEventListener("pointerup",To),window.removeEventListener("resize",za),P&&(window.clearTimeout(P),P=null),bt.value+=1,(E=N.value)==null||E.destroy(),N.value=null,Y.value&&Dr(Y.value)&&(URL.revokeObjectURL(Y.value),Y.value="")}),(E,x)=>{var K,at;return G(),q("div",BJ,[g("header",$J,[g("div",UJ,[(G(),q(Xt,null,ye($,(W,mt)=>g("div",{key:W.key,class:ie(["step",mt===b.value?"active":"",mt<b.value?"done":""])},[g("span",VJ,ot(mt+1),1),g("span",HJ,ot(W.label),1)],2)),64))])]),b.value===0?(G(),q("section",jJ,[g("div",zJ,[g("button",{class:"choice-card",type:"button",onClick:x[0]||(x[0]=W=>Pf("send"))},[...x[30]||(x[30]=[ji('<div class="choice-icon" data-v-6f50f170><svg viewBox="0 0 24 24" aria-hidden="true" data-v-6f50f170><path d="M4 12h10" data-v-6f50f170></path><path d="M12 6l6 6-6 6" data-v-6f50f170></path><rect x="3" y="4" width="7" height="16" rx="2" data-v-6f50f170></rect></svg></div><div class="choice-copy" data-v-6f50f170></div><span class="choice-cta" data-v-6f50f170>Send</span>',3)])]),g("button",{class:"choice-card",type:"button",onClick:x[1]||(x[1]=W=>Pf("self"))},[...x[31]||(x[31]=[ji('<div class="choice-icon" data-v-6f50f170><svg viewBox="0 0 24 24" aria-hidden="true" data-v-6f50f170><path d="M12 3a5 5 0 1 1 0 10 5 5 0 0 1 0-10Z" data-v-6f50f170></path><path d="M4 21a8 8 0 0 1 16 0" data-v-6f50f170></path></svg></div><div class="choice-copy" data-v-6f50f170></div><span class="choice-cta" data-v-6f50f170>Sign</span>',3)])])])])):b.value===1?(G(),q("section",WJ,[g("div",GJ,[g("div",qJ,[g("div",XJ,[x[32]||(x[32]=g("div",{class:"setup-header"},[g("h3",null,"Document setup"),g("p",null,"Tell us what you want to sign and who needs to sign it.")],-1)),g("div",YJ,[g("button",{class:"btn btn-primary",type:"button",disabled:!gv.value,onClick:st}," Continue to preview ",8,KJ),g("button",{class:"btn btn-outline",type:"button",onClick:x[2]||(x[2]=W=>b.value=0)}," Change mode ")]),w.value?(G(),q("p",JJ,ot(w.value),1)):Ot("",!0)]),l.value?(G(),q("div",ZJ,[x[33]||(x[33]=g("h4",null,"Selected document",-1)),g("p",QJ,ot(l.value.title),1),g("p",tZ,ot(Cf.value),1),g("div",eZ,[g("span",sZ,ot(l.value.status),1),g("span",nZ,ot(xt.value)+" pages",1)])])):Ot("",!0)]),g("aside",iZ,[g("div",rZ,[x[39]||(x[39]=g("div",{class:"panel-title"},"Document",-1)),g("label",oZ,[x[34]||(x[34]=Kt(" Document name ",-1)),te(g("input",{"onUpdate:modelValue":x[3]||(x[3]=W=>m.value=W),class:"input",type:"text",readonly:!!l.value,placeholder:"e.g. Service Agreement"},null,8,aZ),[[Ze,m.value]])]),g("label",lZ,[x[37]||(x[37]=Kt(" Choose from library ",-1)),g("div",cZ,[te(g("select",{"onUpdate:modelValue":x[4]||(x[4]=W=>a.value=W),onChange:Of},[x[35]||(x[35]=g("option",{value:""},"Select PDF document",-1)),(G(!0),q(Xt,null,ye(Ha.value,W=>(G(),q("option",{key:W.id,value:W.id},ot(W.title),9,uZ))),128))],544),[[Ar,a.value]]),x[36]||(x[36]=g("svg",{class:"chev",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m6 9 6 6 6-6"})],-1))])]),g("label",hZ,[g("input",{ref_key:"uploadInput",ref:v,type:"file",accept:".pdf",onChange:Dv},null,544),x[38]||(x[38]=Kt(" Upload PDF ",-1))]),x[40]||(x[40]=g("p",{class:"helper"},"PDF files only.",-1))]),y.value==="send"?(G(),q("div",dZ,[x[41]||(x[41]=g("div",{class:"panel-title"},"Recipients",-1)),g("div",fZ,[(G(!0),q(Xt,null,ye(u.value,W=>(G(),q("div",{key:W.email,class:"signer-row"},[g("div",null,[g("p",pZ,ot(W.isSender?"You":W.name||W.email),1),g("p",gZ,ot(W.email),1)]),W.isSender?Ot("",!0):(G(),q("button",{key:0,class:"icon-btn",type:"button",onClick:mt=>Ga(W.email)}," x ",8,mZ))]))),128))]),g("div",vZ,[te(g("input",{"onUpdate:modelValue":x[5]||(x[5]=W=>d.value=W),class:"input",type:"text",placeholder:"Recipient full name",onInput:x[6]||(x[6]=W=>O.value="")},null,544),[[Ze,d.value]]),te(g("input",{"onUpdate:modelValue":x[7]||(x[7]=W=>f.value=W),class:"input",type:"email",placeholder:"Recipient Gmail",onInput:x[8]||(x[8]=W=>O.value="")},null,544),[[Ze,f.value]]),g("button",{class:"btn btn-outline",type:"button",onClick:Mv},"Add signer"),O.value?(G(),q("p",bZ,ot(O.value),1)):Ot("",!0)])])):(G(),q("div",yZ,[x[42]||(x[42]=g("div",{class:"panel-title"},"Signer",-1)),g("div",_Z,[g("span",wZ,ot(ve(o)),1),g("div",null,[g("p",AZ,ot(ve(i)),1),g("p",SZ,ot(ve(r)||"Add your email in settings"),1)]),g("button",{class:"btn btn-outline",type:"button",onClick:dh,disabled:!ve(r)}," Use my profile ",8,EZ)]),x[43]||(x[43]=g("p",{class:"helper"},"We will send the signing link to you.",-1))]))])])])):(G(),q("section",xZ,[g("header",TZ,[g("div",CZ,[g("button",{class:"btn btn-outline",type:"button",onClick:x[9]||(x[9]=W=>b.value=1)},"Edit details"),g("div",kZ,[g("p",IZ,ot(((K=l.value)==null?void 0:K.title)??"No document selected"),1),g("p",PZ,ot(u.value.length)+" signer"+ot(u.value.length===1?"":"s"),1)])]),g("div",RZ,[g("div",{class:ie(["status-pill",me.value])},ot(((at=l.value)==null?void 0:at.status)??"No document"),3),g("button",{class:"btn btn-outline",type:"button",onClick:_,disabled:!l.value||B.value},ot(B.value?"Saving...":"Save"),9,MZ),x[44]||(x[44]=g("button",{class:"btn btn-outline",type:"button",disabled:""},"Detect fields",-1)),y.value==="send"?(G(),q("button",{key:0,class:"btn btn-outline",type:"button",onClick:C,disabled:!kf.value||B.value||V.value},ot(V.value?"Signing...":"Sign now & send"),9,DZ)):Ot("",!0),g("button",{class:"btn btn-primary",type:"button",onClick:F,disabled:!kf.value||B.value||V.value},ot(u0.value),9,OZ)])]),l.value&&!Ae.value?(G(),q("p",LZ," Preview only for this file type. Convert to PDF to place fields and send for signing. ")):Ot("",!0),k.value?(G(),q("p",NZ,ot(k.value),1)):Ot("",!0),M.value?(G(),q("p",FZ,ot(M.value),1)):Ot("",!0),g("div",{class:ie(["builder-body",!Ae.value&&"builder-body--compact"])},[Ae.value?(G(),q("aside",BZ,[x[45]||(x[45]=g("div",{class:"panel-title"},"Pages",-1)),g("div",$Z,[(G(!0),q(Xt,null,ye(xt.value,W=>(G(),q("button",{key:W,class:"thumb-card",type:"button",onClick:mt=>$v(W)},[g("canvas",{ref_for:!0,ref:Mf(W),class:"thumb-canvas"},null,512),g("span",null,"Page "+ot(W),1)],8,UZ))),128))])])):Ot("",!0),g("section",VZ,[Ae.value?(G(),q("div",HZ,[g("button",{class:"icon-btn",type:"button",onClick:Bv},"-"),g("span",null,ot(Math.round(_t.value*100))+"%",1),g("button",{class:"icon-btn",type:"button",onClick:Th},"+")])):Ot("",!0),g("div",{class:"viewer",ref_key:"viewerRef",ref:X},[Ae.value?(G(),q(Xt,{key:0},[Z.value?(G(),q("div",jZ,[g("p",null,ot(Z.value),1)])):Ot("",!0),(G(!0),q(Xt,null,ye(xt.value,W=>(G(),q("div",{key:W,class:"page-wrap",ref_for:!0,ref:vv(W),onDragover:x[10]||(x[10]=on(()=>{},["prevent"])),onDrop:mt=>Vv(mt,W),onClick:mt=>Hv(mt,W)},[g("canvas",{ref_for:!0,ref:Rf(W),class:"pdf-canvas"},null,512),g("div",WZ,[(G(!0),q(Xt,null,ye(bv(W),mt=>(G(),q("div",{key:mt.id,class:ie(["field",[mt.type.toLowerCase(),vt.value===mt.id?"active":"",mt.value?"filled":""]]),style:gr(Ge(mt,W)),onPointerdown:jt=>Gn(jt,mt,W),onClick:on(jt=>lc(mt),["stop"])},[g("span",qZ,ot(mt.label||mt.type.replace("_"," ")),1),ws(mt)&&mt.value?(G(),q("div",XZ,[Yi(mt.value)?(G(),q("img",{key:0,src:mt.value,alt:"Signature"},null,8,YZ)):(G(),q("span",{key:1,class:"signature-text",style:gr({fontFamily:Ao(mt)})},ot(mt.value),5))])):mt.type==="IMAGE"&&mt.value?(G(),q("div",KZ,[Yi(mt.value)?(G(),q("img",{key:0,src:mt.value,alt:"Stamp"},null,8,JZ)):(G(),q("span",ZZ,ot(mt.value),1))])):mt.type==="ATTACHMENT"?(G(),q("span",QZ,ot(gt(mt)),1)):mt.type==="CHECKBOX"&&Q(mt.value)?(G(),q("span",tQ," X ")):mt.value?(G(),q("span",eQ,ot(mt.value),1)):Ot("",!0),g("span",{class:"resize-handle",onPointerdown:on(jt=>jv(jt,mt,W),["stop"])},null,40,sQ)],46,GZ))),128))])],40,zZ))),128))],64)):(G(),q("div",nQ,[...x[46]||(x[46]=[g("p",null,"Only PDF documents are supported for preview.",-1)])]))],512)]),g("aside",iQ,[g("div",rQ,[x[47]||(x[47]=g("div",{class:"panel-title"},"Signers",-1)),g("div",oQ,[(G(!0),q(Xt,null,ye(u.value,W=>(G(),q("div",{key:W.email,class:"signer-row"},[g("div",null,[g("p",aQ,ot(W.isSender?"You":W.name||W.email),1),g("p",lQ,ot(W.email),1)]),W.isSender?Ot("",!0):(G(),q("button",{key:0,class:"icon-btn",type:"button",onClick:mt=>Ga(W.email)}," x ",8,cQ))]))),128))]),y.value==="send"?(G(),q("div",uQ,[te(g("input",{"onUpdate:modelValue":x[11]||(x[11]=W=>d.value=W),class:"input",type:"text",placeholder:"Recipient full name",onInput:x[12]||(x[12]=W=>O.value="")},null,544),[[Ze,d.value]]),te(g("input",{"onUpdate:modelValue":x[13]||(x[13]=W=>f.value=W),class:"input",type:"email",placeholder:"Recipient Gmail",onInput:x[14]||(x[14]=W=>O.value="")},null,544),[[Ze,f.value]]),g("button",{class:"btn btn-outline",type:"button",onClick:Mv},"Add signer"),O.value?(G(),q("p",hQ,ot(O.value),1)):Ot("",!0)])):Ot("",!0)]),g("div",dQ,[x[48]||(x[48]=g("div",{class:"panel-title"},"Field palette",-1)),g("div",fQ,[(G(),q(Xt,null,ye(Wn,W=>g("button",{key:W.type,class:"palette-item",disabled:!Ae.value,type:"button",draggable:Ae.value,onDragstart:mt=>xo(W.type),onClick:mt=>Uv(W.type)},[(G(),q("svg",gQ,[(G(!0),q(Xt,null,ye(qt(W.type),(mt,jt)=>(G(),q("path",{key:jt,d:mt},null,8,mQ))),128))])),g("span",vQ,ot(W.label),1)],40,pQ)),64))]),Ae.value?(G(),q("p",bQ,"Drag a field onto the PDF or click to place.")):(G(),q("p",yQ,"Field placement is available for PDF previews only."))]),ln.value?(G(),q("div",_Q,[x[54]||(x[54]=g("div",{class:"panel-title"},"Field settings",-1)),g("label",wQ,[x[49]||(x[49]=Kt(" Label ",-1)),te(g("input",{"onUpdate:modelValue":x[15]||(x[15]=W=>j.label=W),class:"input",type:"text",onChange:cc},null,544),[[Ze,j.label]])]),g("label",AQ,[x[50]||(x[50]=Kt(" Placeholder ",-1)),te(g("input",{"onUpdate:modelValue":x[16]||(x[16]=W=>j.placeholder=W),class:"input",type:"text",onChange:cc},null,544),[[Ze,j.placeholder]])]),g("label",SQ,[x[52]||(x[52]=Kt(" Assigned signer ",-1)),te(g("select",{"onUpdate:modelValue":x[17]||(x[17]=W=>j.signerEmail=W),onChange:cc},[x[51]||(x[51]=g("option",{value:""},"Unassigned",-1)),(G(!0),q(Xt,null,ye(u.value,W=>(G(),q("option",{key:W.email,value:W.email},ot(W.isSender?"You":W.name||W.email),9,EQ))),128))],544),[[Ar,j.signerEmail]])]),g("label",xQ,[te(g("input",{"onUpdate:modelValue":x[18]||(x[18]=W=>j.required=W),type:"checkbox",onChange:cc},null,544),[[fr,j.required]]),x[53]||(x[53]=Kt(" Required ",-1))]),g("button",{class:"btn btn-outline danger",type:"button",onClick:p0}," Delete field ")])):Ot("",!0)])],2)])),z.value?(G(),q("div",TQ,[g("div",{class:"signature-backdrop",onClick:bh}),g("div",CQ,[g("header",kQ,[g("div",null,[x[55]||(x[55]=g("p",{class:"eyebrow"},"Signature",-1)),x[56]||(x[56]=g("h3",null,"Signature options",-1)),If.value?(G(),q("p",IQ,ot(If.value),1)):Ot("",!0)]),g("button",{class:"icon-btn",type:"button",onClick:bh},"x")]),g("div",PQ,[g("button",{class:ie(["tab-btn",rt.value==="draw"&&"active"]),type:"button",onClick:x[19]||(x[19]=W=>rt.value="draw")}," Draw ",2),g("button",{class:ie(["tab-btn",rt.value==="type"&&"active"]),type:"button",onClick:x[20]||(x[20]=W=>rt.value="type")}," Type ",2),g("button",{class:ie(["tab-btn",rt.value==="upload"&&"active"]),type:"button",onClick:x[21]||(x[21]=W=>rt.value="upload")}," Upload ",2)]),g("div",RQ,[rt.value==="draw"?(G(),q("div",MQ,[g("canvas",{ref_key:"signatureCanvas",ref:yt,class:"signature-canvas",onPointerdown:m0,onPointermove:v0,onPointerup:Ki,onPointerleave:Ki},null,544),pt.value?Ot("",!0):(G(),q("span",DQ,"Draw your signature here"))])):rt.value==="type"?(G(),q("div",OQ,[te(g("input",{"onUpdate:modelValue":x[22]||(x[22]=W=>ut.value=W),class:"input type-input",type:"text",placeholder:"Type your signature"},null,512),[[Ze,ut.value,void 0,{trim:!0}]]),g("div",{class:ie(["type-preview",!ut.value&&"empty"]),style:gr({fontFamily:ft.value})},ot(hh.value),7)])):(G(),q("div",LQ,[g("label",NQ,[g("input",{type:"file",accept:"image/*",onChange:dc},null,32),x[57]||(x[57]=Kt(" Upload signature image ",-1))]),Et.value?(G(),q("div",FQ,[g("img",{src:Et.value,alt:"Uploaded signature"},null,8,BQ)])):Ot("",!0)]))]),rt.value==="type"?(G(),q("div",$Q,[(G(),q(Xt,null,ye(H,W=>g("button",{key:W.id,class:ie(["signature-style",ft.value===W.font&&"active"]),type:"button",onClick:mt=>ft.value=W.font},[g("span",{class:"style-preview",style:gr({fontFamily:W.font})},ot(hh.value),5),g("span",VQ,ot(W.label),1)],10,UQ)),64))])):Ot("",!0),It.value?(G(),q("p",HQ,ot(It.value),1)):Ot("",!0),g("div",jQ,[g("button",{class:"link-btn",type:"button",onClick:b0},"Clear"),x[58]||(x[58]=g("span",{class:"action-spacer"},null,-1)),g("button",{class:"btn btn-outline",type:"button",disabled:!So.value,onClick:xv}," Download ",8,zQ),g("button",{class:"btn btn-primary",type:"button",disabled:!ja.value,onClick:hc}," Save signature ",8,WQ)])])])):Ot("",!0),Ht.value?(G(),q("div",GQ,[g("div",{class:"field-backdrop",onClick:Ah}),g("div",qQ,[g("header",XQ,[g("div",null,[x[59]||(x[59]=g("p",{class:"eyebrow"},"Field",-1)),g("h3",null,ot(Av.value),1),ln.value?(G(),q("p",YQ,ot(ln.value.label||ln.value.type.replace("_"," ")),1)):Ot("",!0)]),g("button",{class:"icon-btn",type:"button",onClick:Ah},"x")]),g("div",KQ,[Ls.value==="FULL_NAME"||Ls.value==="COMPANY"||Ls.value==="JOB_TITLE"?(G(),q("label",JQ,[x[60]||(x[60]=Kt(" Value ",-1)),te(g("input",{"onUpdate:modelValue":x[23]||(x[23]=W=>Lt.value=W),class:"input",type:"text",placeholder:"Enter value"},null,512),[[Ze,Lt.value,void 0,{trim:!0}]])])):Ls.value==="EMAIL"?(G(),q("label",ZQ,[x[61]||(x[61]=Kt(" Email ",-1)),te(g("input",{"onUpdate:modelValue":x[24]||(x[24]=W=>Lt.value=W),class:"input",type:"email",placeholder:"name@example.com"},null,512),[[Ze,Lt.value,void 0,{trim:!0}]])])):Ls.value==="DATE"?(G(),q("label",QQ,[x[62]||(x[62]=Kt(" Date ",-1)),te(g("input",{"onUpdate:modelValue":x[25]||(x[25]=W=>ee.value=W),class:"input",type:"date"},null,512),[[Ze,ee.value]])])):Ls.value==="TEXT"?(G(),q("label",ttt,[x[63]||(x[63]=Kt(" Text ",-1)),te(g("textarea",{"onUpdate:modelValue":x[26]||(x[26]=W=>Lt.value=W),class:"input field-textarea",rows:"4"},null,512),[[Ze,Lt.value]])])):Ls.value==="CHECKBOX"?(G(),q("label",ett,[te(g("input",{"onUpdate:modelValue":x[27]||(x[27]=W=>$e.value=W),type:"checkbox"},null,512),[[fr,$e.value]]),x[64]||(x[64]=Kt(" Checked ",-1))])):Ls.value==="DROPDOWN"||Ls.value==="RADIO"?(G(),q(Xt,{key:5},[g("div",stt,[te(g("input",{"onUpdate:modelValue":x[28]||(x[28]=W=>cs.value=W),class:"input",type:"text",placeholder:"Add option",onKeyup:eN(Tv,["enter"])},null,544),[[Ze,cs.value,void 0,{trim:!0}]]),g("button",{class:"btn btn-outline",type:"button",onClick:Tv},"Add")]),he.value.length?(G(),q("div",ntt,[(G(!0),q(Xt,null,ye(he.value,W=>(G(),q("div",{key:W,class:"choice-item",onClick:mt=>Lt.value=W},[g("span",null,ot(W),1),g("button",{class:"icon-btn",type:"button",onClick:on(mt=>Cv(W),["stop"])},"x",8,rtt)],8,itt))),128))])):Ot("",!0),g("label",ott,[x[66]||(x[66]=Kt(" Selected value ",-1)),te(g("select",{"onUpdate:modelValue":x[29]||(x[29]=W=>Lt.value=W)},[x[65]||(x[65]=g("option",{value:""},"Select value",-1)),(G(!0),q(Xt,null,ye(he.value,W=>(G(),q("option",{key:W,value:W},ot(W),9,att))),128))],512),[[Ar,Lt.value]])])],64)):Ls.value==="IMAGE"?(G(),q(Xt,{key:6},[g("label",ltt,[g("input",{type:"file",accept:"image/*",onChange:kv},null,32),x[67]||(x[67]=Kt(" Upload stamp ",-1))]),ke.value?(G(),q("div",ctt,[g("img",{src:ke.value,alt:"Stamp preview"},null,8,utt)])):Ot("",!0)],64)):Ls.value==="ATTACHMENT"?(G(),q(Xt,{key:7},[g("label",htt,[g("input",{type:"file",onChange:Iv},null,32),x[68]||(x[68]=Kt(" Upload attachment ",-1))]),Re.value?(G(),q("div",dtt,[g("p",ftt,ot(Re.value.name),1),g("p",ptt,ot(Re.value.type||"Attachment"),1)])):Ot("",!0)],64)):Ot("",!0)]),Is.value?(G(),q("p",gtt,ot(Is.value),1)):Ot("",!0),g("div",mtt,[g("button",{class:"btn btn-outline",type:"button",onClick:Ah},"Cancel"),x[69]||(x[69]=g("span",{class:"action-spacer"},null,-1)),g("button",{class:"btn btn-outline",type:"button",disabled:!f0.value,onClick:Rv}," Download ",8,vtt),g("button",{class:"btn btn-primary",type:"button",disabled:!d0.value,onClick:Ji}," Save field ",8,btt)])])])):Ot("",!0)])}}}),_tt=js(ytt,[["__scopeId","data-v-6f50f170"]]),wtt={class:"settings-page"},Att={class:"settings-card"},Stt={class:"form-grid"},Ett={class:"field"},xtt={class:"field"},Ttt={class:"field"},Ctt={class:"settings-card"},ktt={class:"toggle-list"},Itt={class:"toggle-row"},Ptt={class:"switch"},Rtt={class:"toggle-row"},Mtt={class:"switch"},Dtt={class:"toggle-row"},Ott={class:"switch"},Ltt={class:"toggle-row"},Ntt={class:"switch"},Ftt={class:"toggle-row"},Btt={class:"switch"},$tt={class:"settings-card"},Utt={class:"security-list"},Vtt={class:"page-actions"},Htt=["disabled"],jtt=["disabled"],ztt={class:"modal-card"},Wtt={class:"modal-header"},Gtt={class:"modal-body"},qtt={key:0,class:"modal-block"},Xtt=["disabled"],Ytt={key:1,class:"modal-block"},Ktt={class:"switch large"},Jtt={class:"helper"},Ztt={key:2,class:"modal-block"},Qtt={class:"session-device"},tet={class:"session-meta"},eet=ks({__name:"SettingsPage",setup(s){const{user:t,displayName:e,email:n,profile:i,jobTitle:r,updateProfileDetails:o}=hv(),a=Ia({name:"",email:"",jobTitle:""}),l=Ia({email:!0,inApp:!0,signed:!0,viewed:!0,expiry:!0}),c=ct(!1),u=ct(null),d=ct(!1),f=ct(""),m=ct(!1),v=ct(!1),b=ct(!1),y=ct([{device:"Chrome on Windows",location:"Los Angeles, CA",lastActive:"Active now",current:!0},{device:"Safari on iPhone",location:"New York, NY",lastActive:"2 hours ago",current:!1}]),w=St(()=>{switch(u.value){case"password":return"Change Password";case"twoFactor":return"Two-Factor Authentication";case"sessions":return"Active Sessions";default:return""}}),k=()=>{var L,P,$,N;a.name=((P=(L=i.value)==null?void 0:L.name)==null?void 0:P.trim())||e.value,a.email=n.value||"",a.jobTitle=((N=($=i.value)==null?void 0:$.jobTitle)==null?void 0:N.trim())||r.value||""},M=async()=>{var P,$,N,_t;try{const tt=(await Xj()).preferences;l.email=tt.emailEnabled,l.inApp=tt.inAppEnabled,l.signed=((P=tt.eventOverrides)==null?void 0:P["document.signed"])??!0,l.viewed=(($=tt.eventOverrides)==null?void 0:$["document.viewed"])??!0,l.expiry=((N=tt.eventOverrides)==null?void 0:N["document.expired"])??((_t=tt.eventOverrides)==null?void 0:_t["reminder.expiring_soon"])??!0}catch{}const L=localStorage.getItem("settings_security");if(L)try{const xt=JSON.parse(L);c.value=!!xt.twoFactorEnabled}catch{}};bs([e,n,i],()=>{v.value||k()},{immediate:!0});const O=()=>{v.value=!1,k(),M(),f.value=""},B=async()=>{if(f.value="",m.value=!1,!t.value){f.value="You must be signed in to save changes.",m.value=!0;return}d.value=!0;try{await o({name:a.name,jobTitle:a.jobTitle}),await Yj({emailEnabled:l.email,inAppEnabled:l.inApp,realtimeEnabled:l.inApp,eventOverrides:{"document.signed":l.signed,"document.viewed":l.viewed,"document.expired":l.expiry,"reminder.expiring_soon":l.expiry}}),localStorage.setItem("settings_security",JSON.stringify({twoFactorEnabled:c.value})),f.value="Changes saved successfully."}catch(L){f.value=L instanceof Error?L.message:"Unable to save settings.",m.value=!0}finally{d.value=!1,v.value=!1}},V=L=>{u.value=L},A=()=>{u.value=null},S=async()=>{if(a.email){b.value=!0;try{if(ov()){const{auth:L}=av();await R5(L,a.email),f.value="Password reset email sent.",m.value=!1}else f.value="Password reset is handled by your administrator.",m.value=!1}catch(L){f.value=L instanceof Error?L.message:"Unable to send reset email.",m.value=!0}finally{b.value=!1}}},I=()=>{f.value="Other sessions signed out.",m.value=!1,A()};return M(),(L,P)=>(G(),q("div",wtt,[P[38]||(P[38]=g("section",{class:"page-header"},[g("h2",null,"Settings"),g("p",null,"Manage your account and preferences")],-1)),g("section",Att,[P[18]||(P[18]=ji('<div class="card-header" data-v-06185f37><span class="card-icon accent" data-v-06185f37><svg viewBox="0 0 24 24" aria-hidden="true" data-v-06185f37><circle cx="12" cy="8" r="4" data-v-06185f37></circle><path d="M4 20a8 8 0 0 1 16 0" data-v-06185f37></path></svg></span><div data-v-06185f37><h3 data-v-06185f37>Profile Settings</h3><p data-v-06185f37>Update your personal information</p></div></div>',1)),g("div",Stt,[g("label",Ett,[P[14]||(P[14]=g("span",{class:"label"},"Full Name",-1)),te(g("input",{"onUpdate:modelValue":P[0]||(P[0]=$=>a.name=$),class:"input",type:"text",placeholder:"Your name",onInput:P[1]||(P[1]=$=>v.value=!0)},null,544),[[Ze,a.name]])]),g("label",xtt,[P[15]||(P[15]=g("span",{class:"label"},"Email",-1)),te(g("input",{"onUpdate:modelValue":P[2]||(P[2]=$=>a.email=$),class:"input",type:"email",readonly:""},null,512),[[Ze,a.email]]),P[16]||(P[16]=g("span",{class:"helper"},"Email is managed by your sign-in provider.",-1))]),g("label",Ttt,[P[17]||(P[17]=g("span",{class:"label"},"Job Title",-1)),te(g("input",{"onUpdate:modelValue":P[3]||(P[3]=$=>a.jobTitle=$),class:"input",type:"text",placeholder:"Product Manager",onInput:P[4]||(P[4]=$=>v.value=!0)},null,544),[[Ze,a.jobTitle]])])])]),g("section",Ctt,[P[29]||(P[29]=ji('<div class="card-header" data-v-06185f37><span class="card-icon success" data-v-06185f37><svg viewBox="0 0 24 24" aria-hidden="true" data-v-06185f37><path d="M18 8a6 6 0 0 0-12 0c0 7-3 7-3 7h18s-3 0-3-7" data-v-06185f37></path><path d="M13.7 21a2 2 0 0 1-3.4 0" data-v-06185f37></path></svg></span><div data-v-06185f37><h3 data-v-06185f37>Notifications</h3><p data-v-06185f37>Manage how you receive updates</p></div></div>',1)),g("div",ktt,[g("div",Itt,[P[20]||(P[20]=g("div",null,[g("p",{class:"toggle-title"},"Email notifications"),g("p",{class:"toggle-desc"},"Receive updates via email")],-1)),g("label",Ptt,[te(g("input",{"onUpdate:modelValue":P[5]||(P[5]=$=>l.email=$),type:"checkbox"},null,512),[[fr,l.email]]),P[19]||(P[19]=g("span",{class:"slider"},null,-1))])]),g("div",Rtt,[P[22]||(P[22]=g("div",null,[g("p",{class:"toggle-title"},"In-app notifications"),g("p",{class:"toggle-desc"},"Show realtime updates in the app")],-1)),g("label",Mtt,[te(g("input",{"onUpdate:modelValue":P[6]||(P[6]=$=>l.inApp=$),type:"checkbox"},null,512),[[fr,l.inApp]]),P[21]||(P[21]=g("span",{class:"slider"},null,-1))])]),g("div",Dtt,[P[24]||(P[24]=g("div",null,[g("p",{class:"toggle-title"},"Document signed"),g("p",{class:"toggle-desc"},"When a document is signed")],-1)),g("label",Ott,[te(g("input",{"onUpdate:modelValue":P[7]||(P[7]=$=>l.signed=$),type:"checkbox"},null,512),[[fr,l.signed]]),P[23]||(P[23]=g("span",{class:"slider"},null,-1))])]),g("div",Ltt,[P[26]||(P[26]=g("div",null,[g("p",{class:"toggle-title"},"Document viewed"),g("p",{class:"toggle-desc"},"When someone views your document")],-1)),g("label",Ntt,[te(g("input",{"onUpdate:modelValue":P[8]||(P[8]=$=>l.viewed=$),type:"checkbox"},null,512),[[fr,l.viewed]]),P[25]||(P[25]=g("span",{class:"slider"},null,-1))])]),g("div",Ftt,[P[28]||(P[28]=g("div",null,[g("p",{class:"toggle-title"},"Expiry reminders"),g("p",{class:"toggle-desc"},"Reminders before documents expire")],-1)),g("label",Btt,[te(g("input",{"onUpdate:modelValue":P[9]||(P[9]=$=>l.expiry=$),type:"checkbox"},null,512),[[fr,l.expiry]]),P[27]||(P[27]=g("span",{class:"slider"},null,-1))])])])]),g("section",$tt,[P[33]||(P[33]=ji('<div class="card-header" data-v-06185f37><span class="card-icon warning" data-v-06185f37><svg viewBox="0 0 24 24" aria-hidden="true" data-v-06185f37><rect x="3" y="11" width="18" height="10" rx="2" data-v-06185f37></rect><path d="M7 11V7a5 5 0 0 1 10 0v4" data-v-06185f37></path></svg></span><div data-v-06185f37><h3 data-v-06185f37>Security</h3><p data-v-06185f37>Manage your security preferences</p></div></div>',1)),g("div",Utt,[g("button",{class:"security-item",type:"button",onClick:P[10]||(P[10]=$=>V("password"))},[...P[30]||(P[30]=[g("span",null,[g("strong",null,"Change Password"),g("small",null,"Update your account password")],-1),g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m9 6 6 6-6 6"})],-1)])]),g("button",{class:"security-item",type:"button",onClick:P[11]||(P[11]=$=>V("twoFactor"))},[...P[31]||(P[31]=[g("span",null,[g("strong",null,"Two-Factor Authentication"),g("small",null,"Add extra security to your account")],-1),g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m9 6 6 6-6 6"})],-1)])]),g("button",{class:"security-item",type:"button",onClick:P[12]||(P[12]=$=>V("sessions"))},[...P[32]||(P[32]=[g("span",null,[g("strong",null,"Active Sessions"),g("small",null,"Review active devices and sessions")],-1),g("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{d:"m9 6 6 6-6 6"})],-1)])])])]),g("div",Vtt,[g("button",{class:"btn btn-outline",type:"button",onClick:O,disabled:d.value}," Cancel ",8,Htt),g("button",{class:"btn btn-primary",type:"button",onClick:B,disabled:d.value}," Save Changes ",8,jtt)]),f.value?(G(),q("p",{key:0,class:ie(["status-message",{error:m.value}])},ot(f.value),3)):Ot("",!0),(G(),qi(R_,{to:"body"},[u.value?(G(),q("div",{key:0,class:"modal-backdrop",onClick:on(A,["self"])},[g("div",ztt,[g("div",Wtt,[g("h3",null,ot(w.value),1),g("button",{class:"close-btn",type:"button",onClick:A},"x")]),g("div",Gtt,[u.value==="password"?(G(),q("div",qtt,[g("p",null,[P[34]||(P[34]=Kt(" We will send a password reset link to ",-1)),g("strong",null,ot(a.email),1),P[35]||(P[35]=Kt(". ",-1))]),g("button",{class:"btn btn-primary",type:"button",disabled:!a.email||b.value,onClick:S}," Send reset email ",8,Xtt)])):u.value==="twoFactor"?(G(),q("div",Ytt,[P[37]||(P[37]=g("p",null,"Add an extra layer of protection to your account.",-1)),g("label",Ktt,[te(g("input",{"onUpdate:modelValue":P[13]||(P[13]=$=>c.value=$),type:"checkbox"},null,512),[[fr,c.value]]),P[36]||(P[36]=g("span",{class:"slider"},null,-1))]),g("p",Jtt,ot(c.value?"2FA enabled":"2FA disabled"),1)])):(G(),q("div",Ztt,[(G(!0),q(Xt,null,ye(y.value,$=>(G(),q("div",{class:"session-row",key:$.device},[g("div",null,[g("p",Qtt,ot($.device),1),g("p",tet,ot($.location)+" - "+ot($.lastActive),1)]),g("span",{class:ie(["session-tag",{current:$.current}])},ot($.current?"Current":"Active"),3)]))),128)),g("button",{class:"btn btn-outline",type:"button",onClick:I}," Sign out other sessions ")]))])])])):Ot("",!0)]))]))}}),set=js(eet,[["__scopeId","data-v-06185f37"]]),net=[{path:"/",redirect:"/login"},{path:"/sign/:token",name:"sign-document",component:A8},{path:"/login",name:"login",component:G$},{path:"/register",name:"register",component:wU},{path:"/forgot-password",name:"forgot-password",component:TU},{path:"/app",component:lz,children:[{path:"dashboard",name:"dashboard",component:XX,meta:{title:"Dashboard"}},{path:"sign",name:"sign-builder",component:_tt,meta:{title:"Sign"}},{path:"documents",name:"documents",component:HY,meta:{title:"Documents"}},{path:"analytics",name:"analytics",component:fK,meta:{title:"Analytics"}},{path:"sent",name:"sent",component:EK,meta:{title:"Sent"}},{path:"received",name:"received",component:JK,meta:{title:"Received"}},{path:"audit-trail",name:"audit-trail",component:bJ,meta:{title:"Audit Trail"}},{path:"notifications",name:"notifications",component:FJ,meta:{title:"Notifications"}},{path:"settings",name:"settings",component:set,meta:{title:"Settings"}}]},{path:"/:pathMatch(.*)*",name:"not-found",component:PU}],iet=uF({history:zN(),routes:net,scrollBehavior:()=>({top:0})});G8();const LD=iN(hF);LD.config.devtools=!0;LD.use(iet).mount("#app");
